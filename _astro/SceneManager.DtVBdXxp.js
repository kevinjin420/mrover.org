import{j as Ee,W as Sd,R as Ed,O as ni,P as Zi,S as Qi,b as Ru,V as yv,c as Sv,B as Ev,d as bv,e as ii,f as _t,N as bd,g as Td,h as Nf,C as Wi,i as si,k as Ha,l as ft,m as Ke,n as Tv,T as _v,o as ar,M as ki,I as Mv,p as xa,q as kl,r as Iu,Q as Df,s as Kl,t as Il,u as xv,v as Rv,w as _d,H as da,F as Ja,x as $l,y as Jt,z as Av,E as Vn,J as Md,K as Ra,X as Ks,Y as zv,Z as qn,_ as Cv,$ as Uv,a0 as Nv,a1 as Dv,a2 as xd,a3 as Ov,L as Bv,a4 as Of,a5 as Fs,a6 as Yn,a7 as Hv,a8 as wv,a9 as Gv,aa as jv,ab as Lv,ac as Vv,ad as qv,ae as Zv,af as Yv,ag as Is,ah as ci,ai as nc,aj as Rd,ak as Le,al as Gs,am as Fv,an as Ad,ao as Xv,ap as Qv,aq as Bf,ar as Hf,as as Au,G as Kv,at as Iv,U as Pv,au as Jv}from"./lil-gui.esm.CTOId0_-.js";import{e as ei,a as lc,g as zd,r as L}from"./index.Cf1rOnxY.js";import{L as Wv}from"./lenis.CsLEXDaq.js";import{g as js}from"./index.CB87Sc6I.js";import{S as Gi}from"./ScrollTrigger.Cv03IO65.js";const wf=a=>{let l;const s=new Set,r=(S,_)=>{const y=typeof S=="function"?S(l):S;if(!Object.is(y,l)){const b=l;l=_??(typeof y!="object"||y===null)?y:Object.assign({},l,y),s.forEach(A=>A(l,b))}},o=()=>l,g={setState:r,getState:o,getInitialState:()=>h,subscribe:S=>(s.add(S),()=>s.delete(S))},h=l=a(r,o,g);return g},Cd=(a=>a?wf(a):wf),kv=a=>a;function $v(a,l=kv){const s=ei.useSyncExternalStore(a.subscribe,ei.useCallback(()=>l(a.getState()),[a,l]),ei.useCallback(()=>l(a.getInitialState()),[a,l]));return ei.useDebugValue(s),s}const Gf=a=>{const l=Cd(a),s=r=>$v(l,r);return Object.assign(s,l),s},em=(a=>a?Gf(a):Gf),Ki=em(a=>({lenis:null,setLenis:l=>a({lenis:l}),headerHeight:0,setHeaderHeight:l=>a({headerHeight:l})}));var zu={exports:{}},pn={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf;function tm(){return jf||(jf=1,pn.ConcurrentRoot=1,pn.ContinuousEventPriority=8,pn.DefaultEventPriority=32,pn.DiscreteEventPriority=2,pn.IdleEventPriority=268435456,pn.LegacyRoot=0,pn.NoEventPriority=0),pn}var Lf;function am(){return Lf||(Lf=1,zu.exports=tm()),zu.exports}var Xs=am(),Cu={exports:{}},Uu={},Nu={exports:{}},Du={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf;function nm(){if(Vf)return Du;Vf=1;var a=lc();function l(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var s=typeof Object.is=="function"?Object.is:l,r=a.useState,o=a.useEffect,d=a.useLayoutEffect,m=a.useDebugValue;function g(y,b){var A=b(),H=r({inst:{value:A,getSnapshot:b}}),Q=H[0].inst,V=H[1];return d(function(){Q.value=A,Q.getSnapshot=b,h(Q)&&V({inst:Q})},[y,A,b]),o(function(){return h(Q)&&V({inst:Q}),y(function(){h(Q)&&V({inst:Q})})},[y]),m(A),A}function h(y){var b=y.getSnapshot;y=y.value;try{var A=b();return!s(y,A)}catch{return!0}}function S(y,b){return b()}var _=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:g;return Du.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:_,Du}var qf;function lm(){return qf||(qf=1,Nu.exports=nm()),Nu.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf;function im(){if(Zf)return Uu;Zf=1;var a=lc(),l=lm();function s(S,_){return S===_&&(S!==0||1/S===1/_)||S!==S&&_!==_}var r=typeof Object.is=="function"?Object.is:s,o=l.useSyncExternalStore,d=a.useRef,m=a.useEffect,g=a.useMemo,h=a.useDebugValue;return Uu.useSyncExternalStoreWithSelector=function(S,_,y,b,A){var H=d(null);if(H.current===null){var Q={hasValue:!1,value:null};H.current=Q}else Q=H.current;H=g(function(){function C(G){if(!x){if(x=!0,Y=G,G=b(G),A!==void 0&&Q.hasValue){var re=Q.value;if(A(re,G))return I=re}return I=G}if(re=I,r(Y,G))return re;var O=b(G);return A!==void 0&&A(re,O)?(Y=G,re):(Y=G,I=O)}var x=!1,Y,I,F=y===void 0?null:y;return[function(){return C(_())},F===null?void 0:function(){return C(F())}]},[_,y,b,A]);var V=o(S,H[0],H[1]);return m(function(){Q.hasValue=!0,Q.value=V},[V]),h(V),V},Uu}var Yf;function sm(){return Yf||(Yf=1,Cu.exports=im()),Cu.exports}var rm=sm();const um=zd(rm),{useSyncExternalStoreWithSelector:cm}=um,om=a=>a;function fm(a,l=om,s){const r=cm(a.subscribe,a.getState,a.getInitialState,l,s);return ei.useDebugValue(r),r}const Ff=(a,l)=>{const s=Cd(a),r=(o,d=l)=>fm(s,o,d);return Object.assign(r,s),r},Ud=((a,l)=>a?Ff(a,l):Ff),dm=a=>typeof a=="object"&&typeof a.then=="function",vl=[];function Nd(a,l,s=(r,o)=>r===o){if(a===l)return!0;if(!a||!l)return!1;const r=a.length;if(l.length!==r)return!1;for(let o=0;o<r;o++)if(!s(a[o],l[o]))return!1;return!0}function Dd(a,l=null,s=!1,r={}){l===null&&(l=[a]);for(const d of vl)if(Nd(l,d.keys,d.equal)){if(s)return;if(Object.prototype.hasOwnProperty.call(d,"error"))throw d.error;if(Object.prototype.hasOwnProperty.call(d,"response"))return r.lifespan&&r.lifespan>0&&(d.timeout&&clearTimeout(d.timeout),d.timeout=setTimeout(d.remove,r.lifespan)),d.response;if(!s)throw d.promise}const o={keys:l,equal:r.equal,remove:()=>{const d=vl.indexOf(o);d!==-1&&vl.splice(d,1)},promise:(dm(a)?a:a(...l)).then(d=>{o.response=d,r.lifespan&&r.lifespan>0&&(o.timeout=setTimeout(o.remove,r.lifespan))}).catch(d=>o.error=d)};if(vl.push(o),!s)throw o.promise}const hm=(a,l,s)=>Dd(a,l,!1,s),pm=(a,l,s)=>void Dd(a,l,!0,s),vm=a=>{if(a===void 0||a.length===0)vl.splice(0,vl.length);else{const l=vl.find(s=>Nd(a,s.keys,s.equal));l&&l.remove()}};var Ou={exports:{}},Bu={exports:{}},Hu={exports:{}},wu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf;function mm(){return Xf||(Xf=1,(function(a){function l(X,oe){var he=X.length;X.push(oe);e:for(;0<he;){var me=he-1>>>1,pe=X[me];if(0<o(pe,oe))X[me]=oe,X[he]=pe,he=me;else break e}}function s(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var oe=X[0],he=X.pop();if(he!==oe){X[0]=he;e:for(var me=0,pe=X.length,_e=pe>>>1;me<_e;){var ge=2*(me+1)-1,Ne=X[ge],ze=ge+1,ut=X[ze];if(0>o(Ne,he))ze<pe&&0>o(ut,Ne)?(X[me]=ut,X[ze]=he,me=ze):(X[me]=Ne,X[ge]=he,me=ge);else if(ze<pe&&0>o(ut,he))X[me]=ut,X[ze]=he,me=ze;else break e}}return oe}function o(X,oe){var he=X.sortIndex-oe.sortIndex;return he!==0?he:X.id-oe.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var m=Date,g=m.now();a.unstable_now=function(){return m.now()-g}}var h=[],S=[],_=1,y=null,b=3,A=!1,H=!1,Q=!1,V=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function Y(X){for(var oe=s(S);oe!==null;){if(oe.callback===null)r(S);else if(oe.startTime<=X)r(S),oe.sortIndex=oe.expirationTime,l(h,oe);else break;oe=s(S)}}function I(X){if(Q=!1,Y(X),!H)if(s(h)!==null)H=!0,le();else{var oe=s(S);oe!==null&&Se(I,oe.startTime-X)}}var F=!1,G=-1,re=5,O=-1;function j(){return!(a.unstable_now()-O<re)}function q(){if(F){var X=a.unstable_now();O=X;var oe=!0;try{e:{H=!1,Q&&(Q=!1,C(G),G=-1),A=!0;var he=b;try{t:{for(Y(X),y=s(h);y!==null&&!(y.expirationTime>X&&j());){var me=y.callback;if(typeof me=="function"){y.callback=null,b=y.priorityLevel;var pe=me(y.expirationTime<=X);if(X=a.unstable_now(),typeof pe=="function"){y.callback=pe,Y(X),oe=!0;break t}y===s(h)&&r(h),Y(X)}else r(h);y=s(h)}if(y!==null)oe=!0;else{var _e=s(S);_e!==null&&Se(I,_e.startTime-X),oe=!1}}break e}finally{y=null,b=he,A=!1}oe=void 0}}finally{oe?se():F=!1}}}var se;if(typeof x=="function")se=function(){x(q)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ee=ve.port2;ve.port1.onmessage=q,se=function(){ee.postMessage(null)}}else se=function(){V(q,0)};function le(){F||(F=!0,se())}function Se(X,oe){G=V(function(){X(a.unstable_now())},oe)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(X){X.callback=null},a.unstable_continueExecution=function(){H||A||(H=!0,le())},a.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<X?Math.floor(1e3/X):5},a.unstable_getCurrentPriorityLevel=function(){return b},a.unstable_getFirstCallbackNode=function(){return s(h)},a.unstable_next=function(X){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var he=b;b=oe;try{return X()}finally{b=he}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var he=b;b=X;try{return oe()}finally{b=he}},a.unstable_scheduleCallback=function(X,oe,he){var me=a.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?me+he:me):he=me,X){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=he+pe,X={id:_++,callback:oe,priorityLevel:X,startTime:he,expirationTime:pe,sortIndex:-1},he>me?(X.sortIndex=he,l(S,X),s(h)===null&&X===s(S)&&(Q?(C(G),G=-1):Q=!0,Se(I,he-me))):(X.sortIndex=pe,l(h,X),H||A||(H=!0,le())),X},a.unstable_shouldYield=j,a.unstable_wrapCallback=function(X){var oe=b;return function(){var he=b;b=oe;try{return X.apply(this,arguments)}finally{b=he}}}})(wu)),wu}var Qf;function Od(){return Qf||(Qf=1,Hu.exports=mm()),Hu.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function gm(){return Kf||(Kf=1,(function(a){a.exports=function(l){function s(e,t,n,i){return new Hh(e,t,n,i)}function r(){}function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return e===null||typeof e!="object"?null:(e=Jo&&e[Jo]||e["@@iterator"],typeof e=="function"?e:null)}function m(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===qh?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zl:return"Fragment";case Al:return"Portal";case Kr:return"Profiler";case Ko:return"StrictMode";case Pr:return"Suspense";case Jr:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zn:return(e.displayName||"Context")+".Provider";case Io:return(e._context.displayName||"Context")+".Consumer";case Ir:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wr:return t=e.displayName||null,t!==null?t:m(e.type)||"Memo";case Cn:t=e._payload,e=e._init;try{return m(e(t))}catch{}}return null}function g(e){if(kr===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);kr=t&&t[1]||"",Wo=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kr+e+Wo}function h(e,t){if(!e||$r)return"";$r=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(Ue){var ce=Ue}Reflect.construct(e,[],ue)}else{try{ue.call()}catch(Ue){ce=Ue}e.call(ue.prototype)}}else{try{throw Error()}catch(Ue){ce=Ue}(ue=e())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(Ue){if(Ue&&ce&&typeof Ue.stack=="string")return[Ue.stack,ce.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=i.DetermineComponentFrameRoot(),p=c[0],E=c[1];if(p&&E){var z=p.split(`
`),Z=E.split(`
`);for(u=i=0;i<z.length&&!z[i].includes("DetermineComponentFrameRoot");)i++;for(;u<Z.length&&!Z[u].includes("DetermineComponentFrameRoot");)u++;if(i===z.length||u===Z.length)for(i=z.length-1,u=Z.length-1;1<=i&&0<=u&&z[i]!==Z[u];)u--;for(;1<=i&&0<=u;i--,u--)if(z[i]!==Z[u]){if(i!==1||u!==1)do if(i--,u--,0>u||z[i]!==Z[u]){var ae=`
`+z[i].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=i&&0<=u);break}}}finally{$r=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?g(n):""}function S(e){switch(e.tag){case 26:case 27:case 5:return g(e.type);case 16:return g("Lazy");case 13:return g("Suspense");case 19:return g("SuspenseList");case 0:case 15:return e=h(e.type,!1),e;case 11:return e=h(e.type.render,!1),e;case 1:return e=h(e.type,!0),e;default:return""}}function _(e){try{var t="";do t+=S(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function y(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function b(e){if(y(e)!==e)throw Error(o(188))}function A(e){var t=e.alternate;if(!t){if(t=y(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var u=n.return;if(u===null)break;var c=u.alternate;if(c===null){if(i=u.return,i!==null){n=i;continue}break}if(u.child===c.child){for(c=u.child;c;){if(c===n)return b(u),e;if(c===i)return b(u),t;c=c.sibling}throw Error(o(188))}if(n.return!==i.return)n=u,i=c;else{for(var p=!1,E=u.child;E;){if(E===n){p=!0,n=u,i=c;break}if(E===i){p=!0,i=u,n=c;break}E=E.sibling}if(!p){for(E=c.child;E;){if(E===n){p=!0,n=c,i=u;break}if(E===i){p=!0,i=c,n=u;break}E=E.sibling}if(!p)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function H(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=H(e),t!==null)return t;e=e.sibling}return null}function Q(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(e.tag!==4&&(t=Q(e),t!==null))return t;e=e.sibling}return null}function V(e){return{current:e}}function C(e){0>Ul||(e.current=iu[Ul],iu[Ul]=null,Ul--)}function x(e,t){Ul++,iu[Ul]=e.current,e.current=t}function Y(e){return e>>>=0,e===0?32:31-(av(e)/nv|0)|0}function I(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function F(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,u=e.suspendedLanes,c=e.pingedLanes,p=e.warmLanes;e=e.finishedLanes!==0;var E=n&134217727;return E!==0?(n=E&~u,n!==0?i=I(n):(c&=E,c!==0?i=I(c):e||(p=E&~p,p!==0&&(i=I(p))))):(E=n&~u,E!==0?i=I(E):c!==0?i=I(c):e||(p=n&~p,p!==0&&(i=I(p)))),i===0?0:t!==0&&t!==i&&(t&u)===0&&(u=i&-i,p=t&-t,u>=p||u===32&&(p&4194176)!==0)?t:i}function G(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function re(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O(){var e=gs;return gs<<=1,(gs&4194176)===0&&(gs=128),e}function j(){var e=ys;return ys<<=1,(ys&62914560)===0&&(ys=4194304),e}function q(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function se(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ve(e,t,n,i,u,c){var p=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var E=e.entanglements,z=e.expirationTimes,Z=e.hiddenUpdates;for(n=p&~n;0<n;){var ae=31-ra(n),ue=1<<ae;E[ae]=0,z[ae]=-1;var ce=Z[ae];if(ce!==null)for(Z[ae]=null,ae=0;ae<ce.length;ae++){var Ue=ce[ae];Ue!==null&&(Ue.lane&=-536870913)}n&=~ue}i!==0&&ee(e,i,0),c!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=c&~(p&~t))}function ee(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-ra(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194218}function le(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ra(n),u=1<<i;u&t|e[i]&t&&(e[i]|=t),n&=~u}}function Se(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function X(e){if(ua&&typeof ua.onCommitFiberRoot=="function")try{ua.onCommitFiberRoot(xi,e,void 0,(e.current.flags&128)===128)}catch{}}function oe(e){if(typeof uv=="function"&&cv(e),ua&&typeof ua.setStrictMode=="function")try{ua.setStrictMode(xi,e)}catch{}}function he(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}function me(e,t){if(typeof e=="object"&&e!==null){var n=Mf.get(e);return n!==void 0?n:(t={value:e,source:t,stack:_(t)},Mf.set(e,t),t)}return{value:e,source:t,stack:_(t)}}function pe(e,t){Dl[Ol++]=bs,Dl[Ol++]=Es,Es=e,bs=t}function _e(e,t,n){ga[ya++]=un,ga[ya++]=cn,ga[ya++]=ll,ll=e;var i=un;e=cn;var u=32-ra(i)-1;i&=~(1<<u),n+=1;var c=32-ra(t)+u;if(30<c){var p=u-u%5;c=(i&(1<<p)-1).toString(32),i>>=p,u-=p,un=1<<32-ra(t)+u|n<<u|i,cn=c+e}else un=1<<c|n<<u|i,cn=e}function ge(e){e.return!==null&&(pe(e,1),_e(e,1,0))}function Ne(e){for(;e===Es;)Es=Dl[--Ol],Dl[Ol]=null,bs=Dl[--Ol],Dl[Ol]=null;for(;e===ll;)ll=ga[--ya],ga[ya]=null,cn=ga[--ya],ga[ya]=null,un=ga[--ya],ga[ya]=null}function ze(e,t){x(Nn,t),x(Ri,e),x(Ct,null),e=Fh(t),C(Ct),x(Ct,e)}function ut(){C(Ct),C(Ri),C(Nn)}function Oe(e){e.memoizedState!==null&&x(Ts,e);var t=Ct.current,n=Xh(t,e.type);t!==n&&(x(Ri,e),x(Ct,n))}function Nt(e){Ri.current===e&&(C(Ct),C(Ri)),Ts.current===e&&(C(Ts),rn?nl._currentValue=Cl:nl._currentValue2=Cl)}function bt(e){var t=Error(o(418,""));throw Aa(me(t,e)),uu}function Sl(e,t){if(!va)throw Error(o(175));jp(e.stateNode,e.type,e.memoizedProps,t,e)||bt(e)}function El(e){for(Yt=e.return;Yt;)switch(Yt.tag){case 3:case 27:Xa=!0;return;case 5:case 13:Xa=!1;return;default:Yt=Yt.return}}function wa(e){if(!va||e!==Yt)return!1;if(!qe)return El(e),qe=!0,!1;var t=!1;if(Gt?e.tag!==3&&e.tag!==27&&(e.tag!==5||hf(e.type)&&!ms(e.type,e.memoizedProps))&&(t=!0):e.tag!==3&&(e.tag!==5||hf(e.type)&&!ms(e.type,e.memoizedProps))&&(t=!0),t&&jt&&bt(e),El(e),e.tag===13){if(!va)throw Error(o(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));jt=qp(e)}else jt=Yt?ff(e.stateNode):null;return!0}function Ga(){va&&(jt=Yt=null,qe=!1)}function Aa(e){Na===null?Na=[e]:Na.push(e)}function ja(){for(var e=Bl,t=cu=Bl=0;t<e;){var n=Sa[t];Sa[t++]=null;var i=Sa[t];Sa[t++]=null;var u=Sa[t];Sa[t++]=null;var c=Sa[t];if(Sa[t++]=null,i!==null&&u!==null){var p=i.pending;p===null?u.next=u:(u.next=p.next,p.next=u),i.pending=u}c!==0&&Xn(n,u,c)}}function Wa(e,t,n,i){Sa[Bl++]=e,Sa[Bl++]=t,Sa[Bl++]=n,Sa[Bl++]=i,cu|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Fn(e,t,n,i){return Wa(e,t,n,i),ka(e)}function kt(e,t){return Wa(e,null,null,t),ka(e)}function Xn(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var u=!1,c=e.return;c!==null;)c.childLanes|=n,i=c.alternate,i!==null&&(i.childLanes|=n),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(u=!0)),e=c,c=c.return;u&&t!==null&&e.tag===3&&(c=e.stateNode,u=31-ra(n),c=c.hiddenUpdates,e=c[u],e===null?c[u]=[t]:e.push(t),t.lane=n|536870912)}function ka(e){if(50<Hi)throw Hi=0,xu=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}function Xt(e){e!==Hl&&e.next===null&&(Hl===null?_s=Hl=e:Hl=Hl.next=e),Ms=!0,ou||(ou=!0,fi(bl))}function La(e,t){if(!fu&&Ms){fu=!0;do for(var n=!1,i=_s;i!==null;){if(e!==0){var u=i.pendingLanes;if(u===0)var c=0;else{var p=i.suspendedLanes,E=i.pingedLanes;c=(1<<31-ra(42|e)+1)-1,c&=u&~(p&~E),c=c&201326677?c&201326677|1:c?c|2:0}c!==0&&(n=!0,mn(i,c))}else c=je,c=F(i,i===nt?c:0),(c&3)===0||G(i,c)||(n=!0,mn(i,c));i=i.next}while(n);fu=!1}}function bl(){Ms=ou=!1;var e=0;wl!==0&&($h()&&(e=wl),wl=0);for(var t=Ua(),n=null,i=_s;i!==null;){var u=i.next,c=$a(i,t);c===0?(i.next=null,n===null?_s=u:n.next=u,u===null&&(Hl=n)):(n=i,(e!==0||(c&3)!==0)&&(Ms=!0)),i=u}La(e)}function $a(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,u=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var p=31-ra(c),E=1<<p,z=u[p];z===-1?((E&n)===0||(E&i)!==0)&&(u[p]=re(E,t)):z<=t&&(e.expiredLanes|=E),c&=~E}if(t=nt,n=je,n=F(e,e===t?n:0),i=e.callbackNode,n===0||e===t&&lt===2||e.cancelPendingCommit!==null)return i!==null&&i!==null&&su(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||G(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&su(i),Se(n)){case 2:case 8:n=sv;break;case 32:n=ru;break;case 268435456:n=rv;break;default:n=ru}return i=Va.bind(null,e),n=Ss(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&su(i),e.callbackPriority=2,e.callbackNode=null,2}function Va(e,t){var n=e.callbackNode;if(el()&&e.callbackNode!==n)return null;var i=je;return i=F(e,e===nt?i:0),i===0?null:(Ro(e,i,t),$a(e,Ua()),e.callbackNode!=null&&e.callbackNode===n?Va.bind(null,e):null)}function mn(e,t){if(el())return null;Ro(e,t,!0)}function fi(e){ip?sp(function(){($e&6)!==0?Ss(_f,e):e()}):Ss(_f,e)}function gn(){return wl===0&&(wl=O()),wl}function yn(e,t){if(Ai===null){var n=Ai=[];du=0,Gl=gn(),jl={status:"pending",value:void 0,then:function(i){n.push(i)}}}return du++,t.then(en,en),t}function en(){if(--du===0&&Ai!==null){jl!==null&&(jl.status="fulfilled");var e=Ai;Ai=null,Gl=0,jl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function di(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(u){n.push(u)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var u=0;u<n.length;u++)(0,n[u])(t)},function(u){for(i.status="rejected",i.reason=u,u=0;u<n.length;u++)(0,n[u])(void 0)}),i}function Sn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Dt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function at(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,($e&2)!==0){var u=i.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),i.pending=t,t=ka(e),Xn(e,null,n),t}return Wa(e,i,t,n),ka(e)}function ha(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,le(e,n)}}function M(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var u=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var p={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};c===null?u=c=p:c=c.next=p,n=n.next}while(n!==null);c===null?u=c=t:c=c.next=t}else u=c=t;n={baseState:i.baseState,firstBaseUpdate:u,lastBaseUpdate:c,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function J(){if(hu){var e=jl;if(e!==null)throw e}}function fe(e,t,n,i){hu=!1;var u=e.updateQueue;Dn=!1;var c=u.firstBaseUpdate,p=u.lastBaseUpdate,E=u.shared.pending;if(E!==null){u.shared.pending=null;var z=E,Z=z.next;z.next=null,p===null?c=Z:p.next=Z,p=z;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,E=ae.lastBaseUpdate,E!==p&&(E===null?ae.firstBaseUpdate=Z:E.next=Z,ae.lastBaseUpdate=z))}if(c!==null){var ue=u.baseState;p=0,ae=Z=z=null,E=c;do{var ce=E.lane&-536870913,Ue=ce!==E.lane;if(Ue?(je&ce)===ce:(i&ce)===ce){ce!==0&&ce===Gl&&(hu=!0),ae!==null&&(ae=ae.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ta=e,wi=E;ce=t;var hl=n;switch(wi.tag){case 1:if(Ta=wi.payload,typeof Ta=="function"){ue=Ta.call(hl,ue,ce);break e}ue=Ta;break e;case 3:Ta.flags=Ta.flags&-65537|128;case 0:if(Ta=wi.payload,ce=typeof Ta=="function"?Ta.call(hl,ue,ce):Ta,ce==null)break e;ue=Qr({},ue,ce);break e;case 2:Dn=!0}}ce=E.callback,ce!==null&&(e.flags|=64,Ue&&(e.flags|=8192),Ue=u.callbacks,Ue===null?u.callbacks=[ce]:Ue.push(ce))}else Ue={lane:ce,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ae===null?(Z=ae=Ue,z=ue):ae=ae.next=Ue,p|=ce;if(E=E.next,E===null){if(E=u.shared.pending,E===null)break;Ue=E,E=Ue.next,Ue.next=null,u.lastBaseUpdate=Ue,u.shared.pending=null}}while(!0);ae===null&&(z=ue),u.baseState=z,u.firstBaseUpdate=Z,u.lastBaseUpdate=ae,c===null&&(u.shared.lanes=0),Hn|=p,e.lanes=p,e.memoizedState=ue}}function we(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function te(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)we(n[e],t)}function gt(e,t){if(ca(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var u=n[i];if(!ov.call(t,u)||!ca(e[u],t[u]))return!1}return!0}function $t(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Kn(){}function In(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Kn,Kn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===zi?Error(o(483)):e;default:if(typeof t.status=="string")t.then(Kn,Kn);else{if(e=nt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=i}},function(i){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===zi?Error(o(483)):e}throw Ll=t,zi}}function Qt(){if(Ll===null)throw Error(o(459));var e=Ll;return Ll=null,e}function Ot(e){var t=Ci;return Ci+=1,Vl===null&&(Vl=[]),In(Vl,e,t)}function ea(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function pa(e,t){throw t.$$typeof===jh?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function qa(e){var t=e._init;return t(e._payload)}function tn(e){function t(U,R){if(e){var D=U.deletions;D===null?(U.deletions=[R],U.flags|=16):D.push(R)}}function n(U,R){if(!e)return null;for(;R!==null;)t(U,R),R=R.sibling;return null}function i(U){for(var R=new Map;U!==null;)U.key!==null?R.set(U.key,U):R.set(U.index,U),U=U.sibling;return R}function u(U,R){return U=An(U,R),U.index=0,U.sibling=null,U}function c(U,R,D){return U.index=D,e?(D=U.alternate,D!==null?(D=D.index,D<R?(U.flags|=33554434,R):D):(U.flags|=33554434,R)):(U.flags|=1048576,R)}function p(U){return e&&U.alternate===null&&(U.flags|=33554434),U}function E(U,R,D,k){return R===null||R.tag!==6?(R=Yr(D,U.mode,k),R.return=U,R):(R=u(R,D),R.return=U,R)}function z(U,R,D,k){var be=D.type;return be===zl?ae(U,R,D.props.children,k,D.key):R!==null&&(R.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Cn&&qa(be)===R.type)?(R=u(R,D.props),ea(R,D),R.return=U,R):(R=hs(D.type,D.key,D.props,null,U.mode,k),ea(R,D),R.return=U,R)}function Z(U,R,D,k){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=Fr(D,U.mode,k),R.return=U,R):(R=u(R,D.children||[]),R.return=U,R)}function ae(U,R,D,k,be){return R===null||R.tag!==7?(R=tl(D,U.mode,k,be),R.return=U,R):(R=u(R,D),R.return=U,R)}function ue(U,R,D){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Yr(""+R,U.mode,D),R.return=U,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ps:return D=hs(R.type,R.key,R.props,null,U.mode,D),ea(D,R),D.return=U,D;case Al:return R=Fr(R,U.mode,D),R.return=U,R;case Cn:var k=R._init;return R=k(R._payload),ue(U,R,D)}if(vs(R)||d(R))return R=tl(R,U.mode,D,null),R.return=U,R;if(typeof R.then=="function")return ue(U,Ot(R),D);if(R.$$typeof===zn)return ue(U,rs(U,R),D);pa(U,R)}return null}function ce(U,R,D,k){var be=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return be!==null?null:E(U,R,""+D,k);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ps:return D.key===be?z(U,R,D,k):null;case Al:return D.key===be?Z(U,R,D,k):null;case Cn:return be=D._init,D=be(D._payload),ce(U,R,D,k)}if(vs(D)||d(D))return be!==null?null:ae(U,R,D,k,null);if(typeof D.then=="function")return ce(U,R,Ot(D),k);if(D.$$typeof===zn)return ce(U,R,rs(U,D),k);pa(U,D)}return null}function Ue(U,R,D,k,be){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return U=U.get(D)||null,E(R,U,""+k,be);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ps:return U=U.get(k.key===null?D:k.key)||null,z(R,U,k,be);case Al:return U=U.get(k.key===null?D:k.key)||null,Z(R,U,k,be);case Cn:var it=k._init;return k=it(k._payload),Ue(U,R,D,k,be)}if(vs(k)||d(k))return U=U.get(D)||null,ae(R,U,k,be,null);if(typeof k.then=="function")return Ue(U,R,D,Ot(k),be);if(k.$$typeof===zn)return Ue(U,R,D,rs(R,k),be);pa(R,k)}return null}function Ta(U,R,D,k){for(var be=null,it=null,Me=R,Ze=R=0,At=null;Me!==null&&Ze<D.length;Ze++){Me.index>Ze?(At=Me,Me=null):At=Me.sibling;var Ye=ce(U,Me,D[Ze],k);if(Ye===null){Me===null&&(Me=At);break}e&&Me&&Ye.alternate===null&&t(U,Me),R=c(Ye,R,Ze),it===null?be=Ye:it.sibling=Ye,it=Ye,Me=At}if(Ze===D.length)return n(U,Me),qe&&pe(U,Ze),be;if(Me===null){for(;Ze<D.length;Ze++)Me=ue(U,D[Ze],k),Me!==null&&(R=c(Me,R,Ze),it===null?be=Me:it.sibling=Me,it=Me);return qe&&pe(U,Ze),be}for(Me=i(Me);Ze<D.length;Ze++)At=Ue(Me,U,Ze,D[Ze],k),At!==null&&(e&&At.alternate!==null&&Me.delete(At.key===null?Ze:At.key),R=c(At,R,Ze),it===null?be=At:it.sibling=At,it=At);return e&&Me.forEach(function(Gn){return t(U,Gn)}),qe&&pe(U,Ze),be}function wi(U,R,D,k){if(D==null)throw Error(o(151));for(var be=null,it=null,Me=R,Ze=R=0,At=null,Ye=D.next();Me!==null&&!Ye.done;Ze++,Ye=D.next()){Me.index>Ze?(At=Me,Me=null):At=Me.sibling;var Gn=ce(U,Me,Ye.value,k);if(Gn===null){Me===null&&(Me=At);break}e&&Me&&Gn.alternate===null&&t(U,Me),R=c(Gn,R,Ze),it===null?be=Gn:it.sibling=Gn,it=Gn,Me=At}if(Ye.done)return n(U,Me),qe&&pe(U,Ze),be;if(Me===null){for(;!Ye.done;Ze++,Ye=D.next())Ye=ue(U,Ye.value,k),Ye!==null&&(R=c(Ye,R,Ze),it===null?be=Ye:it.sibling=Ye,it=Ye);return qe&&pe(U,Ze),be}for(Me=i(Me);!Ye.done;Ze++,Ye=D.next())Ye=Ue(Me,U,Ze,Ye.value,k),Ye!==null&&(e&&Ye.alternate!==null&&Me.delete(Ye.key===null?Ze:Ye.key),R=c(Ye,R,Ze),it===null?be=Ye:it.sibling=Ye,it=Ye);return e&&Me.forEach(function(gv){return t(U,gv)}),qe&&pe(U,Ze),be}function hl(U,R,D,k){if(typeof D=="object"&&D!==null&&D.type===zl&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case ps:e:{for(var be=D.key;R!==null;){if(R.key===be){if(be=D.type,be===zl){if(R.tag===7){n(U,R.sibling),k=u(R,D.props.children),k.return=U,U=k;break e}}else if(R.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Cn&&qa(be)===R.type){n(U,R.sibling),k=u(R,D.props),ea(k,D),k.return=U,U=k;break e}n(U,R);break}else t(U,R);R=R.sibling}D.type===zl?(k=tl(D.props.children,U.mode,k,D.key),k.return=U,U=k):(k=hs(D.type,D.key,D.props,null,U.mode,k),ea(k,D),k.return=U,U=k)}return p(U);case Al:e:{for(be=D.key;R!==null;){if(R.key===be)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){n(U,R.sibling),k=u(R,D.children||[]),k.return=U,U=k;break e}else{n(U,R);break}else t(U,R);R=R.sibling}k=Fr(D,U.mode,k),k.return=U,U=k}return p(U);case Cn:return be=D._init,D=be(D._payload),hl(U,R,D,k)}if(vs(D))return Ta(U,R,D,k);if(d(D)){if(be=d(D),typeof be!="function")throw Error(o(150));return D=be.call(D),wi(U,R,D,k)}if(typeof D.then=="function")return hl(U,R,Ot(D),k);if(D.$$typeof===zn)return hl(U,R,rs(U,D),k);pa(U,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,R!==null&&R.tag===6?(n(U,R.sibling),k=u(R,D),k.return=U,U=k):(n(U,R),k=Yr(D,U.mode,k),k.return=U,U=k),p(U)):n(U,R)}return function(U,R,D,k){try{Ci=0;var be=hl(U,R,D,k);return Vl=null,be}catch(Me){if(Me===zi)throw Me;var it=s(29,Me,null,U.mode);return it.lanes=k,it.return=U,it}finally{}}}function ts(e,t){e=hn,x(Rs,e),x(ql,t),hn=e|t.baseLanes}function hi(){x(Rs,hn),x(ql,ql.current)}function En(){hn=Rs.current,C(ql),C(Rs)}function Za(e){var t=e.alternate;x(Tt,Tt.current&1),x(Ea,e),Qa===null&&(t===null||ql.current!==null||t.memoizedState!==null)&&(Qa=e)}function bn(e){if(e.tag===22){if(x(Tt,Tt.current),x(Ea,e),Qa===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Qa=e)}}else Kt()}function Kt(){x(Tt,Tt.current),x(Ea,Ea.current)}function Re(e){C(Ea),Qa===e&&(Qa=null),C(Tt)}function Pn(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||au(n)||nu(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ct(){throw Error(o(321))}function f(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ca(e[n],t[n]))return!1;return!0}function v(e,t,n,i,u,c){return On=c,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ae.H=e===null||e.memoizedState===null?rl:Bn,sl=!1,c=n(i,u),sl=!1,Zl&&(c=N(t,n,i,u)),T(e),c}function T(e){Ae.H=Ka;var t=ke!==null&&ke.next!==null;if(On=0,St=ke=De=null,As=!1,Ui=0,Yl=null,t)throw Error(o(300));e===null||xt||(e=e.dependencies,e!==null&&ss(e)&&(xt=!0))}function N(e,t,n,i){De=e;var u=0;do{if(Zl&&(Yl=null),Ui=0,Zl=!1,25<=u)throw Error(o(301));if(u+=1,St=ke=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}Ae.H=ul,c=t(n,i)}while(Zl);return c}function w(){var e=Ae.H,t=e.useState()[0];return t=typeof t.then=="function"?ie(t):t,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(De.flags|=1024),t}function B(){var e=zs!==0;return zs=0,e}function $(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function P(e){if(As){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}As=!1}On=0,St=ke=De=null,Zl=!1,Ui=zs=0,Yl=null}function W(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?De.memoizedState=St=e:St=St.next=e,St}function K(){if(ke===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=St===null?De.memoizedState:St.next;if(t!==null)St=t,ke=e;else{if(e===null)throw De.alternate===null?Error(o(467)):Error(o(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},St===null?De.memoizedState=St=e:St=St.next=e}return St}function ie(e){var t=Ui;return Ui+=1,Yl===null&&(Yl=[]),e=In(Yl,e,t),t=De,(St===null?t.memoizedState:St.next)===null&&(t=t.alternate,Ae.H=t===null||t.memoizedState===null?rl:Bn),e}function ne(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ie(e);if(e.$$typeof===zn)return Ht(e)}throw Error(o(438,String(e)))}function et(e){var t=null,n=De.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=De.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=vu(),De.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Vh;return t.index++,n}function de(e,t){return typeof t=="function"?t(e):t}function ye(e){var t=K();return xe(t,ke,e)}function xe(e,t,n){var i=e.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=n;var u=e.baseQueue,c=i.pending;if(c!==null){if(u!==null){var p=u.next;u.next=c.next,c.next=p}t.baseQueue=u=c,i.pending=null}if(c=e.baseState,u===null)e.memoizedState=c;else{t=u.next;var E=p=null,z=null,Z=t,ae=!1;do{var ue=Z.lane&-536870913;if(ue!==Z.lane?(je&ue)===ue:(On&ue)===ue){var ce=Z.revertLane;if(ce===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ue===Gl&&(ae=!0);else if((On&ce)===ce){Z=Z.next,ce===Gl&&(ae=!0);continue}else ue={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(E=z=ue,p=c):z=z.next=ue,De.lanes|=ce,Hn|=ce;ue=Z.action,sl&&n(c,ue),c=Z.hasEagerState?Z.eagerState:n(c,ue)}else ce={lane:ue,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(E=z=ce,p=c):z=z.next=ce,De.lanes|=ue,Hn|=ue;Z=Z.next}while(Z!==null&&Z!==t);if(z===null?p=c:z.next=E,!ca(c,e.memoizedState)&&(xt=!0,ae&&(n=jl,n!==null)))throw n;e.memoizedState=c,e.baseState=p,e.baseQueue=z,i.lastRenderedState=c}return u===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Ce(e){var t=K(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,u=n.pending,c=t.memoizedState;if(u!==null){n.pending=null;var p=u=u.next;do c=e(c,p.action),p=p.next;while(p!==u);ca(c,t.memoizedState)||(xt=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,i]}function Xe(e,t,n){var i=De,u=K(),c=qe;if(c){if(n===void 0)throw Error(o(407));n=n()}else n=t();var p=!ca((ke||u).memoizedState,n);if(p&&(u.memoizedState=n,xt=!0),u=u.queue,ir(Mt.bind(null,i,u,e),[e]),u.getSnapshot!==t||p||St!==null&&St.memoizedState.tag&1){if(i.flags|=2048,Tl(9,dt.bind(null,i,u,n,t),{destroy:void 0},null),nt===null)throw Error(o(349));c||(On&60)!==0||Ie(i,t,n)}return n}function Ie(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t=vu(),De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function dt(e,t,n,i){t.value=n,t.getSnapshot=i,Pe(t)&&ta(e)}function Mt(e,t,n){return n(function(){Pe(t)&&ta(e)})}function Pe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ca(e,n)}catch{return!0}}function ta(e){var t=kt(e,2);t!==null&&Zt(t,e,2)}function Je(e){var t=W();if(typeof e=="function"){var n=e;if(e=n(),sl){oe(!0);try{n()}finally{oe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:de,lastRenderedState:e},t}function mt(e,t,n,i){return e.baseState=n,xe(e,ke,typeof i=="function"?i:de)}function za(e,t,n,i,u){if(ls(e))throw Error(o(485));if(e=t.action,e!==null){var c={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){c.listeners.push(p)}};Ae.T!==null?n(!0):c.isTransition=!1,i(c),n=t.pending,n===null?(c.next=t.pending=c,Tn(t,c)):(c.next=n.next,t.pending=n.next=c)}}function Tn(e,t){var n=t.action,i=t.payload,u=e.state;if(t.isTransition){var c=Ae.T,p={};Ae.T=p;try{var E=n(u,i),z=Ae.S;z!==null&&z(p,E),Vt(e,t,E)}catch(Z){yt(e,t,Z)}finally{Ae.T=c}}else try{c=n(u,i),Vt(e,t,c)}catch(Z){yt(e,t,Z)}}function Vt(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Qe(e,t,i)},function(i){return yt(e,t,i)}):Qe(e,t,n)}function Qe(e,t,n){t.status="fulfilled",t.value=n,tt(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Tn(e,n)))}function yt(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,tt(t),t=t.next;while(t!==i)}e.action=null}function tt(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ve(e,t){return t}function qt(e,t){if(qe){var n=nt.formState;if(n!==null){e:{var i=De;if(qe){if(jt){var u=Np(jt,Xa);if(u){jt=ff(u),i=Dp(u);break e}}bt(i)}i=!1}i&&(t=n[0])}}n=W(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ve,lastRenderedState:t},n.queue=i,n=Bc.bind(null,De,i),i.dispatch=n,i=Je(!1);var c=cr.bind(null,De,!1,i.queue);return i=W(),u={state:t,dispatch:null,action:e,pending:null},i.queue=u,n=za.bind(null,De,u,c,n),u.dispatch=n,i.memoizedState=e,[t,n,!1]}function Ya(e){var t=K();return Bt(t,ke,e)}function Bt(e,t,n){t=xe(e,t,Ve)[0],e=ye(de)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?ie(t):t;var i=K(),u=i.queue,c=u.dispatch;return n!==i.memoizedState&&(De.flags|=2048,Tl(9,Fa.bind(null,u,n),{destroy:void 0},null)),[t,c,e]}function Fa(e,t){e.action=t}function Ec(e){var t=K(),n=ke;if(n!==null)return Bt(t,n,e);K(),t=t.memoizedState,n=K();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Tl(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},t=De.updateQueue,t===null&&(t=vu(),De.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function bc(){return K().memoizedState}function as(e,t,n,i){var u=W();De.flags|=e,u.memoizedState=Tl(1|t,n,{destroy:void 0},i===void 0?null:i)}function ns(e,t,n,i){var u=K();i=i===void 0?null:i;var c=u.memoizedState.inst;ke!==null&&i!==null&&f(i,ke.memoizedState.deps)?u.memoizedState=Tl(t,n,c,i):(De.flags|=e,u.memoizedState=Tl(1|t,n,c,i))}function Tc(e,t){as(8390656,8,e,t)}function ir(e,t){ns(2048,8,e,t)}function _c(e,t){return ns(4,2,e,t)}function Mc(e,t){return ns(4,4,e,t)}function xc(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rc(e,t,n){n=n!=null?n.concat([e]):null,ns(4,4,xc.bind(null,t,e),n)}function sr(){}function Ac(e,t){var n=K();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&f(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function zc(e,t){var n=K();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&f(t,i[1]))return i[0];if(i=e(),sl){oe(!0);try{e()}finally{oe(!1)}}return n.memoizedState=[i,t],i}function rr(e,t,n){return n===void 0||(On&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=xo(),De.lanes|=e,Hn|=e,n)}function Cc(e,t,n,i){return ca(n,t)?n:ql.current!==null?(e=rr(e,n,i),ca(e,t)||(xt=!0),e):(On&42)===0?(xt=!0,e.memoizedState=n):(e=xo(),De.lanes|=e,Hn|=e,t)}function Uc(e,t,n,i,u){var c=al();Pt(c!==0&&8>c?c:8);var p=Ae.T,E={};Ae.T=E,cr(e,!1,t,n);try{var z=u(),Z=Ae.S;if(Z!==null&&Z(E,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ae=di(z,i);pi(e,t,ae,ia(e))}else pi(e,t,i,ia(e))}catch(ue){pi(e,t,{then:function(){},status:"rejected",reason:ue},ia())}finally{Pt(c),Ae.T=p}}function Nc(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Cl,baseState:Cl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:de,lastRenderedState:Cl},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:de,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ur(){return Ht(nl)}function Dc(){return K().memoizedState}function Oc(){return K().memoizedState}function yh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ia();e=Dt(n);var i=at(t,e,n);i!==null&&(Zt(i,t,n),ha(i,t,n)),t={cache:Tr()},e.payload=t;return}t=t.return}}function Sh(e,t,n){var i=ia();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ls(e)?Hc(t,n):(n=Fn(e,t,n,i),n!==null&&(Zt(n,e,i),wc(n,t,i)))}function Bc(e,t,n){var i=ia();pi(e,t,n,i)}function pi(e,t,n,i){var u={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ls(e))Hc(t,u);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var p=t.lastRenderedState,E=c(p,n);if(u.hasEagerState=!0,u.eagerState=E,ca(E,p))return Wa(e,t,u,0),nt===null&&ja(),!1}catch{}finally{}if(n=Fn(e,t,u,i),n!==null)return Zt(n,e,i),wc(n,t,i),!0}return!1}function cr(e,t,n,i){if(i={lane:2,revertLane:gn(),action:i,hasEagerState:!1,eagerState:null,next:null},ls(e)){if(t)throw Error(o(479))}else t=Fn(e,n,i,2),t!==null&&Zt(t,e,2)}function ls(e){var t=e.alternate;return e===De||t!==null&&t===De}function Hc(e,t){Zl=As=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wc(e,t,n){if((n&4194176)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,le(e,n)}}function or(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Qr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}function Gc(e,t,n,i,u,c,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,c,p):t.prototype&&t.prototype.isPureReactComponent?!gt(n,i)||!gt(u,c):!0}function jc(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&mu.enqueueReplaceState(t,t.state,null)}function Jn(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Qr({},n));for(var u in e)n[u]===void 0&&(n[u]=e[u])}return n}function is(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Lc(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function fr(e,t,n){return n=Dt(n),n.tag=3,n.payload={element:null},n.callback=function(){is(e,t)},n}function Vc(e){return e=Dt(e),e.tag=3,e}function qc(e,t,n,i){var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var c=i.value;e.payload=function(){return u(c)},e.callback=function(){Lc(t,n,i)}}var p=n.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Lc(t,n,i),typeof u!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var E=i.stack;this.componentDidCatch(i.value,{componentStack:E!==null?E:""})})}function Eh(e,t,n,i,u){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&mi(t,n,u,!0),n=Ea.current,n!==null){switch(n.tag){case 13:return Qa===null?Lr():n.alternate===null&&vt===0&&(vt=3),n.flags&=-257,n.flags|=65536,n.lanes=u,i===xs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),qr(e,i,u)),!1;case 22:return n.flags|=65536,i===xs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),qr(e,i,u)),!1}throw Error(o(435,n.tag))}return qr(e,i,u),Lr(),!1}if(qe)return t=Ea.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,i!==uu&&(e=Error(o(422),{cause:i}),Aa(me(e,n)))):(i!==uu&&(t=Error(o(423),{cause:i}),Aa(me(t,n))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,i=me(i,n),u=fr(e.stateNode,i,u),M(e,u),vt!==4&&(vt=2)),!1;var c=Error(o(520),{cause:i});if(c=me(c,n),Di===null?Di=[c]:Di.push(c),vt!==4&&(vt=2),t===null)return!0;i=me(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=u&-u,n.lanes|=e,e=fr(n.stateNode,i,e),M(n,e),!1;case 1:if(t=n.type,c=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(wn===null||!wn.has(c))))return n.flags|=65536,u&=-u,n.lanes|=u,u=Vc(u),qc(u,e,n,i),M(n,u),!1}n=n.return}while(n!==null);return!1}function zt(e,t,n,i){t.child=e===null?xf(t,null,n,i):il(t,e.child,n,i)}function Zc(e,t,n,i,u){n=n.render;var c=t.ref;if("ref"in i){var p={};for(var E in i)E!=="ref"&&(p[E]=i[E])}else p=i;return Wn(t),i=v(e,t,n,p,c,u),E=B(),e!==null&&!xt?($(e,t,u),an(e,t,u)):(qe&&E&&ge(t),t.flags|=1,zt(e,t,i,u),t.child)}function Yc(e,t,n,i,u){if(e===null){var c=n.type;return typeof c=="function"&&!Zr(c)&&c.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=c,Fc(e,t,c,i,u)):(e=hs(n.type,null,i,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Sr(e,u)){var p=c.memoizedProps;if(n=n.compare,n=n!==null?n:gt,n(p,i)&&e.ref===t.ref)return an(e,t,u)}return t.flags|=1,e=An(c,i),e.ref=t.ref,e.return=t,t.child=e}function Fc(e,t,n,i,u){if(e!==null){var c=e.memoizedProps;if(gt(c,i)&&e.ref===t.ref)if(xt=!1,t.pendingProps=i=c,Sr(e,u))(e.flags&131072)!==0&&(xt=!0);else return t.lanes=e.lanes,an(e,t,u)}return dr(e,t,n,i,u)}function Xc(e,t,n){var i=t.pendingProps,u=i.children,c=(t.stateNode._pendingVisibility&2)!==0,p=e!==null?e.memoizedState:null;if(vi(e,t),i.mode==="hidden"||c){if((t.flags&128)!==0){if(i=p!==null?p.baseLanes|n:n,e!==null){for(u=t.child=e.child,c=0;u!==null;)c=c|u.lanes|u.childLanes,u=u.sibling;t.childLanes=c&~i}else t.childLanes=0,t.child=null;return Qc(e,t,i,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&us(t,p!==null?p.cachePool:null),p!==null?ts(t,p):hi(),bn(t);else return t.lanes=t.childLanes=536870912,Qc(e,t,p!==null?p.baseLanes|n:n,n)}else p!==null?(us(t,p.cachePool),ts(t,p),Kt(),t.memoizedState=null):(e!==null&&us(t,null),hi(),Kt());return zt(e,t,u,n),t.child}function Qc(e,t,n,i){var u=_r();return u=u===null?null:{parent:rn?ht._currentValue:ht._currentValue2,pool:u},t.memoizedState={baseLanes:n,cachePool:u},e!==null&&us(t,null),hi(),bn(t),e!==null&&mi(e,t,i,!0),null}function vi(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function dr(e,t,n,i,u){return Wn(t),n=v(e,t,n,i,void 0,u),i=B(),e!==null&&!xt?($(e,t,u),an(e,t,u)):(qe&&i&&ge(t),t.flags|=1,zt(e,t,n,u),t.child)}function Kc(e,t,n,i,u,c){return Wn(t),t.updateQueue=null,n=N(t,i,n,u),T(e),i=B(),e!==null&&!xt?($(e,t,c),an(e,t,c)):(qe&&i&&ge(t),t.flags|=1,zt(e,t,n,c),t.child)}function Ic(e,t,n,i,u){if(Wn(t),t.stateNode===null){var c=Nl,p=n.contextType;typeof p=="object"&&p!==null&&(c=Ht(p)),c=new n(i,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=mu,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=i,c.state=t.memoizedState,c.refs={},Sn(t),p=n.contextType,c.context=typeof p=="object"&&p!==null?Ht(p):Nl,c.state=t.memoizedState,p=n.getDerivedStateFromProps,typeof p=="function"&&(or(t,n,p,i),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(p=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),p!==c.state&&mu.enqueueReplaceState(c,c.state,null),fe(t,i,c,u),J(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){c=t.stateNode;var E=t.memoizedProps,z=Jn(n,E);c.props=z;var Z=c.context,ae=n.contextType;p=Nl,typeof ae=="object"&&ae!==null&&(p=Ht(ae));var ue=n.getDerivedStateFromProps;ae=typeof ue=="function"||typeof c.getSnapshotBeforeUpdate=="function",E=t.pendingProps!==E,ae||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(E||Z!==p)&&jc(t,c,i,p),Dn=!1;var ce=t.memoizedState;c.state=ce,fe(t,i,c,u),J(),Z=t.memoizedState,E||ce!==Z||Dn?(typeof ue=="function"&&(or(t,n,ue,i),Z=t.memoizedState),(z=Dn||Gc(t,n,z,i,ce,Z,p))?(ae||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=Z),c.props=i,c.state=Z,c.context=p,i=z):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{c=t.stateNode,Qn(e,t),p=t.memoizedProps,ae=Jn(n,p),c.props=ae,ue=t.pendingProps,ce=c.context,Z=n.contextType,z=Nl,typeof Z=="object"&&Z!==null&&(z=Ht(Z)),E=n.getDerivedStateFromProps,(Z=typeof E=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p!==ue||ce!==z)&&jc(t,c,i,z),Dn=!1,ce=t.memoizedState,c.state=ce,fe(t,i,c,u),J();var Ue=t.memoizedState;p!==ue||ce!==Ue||Dn||e!==null&&e.dependencies!==null&&ss(e.dependencies)?(typeof E=="function"&&(or(t,n,E,i),Ue=t.memoizedState),(ae=Dn||Gc(t,n,ae,i,ce,Ue,z)||e!==null&&e.dependencies!==null&&ss(e.dependencies))?(Z||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(i,Ue,z),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(i,Ue,z)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||p===e.memoizedProps&&ce===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&ce===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=Ue),c.props=i,c.state=Ue,c.context=z,i=ae):(typeof c.componentDidUpdate!="function"||p===e.memoizedProps&&ce===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&ce===e.memoizedState||(t.flags|=1024),i=!1)}return c=i,vi(e,t),i=(t.flags&128)!==0,c||i?(c=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&i?(t.child=il(t,e.child,null,u),t.child=il(t,null,n,u)):zt(e,t,n,u),t.memoizedState=c.state,e=t.child):e=an(e,t,u),e}function Pc(e,t,n,i){return Ga(),t.flags|=256,zt(e,t,n,i),t.child}function hr(e){return{baseLanes:e,cachePool:to()}}function pr(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ba),e}function Jc(e,t,n){var i=t.pendingProps,u=!1,c=(t.flags&128)!==0,p;if((p=c)||(p=e!==null&&e.memoizedState===null?!1:(Tt.current&2)!==0),p&&(u=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(qe){if(u?Za(t):Kt(),qe){var E=jt,z;(z=E)&&(E=Gp(E,Xa),E!==null?(t.memoizedState={dehydrated:E,treeContext:ll!==null?{id:un,overflow:cn}:null,retryLane:536870912},z=s(18,null,null,0),z.stateNode=E,z.return=t,t.child=z,Yt=t,jt=null,z=!0):z=!1),z||bt(t)}if(E=t.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return nu(E)?t.lanes=16:t.lanes=536870912,null;Re(t)}return E=i.children,i=i.fallback,u?(Kt(),u=t.mode,E=mr({mode:"hidden",children:E},u),i=tl(i,u,n,null),E.return=t,i.return=t,E.sibling=i,t.child=E,u=t.child,u.memoizedState=hr(n),u.childLanes=pr(e,p,n),t.memoizedState=gu,i):(Za(t),vr(t,E))}if(z=e.memoizedState,z!==null&&(E=z.dehydrated,E!==null)){if(c)t.flags&256?(Za(t),t.flags&=-257,t=gr(e,t,n)):t.memoizedState!==null?(Kt(),t.child=e.child,t.flags|=128,t=null):(Kt(),u=i.fallback,E=t.mode,i=mr({mode:"visible",children:i.children},E),u=tl(u,E,n,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,il(t,e.child,null,n),i=t.child,i.memoizedState=hr(n),i.childLanes=pr(e,p,n),t.memoizedState=gu,t=u);else if(Za(t),nu(E))p=Cp(E).digest,i=Error(o(419)),i.stack="",i.digest=p,Aa({value:i,source:null,stack:null}),t=gr(e,t,n);else if(xt||mi(e,t,n,!1),p=(n&e.childLanes)!==0,xt||p){if(p=nt,p!==null){if(i=n&-n,(i&42)!==0)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=(i&(p.suspendedLanes|n))!==0?0:i,i!==0&&i!==z.retryLane)throw z.retryLane=i,kt(e,i),Zt(p,e,i),Af}au(E)||Lr(),t=gr(e,t,n)}else au(E)?(t.flags|=128,t.child=e.child,t=Dh.bind(null,e),Up(E,t),t=null):(e=z.treeContext,va&&(jt=Bp(E),Yt=t,qe=!0,Na=null,Xa=!1,e!==null&&(ga[ya++]=un,ga[ya++]=cn,ga[ya++]=ll,un=e.id,cn=e.overflow,ll=t)),t=vr(t,i.children),t.flags|=4096);return t}return u?(Kt(),u=i.fallback,E=t.mode,z=e.child,c=z.sibling,i=An(z,{mode:"hidden",children:i.children}),i.subtreeFlags=z.subtreeFlags&31457280,c!==null?u=An(c,u):(u=tl(u,E,n,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,E=e.child.memoizedState,E===null?E=hr(n):(z=E.cachePool,z!==null?(c=rn?ht._currentValue:ht._currentValue2,z=z.parent!==c?{parent:c,pool:c}:z):z=to(),E={baseLanes:E.baseLanes|n,cachePool:z}),u.memoizedState=E,u.childLanes=pr(e,p,n),t.memoizedState=gu,i):(Za(t),n=e.child,e=n.sibling,n=An(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=n,t.memoizedState=null,n)}function vr(e,t){return t=mr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function mr(e,t){return qo(e,t,0,null)}function gr(e,t,n){return il(t,e.child,null,n),e=vr(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wc(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Er(e.return,t,n)}function yr(e,t,n,i,u){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:u}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=n,c.tailMode=u)}function kc(e,t,n){var i=t.pendingProps,u=i.revealOrder,c=i.tail;if(zt(e,t,i.children,n),i=Tt.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wc(e,n,t);else if(e.tag===19)Wc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(x(Tt,i),u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&Pn(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),yr(t,!1,u,n,c);break;case"backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Pn(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}yr(t,!0,n,null,c);break;case"together":yr(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function an(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Hn|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(mi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=An(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=An(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sr(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ss(e)))}function bh(e,t,n){switch(t.tag){case 3:ze(t,t.stateNode.containerInfo),_n(t,ht,e.memoizedState.cache),Ga();break;case 27:case 5:Oe(t);break;case 4:ze(t,t.stateNode.containerInfo);break;case 10:_n(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Za(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Jc(e,t,n):(Za(t),e=an(e,t,n),e!==null?e.sibling:null);Za(t);break;case 19:var u=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(mi(e,t,n,!1),i=(n&t.childLanes)!==0),u){if(i)return kc(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),x(Tt,Tt.current),i)break;return null;case 22:case 23:return t.lanes=0,Xc(e,t,n);case 24:_n(t,ht,e.memoizedState.cache)}return an(e,t,n)}function $c(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)xt=!0;else{if(!Sr(e,n)&&(t.flags&128)===0)return xt=!1,bh(e,t,n);xt=(e.flags&131072)!==0}else xt=!1,qe&&(t.flags&1048576)!==0&&_e(t,bs,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,u=i._init;if(i=u(i._payload),t.type=i,typeof i=="function")Zr(i)?(e=Jn(i,e),t.tag=1,t=Ic(null,t,i,e,n)):(t.tag=0,t=dr(null,t,i,e,n));else{if(i!=null){if(u=i.$$typeof,u===Ir){t.tag=11,t=Zc(null,t,i,e,n);break e}else if(u===Wr){t.tag=14,t=Yc(null,t,i,e,n);break e}}throw t=m(i)||i,Error(o(306,t,""))}}return t;case 0:return dr(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,u=Jn(i,t.pendingProps),Ic(e,t,i,u,n);case 3:e:{if(ze(t,t.stateNode.containerInfo),e===null)throw Error(o(387));var c=t.pendingProps;u=t.memoizedState,i=u.element,Qn(e,t),fe(t,c,null,n);var p=t.memoizedState;if(c=p.cache,_n(t,ht,c),c!==u.cache&&br(t,[ht],n,!0),J(),c=p.element,va&&u.isDehydrated)if(u={element:c,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Pc(e,t,c,n);break e}else if(c!==i){i=me(Error(o(424)),t),Aa(i),t=Pc(e,t,c,n);break e}else for(va&&(jt=Op(t.stateNode.containerInfo),Yt=t,qe=!0,Na=null,Xa=!0),n=xf(t,null,c,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ga(),c===i){t=an(e,t,n);break e}zt(e,t,c,n)}t=t.child}return t;case 26:if(ma)return vi(e,t),e===null?(n=vf(t.type,null,t.pendingProps,null))?t.memoizedState=n:qe||(t.stateNode=Pp(t.type,t.pendingProps,Nn.current,t)):t.memoizedState=vf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(Gt)return Oe(t),e===null&&Gt&&qe&&(i=t.stateNode=bf(t.type,t.pendingProps,Nn.current,Ct.current,!1),Yt=t,Xa=!0,jt=df(i)),i=t.pendingProps.children,e!==null||qe?zt(e,t,i,n):t.child=il(t,null,i,n),vi(e,t),t.child;case 5:return e===null&&qe&&(Qp(t.type,t.pendingProps,Ct.current),(u=i=jt)&&(i=Hp(i,t.type,t.pendingProps,Xa),i!==null?(t.stateNode=i,Yt=t,jt=df(i),Xa=!1,u=!0):u=!1),u||bt(t)),Oe(t),u=t.type,c=t.pendingProps,p=e!==null?e.memoizedProps:null,i=c.children,ms(u,c)?i=null:p!==null&&ms(u,p)&&(t.flags|=32),t.memoizedState!==null&&(u=v(e,t,w,null,null,n),rn?nl._currentValue=u:nl._currentValue2=u),vi(e,t),zt(e,t,i,n),t.child;case 6:return e===null&&qe&&(Kp(t.pendingProps,Ct.current),(e=n=jt)&&(n=wp(n,t.pendingProps,Xa),n!==null?(t.stateNode=n,Yt=t,jt=null,e=!0):e=!1),e||bt(t)),null;case 13:return Jc(e,t,n);case 4:return ze(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=il(t,null,i,n):zt(e,t,i,n),t.child;case 11:return Zc(e,t,t.type,t.pendingProps,n);case 7:return zt(e,t,t.pendingProps,n),t.child;case 8:return zt(e,t,t.pendingProps.children,n),t.child;case 12:return zt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,_n(t,t.type,i.value),zt(e,t,i.children,n),t.child;case 9:return u=t.type._context,i=t.pendingProps.children,Wn(t),u=Ht(u),i=i(u),t.flags|=1,zt(e,t,i,n),t.child;case 14:return Yc(e,t,t.type,t.pendingProps,n);case 15:return Fc(e,t,t.type,t.pendingProps,n);case 19:return kc(e,t,n);case 22:return Xc(e,t,n);case 24:return Wn(t),i=Ht(ht),e===null?(u=_r(),u===null&&(u=nt,c=Tr(),u.pooledCache=c,c.refCount++,c!==null&&(u.pooledCacheLanes|=n),u=c),t.memoizedState={parent:i,cache:u},Sn(t),_n(t,ht,u)):((e.lanes&n)!==0&&(Qn(e,t),fe(t,null,null,n),J()),u=e.memoizedState,c=t.memoizedState,u.parent!==i?(u={parent:i,cache:i},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),_n(t,ht,i)):(i=c.cache,_n(t,ht,i),i!==u.cache&&br(t,[ht],n,!0))),zt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function _n(e,t,n){rn?(x(Cs,t._currentValue),t._currentValue=n):(x(Cs,t._currentValue2),t._currentValue2=n)}function nn(e){var t=Cs.current;rn?e._currentValue=t:e._currentValue2=t,C(Cs)}function Er(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function br(e,t,n,i){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var c=u.dependencies;if(c!==null){var p=u.child;c=c.firstContext;e:for(;c!==null;){var E=c;c=u;for(var z=0;z<t.length;z++)if(E.context===t[z]){c.lanes|=n,E=c.alternate,E!==null&&(E.lanes|=n),Er(c.return,n,e),i||(p=null);break e}c=E.next}}else if(u.tag===18){if(p=u.return,p===null)throw Error(o(341));p.lanes|=n,c=p.alternate,c!==null&&(c.lanes|=n),Er(p,n,e),p=null}else p=u.child;if(p!==null)p.return=u;else for(p=u;p!==null;){if(p===e){p=null;break}if(u=p.sibling,u!==null){u.return=p.return,p=u;break}p=p.return}u=p}}function mi(e,t,n,i){e=null;for(var u=t,c=!1;u!==null;){if(!c){if((u.flags&524288)!==0)c=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var p=u.alternate;if(p===null)throw Error(o(387));if(p=p.memoizedProps,p!==null){var E=u.type;ca(u.pendingProps.value,p.value)||(e!==null?e.push(E):e=[E])}}else if(u===Ts.current){if(p=u.alternate,p===null)throw Error(o(387));p.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(nl):e=[nl])}u=u.return}e!==null&&br(t,e,n,i),t.flags|=262144}function ss(e){for(e=e.firstContext;e!==null;){var t=e.context;if(!ca(rn?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Wn(e){cl=e,on=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ht(e){return eo(cl,e)}function rs(e,t){return cl===null&&Wn(e),eo(e,t)}function eo(e,t){var n=rn?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},on===null){if(e===null)throw Error(o(308));on=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else on=on.next=t;return n}function Tr(){return{controller:new dv,data:new Map,refCount:0}}function gi(e){e.refCount--,e.refCount===0&&hv(pv,function(){e.controller.abort()})}function _r(){var e=ol.current;return e!==null?e:nt.pooledCache}function us(e,t){t===null?x(ol,ol.current):x(ol,t.pool)}function to(){var e=_r();return e===null?null:{parent:rn?ht._currentValue:ht._currentValue2,pool:e}}function aa(e){e.flags|=4}function ao(e,t){if(e!==null&&e.child===t.child)return!1;if((t.flags&16)!==0)return!0;for(e=t.child;e!==null;){if((e.flags&13878)!==0||(e.subtreeFlags&13878)!==0)return!0;e=e.sibling}return!1}function Mr(e,t,n,i){if(wt)for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)eu(e,n.stateNode);else if(!(n.tag===4||Gt&&n.tag===27)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(Un)for(var u=t.child;u!==null;){if(u.tag===5){var c=u.stateNode;n&&i&&(c=cf(c,u.type,u.memoizedProps)),eu(e,c)}else if(u.tag===6)c=u.stateNode,n&&i&&(c=of(c,u.memoizedProps)),eu(e,c);else if(u.tag!==4){if(u.tag===22&&u.memoizedState!==null)c=u.child,c!==null&&(c.return=u),Mr(e,u,!0,!0);else if(u.child!==null){u.child.return=u,u=u.child;continue}}if(u===t)break;for(;u.sibling===null;){if(u.return===null||u.return===t)return;u=u.return}u.sibling.return=u.return,u=u.sibling}}function no(e,t,n,i){if(Un)for(var u=t.child;u!==null;){if(u.tag===5){var c=u.stateNode;n&&i&&(c=cf(c,u.type,u.memoizedProps)),rf(e,c)}else if(u.tag===6)c=u.stateNode,n&&i&&(c=of(c,u.memoizedProps)),rf(e,c);else if(u.tag!==4){if(u.tag===22&&u.memoizedState!==null)c=u.child,c!==null&&(c.return=u),no(e,u,!(u.memoizedProps!==null&&u.memoizedProps.mode==="manual"),!0);else if(u.child!==null){u.child.return=u,u=u.child;continue}}if(u===t)break;for(;u.sibling===null;){if(u.return===null||u.return===t)return;u=u.return}u.sibling.return=u.return,u=u.sibling}}function lo(e,t){if(Un&&ao(e,t)){e=t.stateNode;var n=e.containerInfo,i=sf();no(i,t,!1,!1),e.pendingChildren=i,aa(t),zp(n,i)}}function xr(e,t,n,i){if(wt)e.memoizedProps!==i&&aa(t);else if(Un){var u=e.stateNode,c=e.memoizedProps;if((e=ao(e,t))||c!==i){var p=Ct.current;c=Ap(u,n,c,i,!e,null),c===u?t.stateNode=u:($o(c,n,i,p)&&aa(t),t.stateNode=c,e?Mr(c,t,!1,!1):aa(t))}else t.stateNode=u}}function Rr(e,t,n){if(tp(t,n)){if(e.flags|=16777216,!af(t,n))if(Uo())e.flags|=8192;else throw Ll=xs,pu}else e.flags&=-16777217}function io(e,t){if(Wp(t)){if(e.flags|=16777216,!Ef(t))if(Uo())e.flags|=8192;else throw Ll=xs,pu}else e.flags&=-16777217}function cs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?j():536870912,e.lanes|=t,Ql|=t)}function yi(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,i|=u.subtreeFlags&31457280,i|=u.flags&31457280,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,i|=u.subtreeFlags,i|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Th(e,t,n){var i=t.pendingProps;switch(Ne(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return ot(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),nn(ht),ut(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(wa(t)?aa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Na!==null&&(Gr(Na),Na=null))),lo(e,t),ot(t),null;case 26:if(ma){n=t.type;var u=t.memoizedState;return e===null?(aa(t),u!==null?(ot(t),io(t,u)):(ot(t),Rr(t,n,i))):u?u!==e.memoizedState?(aa(t),ot(t),io(t,u)):(ot(t),t.flags&=-16777217):(wt?e.memoizedProps!==i&&aa(t):xr(e,t,n,i),ot(t),Rr(t,n,i)),null}case 27:if(Gt){if(Nt(t),n=Nn.current,u=t.type,e!==null&&t.stateNode!=null)wt?e.memoizedProps!==i&&aa(t):xr(e,t,u,i);else{if(!i){if(t.stateNode===null)throw Error(o(166));return ot(t),null}e=Ct.current,wa(t)?Sl(t,e):(e=bf(u,i,n,e,!0),t.stateNode=e,aa(t))}return ot(t),null}case 5:if(Nt(t),n=t.type,e!==null&&t.stateNode!=null)xr(e,t,n,i);else{if(!i){if(t.stateNode===null)throw Error(o(166));return ot(t),null}e=Ct.current,wa(t)?Sl(t,e):(u=Ih(n,i,Nn.current,e,t),Mr(u,t,!1,!1),t.stateNode=u,$o(u,n,i,e)&&aa(t))}return ot(t),Rr(t,t.type,t.pendingProps),null;case 6:if(e&&t.stateNode!=null)n=e.memoizedProps,wt?n!==i&&aa(t):Un&&(n!==i?(t.stateNode=ef(i,Nn.current,Ct.current,t),aa(t)):t.stateNode=e.stateNode);else{if(typeof i!="string"&&t.stateNode===null)throw Error(o(166));if(e=Nn.current,n=Ct.current,wa(t)){if(!va)throw Error(o(176));if(e=t.stateNode,n=t.memoizedProps,i=null,u=Yt,u!==null)switch(u.tag){case 27:case 5:i=u.memoizedProps}Lp(e,n,t,i)||bt(t)}else t.stateNode=ef(i,e,n,t)}return ot(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=wa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(o(318));if(!va)throw Error(o(344));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Vp(u,t)}else Ga(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ot(t),u=!1}else Na!==null&&(Gr(Na),Na=null),u=!0;if(!u)return t.flags&256?(Re(t),t):(Re(t),null)}if(Re(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,u=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(u=i.alternate.memoizedState.cachePool.pool);var c=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==u&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),cs(t,t.updateQueue),ot(t),null;case 4:return ut(),lo(e,t),e===null&&Wh(t.stateNode.containerInfo),ot(t),null;case 10:return nn(t.type),ot(t),null;case 19:if(C(Tt),u=t.memoizedState,u===null)return ot(t),null;if(i=(t.flags&128)!==0,c=u.rendering,c===null)if(i)yi(u,!1);else{if(vt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=Pn(e),c!==null){for(t.flags|=128,yi(u,!1),e=c.updateQueue,t.updateQueue=e,cs(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Vo(n,e),n=n.sibling;return x(Tt,Tt.current&1|2),t.child}e=e.sibling}u.tail!==null&&Ua()>Oi&&(t.flags|=128,i=!0,yi(u,!1),t.lanes=4194304)}else{if(!i)if(e=Pn(c),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,cs(t,e),yi(u,!0),u.tail===null&&u.tailMode==="hidden"&&!c.alternate&&!qe)return ot(t),null}else 2*Ua()-u.renderingStartTime>Oi&&n!==536870912&&(t.flags|=128,i=!0,yi(u,!1),t.lanes=4194304);u.isBackwards?(c.sibling=t.child,t.child=c):(e=u.last,e!==null?e.sibling=c:t.child=c,u.last=c)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Ua(),t.sibling=null,e=Tt.current,x(Tt,i?e&1|2:e&1),t):(ot(t),null);case 22:case 23:return Re(t),En(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),n=t.updateQueue,n!==null&&cs(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&C(ol),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),nn(ht),ot(t),null;case 25:return null}throw Error(o(156,t.tag))}function _h(e,t){switch(Ne(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nn(ht),ut(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Nt(t),null;case 13:if(Re(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Ga()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return C(Tt),null;case 4:return ut(),null;case 10:return nn(t.type),null;case 22:case 23:return Re(t),En(),e!==null&&C(ol),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return nn(ht),null;case 25:return null;default:return null}}function so(e,t){switch(Ne(t),t.tag){case 3:nn(ht),ut();break;case 26:case 27:case 5:Nt(t);break;case 4:ut();break;case 13:Re(t);break;case 19:C(Tt);break;case 10:nn(t.type);break;case 22:case 23:Re(t),En(),e!==null&&C(ol);break;case 24:nn(ht)}}function Si(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var u=i.next;n=u;do{if((n.tag&e)===e){i=void 0;var c=n.create,p=n.inst;i=c(),p.destroy=i}n=n.next}while(n!==u)}}catch(E){We(t,t.return,E)}}function Mn(e,t,n){try{var i=t.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var c=u.next;i=c;do{if((i.tag&e)===e){var p=i.inst,E=p.destroy;if(E!==void 0){p.destroy=void 0,u=t;var z=n;try{E()}catch(Z){We(u,z,Z)}}}i=i.next}while(i!==c)}}catch(Z){We(t,t.return,Z)}}function ro(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{te(t,n)}catch(i){We(e,e.return,i)}}}function uo(e,t,n){n.props=Jn(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){We(e,t,i)}}function kn(e,t){try{var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var u=Ti(i);break;default:u=i}typeof n=="function"?e.refCleanup=n(u):n.current=u}}catch(c){We(e,t,c)}}function na(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(u){We(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(u){We(e,t,u)}else n.current=null}function co(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{mp(i,t,n,e)}catch(u){We(e,e.return,u)}}function oo(e,t,n){try{gp(e.stateNode,e.type,n,t,e)}catch(i){We(e,e.return,i)}}function fo(e){return e.tag===5||e.tag===3||(ma?e.tag===26:!1)||(Gt?e.tag===27:!1)||e.tag===4}function Ar(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&(!Gt||e.tag!==27)&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zr(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?Sp(n,e,t):pp(n,e);else if(!(i===4||Gt&&i===27)&&(e=e.child,e!==null))for(zr(e,t,n),e=e.sibling;e!==null;)zr(e,t,n),e=e.sibling}function os(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?yp(n,e,t):hp(n,e);else if(!(i===4||Gt&&i===27)&&(e=e.child,e!==null))for(os(e,t,n),e=e.sibling;e!==null;)os(e,t,n),e=e.sibling}function ho(e,t,n){e=e.containerInfo;try{uf(e,n)}catch(i){We(t,t.return,i)}}function Mh(e,t){for(Qh(e.containerInfo),Rt=t;Rt!==null;)if(e=Rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Rt=t;else for(;Rt!==null;){e=Rt;var n=e.alternate;switch(t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&n!==null){t=void 0;var i=e,u=n.memoizedProps;n=n.memoizedState;var c=i.stateNode;try{var p=Jn(i.type,u,i.elementType===i.type);t=c.getSnapshotBeforeUpdate(p,n),c.__reactInternalSnapshotBeforeUpdate=t}catch(E){We(i,i.return,E)}}break;case 3:(t&1024)!==0&&wt&&Rp(e.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=e.sibling,t!==null){t.return=e.return,Rt=t;break}Rt=e.return}return p=Uf,Uf=!1,p}function po(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ln(e,n),i&4&&Si(5,n);break;case 1:if(ln(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(E){We(n,n.return,E)}else{var u=Jn(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(E){We(n,n.return,E)}}i&64&&ro(n),i&512&&kn(n,n.return);break;case 3:if(ln(e,n),i&64&&(i=n.updateQueue,i!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=Ti(n.child.stateNode);break;case 1:e=n.child.stateNode}try{te(i,e)}catch(E){We(n,n.return,E)}}break;case 26:if(ma){ln(e,n),i&512&&kn(n,n.return);break}case 27:case 5:ln(e,n),t===null&&i&4&&co(n),i&512&&kn(n,n.return);break;case 12:ln(e,n);break;case 13:ln(e,n),i&4&&mo(e,n);break;case 22:if(u=n.memoizedState!==null||fn,!u){t=t!==null&&t.memoizedState!==null||pt;var c=fn,p=pt;fn=u,(pt=t)&&!p?xn(e,n,(n.subtreeFlags&8772)!==0):ln(e,n),fn=c,pt=p}i&512&&(n.memoizedProps.mode==="manual"?kn(n,n.return):na(n,n.return));break;default:ln(e,n)}}function vo(e){var t=e.alternate;t!==null&&(e.alternate=null,vo(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ep(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ca(e,t,n){for(n=n.child;n!==null;)Cr(e,t,n),n=n.sibling}function Cr(e,t,n){if(ua&&typeof ua.onCommitFiberUnmount=="function")try{ua.onCommitFiberUnmount(xi,n)}catch{}switch(n.tag){case 26:if(ma){pt||na(n,t),Ca(e,t,n),n.memoizedState?gf(n.memoizedState):n.stateNode&&Sf(n.stateNode);break}case 27:if(Gt){pt||na(n,t);var i=Et,u=oa;Et=n.stateNode,Ca(e,t,n),tv(n.stateNode),Et=i,oa=u;break}case 5:pt||na(n,t);case 6:if(wt){if(i=Et,u=oa,Et=null,Ca(e,t,n),Et=i,oa=u,Et!==null)if(oa)try{bp(Et,n.stateNode)}catch(c){We(n,t,c)}else try{Ep(Et,n.stateNode)}catch(c){We(n,t,c)}}else Ca(e,t,n);break;case 18:wt&&Et!==null&&(oa?Xp(Et,n.stateNode):Fp(Et,n.stateNode));break;case 4:wt?(i=Et,u=oa,Et=n.stateNode.containerInfo,oa=!0,Ca(e,t,n),Et=i,oa=u):(Un&&ho(n.stateNode,n,sf()),Ca(e,t,n));break;case 0:case 11:case 14:case 15:pt||Mn(2,n,t),pt||Mn(4,n,t),Ca(e,t,n);break;case 1:pt||(na(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&uo(n,t,i)),Ca(e,t,n);break;case 21:Ca(e,t,n);break;case 22:pt||na(n,t),pt=(i=pt)||n.memoizedState!==null,Ca(e,t,n),pt=i;break;default:Ca(e,t,n)}}function mo(e,t){if(va&&t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Yp(e)}catch(n){We(t,t.return,n)}}function xh(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Cf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Cf),t;default:throw Error(o(435,e.tag))}}function Ur(e,t){var n=xh(e);t.forEach(function(i){var u=Oh.bind(null,e,i);n.has(i)||(n.add(i),i.then(u,u))})}function It(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var u=n[i],c=e,p=t;if(wt){var E=p;e:for(;E!==null;){switch(E.tag){case 27:case 5:Et=E.stateNode,oa=!1;break e;case 3:Et=E.stateNode.containerInfo,oa=!0;break e;case 4:Et=E.stateNode.containerInfo,oa=!0;break e}E=E.return}if(Et===null)throw Error(o(160));Cr(c,p,u),Et=null,oa=!1}else Cr(c,p,u);c=u.alternate,c!==null&&(c.return=null),u.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)go(t,e),t=t.sibling}function go(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:It(t,e),la(e),i&4&&(Mn(3,e,e.return),Si(3,e),Mn(5,e,e.return));break;case 1:It(t,e),la(e),i&512&&(pt||n===null||na(n,n.return)),i&64&&fn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:if(ma){var u=Da;It(t,e),la(e),i&512&&(pt||n===null||na(n,n.return)),i&4&&(i=n!==null?n.memoizedState:null,t=e.memoizedState,n===null?t===null?e.stateNode===null?e.stateNode=Ip(u,e.type,e.memoizedProps,e):yf(u,e.type,e.stateNode):e.stateNode=mf(u,t,e.memoizedProps):i!==t?(i===null?n.stateNode!==null&&Sf(n.stateNode):gf(i),t===null?yf(u,e.type,e.stateNode):mf(u,t,e.memoizedProps)):t===null&&e.stateNode!==null&&oo(e,e.memoizedProps,n.memoizedProps));break}case 27:if(Gt&&i&4&&e.alternate===null){u=e.stateNode;var c=e.memoizedProps;try{$p(u),ev(e.type,c,u,e)}catch(ae){We(e,e.return,ae)}}case 5:if(It(t,e),la(e),i&512&&(pt||n===null||na(n,n.return)),wt){if(e.flags&32){t=e.stateNode;try{lf(t)}catch(ae){We(e,e.return,ae)}}i&4&&e.stateNode!=null&&(t=e.memoizedProps,oo(e,t,n!==null?n.memoizedProps:t)),i&1024&&(yu=!0)}break;case 6:if(It(t,e),la(e),i&4&&wt){if(e.stateNode===null)throw Error(o(162));i=e.memoizedProps,n=n!==null?n.memoizedProps:i,t=e.stateNode;try{vp(t,n,i)}catch(ae){We(e,e.return,ae)}}break;case 3:if(ma?(Jp(),u=Da,Da=lu(t.containerInfo),It(t,e),Da=u):It(t,e),la(e),i&4){if(wt&&va&&n!==null&&n.memoizedState.isDehydrated)try{Zp(t.containerInfo)}catch(ae){We(e,e.return,ae)}if(Un){i=t.containerInfo,n=t.pendingChildren;try{uf(i,n)}catch(ae){We(e,e.return,ae)}}}yu&&(yu=!1,yo(e));break;case 4:ma?(n=Da,Da=lu(e.stateNode.containerInfo),It(t,e),la(e),Da=n):(It(t,e),la(e)),i&4&&Un&&ho(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:It(t,e),la(e);break;case 13:It(t,e),la(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Tu=Ua()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ur(e,i)));break;case 22:i&512&&(pt||n===null||na(n,n.return)),u=e.memoizedState!==null;var p=n!==null&&n.memoizedState!==null,E=fn,z=pt;if(fn=E||u,pt=z||p,It(t,e),pt=z,fn=E,la(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=u?t._visibility&-2:t._visibility|1,u&&(t=fn||pt,n===null||p||t||_l(e)),wt&&(e.memoizedProps===null||e.memoizedProps.mode!=="manual"))){e:if(n=null,wt)for(t=e;;){if(t.tag===5||ma&&t.tag===26||Gt&&t.tag===27){if(n===null){p=n=t;try{c=p.stateNode,u?Tp(c):Mp(p.stateNode,p.memoizedProps)}catch(ae){We(p,p.return,ae)}}}else if(t.tag===6){if(n===null){p=t;try{var Z=p.stateNode;u?_p(Z):xp(Z,p.memoizedProps)}catch(ae){We(p,p.return,ae)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Ur(e,n))));break;case 19:It(t,e),la(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ur(e,i)));break;case 21:break;default:It(t,e),la(e)}}function la(e){var t=e.flags;if(t&2){try{if(wt&&(!Gt||e.tag!==27)){e:{for(var n=e.return;n!==null;){if(fo(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 27:if(Gt){var u=i.stateNode,c=Ar(e);os(e,c,u);break}case 5:var p=i.stateNode;i.flags&32&&(lf(p),i.flags&=-33);var E=Ar(e);os(e,E,p);break;case 3:case 4:var z=i.stateNode.containerInfo,Z=Ar(e);zr(e,Z,z);break;default:throw Error(o(161))}}}catch(ae){We(e,e.return,ae)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yo(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;yo(t),t.tag===5&&t.flags&1024&&lp(t.stateNode),e=e.sibling}}function ln(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)po(e,t.alternate,t),t=t.sibling}function _l(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Mn(4,t,t.return),_l(t);break;case 1:na(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&uo(t,t.return,n),_l(t);break;case 26:case 27:case 5:na(t,t.return),_l(t);break;case 22:na(t,t.return),t.memoizedState===null&&_l(t);break;default:_l(t)}e=e.sibling}}function xn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,u=e,c=t,p=c.flags;switch(c.tag){case 0:case 11:case 15:xn(u,c,n),Si(4,c);break;case 1:if(xn(u,c,n),i=c,u=i.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(Z){We(i,i.return,Z)}if(i=c,u=i.updateQueue,u!==null){var E=i.stateNode;try{var z=u.shared.hiddenCallbacks;if(z!==null)for(u.shared.hiddenCallbacks=null,u=0;u<z.length;u++)we(z[u],E)}catch(Z){We(i,i.return,Z)}}n&&p&64&&ro(c),kn(c,c.return);break;case 26:case 27:case 5:xn(u,c,n),n&&i===null&&p&4&&co(c),kn(c,c.return);break;case 12:xn(u,c,n);break;case 13:xn(u,c,n),n&&p&4&&mo(u,c);break;case 22:c.memoizedState===null&&xn(u,c,n),kn(c,c.return);break;default:xn(u,c,n)}t=t.sibling}}function Nr(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&gi(n))}function Dr(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gi(e))}function Rn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)So(e,t,n,i),t=t.sibling}function So(e,t,n,i){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Rn(e,t,n,i),u&2048&&Si(9,t);break;case 3:Rn(e,t,n,i),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gi(e)));break;case 12:if(u&2048){Rn(e,t,n,i),e=t.stateNode;try{var c=t.memoizedProps,p=c.id,E=c.onPostCommit;typeof E=="function"&&E(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){We(t,t.return,z)}}else Rn(e,t,n,i);break;case 23:break;case 22:c=t.stateNode,t.memoizedState!==null?c._visibility&4?Rn(e,t,n,i):Ei(e,t):c._visibility&4?Rn(e,t,n,i):(c._visibility|=4,Ml(e,t,n,i,(t.subtreeFlags&10256)!==0)),u&2048&&Nr(t.alternate,t);break;case 24:Rn(e,t,n,i),u&2048&&Dr(t.alternate,t);break;default:Rn(e,t,n,i)}}function Ml(e,t,n,i,u){for(u=u&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var c=e,p=t,E=n,z=i,Z=p.flags;switch(p.tag){case 0:case 11:case 15:Ml(c,p,E,z,u),Si(8,p);break;case 23:break;case 22:var ae=p.stateNode;p.memoizedState!==null?ae._visibility&4?Ml(c,p,E,z,u):Ei(c,p):(ae._visibility|=4,Ml(c,p,E,z,u)),u&&Z&2048&&Nr(p.alternate,p);break;case 24:Ml(c,p,E,z,u),u&&Z&2048&&Dr(p.alternate,p);break;default:Ml(c,p,E,z,u)}t=t.sibling}}function Ei(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,u=i.flags;switch(i.tag){case 22:Ei(n,i),u&2048&&Nr(i.alternate,i);break;case 24:Ei(n,i),u&2048&&Dr(i.alternate,i);break;default:Ei(n,i)}t=t.sibling}}function $n(e){if(e.subtreeFlags&Fl)for(e=e.child;e!==null;)Eo(e),e=e.sibling}function Eo(e){switch(e.tag){case 26:$n(e),e.flags&Fl&&(e.memoizedState!==null?kp(Da,e.memoizedState,e.memoizedProps):nf(e.type,e.memoizedProps));break;case 5:$n(e),e.flags&Fl&&nf(e.type,e.memoizedProps);break;case 3:case 4:if(ma){var t=Da;Da=lu(e.stateNode.containerInfo),$n(e),Da=t}else $n(e);break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Fl,Fl=16777216,$n(e),Fl=t):$n(e));break;default:$n(e)}}function bo(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function bi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Rt=i,_o(i,e)}bo(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)To(e),e=e.sibling}function To(e){switch(e.tag){case 0:case 11:case 15:bi(e),e.flags&2048&&Mn(9,e,e.return);break;case 3:bi(e);break;case 12:bi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,fs(e)):bi(e);break;default:bi(e)}}function fs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Rt=i,_o(i,e)}bo(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Mn(8,t,t.return),fs(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,fs(t));break;default:fs(t)}e=e.sibling}}function _o(e,t){for(;Rt!==null;){var n=Rt;switch(n.tag){case 0:case 11:case 15:Mn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:gi(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Rt=i;else e:for(n=e;Rt!==null;){i=Rt;var u=i.sibling,c=i.return;if(vo(i),i===n){Rt=null;break e}if(u!==null){u.return=c,Rt=u;break e}Rt=c}}}function Or(e){var t=tf(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(o(364));return t}if(e=rp(e),e===null)throw Error(o(362));return e.stateNode.current}function Br(e,t){var n=e.tag;switch(t.$$typeof){case Us:if(e.type===t.value)return!0;break;case Ns:e:{for(t=t.value,e=[e,0],n=0;n<e.length;){var i=e[n++],u=i.tag,c=e[n++],p=t[c];if(u!==5&&u!==26&&u!==27||!Mi(i)){for(;p!=null&&Br(i,p);)c++,p=t[c];if(c===t.length){t=!0;break e}else for(i=i.child;i!==null;)e.push(i,c),i=i.sibling}}t=!1}return t;case Ds:if((n===5||n===26||n===27)&&op(e.stateNode,t.value))return!0;break;case Bs:if((n===5||n===6||n===26||n===27)&&(e=cp(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case Os:if((n===5||n===26||n===27)&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Hr(e){switch(e.$$typeof){case Us:return"<"+(m(e.value)||"Unknown")+">";case Ns:return":has("+(Hr(e)||"")+")";case Ds:return'[role="'+e.value+'"]';case Bs:return'"'+e.value+'"';case Os:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function Mo(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var u=e[i++],c=u.tag,p=e[i++],E=t[p];if(c!==5&&c!==26&&c!==27||!Mi(u)){for(;E!=null&&Br(u,E);)p++,E=t[p];if(p===t.length)n.push(u);else for(u=u.child;u!==null;)e.push(u,p),u=u.sibling}}return n}function wr(e,t){if(!_i)throw Error(o(363));e=Or(e),e=Mo(e,t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++],u=i.tag;if(u===5||u===26||u===27)Mi(i)||t.push(i.stateNode);else for(i=i.child;i!==null;)e.push(i),i=i.sibling}return t}function ia(){if(($e&2)!==0&&je!==0)return je&-je;if(Ae.T!==null){var e=Gl;return e!==0?e:gn()}return kh()}function xo(){ba===0&&(ba=(je&536870912)===0||qe?O():536870912);var e=Ea.current;return e!==null&&(e.flags|=32),ba}function Zt(e,t,n){(e===nt&&lt===2||e.cancelPendingCommit!==null)&&(xl(e,0),sn(e,je,ba,!1)),se(e,n),(($e&2)===0||e!==nt)&&(e===nt&&(($e&2)===0&&(fl|=n),vt===4&&sn(e,je,ba,!1)),Xt(e))}function Ro(e,t,n){if(($e&6)!==0)throw Error(o(327));var i=!n&&(t&60)===0&&(t&e.expiredLanes)===0||G(e,t),u=i?zh(e,t):Vr(e,t,!0),c=i;do{if(u===0){Xl&&!i&&sn(e,t,0,!1);break}else if(u===6)sn(e,t,0,!dn);else{if(n=e.current.alternate,c&&!Rh(n)){u=Vr(e,t,!1),c=!1;continue}if(u===2){if(c=t,e.errorRecoveryDisabledLanes&c)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var E=e;u=Di;var z=va&&E.current.memoizedState.isDehydrated;if(z&&(xl(E,p).flags|=256),p=Vr(E,p,!1),p!==2){if(Su&&!z){E.errorRecoveryDisabledLanes|=c,fl|=c,u=4;break e}c=Ia,Ia=u,c!==null&&Gr(c)}u=p}if(c=!1,u!==2)continue}}if(u===1){xl(e,0),sn(e,t,0,!0);break}e:{switch(i=e,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194176)===t){sn(i,t,ba,!dn);break e}break;case 2:Ia=null;break;case 3:case 5:break;default:throw Error(o(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(c=Tu+300-Ua(),10<c)){if(sn(i,t,ba,!dn),F(i,0)!==0)break e;i.timeoutHandle=Ph(Ao.bind(null,i,n,Ia,Hs,bu,t,ba,fl,Ql,dn,2,-0,0),c);break e}Ao(i,n,Ia,Hs,bu,t,ba,fl,Ql,dn,0,-0,0)}}break}while(!0);Xt(e)}function Gr(e){Ia===null?Ia=e:Ia.push.apply(Ia,e)}function Ao(e,t,n,i,u,c,p,E,z,Z,ae,ue,ce){var Ue=t.subtreeFlags;if((Ue&8192||(Ue&16785408)===16785408)&&(ap(),Eo(t),t=np(),t!==null)){e.cancelPendingCommit=t(wo.bind(null,e,n,i,u,p,E,z,1,ue,ce)),sn(e,c,p,!Z);return}wo(e,n,i,u,p,E,z,ae,ue,ce)}function Rh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var u=n[i],c=u.getSnapshot;u=u.value;try{if(!ca(c(),u))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t,n,i){t&=~Eu,t&=~fl,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var u=t;0<u;){var c=31-ra(u),p=1<<c;i[c]=-1,u&=~p}n!==0&&ee(e,n,t)}function zo(){return($e&6)===0?(La(0),!1):!0}function jr(){if(He!==null){if(lt===0)var e=He.return;else e=He,on=cl=null,P(e),Vl=null,Ci=0,e=He;for(;e!==null;)so(e.alternate,e),e=e.return;He=null}}function xl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==tu&&(e.timeoutHandle=tu,Jh(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),jr(),nt=e,He=n=An(e.current,null),je=t,lt=0,fa=null,dn=!1,Xl=G(e,t),Su=!1,Ql=ba=Eu=fl=Hn=vt=0,Ia=Di=null,bu=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var u=31-ra(i),c=1<<u;t|=e[u],i&=~c}return hn=t,ja(),n}function Co(e,t){De=null,Ae.H=Ka,t===zi?(t=Qt(),lt=3):t===pu?(t=Qt(),lt=4):lt=t===Af?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,fa=t,He===null&&(vt=1,is(e,me(t,e.current)))}function Uo(){var e=Ea.current;return e===null?!0:(je&4194176)===je?Qa===null:(je&62914560)===je||(je&536870912)!==0?e===Qa:!1}function No(){var e=Ae.H;return Ae.H=Ka,e===null?Ka:e}function Do(){var e=Ae.A;return Ae.A=vv,e}function Lr(){vt=4,dn||(je&4194176)!==je&&Ea.current!==null||(Xl=!0),(Hn&134217727)===0&&(fl&134217727)===0||nt===null||sn(nt,je,ba,!1)}function Vr(e,t,n){var i=$e;$e|=2;var u=No(),c=Do();(nt!==e||je!==t)&&(Hs=null,xl(e,t)),t=!1;var p=vt;e:do try{if(lt!==0&&He!==null){var E=He,z=fa;switch(lt){case 8:jr(),p=6;break e;case 3:case 2:case 6:Ea.current===null&&(t=!0);var Z=lt;if(lt=0,fa=null,Rl(e,E,z,Z),n&&Xl){p=0;break e}break;default:Z=lt,lt=0,fa=null,Rl(e,E,z,Z)}}Ah(),p=vt;break}catch(ae){Co(e,ae)}while(!0);return t&&e.shellSuspendCounter++,on=cl=null,$e=i,Ae.H=u,Ae.A=c,He===null&&(nt=null,je=0,ja()),p}function Ah(){for(;He!==null;)Oo(He)}function zh(e,t){var n=$e;$e|=2;var i=No(),u=Do();nt!==e||je!==t?(Hs=null,Oi=Ua()+500,xl(e,t)):Xl=G(e,t);e:do try{if(lt!==0&&He!==null){t=He;var c=fa;t:switch(lt){case 1:lt=0,fa=null,Rl(e,t,c,1);break;case 2:if($t(c)){lt=0,fa=null,Bo(t);break}t=function(){lt===2&&nt===e&&(lt=7),Xt(e)},c.then(t,t);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:$t(c)?(lt=0,fa=null,Bo(t)):(lt=0,fa=null,Rl(e,t,c,7));break;case 5:var p=null;switch(He.tag){case 26:p=He.memoizedState;case 5:case 27:var E=He,z=E.type,Z=E.pendingProps;if(p?Ef(p):af(z,Z)){lt=0,fa=null;var ae=E.sibling;if(ae!==null)He=ae;else{var ue=E.return;ue!==null?(He=ue,ds(ue)):He=null}break t}}lt=0,fa=null,Rl(e,t,c,5);break;case 6:lt=0,fa=null,Rl(e,t,c,6);break;case 8:jr(),vt=6;break e;default:throw Error(o(462))}}Ch();break}catch(ce){Co(e,ce)}while(!0);return on=cl=null,Ae.H=i,Ae.A=u,$e=n,He!==null?0:(nt=null,je=0,ja(),vt)}function Ch(){for(;He!==null&&!lv();)Oo(He)}function Oo(e){var t=$c(e.alternate,e,hn);e.memoizedProps=e.pendingProps,t===null?ds(e):He=t}function Bo(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Kc(n,t,t.pendingProps,t.type,void 0,je);break;case 11:t=Kc(n,t,t.pendingProps,t.type.render,t.ref,je);break;case 5:P(t);default:so(n,t),t=He=Vo(t,hn),t=$c(n,t,hn)}e.memoizedProps=e.pendingProps,t===null?ds(e):He=t}function Rl(e,t,n,i){on=cl=null,P(t),Vl=null,Ci=0;var u=t.return;try{if(Eh(e,u,t,n,je)){vt=1,is(e,me(n,e.current)),He=null;return}}catch(c){if(u!==null)throw He=u,c;vt=1,is(e,me(n,e.current)),He=null;return}t.flags&32768?(qe||i===1?e=!0:Xl||(je&536870912)!==0?e=!1:(dn=e=!0,(i===2||i===3||i===6)&&(i=Ea.current,i!==null&&i.tag===13&&(i.flags|=16384))),Ho(t,e)):ds(t)}function ds(e){var t=e;do{if((t.flags&32768)!==0){Ho(t,dn);return}e=t.return;var n=Th(t.alternate,t,hn);if(n!==null){He=n;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);vt===0&&(vt=5)}function Ho(e,t){do{var n=_h(e.alternate,e);if(n!==null){n.flags&=32767,He=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){He=e;return}He=e=n}while(e!==null);vt=6,He=null}function wo(e,t,n,i,u,c,p,E,z,Z){var ae=Ae.T,ue=al();try{Pt(2),Ae.T=null,Uh(e,t,n,i,ue,u,c,p,E,z,Z)}finally{Ae.T=ae,Pt(ue)}}function Uh(e,t,n,i,u,c,p,E){do el();while(dl!==null);if(($e&6)!==0)throw Error(o(327));var z=e.finishedWork;if(i=e.finishedLanes,z===null)return null;if(e.finishedWork=null,e.finishedLanes=0,z===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var Z=z.lanes|z.childLanes;if(Z|=cu,ve(e,i,Z,c,p,E),e===nt&&(He=nt=null,je=0),(z.subtreeFlags&10256)===0&&(z.flags&10256)===0||ws||(ws=!0,_u=Z,Mu=n,Bh(ru,function(){return el(),null})),n=(z.flags&15990)!==0,(z.subtreeFlags&15990)!==0||n?(n=Ae.T,Ae.T=null,c=al(),Pt(2),p=$e,$e|=4,Mh(e,z),go(z,e),Kh(e.containerInfo),e.current=z,po(e,z.alternate,z),iv(),$e=p,Pt(c),Ae.T=n):e.current=z,ws?(ws=!1,dl=e,Bi=i):Go(e,Z),Z=e.pendingLanes,Z===0&&(wn=null),X(z.stateNode),Xt(e),t!==null)for(u=e.onRecoverableError,z=0;z<t.length;z++)Z=t[z],u(Z.value,{componentStack:Z.stack});return(Bi&3)!==0&&el(),Z=e.pendingLanes,(i&4194218)!==0&&(Z&42)!==0?e===xu?Hi++:(Hi=0,xu=e):Hi=0,La(0),null}function Go(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gi(t)))}function el(){if(dl!==null){var e=dl,t=_u;_u=0;var n=Se(Bi),i=32>n?32:n;n=Ae.T;var u=al();try{if(Pt(i),Ae.T=null,dl===null)var c=!1;else{i=Mu,Mu=null;var p=dl,E=Bi;if(dl=null,Bi=0,($e&6)!==0)throw Error(o(331));var z=$e;if($e|=4,To(p.current),So(p,p.current,E,i),$e=z,La(0,!1),ua&&typeof ua.onPostCommitFiberRoot=="function")try{ua.onPostCommitFiberRoot(xi,p)}catch{}c=!0}return c}finally{Pt(u),Ae.T=n,Go(e,t)}}return!1}function jo(e,t,n){t=me(n,t),t=fr(e.stateNode,t,2),e=at(e,t,2),e!==null&&(se(e,2),Xt(e))}function We(e,t,n){if(e.tag===3)jo(e,e,n);else for(;t!==null;){if(t.tag===3){jo(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wn===null||!wn.has(i))){e=me(n,e),n=Vc(2),i=at(t,n,2),i!==null&&(qc(n,i,t,e),se(i,2),Xt(i));break}}t=t.return}}function qr(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new mv;var u=new Set;i.set(t,u)}else u=i.get(t),u===void 0&&(u=new Set,i.set(t,u));u.has(n)||(Su=!0,u.add(n),e=Nh.bind(null,e,t,n),t.then(e,e))}function Nh(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,nt===e&&(je&n)===n&&(vt===4||vt===3&&(je&62914560)===je&&300>Ua()-Tu?($e&2)===0&&xl(e,0):Eu|=n,Ql===je&&(Ql=0)),Xt(e)}function Lo(e,t){t===0&&(t=j()),e=kt(e,t),e!==null&&(se(e,t),Xt(e))}function Dh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Lo(e,n)}function Oh(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(o(314))}i!==null&&i.delete(t),Lo(e,n)}function Bh(e,t){return Ss(e,t)}function Hh(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function An(e,t){var n=e.alternate;return n===null?(n=s(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vo(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function hs(e,t,n,i,u,c){var p=0;if(i=e,typeof e=="function")Zr(e)&&(p=1);else if(typeof e=="string")p=ma&&Gt?pf(e,n,Ct.current)?26:Tf(e)?27:5:ma?pf(e,n,Ct.current)?26:5:Gt&&Tf(e)?27:5;else e:switch(e){case zl:return tl(n.children,u,c,t);case Ko:p=8,u|=24;break;case Kr:return e=s(12,n,t,u|2),e.elementType=Kr,e.lanes=c,e;case Pr:return e=s(13,n,t,u),e.elementType=Pr,e.lanes=c,e;case Jr:return e=s(19,n,t,u),e.elementType=Jr,e.lanes=c,e;case Po:return qo(n,u,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Lh:case zn:p=10;break e;case Io:p=9;break e;case Ir:p=11;break e;case Wr:p=14;break e;case Cn:p=16,i=null;break e}p=29,n=Error(o(130,e===null?"null":typeof e,"")),i=null}return t=s(p,n,t,u),t.elementType=e,t.type=i,t.lanes=c,t}function tl(e,t,n,i){return e=s(7,e,i,t),e.lanes=n,e}function qo(e,t,n,i){e=s(22,e,i,t),e.elementType=Po,e.lanes=n;var u={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var c=u._current;if(c===null)throw Error(o(456));if((u._pendingVisibility&2)===0){var p=kt(c,2);p!==null&&(u._pendingVisibility|=2,Zt(p,c,2))}},attach:function(){var c=u._current;if(c===null)throw Error(o(456));if((u._pendingVisibility&2)!==0){var p=kt(c,2);p!==null&&(u._pendingVisibility&=-3,Zt(p,c,2))}}};return e.stateNode=u,e}function Yr(e,t,n){return e=s(6,e,null,t),e.lanes=n,e}function Fr(e,t,n){return t=s(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wh(e,t,n,i,u,c,p,E){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=tu,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=q(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q(0),this.hiddenUpdates=q(null),this.identifierPrefix=i,this.onUncaughtError=u,this.onCaughtError=c,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Zo(e,t,n,i,u,c,p,E,z,Z,ae,ue){return e=new wh(e,t,n,p,E,z,Z,ue),t=1,c===!0&&(t|=24),c=s(3,null,null,t),e.current=c,c.stateNode=e,t=Tr(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:i,isDehydrated:n,cache:t},Sn(c),e}function Yo(e){return e?(e=Nl,e):Nl}function Fo(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=A(t),e=e!==null?H(e):null,e===null?null:Ti(e.stateNode)}function Xo(e,t,n,i,u,c){u=Yo(u),i.context===null?i.context=u:i.pendingContext=u,i=Dt(t),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=at(e,i,t),n!==null&&(Zt(n,e,t),ha(n,e,t))}function Qo(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xr(e,t){Qo(e,t),(e=e.alternate)&&Qo(e,t)}var Be={},Gh=lc(),sa=Od(),Qr=Object.assign,jh=Symbol.for("react.element"),ps=Symbol.for("react.transitional.element"),Al=Symbol.for("react.portal"),zl=Symbol.for("react.fragment"),Ko=Symbol.for("react.strict_mode"),Kr=Symbol.for("react.profiler"),Lh=Symbol.for("react.provider"),Io=Symbol.for("react.consumer"),zn=Symbol.for("react.context"),Ir=Symbol.for("react.forward_ref"),Pr=Symbol.for("react.suspense"),Jr=Symbol.for("react.suspense_list"),Wr=Symbol.for("react.memo"),Cn=Symbol.for("react.lazy"),Po=Symbol.for("react.offscreen"),Vh=Symbol.for("react.memo_cache_sentinel"),Jo=Symbol.iterator,qh=Symbol.for("react.client.reference"),Ae=Gh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,kr,Wo,$r=!1,vs=Array.isArray,Zh=l.rendererVersion,Yh=l.rendererPackageName,ko=l.extraDevToolsConfig,Ti=l.getPublicInstance,Fh=l.getRootHostContext,Xh=l.getChildHostContext,Qh=l.prepareForCommit,Kh=l.resetAfterCommit,Ih=l.createInstance,eu=l.appendInitialChild,$o=l.finalizeInitialChildren,ms=l.shouldSetTextContent,ef=l.createTextInstance,Ph=l.scheduleTimeout,Jh=l.cancelTimeout,tu=l.noTimeout,rn=l.isPrimaryRenderer;l.warnsIfNotActing;var wt=l.supportsMutation,Un=l.supportsPersistence,va=l.supportsHydration,tf=l.getInstanceFromNode;l.beforeActiveInstanceBlur,l.afterActiveInstanceBlur;var Wh=l.preparePortalMount;l.prepareScopeUpdate,l.getInstanceFromScope;var Pt=l.setCurrentUpdatePriority,al=l.getCurrentUpdatePriority,kh=l.resolveUpdatePriority;l.resolveEventType,l.resolveEventTimeStamp;var $h=l.shouldAttemptEagerTransition,ep=l.detachDeletedInstance;l.requestPostPaintCallback;var tp=l.maySuspendCommit,af=l.preloadInstance,ap=l.startSuspendingCommit,nf=l.suspendInstance,np=l.waitForCommitToBeReady,Cl=l.NotPendingTransition,nl=l.HostTransitionContext,lp=l.resetFormInstance;l.bindToConsole;var ip=l.supportsMicrotasks,sp=l.scheduleMicrotask,_i=l.supportsTestSelectors,rp=l.findFiberRoot,up=l.getBoundingRect,cp=l.getTextContent,Mi=l.isHiddenSubtree,op=l.matchAccessibilityRole,fp=l.setFocusIfFocusable,dp=l.setupIntersectionObserver,hp=l.appendChild,pp=l.appendChildToContainer,vp=l.commitTextUpdate,mp=l.commitMount,gp=l.commitUpdate,yp=l.insertBefore,Sp=l.insertInContainerBefore,Ep=l.removeChild,bp=l.removeChildFromContainer,lf=l.resetTextContent,Tp=l.hideInstance,_p=l.hideTextInstance,Mp=l.unhideInstance,xp=l.unhideTextInstance,Rp=l.clearContainer,Ap=l.cloneInstance,sf=l.createContainerChildSet,rf=l.appendChildToContainerChildSet,zp=l.finalizeContainerChildren,uf=l.replaceContainerChildren,cf=l.cloneHiddenInstance,of=l.cloneHiddenTextInstance,au=l.isSuspenseInstancePending,nu=l.isSuspenseInstanceFallback,Cp=l.getSuspenseInstanceFallbackErrorDetails,Up=l.registerSuspenseInstanceRetry,Np=l.canHydrateFormStateMarker,Dp=l.isFormStateMarkerMatching,ff=l.getNextHydratableSibling,df=l.getFirstHydratableChild,Op=l.getFirstHydratableChildWithinContainer,Bp=l.getFirstHydratableChildWithinSuspenseInstance,Hp=l.canHydrateInstance,wp=l.canHydrateTextInstance,Gp=l.canHydrateSuspenseInstance,jp=l.hydrateInstance,Lp=l.hydrateTextInstance,Vp=l.hydrateSuspenseInstance,qp=l.getNextHydratableInstanceAfterSuspenseInstance,Zp=l.commitHydratedContainer,Yp=l.commitHydratedSuspenseInstance,Fp=l.clearSuspenseBoundary,Xp=l.clearSuspenseBoundaryFromContainer,hf=l.shouldDeleteUnhydratedTailInstances;l.diffHydratedPropsForDevWarnings,l.diffHydratedTextForDevWarnings,l.describeHydratableInstanceForDevWarnings;var Qp=l.validateHydratableInstance,Kp=l.validateHydratableTextInstance,ma=l.supportsResources,pf=l.isHostHoistableType,lu=l.getHoistableRoot,vf=l.getResource,mf=l.acquireResource,gf=l.releaseResource,Ip=l.hydrateHoistable,yf=l.mountHoistable,Sf=l.unmountHoistable,Pp=l.createHoistableInstance,Jp=l.prepareToCommitHoistables,Wp=l.mayResourceSuspendCommit,Ef=l.preloadResource,kp=l.suspendResource,Gt=l.supportsSingletons,bf=l.resolveSingletonInstance,$p=l.clearSingleton,ev=l.acquireSingletonInstance,tv=l.releaseSingletonInstance,Tf=l.isHostSingletonType,iu=[],Ul=-1,Nl={},ra=Math.clz32?Math.clz32:Y,av=Math.log,nv=Math.LN2,gs=128,ys=4194304,Ss=sa.unstable_scheduleCallback,su=sa.unstable_cancelCallback,lv=sa.unstable_shouldYield,iv=sa.unstable_requestPaint,Ua=sa.unstable_now,_f=sa.unstable_ImmediatePriority,sv=sa.unstable_UserBlockingPriority,ru=sa.unstable_NormalPriority,rv=sa.unstable_IdlePriority,uv=sa.log,cv=sa.unstable_setDisableYieldValue,xi=null,ua=null,ca=typeof Object.is=="function"?Object.is:he,Mf=new WeakMap,Dl=[],Ol=0,Es=null,bs=0,ga=[],ya=0,ll=null,un=1,cn="",Ct=V(null),Ri=V(null),Nn=V(null),Ts=V(null),Yt=null,jt=null,qe=!1,Na=null,Xa=!1,uu=Error(o(519)),Sa=[],Bl=0,cu=0,_s=null,Hl=null,ou=!1,Ms=!1,fu=!1,wl=0,Ai=null,du=0,Gl=0,jl=null,Dn=!1,hu=!1,ov=Object.prototype.hasOwnProperty,zi=Error(o(460)),pu=Error(o(474)),xs={then:function(){}},Ll=null,Vl=null,Ci=0,il=tn(!0),xf=tn(!1),ql=V(null),Rs=V(0),Ea=V(null),Qa=null,Tt=V(0),On=0,De=null,ke=null,St=null,As=!1,Zl=!1,sl=!1,zs=0,Ui=0,Yl=null,fv=0,vu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ka={readContext:Ht,use:ne,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct};Ka.useCacheRefresh=ct,Ka.useMemoCache=ct,Ka.useHostTransitionStatus=ct,Ka.useFormState=ct,Ka.useActionState=ct,Ka.useOptimistic=ct;var rl={readContext:Ht,use:ne,useCallback:function(e,t){return W().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:Tc,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,as(4194308,4,xc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return as(4194308,4,e,t)},useInsertionEffect:function(e,t){as(4,2,e,t)},useMemo:function(e,t){var n=W();t=t===void 0?null:t;var i=e();if(sl){oe(!0);try{e()}finally{oe(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=W();if(n!==void 0){var u=n(t);if(sl){oe(!0);try{n(t)}finally{oe(!1)}}}else u=t;return i.memoizedState=i.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},i.queue=e,e=e.dispatch=Sh.bind(null,De,e),[i.memoizedState,e]},useRef:function(e){var t=W();return e={current:e},t.memoizedState=e},useState:function(e){e=Je(e);var t=e.queue,n=Bc.bind(null,De,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:sr,useDeferredValue:function(e,t){var n=W();return rr(n,e,t)},useTransition:function(){var e=Je(!1);return e=Uc.bind(null,De,e.queue,!0,!1),W().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=De,u=W();if(qe){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),nt===null)throw Error(o(349));(je&60)!==0||Ie(i,t,n)}u.memoizedState=n;var c={value:n,getSnapshot:t};return u.queue=c,Tc(Mt.bind(null,i,c,e),[e]),i.flags|=2048,Tl(9,dt.bind(null,i,c,n,t),{destroy:void 0},null),n},useId:function(){var e=W(),t=nt.identifierPrefix;if(qe){var n=cn,i=un;n=(i&~(1<<32-ra(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=zs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=fv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return W().memoizedState=yh.bind(null,De)}};rl.useMemoCache=et,rl.useHostTransitionStatus=ur,rl.useFormState=qt,rl.useActionState=qt,rl.useOptimistic=function(e){var t=W();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=cr.bind(null,De,!0,n),n.dispatch=t,[e,t]};var Bn={readContext:Ht,use:ne,useCallback:Ac,useContext:Ht,useEffect:ir,useImperativeHandle:Rc,useInsertionEffect:_c,useLayoutEffect:Mc,useMemo:zc,useReducer:ye,useRef:bc,useState:function(){return ye(de)},useDebugValue:sr,useDeferredValue:function(e,t){var n=K();return Cc(n,ke.memoizedState,e,t)},useTransition:function(){var e=ye(de)[0],t=K().memoizedState;return[typeof e=="boolean"?e:ie(e),t]},useSyncExternalStore:Xe,useId:Dc};Bn.useCacheRefresh=Oc,Bn.useMemoCache=et,Bn.useHostTransitionStatus=ur,Bn.useFormState=Ya,Bn.useActionState=Ya,Bn.useOptimistic=function(e,t){var n=K();return mt(n,ke,e,t)};var ul={readContext:Ht,use:ne,useCallback:Ac,useContext:Ht,useEffect:ir,useImperativeHandle:Rc,useInsertionEffect:_c,useLayoutEffect:Mc,useMemo:zc,useReducer:Ce,useRef:bc,useState:function(){return Ce(de)},useDebugValue:sr,useDeferredValue:function(e,t){var n=K();return ke===null?rr(n,e,t):Cc(n,ke.memoizedState,e,t)},useTransition:function(){var e=Ce(de)[0],t=K().memoizedState;return[typeof e=="boolean"?e:ie(e),t]},useSyncExternalStore:Xe,useId:Dc};ul.useCacheRefresh=Oc,ul.useMemoCache=et,ul.useHostTransitionStatus=ur,ul.useFormState=Ec,ul.useActionState=Ec,ul.useOptimistic=function(e,t){var n=K();return ke!==null?mt(n,ke,e,t):(n.baseState=e,[e,n.queue.dispatch])};var mu={isMounted:function(e){return(e=e._reactInternals)?y(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ia(),u=Dt(i);u.payload=t,n!=null&&(u.callback=n),t=at(e,u,i),t!==null&&(Zt(t,e,i),ha(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ia(),u=Dt(i);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=at(e,u,i),t!==null&&(Zt(t,e,i),ha(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ia(),i=Dt(n);i.tag=2,t!=null&&(i.callback=t),t=at(e,i,n),t!==null&&(Zt(t,e,n),ha(t,e,n))}},Rf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Af=Error(o(461)),xt=!1,gu={dehydrated:null,treeContext:null,retryLane:0},Cs=V(null),cl=null,on=null,dv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},hv=sa.unstable_scheduleCallback,pv=sa.unstable_NormalPriority,ht={$$typeof:zn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},zf=Ae.S;Ae.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&yn(e,t),zf!==null&&zf(e,t)};var ol=V(null),fn=!1,pt=!1,yu=!1,Cf=typeof WeakSet=="function"?WeakSet:Set,Rt=null,Uf=!1,Et=null,oa=!1,Da=null,Fl=8192,vv={getCacheForType:function(e){var t=Ht(ht),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Us=0,Ns=1,Ds=2,Os=3,Bs=4;if(typeof Symbol=="function"&&Symbol.for){var Ni=Symbol.for;Us=Ni("selector.component"),Ns=Ni("selector.has_pseudo_class"),Ds=Ni("selector.role"),Os=Ni("selector.test_id"),Bs=Ni("selector.text")}var mv=typeof WeakMap=="function"?WeakMap:Map,$e=0,nt=null,He=null,je=0,lt=0,fa=null,dn=!1,Xl=!1,Su=!1,hn=0,vt=0,Hn=0,fl=0,Eu=0,ba=0,Ql=0,Di=null,Ia=null,bu=!1,Tu=0,Oi=1/0,Hs=null,wn=null,ws=!1,dl=null,Bi=0,_u=0,Mu=null,Hi=0,xu=null;return Be.attemptContinuousHydration=function(e){if(e.tag===13){var t=kt(e,67108864);t!==null&&Zt(t,e,67108864),Xr(e,67108864)}},Be.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=ia(),n=kt(e,t);n!==null&&Zt(n,e,t),Xr(e,t)}},Be.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if(e=e.stateNode,e.current.memoizedState.isDehydrated){var t=I(e.pendingLanes);if(t!==0){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-ra(t);e.entanglements[1]|=n,t&=~n}Xt(e),($e&6)===0&&(Oi=Ua()+500,La(0))}}break;case 13:t=kt(e,2),t!==null&&Zt(t,e,2),zo(),Xr(e,2)}},Be.batchedUpdates=function(e,t){return e(t)},Be.createComponentSelector=function(e){return{$$typeof:Us,value:e}},Be.createContainer=function(e,t,n,i,u,c,p,E,z,Z){return Zo(e,t,!1,null,n,i,c,p,E,z,Z,null)},Be.createHasPseudoClassSelector=function(e){return{$$typeof:Ns,value:e}},Be.createHydrationContainer=function(e,t,n,i,u,c,p,E,z,Z,ae,ue,ce){return e=Zo(n,i,!0,e,u,c,E,z,Z,ae,ue,ce),e.context=Yo(null),n=e.current,i=ia(),u=Dt(i),u.callback=t??null,at(n,u,i),e.current.lanes=i,se(e,i),Xt(e),e},Be.createPortal=function(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Al,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}},Be.createRoleSelector=function(e){return{$$typeof:Ds,value:e}},Be.createTestNameSelector=function(e){return{$$typeof:Os,value:e}},Be.createTextSelector=function(e){return{$$typeof:Bs,value:e}},Be.defaultOnCaughtError=function(e){console.error(e)},Be.defaultOnRecoverableError=function(e){Rf(e)},Be.defaultOnUncaughtError=function(e){Rf(e)},Be.deferredUpdates=function(e){var t=Ae.T,n=al();try{return Pt(32),Ae.T=null,e()}finally{Pt(n),Ae.T=t}},Be.discreteUpdates=function(e,t,n,i,u){var c=Ae.T,p=al();try{return Pt(2),Ae.T=null,e(t,n,i,u)}finally{Pt(p),Ae.T=c,$e===0&&(Oi=Ua()+500)}},Be.findAllNodes=wr,Be.findBoundingRects=function(e,t){if(!_i)throw Error(o(363));t=wr(e,t),e=[];for(var n=0;n<t.length;n++)e.push(up(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var i=n.x,u=i+n.width,c=n.y,p=c+n.height,E=t-1;0<=E;E--)if(t!==E){var z=e[E],Z=z.x,ae=Z+z.width,ue=z.y,ce=ue+z.height;if(i>=Z&&c>=ue&&u<=ae&&p<=ce){e.splice(t,1);break}else if(i!==Z||n.width!==z.width||ce<c||ue>p){if(!(c!==ue||n.height!==z.height||ae<i||Z>u)){Z>i&&(z.width+=Z-i,z.x=i),ae<u&&(z.width=u-Z),e.splice(t,1);break}}else{ue>c&&(z.height+=ue-c,z.y=c),ce<p&&(z.height=p-ue),e.splice(t,1);break}}}return e},Be.findHostInstance=Fo,Be.findHostInstanceWithNoPortals=function(e){return e=A(e),e=e!==null?Q(e):null,e===null?null:Ti(e.stateNode)},Be.findHostInstanceWithWarning=function(e){return Fo(e)},Be.flushPassiveEffects=el,Be.flushSyncFromReconciler=function(e){var t=$e;$e|=1;var n=Ae.T,i=al();try{if(Pt(2),Ae.T=null,e)return e()}finally{Pt(i),Ae.T=n,$e=t,($e&6)===0&&La(0)}},Be.flushSyncWork=zo,Be.focusWithin=function(e,t){if(!_i)throw Error(o(363));for(e=Or(e),t=Mo(e,t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],i=n.tag;if(!Mi(n)){if((i===5||i===26||i===27)&&fp(n.stateNode))return!0;for(n=n.child;n!==null;)t.push(n),n=n.sibling}}return!1},Be.getFindAllNodesFailureDescription=function(e,t){if(!_i)throw Error(o(363));var n=0,i=[];e=[Or(e),0];for(var u=0;u<e.length;){var c=e[u++],p=c.tag,E=e[u++],z=t[E];if((p!==5&&p!==26&&p!==27||!Mi(c))&&(Br(c,z)&&(i.push(Hr(z)),E++,E>n&&(n=E)),E<t.length))for(c=c.child;c!==null;)e.push(c,E),c=c.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Hr(t[n]));return`findAllNodes was able to match part of the selector:
  `+(i.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},Be.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 27:case 5:return Ti(e.child.stateNode);default:return e.child.stateNode}},Be.injectIntoDevTools=function(){var e={bundleType:0,version:Zh,rendererPackageName:Yh,currentDispatcherRef:Ae,findFiberByHostInstance:tf,reconcilerVersion:"19.0.0"};if(ko!==null&&(e.rendererConfig=ko),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{xi=t.inject(e),ua=t}catch{}e=!!t.checkDCE}}return e},Be.isAlreadyRendering=function(){return!1},Be.observeVisibleRects=function(e,t,n,i){if(!_i)throw Error(o(363));e=wr(e,t);var u=dp(e,n,i).disconnect;return{disconnect:function(){u()}}},Be.shouldError=function(){return null},Be.shouldSuspend=function(){return!1},Be.startHostTransition=function(e,t,n,i){if(e.tag!==5)throw Error(o(476));var u=Nc(e).queue;Uc(e,u,t,Cl,n===null?r:function(){var c=Nc(e).next.queue;return pi(e,c,{},ia()),n(i)})},Be.updateContainer=function(e,t,n,i){var u=t.current,c=ia();return Xo(u,c,e,t,n,i),c},Be.updateContainerSync=function(e,t,n,i){return t.tag===0&&el(),Xo(t.current,2,e,t,n,i),2},Be},a.exports.default=a.exports,Object.defineProperty(a.exports,"__esModule",{value:!0})})(Bu)),Bu.exports}var If;function ym(){return If||(If=1,Ou.exports=gm()),Ou.exports}var Sm=ym();const Em=zd(Sm);var Pf=Od();function ic(a,l,s){if(!a)return;if(s(a)===!0)return a;let r=l?a.return:a.child;for(;r;){const o=ic(r,l,s);if(o)return o;r=l?null:r.sibling}}function Bd(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const sc=Bd(L.createContext(null));class Hd extends L.Component{render(){return L.createElement(sc.Provider,{value:this._reactInternals},this.props.children)}}function wd(){const a=L.useContext(sc);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const l=L.useId();return L.useMemo(()=>{for(const s of[a,a?.alternate]){if(!s)continue;const r=ic(s,!1,o=>{let d=o.memoizedState;for(;d;){if(d.memoizedState===l)return!0;d=d.next}});if(r)return r}},[a,l])}const bm=Symbol.for("react.context"),Tm=a=>a!==null&&typeof a=="object"&&"$$typeof"in a&&a.$$typeof===bm;function _m(){const a=wd(),[l]=L.useState(()=>new Map);l.clear();let s=a;for(;s;){const r=s.type;Tm(r)&&r!==sc&&!l.has(r)&&l.set(r,L.use(Bd(r))),s=s.return}return l}function Mm(){const a=_m();return L.useMemo(()=>Array.from(a.keys()).reduce((l,s)=>r=>L.createElement(l,null,L.createElement(s.Provider,{...r,value:a.get(s)})),l=>L.createElement(Hd,{...l})),[a])}function Gd(a){let l=a.root;for(;l.getState().previousRoot;)l=l.getState().previousRoot;return l}const jd=a=>a&&a.isOrthographicCamera,xm=a=>a&&a.hasOwnProperty("current"),Rm=a=>a!=null&&(typeof a=="string"||typeof a=="number"||a.isColor),$i=((a,l)=>typeof window<"u"&&(((a=window.document)==null?void 0:a.createElement)||((l=window.navigator)==null?void 0:l.product)==="ReactNative"))()?L.useLayoutEffect:L.useEffect;function rc(a){const l=L.useRef(a);return $i(()=>void(l.current=a),[a]),l}function Am(){const a=wd(),l=Mm();return L.useMemo(()=>({children:s})=>{const o=!!ic(a,!0,d=>d.type===L.StrictMode)?L.StrictMode:L.Fragment;return Ee.jsx(o,{children:Ee.jsx(l,{children:s})})},[a,l])}function zm({set:a}){return $i(()=>(a(new Promise(()=>null)),()=>a(!1)),[a]),null}const Cm=(a=>(a=class extends L.Component{constructor(...s){super(...s),this.state={error:!1}}componentDidCatch(s){this.props.set(s)}render(){return this.state.error?null:this.props.children}},a.getDerivedStateFromError=()=>({error:!0}),a))();function Ld(a){var l;const s=typeof window<"u"?(l=window.devicePixelRatio)!=null?l:2:1;return Array.isArray(a)?Math.min(Math.max(a[0],s),a[1]):a}function Pl(a){var l;return(l=a.__r3f)==null?void 0:l.root.getState()}const rt={obj:a=>a===Object(a)&&!rt.arr(a)&&typeof a!="function",fun:a=>typeof a=="function",str:a=>typeof a=="string",num:a=>typeof a=="number",boo:a=>typeof a=="boolean",und:a=>a===void 0,nul:a=>a===null,arr:a=>Array.isArray(a),equ(a,l,{arrays:s="shallow",objects:r="reference",strict:o=!0}={}){if(typeof a!=typeof l||!!a!=!!l)return!1;if(rt.str(a)||rt.num(a)||rt.boo(a))return a===l;const d=rt.obj(a);if(d&&r==="reference")return a===l;const m=rt.arr(a);if(m&&s==="reference")return a===l;if((m||d)&&a===l)return!0;let g;for(g in a)if(!(g in l))return!1;if(d&&s==="shallow"&&r==="shallow"){for(g in o?l:a)if(!rt.equ(a[g],l[g],{strict:o,objects:"reference"}))return!1}else for(g in o?l:a)if(a[g]!==l[g])return!1;if(rt.und(g)){if(m&&a.length===0&&l.length===0||d&&Object.keys(a).length===0&&Object.keys(l).length===0)return!0;if(a!==l)return!1}return!0}};function Um(a){const l={nodes:{},materials:{},meshes:{}};return a&&a.traverse(s=>{s.name&&(l.nodes[s.name]=s),s.material&&!l.materials[s.material.name]&&(l.materials[s.material.name]=s.material),s.isMesh&&!l.meshes[s.name]&&(l.meshes[s.name]=s)}),l}function Nm(a){a.type!=="Scene"&&(a.dispose==null||a.dispose());for(const l in a){const s=a[l];s?.type!=="Scene"&&(s==null||s.dispose==null||s.dispose())}}const Vd=["children","key","ref"];function Dm(a){const l={};for(const s in a)Vd.includes(s)||(l[s]=a[s]);return l}function Ps(a,l,s,r){const o=a;let d=o?.__r3f;return d||(d={root:l,type:s,parent:null,children:[],props:Dm(r),object:o,eventCount:0,handlers:{},isHidden:!1},o&&(o.__r3f=d)),d}function Ii(a,l){if(!l.includes("-"))return{root:a,key:l,target:a[l]};if(l in a)return{root:a,key:l,target:a[l]};let s=a;const r=l.split("-");for(const o of r){if(typeof s!="object"||s===null){if(s!==void 0){const d=r.slice(r.indexOf(o)).join("-");return{root:s,key:d,target:void 0}}return{root:a,key:l,target:void 0}}l=o,a=s,s=s[l]}return{root:a,key:l,target:s}}const Jf=/-\d+$/;function Js(a,l){if(rt.str(l.props.attach)){if(Jf.test(l.props.attach)){const o=l.props.attach.replace(Jf,""),{root:d,key:m}=Ii(a.object,o);Array.isArray(d[m])||(d[m]=[])}const{root:s,key:r}=Ii(a.object,l.props.attach);l.previousAttach=s[r],s[r]=l.object}else rt.fun(l.props.attach)&&(l.previousAttach=l.props.attach(a.object,l.object))}function Ws(a,l){if(rt.str(l.props.attach)){const{root:s,key:r}=Ii(a.object,l.props.attach),o=l.previousAttach;o===void 0?delete s[r]:s[r]=o}else l.previousAttach==null||l.previousAttach(a.object,l.object);delete l.previousAttach}const Pu=[...Vd,"args","dispose","attach","object","onUpdate","dispose"],Wf=new Map;function Om(a){let l=Wf.get(a.constructor);try{l||(l=new a.constructor,Wf.set(a.constructor,l))}catch{}return l}function Bm(a,l){const s={};for(const r in l)if(!Pu.includes(r)&&!rt.equ(l[r],a.props[r])){s[r]=l[r];for(const o in l)o.startsWith(`${r}-`)&&(s[o]=l[o])}for(const r in a.props){if(Pu.includes(r)||l.hasOwnProperty(r))continue;const{root:o,key:d}=Ii(a.object,r);if(o.constructor&&o.constructor.length===0){const m=Om(o);rt.und(m)||(s[d]=m[d])}else s[d]=0}return s}const Hm=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],wm=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Pa(a,l){var s;const r=a.__r3f,o=r&&Gd(r).getState(),d=r?.eventCount;for(const g in l){let h=l[g];if(Pu.includes(g))continue;if(r&&wm.test(g)){typeof h=="function"?r.handlers[g]=h:delete r.handlers[g],r.eventCount=Object.keys(r.handlers).length;continue}if(h===void 0)continue;let{root:S,key:_,target:y}=Ii(a,g);if(y===void 0&&(typeof S!="object"||S===null))throw Error(`R3F: Cannot set "${g}". Ensure it is an object before setting "${_}".`);if(y instanceof Nf&&h instanceof Nf)y.mask=h.mask;else if(y instanceof Wi&&Rm(h))y.set(h);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&h!=null&&h.constructor&&y.constructor===h.constructor)y.copy(h);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(h))typeof y.fromArray=="function"?y.fromArray(h):y.set(...h);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof h=="number")typeof y.setScalar=="function"?y.setScalar(h):y.set(h);else{var m;S[_]=h,o&&!o.linear&&Hm.includes(_)&&(m=S[_])!=null&&m.isTexture&&S[_].format===si&&S[_].type===Ha&&(S[_].colorSpace=_t)}}if(r!=null&&r.parent&&o!=null&&o.internal&&(s=r.object)!=null&&s.isObject3D&&d!==r.eventCount){const g=r.object,h=o.internal.interaction.indexOf(g);h>-1&&o.internal.interaction.splice(h,1),r.eventCount&&g.raycast!==null&&o.internal.interaction.push(g)}return r&&r.props.attach===void 0&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&oi(r),a}function oi(a){var l;if(!a.parent)return;a.props.onUpdate==null||a.props.onUpdate(a.object);const s=(l=a.root)==null||l.getState==null?void 0:l.getState();s&&s.internal.frames===0&&s.invalidate()}function qd(a,l){a.manual||(jd(a)?(a.left=l.width/-2,a.right=l.width/2,a.top=l.height/2,a.bottom=l.height/-2):a.aspect=l.width/l.height,a.updateProjectionMatrix())}const Ft=a=>a?.isObject3D;function Ls(a){return(a.eventObject||a.object).uuid+"/"+a.index+a.instanceId}function Zd(a,l,s,r){const o=s.get(l);o&&(s.delete(l),s.size===0&&(a.delete(r),o.target.releasePointerCapture(r)))}function Gm(a,l){const{internal:s}=a.getState();s.interaction=s.interaction.filter(r=>r!==l),s.initialHits=s.initialHits.filter(r=>r!==l),s.hovered.forEach((r,o)=>{(r.eventObject===l||r.object===l)&&s.hovered.delete(o)}),s.capturedMap.forEach((r,o)=>{Zd(s.capturedMap,l,r,o)})}function jm(a){function l(h){const{internal:S}=a.getState(),_=h.offsetX-S.initialClick[0],y=h.offsetY-S.initialClick[1];return Math.round(Math.sqrt(_*_+y*y))}function s(h){return h.filter(S=>["Move","Over","Enter","Out","Leave"].some(_=>{var y;return(y=S.__r3f)==null?void 0:y.handlers["onPointer"+_]}))}function r(h,S){const _=a.getState(),y=new Set,b=[],A=S?S(_.internal.interaction):_.internal.interaction;for(let C=0;C<A.length;C++){const x=Pl(A[C]);x&&(x.raycaster.camera=void 0)}_.previousRoot||_.events.compute==null||_.events.compute(h,_);function H(C){const x=Pl(C);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var Y;x.events.compute==null||x.events.compute(h,x,(Y=x.previousRoot)==null?void 0:Y.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(C,!0):[]}let Q=A.flatMap(H).sort((C,x)=>{const Y=Pl(C.object),I=Pl(x.object);return!Y||!I?C.distance-x.distance:I.events.priority-Y.events.priority||C.distance-x.distance}).filter(C=>{const x=Ls(C);return y.has(x)?!1:(y.add(x),!0)});_.events.filter&&(Q=_.events.filter(Q,_));for(const C of Q){let x=C.object;for(;x;){var V;(V=x.__r3f)!=null&&V.eventCount&&b.push({...C,eventObject:x}),x=x.parent}}if("pointerId"in h&&_.internal.capturedMap.has(h.pointerId))for(let C of _.internal.capturedMap.get(h.pointerId).values())y.has(Ls(C.intersection))||b.push(C.intersection);return b}function o(h,S,_,y){if(h.length){const b={stopped:!1};for(const A of h){let H=Pl(A.object);if(H||A.object.traverseAncestors(Q=>{const V=Pl(Q);if(V)return H=V,!1}),H){const{raycaster:Q,pointer:V,camera:C,internal:x}=H,Y=new ft(V.x,V.y,0).unproject(C),I=j=>{var q,se;return(q=(se=x.capturedMap.get(j))==null?void 0:se.has(A.eventObject))!=null?q:!1},F=j=>{const q={intersection:A,target:S.target};x.capturedMap.has(j)?x.capturedMap.get(j).set(A.eventObject,q):x.capturedMap.set(j,new Map([[A.eventObject,q]])),S.target.setPointerCapture(j)},G=j=>{const q=x.capturedMap.get(j);q&&Zd(x.capturedMap,A.eventObject,q,j)};let re={};for(let j in S){let q=S[j];typeof q!="function"&&(re[j]=q)}let O={...A,...re,pointer:V,intersections:h,stopped:b.stopped,delta:_,unprojectedPoint:Y,ray:Q.ray,camera:C,stopPropagation(){const j="pointerId"in S&&x.capturedMap.get(S.pointerId);if((!j||j.has(A.eventObject))&&(O.stopped=b.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(q=>q.eventObject===A.eventObject))){const q=h.slice(0,h.indexOf(A));d([...q,A])}},target:{hasPointerCapture:I,setPointerCapture:F,releasePointerCapture:G},currentTarget:{hasPointerCapture:I,setPointerCapture:F,releasePointerCapture:G},nativeEvent:S};if(y(O),b.stopped===!0)break}}}return h}function d(h){const{internal:S}=a.getState();for(const _ of S.hovered.values())if(!h.length||!h.find(y=>y.object===_.object&&y.index===_.index&&y.instanceId===_.instanceId)){const b=_.eventObject.__r3f;if(S.hovered.delete(Ls(_)),b!=null&&b.eventCount){const A=b.handlers,H={..._,intersections:h};A.onPointerOut==null||A.onPointerOut(H),A.onPointerLeave==null||A.onPointerLeave(H)}}}function m(h,S){for(let _=0;_<S.length;_++){const y=S[_].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(h)}}function g(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>d([]);case"onLostPointerCapture":return S=>{const{internal:_}=a.getState();"pointerId"in S&&_.capturedMap.has(S.pointerId)&&requestAnimationFrame(()=>{_.capturedMap.has(S.pointerId)&&(_.capturedMap.delete(S.pointerId),d([]))})}}return function(_){const{onPointerMissed:y,internal:b}=a.getState();b.lastEvent.current=_;const A=h==="onPointerMove",H=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",V=r(_,A?s:void 0),C=H?l(_):0;h==="onPointerDown"&&(b.initialClick=[_.offsetX,_.offsetY],b.initialHits=V.map(Y=>Y.eventObject)),H&&!V.length&&C<=2&&(m(_,b.interaction),y&&y(_)),A&&d(V);function x(Y){const I=Y.eventObject,F=I.__r3f;if(!(F!=null&&F.eventCount))return;const G=F.handlers;if(A){if(G.onPointerOver||G.onPointerEnter||G.onPointerOut||G.onPointerLeave){const re=Ls(Y),O=b.hovered.get(re);O?O.stopped&&Y.stopPropagation():(b.hovered.set(re,Y),G.onPointerOver==null||G.onPointerOver(Y),G.onPointerEnter==null||G.onPointerEnter(Y))}G.onPointerMove==null||G.onPointerMove(Y)}else{const re=G[h];re?(!H||b.initialHits.includes(I))&&(m(_,b.interaction.filter(O=>!b.initialHits.includes(O))),re(Y)):H&&b.initialHits.includes(I)&&m(_,b.interaction.filter(O=>!b.initialHits.includes(O)))}}o(V,_,C,x)}}return{handlePointer:g}}const kf=a=>!!(a!=null&&a.render),uc=L.createContext(null),Lm=(a,l)=>{const s=Ud((g,h)=>{const S=new ft,_=new ft,y=new ft;function b(C=h().camera,x=_,Y=h().size){const{width:I,height:F,top:G,left:re}=Y,O=I/F;x.isVector3?y.copy(x):y.set(...x);const j=C.getWorldPosition(S).distanceTo(y);if(jd(C))return{width:I/C.zoom,height:F/C.zoom,top:G,left:re,factor:1,distance:j,aspect:O};{const q=C.fov*Math.PI/180,se=2*Math.tan(q/2)*j,ve=se*(I/F);return{width:ve,height:se,top:G,left:re,factor:I/ve,distance:j,aspect:O}}}let A;const H=C=>g(x=>({performance:{...x.performance,current:C}})),Q=new Ke;return{set:g,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(C=1)=>a(h(),C),advance:(C,x)=>l(C,x,h()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Tv,pointer:Q,mouse:Q,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const C=h();A&&clearTimeout(A),C.performance.current!==C.performance.min&&H(C.performance.min),A=setTimeout(()=>H(h().performance.max),C.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:b},setEvents:C=>g(x=>({...x,events:{...x.events,...C}})),setSize:(C,x,Y=0,I=0)=>{const F=h().camera,G={width:C,height:x,top:Y,left:I};g(re=>({size:G,viewport:{...re.viewport,...b(F,_,G)}}))},setDpr:C=>g(x=>{const Y=Ld(C);return{viewport:{...x.viewport,dpr:Y,initialDpr:x.viewport.initialDpr||Y}}}),setFrameloop:(C="always")=>{const x=h().clock;x.stop(),x.elapsedTime=0,C!=="never"&&(x.start(),x.elapsedTime=0),g(()=>({frameloop:C}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:L.createRef(),active:!1,frames:0,priority:0,subscribe:(C,x,Y)=>{const I=h().internal;return I.priority=I.priority+(x>0?1:0),I.subscribers.push({ref:C,priority:x,store:Y}),I.subscribers=I.subscribers.sort((F,G)=>F.priority-G.priority),()=>{const F=h().internal;F!=null&&F.subscribers&&(F.priority=F.priority-(x>0?1:0),F.subscribers=F.subscribers.filter(G=>G.ref!==C))}}}}}),r=s.getState();let o=r.size,d=r.viewport.dpr,m=r.camera;return s.subscribe(()=>{const{camera:g,size:h,viewport:S,gl:_,set:y}=s.getState();if(h.width!==o.width||h.height!==o.height||S.dpr!==d){o=h,d=S.dpr,qd(g,h),S.dpr>0&&_.setPixelRatio(S.dpr);const b=typeof HTMLCanvasElement<"u"&&_.domElement instanceof HTMLCanvasElement;_.setSize(h.width,h.height,b)}g!==m&&(m=g,y(b=>({viewport:{...b.viewport,...b.viewport.getCurrentViewport(g)}})))}),s.subscribe(g=>a(g)),s};function cc(){const a=L.useContext(uc);if(!a)throw new Error("R3F: Hooks can only be used within the Canvas component!");return a}function Ut(a=s=>s,l){return cc()(a,l)}function yl(a,l=0){const s=cc(),r=s.getState().internal.subscribe,o=rc(a);return $i(()=>r(o,l,s),[l,r,s]),null}const $f=new WeakMap,Vm=a=>{var l;return typeof a=="function"&&(a==null||(l=a.prototype)==null?void 0:l.constructor)===a};function Yd(a,l){return function(s,...r){let o;return Vm(s)?(o=$f.get(s),o||(o=new s,$f.set(s,o))):o=s,a&&a(o),Promise.all(r.map(d=>new Promise((m,g)=>o.load(d,h=>{Ft(h?.scene)&&Object.assign(h,Um(h.scene)),m(h)},l,h=>g(new Error(`Could not load ${d}: ${h?.message}`))))))}}function ri(a,l,s,r){const o=Array.isArray(l)?l:[l],d=hm(Yd(s,r),[a,...o],{equal:rt.equ});return Array.isArray(l)?d:d[0]}ri.preload=function(a,l,s){const r=Array.isArray(l)?l:[l];return pm(Yd(s),[a,...r])};ri.clear=function(a,l){const s=Array.isArray(l)?l:[l];return vm([a,...s])};var qm={version:"9.4.2"};function Zm(a){const l=Em(a);return l.injectIntoDevTools(),l}const Fd=0,ui={},Ym=/^three(?=[A-Z])/,nr=a=>`${a[0].toUpperCase()}${a.slice(1)}`;let Fm=0;const Xm=a=>typeof a=="function";function oc(a){if(Xm(a)){const l=`${Fm++}`;return ui[l]=a,l}else Object.assign(ui,a)}function Xd(a,l){const s=nr(a),r=ui[s];if(a!=="primitive"&&!r)throw new Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(a==="primitive"&&!l.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(l.args!==void 0&&!Array.isArray(l.args))throw new Error("R3F: The args prop must be an array!")}function Qm(a,l,s){var r;return a=nr(a)in ui?a:a.replace(Ym,""),Xd(a,l),a==="primitive"&&(r=l.object)!=null&&r.__r3f&&delete l.object.__r3f,Ps(l.object,s,a,l)}function Km(a){if(!a.isHidden){var l;a.props.attach&&(l=a.parent)!=null&&l.object?Ws(a.parent,a):Ft(a.object)&&(a.object.visible=!1),a.isHidden=!0,oi(a)}}function Qd(a){if(a.isHidden){var l;a.props.attach&&(l=a.parent)!=null&&l.object?Js(a.parent,a):Ft(a.object)&&a.props.visible!==!1&&(a.object.visible=!0),a.isHidden=!1,oi(a)}}function fc(a,l,s){const r=l.root.getState();if(!(!a.parent&&a.object!==r.scene)){if(!l.object){var o,d;const m=ui[nr(l.type)];l.object=(o=l.props.object)!=null?o:new m(...(d=l.props.args)!=null?d:[]),l.object.__r3f=l}if(Pa(l.object,l.props),l.props.attach)Js(a,l);else if(Ft(l.object)&&Ft(a.object)){const m=a.object.children.indexOf(s?.object);if(s&&m!==-1){const g=a.object.children.indexOf(l.object);if(g!==-1){a.object.children.splice(g,1);const h=g<m?m-1:m;a.object.children.splice(h,0,l.object)}else l.object.parent=a.object,a.object.children.splice(m,0,l.object),l.object.dispatchEvent({type:"added"}),a.object.dispatchEvent({type:"childadded",child:l.object})}else a.object.add(l.object)}for(const m of l.children)fc(l,m);oi(l)}}function Gu(a,l){l&&(l.parent=a,a.children.push(l),fc(a,l))}function ed(a,l,s){if(!l||!s)return;l.parent=a;const r=a.children.indexOf(s);r!==-1?a.children.splice(r,0,l):a.children.push(l),fc(a,l,s)}function Kd(a){if(typeof a.dispose=="function"){const l=()=>{try{a.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?l():Pf.unstable_scheduleCallback(Pf.unstable_IdlePriority,l)}}function Ju(a,l,s){if(!l)return;l.parent=null;const r=a.children.indexOf(l);r!==-1&&a.children.splice(r,1),l.props.attach?Ws(a,l):Ft(l.object)&&Ft(a.object)&&(a.object.remove(l.object),Gm(Gd(l),l.object));const o=l.props.dispose!==null&&s!==!1;for(let d=l.children.length-1;d>=0;d--){const m=l.children[d];Ju(l,m,o)}l.children.length=0,delete l.object.__r3f,o&&l.type!=="primitive"&&l.object.type!=="Scene"&&Kd(l.object),s===void 0&&oi(l)}function Im(a,l){for(const s of[a,a.alternate])if(s!==null)if(typeof s.ref=="function"){s.refCleanup==null||s.refCleanup();const r=s.ref(l);typeof r=="function"&&(s.refCleanup=r)}else s.ref&&(s.ref.current=l)}const Qs=[];function Pm(){for(const[s]of Qs){const r=s.parent;if(r){s.props.attach?Ws(r,s):Ft(s.object)&&Ft(r.object)&&r.object.remove(s.object);for(const o of s.children)o.props.attach?Ws(s,o):Ft(o.object)&&Ft(s.object)&&s.object.remove(o.object)}s.isHidden&&Qd(s),s.object.__r3f&&delete s.object.__r3f,s.type!=="primitive"&&Kd(s.object)}for(const[s,r,o]of Qs){s.props=r;const d=s.parent;if(d){var a,l;const m=ui[nr(s.type)];s.object=(a=s.props.object)!=null?a:new m(...(l=s.props.args)!=null?l:[]),s.object.__r3f=s,Im(o,s.object),Pa(s.object,s.props),s.props.attach?Js(d,s):Ft(s.object)&&Ft(d.object)&&d.object.add(s.object);for(const g of s.children)g.props.attach?Js(s,g):Ft(g.object)&&Ft(s.object)&&s.object.add(g.object);oi(s)}}Qs.length=0}const ju=()=>{},td={};let Vs=Fd;const Jm=0,Wm=4,ks=Zm({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Qm,removeChild:Ju,appendChild:Gu,appendInitialChild:Gu,insertBefore:ed,appendChildToContainer(a,l){const s=a.getState().scene.__r3f;!l||!s||Gu(s,l)},removeChildFromContainer(a,l){const s=a.getState().scene.__r3f;!l||!s||Ju(s,l)},insertInContainerBefore(a,l,s){const r=a.getState().scene.__r3f;!l||!s||!r||ed(r,l,s)},getRootHostContext:()=>td,getChildHostContext:()=>td,commitUpdate(a,l,s,r,o){var d,m,g;Xd(l,r);let h=!1;if((a.type==="primitive"&&s.object!==r.object||((d=r.args)==null?void 0:d.length)!==((m=s.args)==null?void 0:m.length)||(g=r.args)!=null&&g.some((_,y)=>{var b;return _!==((b=s.args)==null?void 0:b[y])}))&&(h=!0),h)Qs.push([a,{...r},o]);else{const _=Bm(a,r);Object.keys(_).length&&(Object.assign(a.props,_),Pa(a.object,_))}(o.sibling===null||(o.flags&Wm)===Jm)&&Pm()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:a=>a?.object,prepareForCommit:()=>null,preparePortalMount:a=>Ps(a.getState().scene,a,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Km,unhideInstance:Qd,createTextInstance:ju,hideTextInstance:ju,unhideTextInstance:ju,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:L.createContext(null),setCurrentUpdatePriority(a){Vs=a},getCurrentUpdatePriority(){return Vs},resolveUpdatePriority(){var a;if(Vs!==Fd)return Vs;switch(typeof window<"u"&&((a=window.event)==null?void 0:a.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Xs.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Xs.ContinuousEventPriority;default:return Xs.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:qm.version}),gl=new Map,Jl={objects:"shallow",strict:!1};function km(a,l){if(!l&&typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&a.parentElement){const{width:s,height:r,top:o,left:d}=a.parentElement.getBoundingClientRect();return{width:s,height:r,top:o,left:d}}else if(!l&&typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas)return{width:a.width,height:a.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...l}}function $m(a){const l=gl.get(a),s=l?.fiber,r=l?.store;l&&console.warn("R3F.createRoot should only be called once!");const o=typeof reportError=="function"?reportError:console.error,d=r||Lm($u,nd),m=s||ks.createContainer(d,Xs.ConcurrentRoot,null,!1,null,"",o,o,o,null);l||gl.set(a,{fiber:m,store:d});let g,h,S=!1,_=null;return{async configure(y={}){let b;_=new Promise(_e=>b=_e);let{gl:A,size:H,scene:Q,events:V,onCreated:C,shadows:x=!1,linear:Y=!1,flat:I=!1,legacy:F=!1,orthographic:G=!1,frameloop:re="always",dpr:O=[1,2],performance:j,raycaster:q,camera:se,onPointerMissed:ve}=y,ee=d.getState(),le=ee.gl;if(!ee.gl){const _e={canvas:a,powerPreference:"high-performance",antialias:!0,alpha:!0},ge=typeof A=="function"?await A(_e):A;kf(ge)?le=ge:le=new Sd({..._e,...A}),ee.set({gl:le})}let Se=ee.raycaster;Se||ee.set({raycaster:Se=new Ed});const{params:X,...oe}=q||{};if(rt.equ(oe,Se,Jl)||Pa(Se,{...oe}),rt.equ(X,Se.params,Jl)||Pa(Se,{params:{...Se.params,...X}}),!ee.camera||ee.camera===h&&!rt.equ(h,se,Jl)){h=se;const _e=se?.isCamera,ge=_e?se:G?new ni(0,0,0,0,.1,1e3):new Zi(75,0,.1,1e3);_e||(ge.position.z=5,se&&(Pa(ge,se),ge.manual||("aspect"in se||"left"in se||"right"in se||"bottom"in se||"top"in se)&&(ge.manual=!0,ge.updateProjectionMatrix())),!ee.camera&&!(se!=null&&se.rotation)&&ge.lookAt(0,0,0)),ee.set({camera:ge}),Se.camera=ge}if(!ee.scene){let _e;Q!=null&&Q.isScene?(_e=Q,Ps(_e,d,"",{})):(_e=new Qi,Ps(_e,d,"",{}),Q&&Pa(_e,Q)),ee.set({scene:_e})}V&&!ee.events.handlers&&ee.set({events:V(d)});const he=km(a,H);if(rt.equ(he,ee.size,Jl)||ee.setSize(he.width,he.height,he.top,he.left),O&&ee.viewport.dpr!==Ld(O)&&ee.setDpr(O),ee.frameloop!==re&&ee.setFrameloop(re),ee.onPointerMissed||ee.set({onPointerMissed:ve}),j&&!rt.equ(j,ee.performance,Jl)&&ee.set(_e=>({performance:{..._e.performance,...j}})),!ee.xr){var me;const _e=(ze,ut)=>{const Oe=d.getState();Oe.frameloop!=="never"&&nd(ze,!0,Oe,ut)},ge=()=>{const ze=d.getState();ze.gl.xr.enabled=ze.gl.xr.isPresenting,ze.gl.xr.setAnimationLoop(ze.gl.xr.isPresenting?_e:null),ze.gl.xr.isPresenting||$u(ze)},Ne={connect(){const ze=d.getState().gl;ze.xr.addEventListener("sessionstart",ge),ze.xr.addEventListener("sessionend",ge)},disconnect(){const ze=d.getState().gl;ze.xr.removeEventListener("sessionstart",ge),ze.xr.removeEventListener("sessionend",ge)}};typeof((me=le.xr)==null?void 0:me.addEventListener)=="function"&&Ne.connect(),ee.set({xr:Ne})}if(le.shadowMap){const _e=le.shadowMap.enabled,ge=le.shadowMap.type;if(le.shadowMap.enabled=!!x,rt.boo(x))le.shadowMap.type=Ru;else if(rt.str(x)){var pe;const Ne={basic:Ev,percentage:Sv,soft:Ru,variance:yv};le.shadowMap.type=(pe=Ne[x])!=null?pe:Ru}else rt.obj(x)&&Object.assign(le.shadowMap,x);(_e!==le.shadowMap.enabled||ge!==le.shadowMap.type)&&(le.shadowMap.needsUpdate=!0)}return bv.enabled=!F,S||(le.outputColorSpace=Y?ii:_t,le.toneMapping=I?bd:Td),ee.legacy!==F&&ee.set(()=>({legacy:F})),ee.linear!==Y&&ee.set(()=>({linear:Y})),ee.flat!==I&&ee.set(()=>({flat:I})),A&&!rt.fun(A)&&!kf(A)&&!rt.equ(A,le,Jl)&&Pa(le,A),g=C,S=!0,b(),this},render(y){return!S&&!_&&this.configure(),_.then(()=>{ks.updateContainer(Ee.jsx(e0,{store:d,children:y,onCreated:g,rootElement:a}),m,null,()=>{})}),d},unmount(){Id(a)}}}function e0({store:a,children:l,onCreated:s,rootElement:r}){return $i(()=>{const o=a.getState();o.set(d=>({internal:{...d.internal,active:!0}})),s&&s(o),a.getState().events.connected||o.events.connect==null||o.events.connect(r)},[]),Ee.jsx(uc.Provider,{value:a,children:l})}function Id(a,l){const s=gl.get(a),r=s?.fiber;if(r){const o=s?.store.getState();o&&(o.internal.active=!1),ks.updateContainer(null,r,null,()=>{o&&setTimeout(()=>{try{var d,m,g,h;o.events.disconnect==null||o.events.disconnect(),(d=o.gl)==null||(m=d.renderLists)==null||m.dispose==null||m.dispose(),(g=o.gl)==null||g.forceContextLoss==null||g.forceContextLoss(),(h=o.gl)!=null&&h.xr&&o.xr.disconnect(),Nm(o.scene),gl.delete(a)}catch{}},500)})}}function t0(a,l,s){return Ee.jsx(a0,{children:a,container:l,state:s})}function a0({state:a={},children:l,container:s}){const{events:r,size:o,...d}=a,m=cc(),[g]=L.useState(()=>new Ed),[h]=L.useState(()=>new Ke),S=rc((y,b)=>{let A;if(b.camera&&o){const H=b.camera;A=y.viewport.getCurrentViewport(H,new ft,o),H!==y.camera&&qd(H,o)}return{...y,...b,scene:s,raycaster:g,pointer:h,mouse:h,previousRoot:m,events:{...y.events,...b.events,...r},size:{...y.size,...o},viewport:{...y.viewport,...A},setEvents:H=>b.set(Q=>({...Q,events:{...Q.events,...H}}))}}),_=L.useMemo(()=>{const y=Ud((A,H)=>({...d,set:A,get:H})),b=A=>y.setState(H=>S.current(A,H));return b(m.getState()),m.subscribe(b),y},[m,s]);return Ee.jsx(Ee.Fragment,{children:ks.createPortal(Ee.jsx(uc.Provider,{value:_,children:l}),_,null)})}const n0=new Set,l0=new Set,i0=new Set;function Lu(a,l){if(a.size)for(const{callback:s}of a.values())s(l)}function Yi(a,l){switch(a){case"before":return Lu(n0,l);case"after":return Lu(l0,l);case"tail":return Lu(i0,l)}}let Vu,qu;function Wu(a,l,s){let r=l.clock.getDelta();l.frameloop==="never"&&typeof a=="number"&&(r=a-l.clock.elapsedTime,l.clock.oldTime=l.clock.elapsedTime,l.clock.elapsedTime=a),Vu=l.internal.subscribers;for(let o=0;o<Vu.length;o++)qu=Vu[o],qu.ref.current(qu.store.getState(),r,s);return!l.internal.priority&&l.gl.render&&l.gl.render(l.scene,l.camera),l.internal.frames=Math.max(0,l.internal.frames-1),l.frameloop==="always"?1:l.internal.frames}let $s=!1,ku=!1,Zu,ad,Wl;function Pd(a){ad=requestAnimationFrame(Pd),$s=!0,Zu=0,Yi("before",a),ku=!0;for(const s of gl.values()){var l;Wl=s.store.getState(),Wl.internal.active&&(Wl.frameloop==="always"||Wl.internal.frames>0)&&!((l=Wl.gl.xr)!=null&&l.isPresenting)&&(Zu+=Wu(a,Wl))}if(ku=!1,Yi("after",a),Zu===0)return Yi("tail",a),$s=!1,cancelAnimationFrame(ad)}function $u(a,l=1){var s;if(!a)return gl.forEach(r=>$u(r.store.getState(),l));(s=a.gl.xr)!=null&&s.isPresenting||!a.internal.active||a.frameloop==="never"||(l>1?a.internal.frames=Math.min(60,a.internal.frames+l):ku?a.internal.frames=2:a.internal.frames=1,$s||($s=!0,requestAnimationFrame(Pd)))}function nd(a,l=!0,s,r){if(l&&Yi("before",a),s)Wu(a,s,r);else for(const o of gl.values())Wu(a,o.store.getState());l&&Yi("after",a)}const Yu={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function s0(a){const{handlePointer:l}=jm(a);return{priority:1,enabled:!0,compute(s,r,o){r.pointer.set(s.offsetX/r.size.width*2-1,-(s.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Yu).reduce((s,r)=>({...s,[r]:l(r)}),{}),update:()=>{var s;const{events:r,internal:o}=a.getState();(s=o.lastEvent)!=null&&s.current&&r.handlers&&r.handlers.onPointerMove(o.lastEvent.current)},connect:s=>{const{set:r,events:o}=a.getState();if(o.disconnect==null||o.disconnect(),r(d=>({events:{...d.events,connected:s}})),o.handlers)for(const d in o.handlers){const m=o.handlers[d],[g,h]=Yu[d];s.addEventListener(g,m,{passive:h})}},disconnect:()=>{const{set:s,events:r}=a.getState();if(r.connected){if(r.handlers)for(const o in r.handlers){const d=r.handlers[o],[m]=Yu[o];r.connected.removeEventListener(m,d)}s(o=>({events:{...o.events,connected:void 0}}))}}}}function ld(a,l){let s;return(...r)=>{window.clearTimeout(s),s=window.setTimeout(()=>a(...r),l)}}function r0({debounce:a,scroll:l,polyfill:s,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const o=s||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[d,m]=L.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),g=L.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:d,orientationHandler:null}),h=a?typeof a=="number"?a:a.scroll:null,S=a?typeof a=="number"?a:a.resize:null,_=L.useRef(!1);L.useEffect(()=>(_.current=!0,()=>void(_.current=!1)));const[y,b,A]=L.useMemo(()=>{const C=()=>{if(!g.current.element)return;const{left:x,top:Y,width:I,height:F,bottom:G,right:re,x:O,y:j}=g.current.element.getBoundingClientRect(),q={left:x,top:Y,width:I,height:F,bottom:G,right:re,x:O,y:j};g.current.element instanceof HTMLElement&&r&&(q.height=g.current.element.offsetHeight,q.width=g.current.element.offsetWidth),Object.freeze(q),_.current&&!f0(g.current.lastBounds,q)&&m(g.current.lastBounds=q)};return[C,S?ld(C,S):C,h?ld(C,h):C]},[m,r,h,S]);function H(){g.current.scrollContainers&&(g.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",A,!0)),g.current.scrollContainers=null),g.current.resizeObserver&&(g.current.resizeObserver.disconnect(),g.current.resizeObserver=null),g.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",g.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",g.current.orientationHandler))}function Q(){g.current.element&&(g.current.resizeObserver=new o(A),g.current.resizeObserver.observe(g.current.element),l&&g.current.scrollContainers&&g.current.scrollContainers.forEach(C=>C.addEventListener("scroll",A,{capture:!0,passive:!0})),g.current.orientationHandler=()=>{A()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",g.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",g.current.orientationHandler))}const V=C=>{!C||C===g.current.element||(H(),g.current.element=C,g.current.scrollContainers=Jd(C),Q())};return c0(A,!!l),u0(b),L.useEffect(()=>{H(),Q()},[l,A,b]),L.useEffect(()=>H,[]),[V,d,y]}function u0(a){L.useEffect(()=>{const l=a;return window.addEventListener("resize",l),()=>void window.removeEventListener("resize",l)},[a])}function c0(a,l){L.useEffect(()=>{if(l){const s=a;return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)}},[a,l])}function Jd(a){const l=[];if(!a||a===document.body)return l;const{overflow:s,overflowX:r,overflowY:o}=window.getComputedStyle(a);return[s,r,o].some(d=>d==="auto"||d==="scroll")&&l.push(a),[...l,...Jd(a.parentElement)]}const o0=["x","y","top","bottom","left","right","width","height"],f0=(a,l)=>o0.every(s=>a[s]===l[s]);function d0({ref:a,children:l,fallback:s,resize:r,style:o,gl:d,events:m=s0,eventSource:g,eventPrefix:h,shadows:S,linear:_,flat:y,legacy:b,orthographic:A,frameloop:H,dpr:Q,performance:V,raycaster:C,camera:x,scene:Y,onPointerMissed:I,onCreated:F,...G}){L.useMemo(()=>oc(_v),[]);const re=Am(),[O,j]=r0({scroll:!0,debounce:{scroll:50,resize:0},...r}),q=L.useRef(null),se=L.useRef(null);L.useImperativeHandle(a,()=>q.current);const ve=rc(I),[ee,le]=L.useState(!1),[Se,X]=L.useState(!1);if(ee)throw ee;if(Se)throw Se;const oe=L.useRef(null);$i(()=>{const me=q.current;if(j.width>0&&j.height>0&&me){oe.current||(oe.current=$m(me));async function pe(){await oe.current.configure({gl:d,scene:Y,events:m,shadows:S,linear:_,flat:y,legacy:b,orthographic:A,frameloop:H,dpr:Q,performance:V,raycaster:C,camera:x,size:j,onPointerMissed:(..._e)=>ve.current==null?void 0:ve.current(..._e),onCreated:_e=>{_e.events.connect==null||_e.events.connect(g?xm(g)?g.current:g:se.current),h&&_e.setEvents({compute:(ge,Ne)=>{const ze=ge[h+"X"],ut=ge[h+"Y"];Ne.pointer.set(ze/Ne.size.width*2-1,-(ut/Ne.size.height)*2+1),Ne.raycaster.setFromCamera(Ne.pointer,Ne.camera)}}),F?.(_e)}}),oe.current.render(Ee.jsx(re,{children:Ee.jsx(Cm,{set:X,children:Ee.jsx(L.Suspense,{fallback:Ee.jsx(zm,{set:le}),children:l??null})})}))}pe()}}),L.useEffect(()=>{const me=q.current;if(me)return()=>Id(me)},[]);const he=g?"none":"auto";return Ee.jsx("div",{ref:se,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:he,...o},...G,children:Ee.jsx("div",{ref:O,style:{width:"100%",height:"100%"},children:Ee.jsx("canvas",{ref:q,style:{display:"block"},children:s})})})}function h0(a){return Ee.jsx(Hd,{children:Ee.jsx(d0,{...a})})}function er(){return er=Object.assign?Object.assign.bind():function(a){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var r in s)({}).hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},er.apply(null,arguments)}const Wd=parseInt(ar.replace(/\D+/g,""));var Ma=Uint8Array,Zn=Uint16Array,ec=Uint32Array,kd=new Ma([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$d=new Ma([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),p0=new Ma([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eh=function(a,l){for(var s=new Zn(31),r=0;r<31;++r)s[r]=l+=1<<a[r-1];for(var o=new ec(s[30]),r=1;r<30;++r)for(var d=s[r];d<s[r+1];++d)o[d]=d-s[r]<<5|r;return[s,o]},th=eh(kd,2),ah=th[0],v0=th[1];ah[28]=258,v0[258]=28;var m0=eh($d,0),g0=m0[0],tc=new Zn(32768);for(var st=0;st<32768;++st){var jn=(st&43690)>>>1|(st&21845)<<1;jn=(jn&52428)>>>2|(jn&13107)<<2,jn=(jn&61680)>>>4|(jn&3855)<<4,tc[st]=((jn&65280)>>>8|(jn&255)<<8)>>>1}var Fi=(function(a,l,s){for(var r=a.length,o=0,d=new Zn(l);o<r;++o)++d[a[o]-1];var m=new Zn(l);for(o=0;o<l;++o)m[o]=m[o-1]+d[o-1]<<1;var g;if(s){g=new Zn(1<<l);var h=15-l;for(o=0;o<r;++o)if(a[o])for(var S=o<<4|a[o],_=l-a[o],y=m[a[o]-1]++<<_,b=y|(1<<_)-1;y<=b;++y)g[tc[y]>>>h]=S}else for(g=new Zn(r),o=0;o<r;++o)a[o]&&(g[o]=tc[m[a[o]-1]++]>>>15-a[o]);return g}),es=new Ma(288);for(var st=0;st<144;++st)es[st]=8;for(var st=144;st<256;++st)es[st]=9;for(var st=256;st<280;++st)es[st]=7;for(var st=280;st<288;++st)es[st]=8;var nh=new Ma(32);for(var st=0;st<32;++st)nh[st]=5;var y0=Fi(es,9,1),S0=Fi(nh,5,1),Fu=function(a){for(var l=a[0],s=1;s<a.length;++s)a[s]>l&&(l=a[s]);return l},Oa=function(a,l,s){var r=l/8|0;return(a[r]|a[r+1]<<8)>>(l&7)&s},Xu=function(a,l){var s=l/8|0;return(a[s]|a[s+1]<<8|a[s+2]<<16)>>(l&7)},E0=function(a){return(a/8|0)+(a&7&&1)},b0=function(a,l,s){(s==null||s>a.length)&&(s=a.length);var r=new(a instanceof Zn?Zn:a instanceof ec?ec:Ma)(s-l);return r.set(a.subarray(l,s)),r},T0=function(a,l,s){var r=a.length;if(!r||s&&!s.l&&r<5)return l||new Ma(0);var o=!l||s,d=!s||s.i;s||(s={}),l||(l=new Ma(r*3));var m=function(Oe){var Nt=l.length;if(Oe>Nt){var bt=new Ma(Math.max(Nt*2,Oe));bt.set(l),l=bt}},g=s.f||0,h=s.p||0,S=s.b||0,_=s.l,y=s.d,b=s.m,A=s.n,H=r*8;do{if(!_){s.f=g=Oa(a,h,1);var Q=Oa(a,h+1,3);if(h+=3,Q)if(Q==1)_=y0,y=S0,b=9,A=5;else if(Q==2){var Y=Oa(a,h,31)+257,I=Oa(a,h+10,15)+4,F=Y+Oa(a,h+5,31)+1;h+=14;for(var G=new Ma(F),re=new Ma(19),O=0;O<I;++O)re[p0[O]]=Oa(a,h+O*3,7);h+=I*3;for(var j=Fu(re),q=(1<<j)-1,se=Fi(re,j,1),O=0;O<F;){var ve=se[Oa(a,h,q)];h+=ve&15;var V=ve>>>4;if(V<16)G[O++]=V;else{var ee=0,le=0;for(V==16?(le=3+Oa(a,h,3),h+=2,ee=G[O-1]):V==17?(le=3+Oa(a,h,7),h+=3):V==18&&(le=11+Oa(a,h,127),h+=7);le--;)G[O++]=ee}}var Se=G.subarray(0,Y),X=G.subarray(Y);b=Fu(Se),A=Fu(X),_=Fi(Se,b,1),y=Fi(X,A,1)}else throw"invalid block type";else{var V=E0(h)+4,C=a[V-4]|a[V-3]<<8,x=V+C;if(x>r){if(d)throw"unexpected EOF";break}o&&m(S+C),l.set(a.subarray(V,x),S),s.b=S+=C,s.p=h=x*8;continue}if(h>H){if(d)throw"unexpected EOF";break}}o&&m(S+131072);for(var oe=(1<<b)-1,he=(1<<A)-1,me=h;;me=h){var ee=_[Xu(a,h)&oe],pe=ee>>>4;if(h+=ee&15,h>H){if(d)throw"unexpected EOF";break}if(!ee)throw"invalid length/literal";if(pe<256)l[S++]=pe;else if(pe==256){me=h,_=null;break}else{var _e=pe-254;if(pe>264){var O=pe-257,ge=kd[O];_e=Oa(a,h,(1<<ge)-1)+ah[O],h+=ge}var Ne=y[Xu(a,h)&he],ze=Ne>>>4;if(!Ne)throw"invalid distance";h+=Ne&15;var X=g0[ze];if(ze>3){var ge=$d[ze];X+=Xu(a,h)&(1<<ge)-1,h+=ge}if(h>H){if(d)throw"unexpected EOF";break}o&&m(S+131072);for(var ut=S+_e;S<ut;S+=4)l[S]=l[S-X],l[S+1]=l[S+1-X],l[S+2]=l[S+2-X],l[S+3]=l[S+3-X];S=ut}}s.l=_,s.p=me,s.b=S,_&&(g=1,s.m=b,s.d=y,s.n=A)}while(!g);return S==l.length?l:b0(l,0,S)},_0=new Ma(0),M0=function(a){if((a[0]&15)!=8||a[0]>>>4>7||(a[0]<<8|a[1])%31)throw"invalid zlib data";if(a[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function qs(a,l){return T0((M0(a),a.subarray(2,-4)),l)}var x0=typeof TextDecoder<"u"&&new TextDecoder,R0=0;try{x0.decode(_0,{stream:!0}),R0=1}catch{}const A0=a=>a&&a.isCubeTexture;class z0 extends ki{constructor(l,s){var r,o;const d=A0(l),g=((o=d?(r=l.image[0])==null?void 0:r.width:l.image.width)!=null?o:1024)/4,h=Math.floor(Math.log2(g)),S=Math.pow(2,h),_=3*Math.max(S,112),y=4*S,b=[d?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/_}`,`#define CUBEUV_TEXEL_HEIGHT ${1/y}`,`#define CUBEUV_MAX_MIP ${h}.0`],A=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,H=b.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Wd>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,Q={map:{value:l},height:{value:s?.height||15},radius:{value:s?.radius||100}},V=new Mv(1,16),C=new xa({uniforms:Q,fragmentShader:H,vertexShader:A,side:kl});super(V,C)}set radius(l){this.material.uniforms.radius.value=l}get radius(){return this.material.uniforms.radius.value}set height(l){this.material.uniforms.height.value=l}get height(){return this.material.uniforms.height.value}}var C0=Object.defineProperty,U0=(a,l,s)=>l in a?C0(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,N0=(a,l,s)=>(U0(a,l+"",s),s);class D0{constructor(){N0(this,"_listeners")}addEventListener(l,s){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[l]===void 0&&(r[l]=[]),r[l].indexOf(s)===-1&&r[l].push(s)}hasEventListener(l,s){if(this._listeners===void 0)return!1;const r=this._listeners;return r[l]!==void 0&&r[l].indexOf(s)!==-1}removeEventListener(l,s){if(this._listeners===void 0)return;const o=this._listeners[l];if(o!==void 0){const d=o.indexOf(s);d!==-1&&o.splice(d,1)}}dispatchEvent(l){if(this._listeners===void 0)return;const r=this._listeners[l.type];if(r!==void 0){l.target=this;const o=r.slice(0);for(let d=0,m=o.length;d<m;d++)o[d].call(this,l);l.target=null}}}var O0=Object.defineProperty,B0=(a,l,s)=>l in a?O0(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,Te=(a,l,s)=>(B0(a,typeof l!="symbol"?l+"":l,s),s);const Zs=new xv,id=new Rv,H0=Math.cos(70*(Math.PI/180)),sd=(a,l)=>(a%l+l)%l;let w0=class extends D0{constructor(l,s){super(),Te(this,"object"),Te(this,"domElement"),Te(this,"enabled",!0),Te(this,"target",new ft),Te(this,"minDistance",0),Te(this,"maxDistance",1/0),Te(this,"minZoom",0),Te(this,"maxZoom",1/0),Te(this,"minPolarAngle",0),Te(this,"maxPolarAngle",Math.PI),Te(this,"minAzimuthAngle",-1/0),Te(this,"maxAzimuthAngle",1/0),Te(this,"enableDamping",!1),Te(this,"dampingFactor",.05),Te(this,"enableZoom",!0),Te(this,"zoomSpeed",1),Te(this,"enableRotate",!0),Te(this,"rotateSpeed",1),Te(this,"enablePan",!0),Te(this,"panSpeed",1),Te(this,"screenSpacePanning",!0),Te(this,"keyPanSpeed",7),Te(this,"zoomToCursor",!1),Te(this,"autoRotate",!1),Te(this,"autoRotateSpeed",2),Te(this,"reverseOrbit",!1),Te(this,"reverseHorizontalOrbit",!1),Te(this,"reverseVerticalOrbit",!1),Te(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Te(this,"mouseButtons",{LEFT:Kl.ROTATE,MIDDLE:Kl.DOLLY,RIGHT:Kl.PAN}),Te(this,"touches",{ONE:Il.ROTATE,TWO:Il.DOLLY_PAN}),Te(this,"target0"),Te(this,"position0"),Te(this,"zoom0"),Te(this,"_domElementKeyEvents",null),Te(this,"getPolarAngle"),Te(this,"getAzimuthalAngle"),Te(this,"setPolarAngle"),Te(this,"setAzimuthalAngle"),Te(this,"getDistance"),Te(this,"getZoomScale"),Te(this,"listenToKeyEvents"),Te(this,"stopListenToKeyEvents"),Te(this,"saveState"),Te(this,"reset"),Te(this,"update"),Te(this,"connect"),Te(this,"dispose"),Te(this,"dollyIn"),Te(this,"dollyOut"),Te(this,"getScale"),Te(this,"setScale"),this.object=l,this.domElement=s,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>_.phi,this.getAzimuthalAngle=()=>_.theta,this.setPolarAngle=M=>{let J=sd(M,2*Math.PI),fe=_.phi;fe<0&&(fe+=2*Math.PI),J<0&&(J+=2*Math.PI);let we=Math.abs(J-fe);2*Math.PI-we<we&&(J<fe?J+=2*Math.PI:fe+=2*Math.PI),y.phi=J-fe,r.update()},this.setAzimuthalAngle=M=>{let J=sd(M,2*Math.PI),fe=_.theta;fe<0&&(fe+=2*Math.PI),J<0&&(J+=2*Math.PI);let we=Math.abs(J-fe);2*Math.PI-we<we&&(J<fe?J+=2*Math.PI:fe+=2*Math.PI),y.theta=J-fe,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=M=>{M.addEventListener("keydown",yn),this._domElementKeyEvents=M},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",yn),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(o),r.update(),h=g.NONE},this.update=(()=>{const M=new ft,J=new ft(0,1,0),fe=new Df().setFromUnitVectors(l.up,J),we=fe.clone().invert(),te=new ft,gt=new Df,$t=2*Math.PI;return function(){const In=r.object.position;fe.setFromUnitVectors(l.up,J),we.copy(fe).invert(),M.copy(In).sub(r.target),M.applyQuaternion(fe),_.setFromVector3(M),r.autoRotate&&h===g.NONE&&le(ve()),r.enableDamping?(_.theta+=y.theta*r.dampingFactor,_.phi+=y.phi*r.dampingFactor):(_.theta+=y.theta,_.phi+=y.phi);let Qt=r.minAzimuthAngle,Ot=r.maxAzimuthAngle;isFinite(Qt)&&isFinite(Ot)&&(Qt<-Math.PI?Qt+=$t:Qt>Math.PI&&(Qt-=$t),Ot<-Math.PI?Ot+=$t:Ot>Math.PI&&(Ot-=$t),Qt<=Ot?_.theta=Math.max(Qt,Math.min(Ot,_.theta)):_.theta=_.theta>(Qt+Ot)/2?Math.max(Qt,_.theta):Math.min(Ot,_.theta)),_.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,_.phi)),_.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(A,r.dampingFactor):r.target.add(A),r.zoomToCursor&&j||r.object.isOrthographicCamera?_.radius=Ne(_.radius):_.radius=Ne(_.radius*b),M.setFromSpherical(_),M.applyQuaternion(we),In.copy(r.target).add(M),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(y.theta*=1-r.dampingFactor,y.phi*=1-r.dampingFactor,A.multiplyScalar(1-r.dampingFactor)):(y.set(0,0,0),A.set(0,0,0));let ea=!1;if(r.zoomToCursor&&j){let pa=null;if(r.object instanceof Zi&&r.object.isPerspectiveCamera){const qa=M.length();pa=Ne(qa*b);const tn=qa-pa;r.object.position.addScaledVector(re,tn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const qa=new ft(O.x,O.y,0);qa.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/b)),r.object.updateProjectionMatrix(),ea=!0;const tn=new ft(O.x,O.y,0);tn.unproject(r.object),r.object.position.sub(tn).add(qa),r.object.updateMatrixWorld(),pa=M.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;pa!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(pa).add(r.object.position):(Zs.origin.copy(r.object.position),Zs.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Zs.direction))<H0?l.lookAt(r.target):(id.setFromNormalAndCoplanarPoint(r.object.up,r.target),Zs.intersectPlane(id,r.target))))}else r.object instanceof ni&&r.object.isOrthographicCamera&&(ea=b!==1,ea&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/b)),r.object.updateProjectionMatrix()));return b=1,j=!1,ea||te.distanceToSquared(r.object.position)>S||8*(1-gt.dot(r.object.quaternion))>S?(r.dispatchEvent(o),te.copy(r.object.position),gt.copy(r.object.quaternion),ea=!1,!0):!1}})(),this.connect=M=>{r.domElement=M,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Sn),r.domElement.addEventListener("pointerdown",bl),r.domElement.addEventListener("pointercancel",Va),r.domElement.addEventListener("wheel",gn)},this.dispose=()=>{var M,J,fe,we,te,gt;r.domElement&&(r.domElement.style.touchAction="auto"),(M=r.domElement)==null||M.removeEventListener("contextmenu",Sn),(J=r.domElement)==null||J.removeEventListener("pointerdown",bl),(fe=r.domElement)==null||fe.removeEventListener("pointercancel",Va),(we=r.domElement)==null||we.removeEventListener("wheel",gn),(te=r.domElement)==null||te.ownerDocument.removeEventListener("pointermove",$a),(gt=r.domElement)==null||gt.ownerDocument.removeEventListener("pointerup",Va),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",yn)};const r=this,o={type:"change"},d={type:"start"},m={type:"end"},g={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=g.NONE;const S=1e-6,_=new Iu,y=new Iu;let b=1;const A=new ft,H=new Ke,Q=new Ke,V=new Ke,C=new Ke,x=new Ke,Y=new Ke,I=new Ke,F=new Ke,G=new Ke,re=new ft,O=new Ke;let j=!1;const q=[],se={};function ve(){return 2*Math.PI/60/60*r.autoRotateSpeed}function ee(){return Math.pow(.95,r.zoomSpeed)}function le(M){r.reverseOrbit||r.reverseHorizontalOrbit?y.theta+=M:y.theta-=M}function Se(M){r.reverseOrbit||r.reverseVerticalOrbit?y.phi+=M:y.phi-=M}const X=(()=>{const M=new ft;return function(fe,we){M.setFromMatrixColumn(we,0),M.multiplyScalar(-fe),A.add(M)}})(),oe=(()=>{const M=new ft;return function(fe,we){r.screenSpacePanning===!0?M.setFromMatrixColumn(we,1):(M.setFromMatrixColumn(we,0),M.crossVectors(r.object.up,M)),M.multiplyScalar(fe),A.add(M)}})(),he=(()=>{const M=new ft;return function(fe,we){const te=r.domElement;if(te&&r.object instanceof Zi&&r.object.isPerspectiveCamera){const gt=r.object.position;M.copy(gt).sub(r.target);let $t=M.length();$t*=Math.tan(r.object.fov/2*Math.PI/180),X(2*fe*$t/te.clientHeight,r.object.matrix),oe(2*we*$t/te.clientHeight,r.object.matrix)}else te&&r.object instanceof ni&&r.object.isOrthographicCamera?(X(fe*(r.object.right-r.object.left)/r.object.zoom/te.clientWidth,r.object.matrix),oe(we*(r.object.top-r.object.bottom)/r.object.zoom/te.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function me(M){r.object instanceof Zi&&r.object.isPerspectiveCamera||r.object instanceof ni&&r.object.isOrthographicCamera?b=M:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function pe(M){me(b/M)}function _e(M){me(b*M)}function ge(M){if(!r.zoomToCursor||!r.domElement)return;j=!0;const J=r.domElement.getBoundingClientRect(),fe=M.clientX-J.left,we=M.clientY-J.top,te=J.width,gt=J.height;O.x=fe/te*2-1,O.y=-(we/gt)*2+1,re.set(O.x,O.y,1).unproject(r.object).sub(r.object.position).normalize()}function Ne(M){return Math.max(r.minDistance,Math.min(r.maxDistance,M))}function ze(M){H.set(M.clientX,M.clientY)}function ut(M){ge(M),I.set(M.clientX,M.clientY)}function Oe(M){C.set(M.clientX,M.clientY)}function Nt(M){Q.set(M.clientX,M.clientY),V.subVectors(Q,H).multiplyScalar(r.rotateSpeed);const J=r.domElement;J&&(le(2*Math.PI*V.x/J.clientHeight),Se(2*Math.PI*V.y/J.clientHeight)),H.copy(Q),r.update()}function bt(M){F.set(M.clientX,M.clientY),G.subVectors(F,I),G.y>0?pe(ee()):G.y<0&&_e(ee()),I.copy(F),r.update()}function Sl(M){x.set(M.clientX,M.clientY),Y.subVectors(x,C).multiplyScalar(r.panSpeed),he(Y.x,Y.y),C.copy(x),r.update()}function El(M){ge(M),M.deltaY<0?_e(ee()):M.deltaY>0&&pe(ee()),r.update()}function wa(M){let J=!1;switch(M.code){case r.keys.UP:he(0,r.keyPanSpeed),J=!0;break;case r.keys.BOTTOM:he(0,-r.keyPanSpeed),J=!0;break;case r.keys.LEFT:he(r.keyPanSpeed,0),J=!0;break;case r.keys.RIGHT:he(-r.keyPanSpeed,0),J=!0;break}J&&(M.preventDefault(),r.update())}function Ga(){if(q.length==1)H.set(q[0].pageX,q[0].pageY);else{const M=.5*(q[0].pageX+q[1].pageX),J=.5*(q[0].pageY+q[1].pageY);H.set(M,J)}}function Aa(){if(q.length==1)C.set(q[0].pageX,q[0].pageY);else{const M=.5*(q[0].pageX+q[1].pageX),J=.5*(q[0].pageY+q[1].pageY);C.set(M,J)}}function ja(){const M=q[0].pageX-q[1].pageX,J=q[0].pageY-q[1].pageY,fe=Math.sqrt(M*M+J*J);I.set(0,fe)}function Wa(){r.enableZoom&&ja(),r.enablePan&&Aa()}function Fn(){r.enableZoom&&ja(),r.enableRotate&&Ga()}function kt(M){if(q.length==1)Q.set(M.pageX,M.pageY);else{const fe=ha(M),we=.5*(M.pageX+fe.x),te=.5*(M.pageY+fe.y);Q.set(we,te)}V.subVectors(Q,H).multiplyScalar(r.rotateSpeed);const J=r.domElement;J&&(le(2*Math.PI*V.x/J.clientHeight),Se(2*Math.PI*V.y/J.clientHeight)),H.copy(Q)}function Xn(M){if(q.length==1)x.set(M.pageX,M.pageY);else{const J=ha(M),fe=.5*(M.pageX+J.x),we=.5*(M.pageY+J.y);x.set(fe,we)}Y.subVectors(x,C).multiplyScalar(r.panSpeed),he(Y.x,Y.y),C.copy(x)}function ka(M){const J=ha(M),fe=M.pageX-J.x,we=M.pageY-J.y,te=Math.sqrt(fe*fe+we*we);F.set(0,te),G.set(0,Math.pow(F.y/I.y,r.zoomSpeed)),pe(G.y),I.copy(F)}function Xt(M){r.enableZoom&&ka(M),r.enablePan&&Xn(M)}function La(M){r.enableZoom&&ka(M),r.enableRotate&&kt(M)}function bl(M){var J,fe;r.enabled!==!1&&(q.length===0&&((J=r.domElement)==null||J.ownerDocument.addEventListener("pointermove",$a),(fe=r.domElement)==null||fe.ownerDocument.addEventListener("pointerup",Va)),Qn(M),M.pointerType==="touch"?en(M):mn(M))}function $a(M){r.enabled!==!1&&(M.pointerType==="touch"?di(M):fi(M))}function Va(M){var J,fe,we;Dt(M),q.length===0&&((J=r.domElement)==null||J.releasePointerCapture(M.pointerId),(fe=r.domElement)==null||fe.ownerDocument.removeEventListener("pointermove",$a),(we=r.domElement)==null||we.ownerDocument.removeEventListener("pointerup",Va)),r.dispatchEvent(m),h=g.NONE}function mn(M){let J;switch(M.button){case 0:J=r.mouseButtons.LEFT;break;case 1:J=r.mouseButtons.MIDDLE;break;case 2:J=r.mouseButtons.RIGHT;break;default:J=-1}switch(J){case Kl.DOLLY:if(r.enableZoom===!1)return;ut(M),h=g.DOLLY;break;case Kl.ROTATE:if(M.ctrlKey||M.metaKey||M.shiftKey){if(r.enablePan===!1)return;Oe(M),h=g.PAN}else{if(r.enableRotate===!1)return;ze(M),h=g.ROTATE}break;case Kl.PAN:if(M.ctrlKey||M.metaKey||M.shiftKey){if(r.enableRotate===!1)return;ze(M),h=g.ROTATE}else{if(r.enablePan===!1)return;Oe(M),h=g.PAN}break;default:h=g.NONE}h!==g.NONE&&r.dispatchEvent(d)}function fi(M){if(r.enabled!==!1)switch(h){case g.ROTATE:if(r.enableRotate===!1)return;Nt(M);break;case g.DOLLY:if(r.enableZoom===!1)return;bt(M);break;case g.PAN:if(r.enablePan===!1)return;Sl(M);break}}function gn(M){r.enabled===!1||r.enableZoom===!1||h!==g.NONE&&h!==g.ROTATE||(M.preventDefault(),r.dispatchEvent(d),El(M),r.dispatchEvent(m))}function yn(M){r.enabled===!1||r.enablePan===!1||wa(M)}function en(M){switch(at(M),q.length){case 1:switch(r.touches.ONE){case Il.ROTATE:if(r.enableRotate===!1)return;Ga(),h=g.TOUCH_ROTATE;break;case Il.PAN:if(r.enablePan===!1)return;Aa(),h=g.TOUCH_PAN;break;default:h=g.NONE}break;case 2:switch(r.touches.TWO){case Il.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Wa(),h=g.TOUCH_DOLLY_PAN;break;case Il.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Fn(),h=g.TOUCH_DOLLY_ROTATE;break;default:h=g.NONE}break;default:h=g.NONE}h!==g.NONE&&r.dispatchEvent(d)}function di(M){switch(at(M),h){case g.TOUCH_ROTATE:if(r.enableRotate===!1)return;kt(M),r.update();break;case g.TOUCH_PAN:if(r.enablePan===!1)return;Xn(M),r.update();break;case g.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Xt(M),r.update();break;case g.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;La(M),r.update();break;default:h=g.NONE}}function Sn(M){r.enabled!==!1&&M.preventDefault()}function Qn(M){q.push(M)}function Dt(M){delete se[M.pointerId];for(let J=0;J<q.length;J++)if(q[J].pointerId==M.pointerId){q.splice(J,1);return}}function at(M){let J=se[M.pointerId];J===void 0&&(J=new Ke,se[M.pointerId]=J),J.set(M.pageX,M.pageY)}function ha(M){const J=M.pointerId===q[0].pointerId?q[1]:q[0];return se[J.pointerId]}this.dollyIn=(M=ee())=>{_e(M),r.update()},this.dollyOut=(M=ee())=>{pe(M),r.update()},this.getScale=()=>b,this.setScale=M=>{me(M),r.update()},this.getZoomScale=()=>ee(),s!==void 0&&this.connect(s),this.update()}};class G0 extends _d{constructor(l){super(l),this.type=da}parse(l){const m=function(O,j){switch(O){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(j||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(j||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(j||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(j||""))}},y=function(O,j,q){j=j||1024;let ve=O.pos,ee=-1,le=0,Se="",X=String.fromCharCode.apply(null,new Uint16Array(O.subarray(ve,ve+128)));for(;0>(ee=X.indexOf(`
`))&&le<j&&ve<O.byteLength;)Se+=X,le+=X.length,ve+=128,X+=String.fromCharCode.apply(null,new Uint16Array(O.subarray(ve,ve+128)));return-1<ee?(O.pos+=le+ee+1,Se+X.slice(0,ee)):!1},b=function(O){const j=/^#\?(\S+)/,q=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,se=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ve=/^\s*FORMAT=(\S+)\s*$/,ee=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,le={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Se,X;for((O.pos>=O.byteLength||!(Se=y(O)))&&m(1,"no header found"),(X=Se.match(j))||m(3,"bad initial token"),le.valid|=1,le.programtype=X[1],le.string+=Se+`
`;Se=y(O),Se!==!1;){if(le.string+=Se+`
`,Se.charAt(0)==="#"){le.comments+=Se+`
`;continue}if((X=Se.match(q))&&(le.gamma=parseFloat(X[1])),(X=Se.match(se))&&(le.exposure=parseFloat(X[1])),(X=Se.match(ve))&&(le.valid|=2,le.format=X[1]),(X=Se.match(ee))&&(le.valid|=4,le.height=parseInt(X[1],10),le.width=parseInt(X[2],10)),le.valid&2&&le.valid&4)break}return le.valid&2||m(3,"missing format specifier"),le.valid&4||m(3,"missing image size specifier"),le},A=function(O,j,q){const se=j;if(se<8||se>32767||O[0]!==2||O[1]!==2||O[2]&128)return new Uint8Array(O);se!==(O[2]<<8|O[3])&&m(3,"wrong scanline width");const ve=new Uint8Array(4*j*q);ve.length||m(4,"unable to allocate buffer space");let ee=0,le=0;const Se=4*se,X=new Uint8Array(4),oe=new Uint8Array(Se);let he=q;for(;he>0&&le<O.byteLength;){le+4>O.byteLength&&m(1),X[0]=O[le++],X[1]=O[le++],X[2]=O[le++],X[3]=O[le++],(X[0]!=2||X[1]!=2||(X[2]<<8|X[3])!=se)&&m(3,"bad rgbe scanline format");let me=0,pe;for(;me<Se&&le<O.byteLength;){pe=O[le++];const ge=pe>128;if(ge&&(pe-=128),(pe===0||me+pe>Se)&&m(3,"bad scanline data"),ge){const Ne=O[le++];for(let ze=0;ze<pe;ze++)oe[me++]=Ne}else oe.set(O.subarray(le,le+pe),me),me+=pe,le+=pe}const _e=se;for(let ge=0;ge<_e;ge++){let Ne=0;ve[ee]=oe[ge+Ne],Ne+=se,ve[ee+1]=oe[ge+Ne],Ne+=se,ve[ee+2]=oe[ge+Ne],Ne+=se,ve[ee+3]=oe[ge+Ne],ee+=4}he--}return ve},H=function(O,j,q,se){const ve=O[j+3],ee=Math.pow(2,ve-128)/255;q[se+0]=O[j+0]*ee,q[se+1]=O[j+1]*ee,q[se+2]=O[j+2]*ee,q[se+3]=1},Q=function(O,j,q,se){const ve=O[j+3],ee=Math.pow(2,ve-128)/255;q[se+0]=$l.toHalfFloat(Math.min(O[j+0]*ee,65504)),q[se+1]=$l.toHalfFloat(Math.min(O[j+1]*ee,65504)),q[se+2]=$l.toHalfFloat(Math.min(O[j+2]*ee,65504)),q[se+3]=$l.toHalfFloat(1)},V=new Uint8Array(l);V.pos=0;const C=b(V),x=C.width,Y=C.height,I=A(V.subarray(V.pos),x,Y);let F,G,re;switch(this.type){case Ja:re=I.length/4;const O=new Float32Array(re*4);for(let q=0;q<re;q++)H(I,q*4,O,q*4);F=O,G=Ja;break;case da:re=I.length/4;const j=new Uint16Array(re*4);for(let q=0;q<re;q++)Q(I,q*4,j,q*4);F=j,G=da;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:x,height:Y,data:F,header:C.string,gamma:C.gamma,exposure:C.exposure,type:G}}setDataType(l){return this.type=l,this}load(l,s,r,o){function d(m,g){switch(m.type){case Ja:case da:"colorSpace"in m?m.colorSpace="srgb-linear":m.encoding=3e3,m.minFilter=Jt,m.magFilter=Jt,m.generateMipmaps=!1,m.flipY=!0;break}s&&s(m,g)}return super.load(l,d,r,o)}}const ji=Wd>=152;class j0 extends _d{constructor(l){super(l),this.type=da}parse(l){const j=Math.pow(2.7182818,2.2);function q(f,v){for(var T=0,N=0;N<65536;++N)(N==0||f[N>>3]&1<<(N&7))&&(v[T++]=N);for(var w=T-1;T<65536;)v[T++]=0;return w}function se(f){for(var v=0;v<16384;v++)f[v]={},f[v].len=0,f[v].lit=0,f[v].p=null}const ve={l:0,c:0,lc:0};function ee(f,v,T,N,w){for(;T<f;)v=v<<8|ha(N,w),T+=8;T-=f,ve.l=v>>T&(1<<f)-1,ve.c=v,ve.lc=T}const le=new Array(59);function Se(f){for(var v=0;v<=58;++v)le[v]=0;for(var v=0;v<65537;++v)le[f[v]]+=1;for(var T=0,v=58;v>0;--v){var N=T+le[v]>>1;le[v]=T,T=N}for(var v=0;v<65537;++v){var w=f[v];w>0&&(f[v]=w|le[w]++<<6)}}function X(f,v,T,N,w,B,$){for(var P=T,W=0,K=0;w<=B;w++){if(P.value-T.value>N)return!1;ee(6,W,K,f,P);var ie=ve.l;if(W=ve.c,K=ve.lc,$[w]=ie,ie==63){if(P.value-T.value>N)throw"Something wrong with hufUnpackEncTable";ee(8,W,K,f,P);var ne=ve.l+6;if(W=ve.c,K=ve.lc,w+ne>B+1)throw"Something wrong with hufUnpackEncTable";for(;ne--;)$[w++]=0;w--}else if(ie>=59){var ne=ie-59+2;if(w+ne>B+1)throw"Something wrong with hufUnpackEncTable";for(;ne--;)$[w++]=0;w--}}Se($)}function oe(f){return f&63}function he(f){return f>>6}function me(f,v,T,N){for(;v<=T;v++){var w=he(f[v]),B=oe(f[v]);if(w>>B)throw"Invalid table entry";if(B>14){var $=N[w>>B-14];if($.len)throw"Invalid table entry";if($.lit++,$.p){var P=$.p;$.p=new Array($.lit);for(var W=0;W<$.lit-1;++W)$.p[W]=P[W]}else $.p=new Array(1);$.p[$.lit-1]=v}else if(B)for(var K=0,W=1<<14-B;W>0;W--){var $=N[(w<<14-B)+K];if($.len||$.p)throw"Invalid table entry";$.len=B,$.lit=v,K++}}return!0}const pe={c:0,lc:0};function _e(f,v,T,N){f=f<<8|ha(T,N),v+=8,pe.c=f,pe.lc=v}const ge={c:0,lc:0};function Ne(f,v,T,N,w,B,$,P,W,K){if(f==v){N<8&&(_e(T,N,w,$),T=pe.c,N=pe.lc),N-=8;var ie=T>>N,ie=new Uint8Array([ie])[0];if(W.value+ie>K)return!1;for(var ne=P[W.value-1];ie-- >0;)P[W.value++]=ne}else if(W.value<K)P[W.value++]=f;else return!1;ge.c=T,ge.lc=N}function ze(f){return f&65535}function ut(f){var v=ze(f);return v>32767?v-65536:v}const Oe={a:0,b:0};function Nt(f,v){var T=ut(f),N=ut(v),w=N,B=T+(w&1)+(w>>1),$=B,P=B-w;Oe.a=$,Oe.b=P}function bt(f,v){var T=ze(f),N=ze(v),w=T-(N>>1)&65535,B=N+w-32768&65535;Oe.a=B,Oe.b=w}function Sl(f,v,T,N,w,B,$){for(var P=$<16384,W=T>w?w:T,K=1,ie;K<=W;)K<<=1;for(K>>=1,ie=K,K>>=1;K>=1;){for(var ne=0,et=ne+B*(w-ie),de=B*K,ye=B*ie,xe=N*K,Ce=N*ie,Xe,Ie,dt,Mt;ne<=et;ne+=ye){for(var Pe=ne,ta=ne+N*(T-ie);Pe<=ta;Pe+=Ce){var Je=Pe+xe,mt=Pe+de,za=mt+xe;P?(Nt(f[Pe+v],f[mt+v]),Xe=Oe.a,dt=Oe.b,Nt(f[Je+v],f[za+v]),Ie=Oe.a,Mt=Oe.b,Nt(Xe,Ie),f[Pe+v]=Oe.a,f[Je+v]=Oe.b,Nt(dt,Mt),f[mt+v]=Oe.a,f[za+v]=Oe.b):(bt(f[Pe+v],f[mt+v]),Xe=Oe.a,dt=Oe.b,bt(f[Je+v],f[za+v]),Ie=Oe.a,Mt=Oe.b,bt(Xe,Ie),f[Pe+v]=Oe.a,f[Je+v]=Oe.b,bt(dt,Mt),f[mt+v]=Oe.a,f[za+v]=Oe.b)}if(T&K){var mt=Pe+de;P?Nt(f[Pe+v],f[mt+v]):bt(f[Pe+v],f[mt+v]),Xe=Oe.a,f[mt+v]=Oe.b,f[Pe+v]=Xe}}if(w&K)for(var Pe=ne,ta=ne+N*(T-ie);Pe<=ta;Pe+=Ce){var Je=Pe+xe;P?Nt(f[Pe+v],f[Je+v]):bt(f[Pe+v],f[Je+v]),Xe=Oe.a,f[Je+v]=Oe.b,f[Pe+v]=Xe}ie=K,K>>=1}return ne}function El(f,v,T,N,w,B,$,P,W,K){for(var ie=0,ne=0,et=P,de=Math.trunc(w.value+(B+7)/8);w.value<de;)for(_e(ie,ne,T,w),ie=pe.c,ne=pe.lc;ne>=14;){var ye=ie>>ne-14&16383,xe=v[ye];if(xe.len)ne-=xe.len,Ne(xe.lit,$,ie,ne,T,N,w,W,K,et),ie=ge.c,ne=ge.lc;else{if(!xe.p)throw"hufDecode issues";var Ce;for(Ce=0;Ce<xe.lit;Ce++){for(var Xe=oe(f[xe.p[Ce]]);ne<Xe&&w.value<de;)_e(ie,ne,T,w),ie=pe.c,ne=pe.lc;if(ne>=Xe&&he(f[xe.p[Ce]])==(ie>>ne-Xe&(1<<Xe)-1)){ne-=Xe,Ne(xe.p[Ce],$,ie,ne,T,N,w,W,K,et),ie=ge.c,ne=ge.lc;break}}if(Ce==xe.lit)throw"hufDecode issues"}}var Ie=8-B&7;for(ie>>=Ie,ne-=Ie;ne>0;){var xe=v[ie<<14-ne&16383];if(xe.len)ne-=xe.len,Ne(xe.lit,$,ie,ne,T,N,w,W,K,et),ie=ge.c,ne=ge.lc;else throw"hufDecode issues"}return!0}function wa(f,v,T,N,w,B){var $={value:0},P=T.value,W=at(v,T),K=at(v,T);T.value+=4;var ie=at(v,T);if(T.value+=4,W<0||W>=65537||K<0||K>=65537)throw"Something wrong with HUF_ENCSIZE";var ne=new Array(65537),et=new Array(16384);se(et);var de=N-(T.value-P);if(X(f,v,T,de,W,K,ne),ie>8*(N-(T.value-P)))throw"Something wrong with hufUncompress";me(ne,W,K,et),El(ne,et,f,v,T,ie,K,B,w,$)}function Ga(f,v,T){for(var N=0;N<T;++N)v[N]=f[v[N]]}function Aa(f){for(var v=1;v<f.length;v++){var T=f[v-1]+f[v]-128;f[v]=T}}function ja(f,v){for(var T=0,N=Math.floor((f.length+1)/2),w=0,B=f.length-1;!(w>B||(v[w++]=f[T++],w>B));)v[w++]=f[N++]}function Wa(f){for(var v=f.byteLength,T=new Array,N=0,w=new DataView(f);v>0;){var B=w.getInt8(N++);if(B<0){var $=-B;v-=$+1;for(var P=0;P<$;P++)T.push(w.getUint8(N++))}else{var $=B;v-=2;for(var W=w.getUint8(N++),P=0;P<$+1;P++)T.push(W)}}return T}function Fn(f,v,T,N,w,B){var Je=new DataView(B.buffer),$=T[f.idx[0]].width,P=T[f.idx[0]].height,W=3,K=Math.floor($/8),ie=Math.ceil($/8),ne=Math.ceil(P/8),et=$-(ie-1)*8,de=P-(ne-1)*8,ye={value:0},xe=new Array(W),Ce=new Array(W),Xe=new Array(W),Ie=new Array(W),dt=new Array(W);for(let Qe=0;Qe<W;++Qe)dt[Qe]=v[f.idx[Qe]],xe[Qe]=Qe<1?0:xe[Qe-1]+ie*ne,Ce[Qe]=new Float32Array(64),Xe[Qe]=new Uint16Array(64),Ie[Qe]=new Uint16Array(ie*64);for(let Qe=0;Qe<ne;++Qe){var Mt=8;Qe==ne-1&&(Mt=de);var Pe=8;for(let tt=0;tt<ie;++tt){tt==ie-1&&(Pe=et);for(let Ve=0;Ve<W;++Ve)Xe[Ve].fill(0),Xe[Ve][0]=w[xe[Ve]++],kt(ye,N,Xe[Ve]),Xn(Xe[Ve],Ce[Ve]),ka(Ce[Ve]);Xt(Ce);for(let Ve=0;Ve<W;++Ve)La(Ce[Ve],Ie[Ve],tt*64)}let yt=0;for(let tt=0;tt<W;++tt){const Ve=T[f.idx[tt]].type;for(let qt=8*Qe;qt<8*Qe+Mt;++qt){yt=dt[tt][qt];for(let Ya=0;Ya<K;++Ya){const Bt=Ya*64+(qt&7)*8;Je.setUint16(yt+0*Ve,Ie[tt][Bt+0],!0),Je.setUint16(yt+2*Ve,Ie[tt][Bt+1],!0),Je.setUint16(yt+4*Ve,Ie[tt][Bt+2],!0),Je.setUint16(yt+6*Ve,Ie[tt][Bt+3],!0),Je.setUint16(yt+8*Ve,Ie[tt][Bt+4],!0),Je.setUint16(yt+10*Ve,Ie[tt][Bt+5],!0),Je.setUint16(yt+12*Ve,Ie[tt][Bt+6],!0),Je.setUint16(yt+14*Ve,Ie[tt][Bt+7],!0),yt+=16*Ve}}if(K!=ie)for(let qt=8*Qe;qt<8*Qe+Mt;++qt){const Ya=dt[tt][qt]+8*K*2*Ve,Bt=K*64+(qt&7)*8;for(let Fa=0;Fa<Pe;++Fa)Je.setUint16(Ya+Fa*2*Ve,Ie[tt][Bt+Fa],!0)}}}for(var ta=new Uint16Array($),Je=new DataView(B.buffer),mt=0;mt<W;++mt){T[f.idx[mt]].decoded=!0;var za=T[f.idx[mt]].type;if(T[mt].type==2)for(var Tn=0;Tn<P;++Tn){const Qe=dt[mt][Tn];for(var Vt=0;Vt<$;++Vt)ta[Vt]=Je.getUint16(Qe+Vt*2*za,!0);for(var Vt=0;Vt<$;++Vt)Je.setFloat32(Qe+Vt*2*za,te(ta[Vt]),!0)}}}function kt(f,v,T){for(var N,w=1;w<64;)N=v[f.value],N==65280?w=64:N>>8==255?w+=N&255:(T[w]=N,w++),f.value++}function Xn(f,v){v[0]=te(f[0]),v[1]=te(f[1]),v[2]=te(f[5]),v[3]=te(f[6]),v[4]=te(f[14]),v[5]=te(f[15]),v[6]=te(f[27]),v[7]=te(f[28]),v[8]=te(f[2]),v[9]=te(f[4]),v[10]=te(f[7]),v[11]=te(f[13]),v[12]=te(f[16]),v[13]=te(f[26]),v[14]=te(f[29]),v[15]=te(f[42]),v[16]=te(f[3]),v[17]=te(f[8]),v[18]=te(f[12]),v[19]=te(f[17]),v[20]=te(f[25]),v[21]=te(f[30]),v[22]=te(f[41]),v[23]=te(f[43]),v[24]=te(f[9]),v[25]=te(f[11]),v[26]=te(f[18]),v[27]=te(f[24]),v[28]=te(f[31]),v[29]=te(f[40]),v[30]=te(f[44]),v[31]=te(f[53]),v[32]=te(f[10]),v[33]=te(f[19]),v[34]=te(f[23]),v[35]=te(f[32]),v[36]=te(f[39]),v[37]=te(f[45]),v[38]=te(f[52]),v[39]=te(f[54]),v[40]=te(f[20]),v[41]=te(f[22]),v[42]=te(f[33]),v[43]=te(f[38]),v[44]=te(f[46]),v[45]=te(f[51]),v[46]=te(f[55]),v[47]=te(f[60]),v[48]=te(f[21]),v[49]=te(f[34]),v[50]=te(f[37]),v[51]=te(f[47]),v[52]=te(f[50]),v[53]=te(f[56]),v[54]=te(f[59]),v[55]=te(f[61]),v[56]=te(f[35]),v[57]=te(f[36]),v[58]=te(f[48]),v[59]=te(f[49]),v[60]=te(f[57]),v[61]=te(f[58]),v[62]=te(f[62]),v[63]=te(f[63])}function ka(f){const v=.5*Math.cos(.7853975),T=.5*Math.cos(3.14159/16),N=.5*Math.cos(3.14159/8),w=.5*Math.cos(3*3.14159/16),B=.5*Math.cos(5*3.14159/16),$=.5*Math.cos(3*3.14159/8),P=.5*Math.cos(7*3.14159/16);for(var W=new Array(4),K=new Array(4),ie=new Array(4),ne=new Array(4),et=0;et<8;++et){var de=et*8;W[0]=N*f[de+2],W[1]=$*f[de+2],W[2]=N*f[de+6],W[3]=$*f[de+6],K[0]=T*f[de+1]+w*f[de+3]+B*f[de+5]+P*f[de+7],K[1]=w*f[de+1]-P*f[de+3]-T*f[de+5]-B*f[de+7],K[2]=B*f[de+1]-T*f[de+3]+P*f[de+5]+w*f[de+7],K[3]=P*f[de+1]-B*f[de+3]+w*f[de+5]-T*f[de+7],ie[0]=v*(f[de+0]+f[de+4]),ie[3]=v*(f[de+0]-f[de+4]),ie[1]=W[0]+W[3],ie[2]=W[1]-W[2],ne[0]=ie[0]+ie[1],ne[1]=ie[3]+ie[2],ne[2]=ie[3]-ie[2],ne[3]=ie[0]-ie[1],f[de+0]=ne[0]+K[0],f[de+1]=ne[1]+K[1],f[de+2]=ne[2]+K[2],f[de+3]=ne[3]+K[3],f[de+4]=ne[3]-K[3],f[de+5]=ne[2]-K[2],f[de+6]=ne[1]-K[1],f[de+7]=ne[0]-K[0]}for(var ye=0;ye<8;++ye)W[0]=N*f[16+ye],W[1]=$*f[16+ye],W[2]=N*f[48+ye],W[3]=$*f[48+ye],K[0]=T*f[8+ye]+w*f[24+ye]+B*f[40+ye]+P*f[56+ye],K[1]=w*f[8+ye]-P*f[24+ye]-T*f[40+ye]-B*f[56+ye],K[2]=B*f[8+ye]-T*f[24+ye]+P*f[40+ye]+w*f[56+ye],K[3]=P*f[8+ye]-B*f[24+ye]+w*f[40+ye]-T*f[56+ye],ie[0]=v*(f[ye]+f[32+ye]),ie[3]=v*(f[ye]-f[32+ye]),ie[1]=W[0]+W[3],ie[2]=W[1]-W[2],ne[0]=ie[0]+ie[1],ne[1]=ie[3]+ie[2],ne[2]=ie[3]-ie[2],ne[3]=ie[0]-ie[1],f[0+ye]=ne[0]+K[0],f[8+ye]=ne[1]+K[1],f[16+ye]=ne[2]+K[2],f[24+ye]=ne[3]+K[3],f[32+ye]=ne[3]-K[3],f[40+ye]=ne[2]-K[2],f[48+ye]=ne[1]-K[1],f[56+ye]=ne[0]-K[0]}function Xt(f){for(var v=0;v<64;++v){var T=f[0][v],N=f[1][v],w=f[2][v];f[0][v]=T+1.5747*w,f[1][v]=T-.1873*N-.4682*w,f[2][v]=T+1.8556*N}}function La(f,v,T){for(var N=0;N<64;++N)v[T+N]=$l.toHalfFloat(bl(f[N]))}function bl(f){return f<=1?Math.sign(f)*Math.pow(Math.abs(f),2.2):Math.sign(f)*Math.pow(j,Math.abs(f)-1)}function $a(f){return new DataView(f.array.buffer,f.offset.value,f.size)}function Va(f){var v=f.viewer.buffer.slice(f.offset.value,f.offset.value+f.size),T=new Uint8Array(Wa(v)),N=new Uint8Array(T.length);return Aa(T),ja(T,N),new DataView(N.buffer)}function mn(f){var v=f.array.slice(f.offset.value,f.offset.value+f.size),T=qs(v),N=new Uint8Array(T.length);return Aa(T),ja(T,N),new DataView(N.buffer)}function fi(f){for(var v=f.viewer,T={value:f.offset.value},N=new Uint16Array(f.width*f.scanlineBlockSize*(f.channels*f.type)),w=new Uint8Array(8192),B=0,$=new Array(f.channels),P=0;P<f.channels;P++)$[P]={},$[P].start=B,$[P].end=$[P].start,$[P].nx=f.width,$[P].ny=f.lines,$[P].size=f.type,B+=$[P].nx*$[P].ny*$[P].size;var W=gt(v,T),K=gt(v,T);if(K>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(W<=K)for(var P=0;P<K-W+1;P++)w[P+W]=M(v,T);var ie=new Uint16Array(65536),ne=q(w,ie),et=at(v,T);wa(f.array,v,T,et,N,B);for(var P=0;P<f.channels;++P)for(var de=$[P],ye=0;ye<$[P].size;++ye)Sl(N,de.start+ye,de.nx,de.size,de.ny,de.nx*de.size,ne);Ga(ie,N,B);for(var xe=0,Ce=new Uint8Array(N.buffer.byteLength),Xe=0;Xe<f.lines;Xe++)for(var Ie=0;Ie<f.channels;Ie++){var de=$[Ie],dt=de.nx*de.size,Mt=new Uint8Array(N.buffer,de.end*2,dt*2);Ce.set(Mt,xe),xe+=dt*2,de.end+=dt}return new DataView(Ce.buffer)}function gn(f){var v=f.array.slice(f.offset.value,f.offset.value+f.size),T=qs(v);const N=f.lines*f.channels*f.width,w=f.type==1?new Uint16Array(N):new Uint32Array(N);let B=0,$=0;const P=new Array(4);for(let W=0;W<f.lines;W++)for(let K=0;K<f.channels;K++){let ie=0;switch(f.type){case 1:P[0]=B,P[1]=P[0]+f.width,B=P[1]+f.width;for(let ne=0;ne<f.width;++ne){const et=T[P[0]++]<<8|T[P[1]++];ie+=et,w[$]=ie,$++}break;case 2:P[0]=B,P[1]=P[0]+f.width,P[2]=P[1]+f.width,B=P[2]+f.width;for(let ne=0;ne<f.width;++ne){const et=T[P[0]++]<<24|T[P[1]++]<<16|T[P[2]++]<<8;ie+=et,w[$]=ie,$++}break}}return new DataView(w.buffer)}function yn(f){var v=f.viewer,T={value:f.offset.value},N=new Uint8Array(f.width*f.lines*(f.channels*f.type*2)),w={version:J(v,T),unknownUncompressedSize:J(v,T),unknownCompressedSize:J(v,T),acCompressedSize:J(v,T),dcCompressedSize:J(v,T),rleCompressedSize:J(v,T),rleUncompressedSize:J(v,T),rleRawSize:J(v,T),totalAcUncompressedCount:J(v,T),totalDcUncompressedCount:J(v,T),acCompression:J(v,T)};if(w.version<2)throw"EXRLoader.parse: "+Kt.compression+" version "+w.version+" is unsupported";for(var B=new Array,$=gt(v,T)-2;$>0;){var P=en(v.buffer,T),W=M(v,T),K=W>>2&3,ie=(W>>4)-1,ne=new Int8Array([ie])[0],et=M(v,T);B.push({name:P,index:ne,type:et,compression:K}),$-=P.length+3}for(var de=Kt.channels,ye=new Array(f.channels),xe=0;xe<f.channels;++xe){var Ce=ye[xe]={},Xe=de[xe];Ce.name=Xe.name,Ce.compression=0,Ce.decoded=!1,Ce.type=Xe.pixelType,Ce.pLinear=Xe.pLinear,Ce.width=f.width,Ce.height=f.lines}for(var Ie={idx:new Array(3)},dt=0;dt<f.channels;++dt)for(var Ce=ye[dt],xe=0;xe<B.length;++xe){var Mt=B[xe];Ce.name==Mt.name&&(Ce.compression=Mt.compression,Mt.index>=0&&(Ie.idx[Mt.index]=dt),Ce.offset=dt)}if(w.acCompressedSize>0)switch(w.acCompression){case 0:var Je=new Uint16Array(w.totalAcUncompressedCount);wa(f.array,v,T,w.acCompressedSize,Je,w.totalAcUncompressedCount);break;case 1:var Pe=f.array.slice(T.value,T.value+w.totalAcUncompressedCount),ta=qs(Pe),Je=new Uint16Array(ta.buffer);T.value+=w.totalAcUncompressedCount;break}if(w.dcCompressedSize>0){var mt={array:f.array,offset:T,size:w.dcCompressedSize},za=new Uint16Array(mn(mt).buffer);T.value+=w.dcCompressedSize}if(w.rleRawSize>0){var Pe=f.array.slice(T.value,T.value+w.rleCompressedSize),ta=qs(Pe),Tn=Wa(ta.buffer);T.value+=w.rleCompressedSize}for(var Vt=0,Qe=new Array(ye.length),xe=0;xe<Qe.length;++xe)Qe[xe]=new Array;for(var yt=0;yt<f.lines;++yt)for(var tt=0;tt<ye.length;++tt)Qe[tt].push(Vt),Vt+=ye[tt].width*f.type*2;Fn(Ie,Qe,ye,Je,za,N);for(var xe=0;xe<ye.length;++xe){var Ce=ye[xe];if(!Ce.decoded)switch(Ce.compression){case 2:for(var Ve=0,qt=0,yt=0;yt<f.lines;++yt){for(var Ya=Qe[xe][Ve],Bt=0;Bt<Ce.width;++Bt){for(var Fa=0;Fa<2*Ce.type;++Fa)N[Ya++]=Tn[qt+Fa*Ce.width*Ce.height];qt++}Ve++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(N.buffer)}function en(f,v){for(var T=new Uint8Array(f),N=0;T[v.value+N]!=0;)N+=1;var w=new TextDecoder().decode(T.slice(v.value,v.value+N));return v.value=v.value+N+1,w}function di(f,v,T){var N=new TextDecoder().decode(new Uint8Array(f).slice(v.value,v.value+T));return v.value=v.value+T,N}function Sn(f,v){var T=Dt(f,v),N=at(f,v);return[T,N]}function Qn(f,v){var T=at(f,v),N=at(f,v);return[T,N]}function Dt(f,v){var T=f.getInt32(v.value,!0);return v.value=v.value+4,T}function at(f,v){var T=f.getUint32(v.value,!0);return v.value=v.value+4,T}function ha(f,v){var T=f[v.value];return v.value=v.value+1,T}function M(f,v){var T=f.getUint8(v.value);return v.value=v.value+1,T}const J=function(f,v){let T;return"getBigInt64"in DataView.prototype?T=Number(f.getBigInt64(v.value,!0)):T=f.getUint32(v.value+4,!0)+Number(f.getUint32(v.value,!0)<<32),v.value+=8,T};function fe(f,v){var T=f.getFloat32(v.value,!0);return v.value+=4,T}function we(f,v){return $l.toHalfFloat(fe(f,v))}function te(f){var v=(f&31744)>>10,T=f&1023;return(f>>15?-1:1)*(v?v===31?T?NaN:1/0:Math.pow(2,v-15)*(1+T/1024):6103515625e-14*(T/1024))}function gt(f,v){var T=f.getUint16(v.value,!0);return v.value+=2,T}function $t(f,v){return te(gt(f,v))}function Kn(f,v,T,N){for(var w=T.value,B=[];T.value<w+N-1;){var $=en(v,T),P=Dt(f,T),W=M(f,T);T.value+=3;var K=Dt(f,T),ie=Dt(f,T);B.push({name:$,pixelType:P,pLinear:W,xSampling:K,ySampling:ie})}return T.value+=1,B}function In(f,v){var T=fe(f,v),N=fe(f,v),w=fe(f,v),B=fe(f,v),$=fe(f,v),P=fe(f,v),W=fe(f,v),K=fe(f,v);return{redX:T,redY:N,greenX:w,greenY:B,blueX:$,blueY:P,whiteX:W,whiteY:K}}function Qt(f,v){var T=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],N=M(f,v);return T[N]}function Ot(f,v){var T=at(f,v),N=at(f,v),w=at(f,v),B=at(f,v);return{xMin:T,yMin:N,xMax:w,yMax:B}}function ea(f,v){var T=["INCREASING_Y"],N=M(f,v);return T[N]}function pa(f,v){var T=fe(f,v),N=fe(f,v);return[T,N]}function qa(f,v){var T=fe(f,v),N=fe(f,v),w=fe(f,v);return[T,N,w]}function tn(f,v,T,N,w){if(N==="string"||N==="stringvector"||N==="iccProfile")return di(v,T,w);if(N==="chlist")return Kn(f,v,T,w);if(N==="chromaticities")return In(f,T);if(N==="compression")return Qt(f,T);if(N==="box2i")return Ot(f,T);if(N==="lineOrder")return ea(f,T);if(N==="float")return fe(f,T);if(N==="v2f")return pa(f,T);if(N==="v3f")return qa(f,T);if(N==="int")return Dt(f,T);if(N==="rational")return Sn(f,T);if(N==="timecode")return Qn(f,T);if(N==="preview")return T.value+=w,"skipped";T.value+=w}function ts(f,v,T){const N={};if(f.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";N.version=f.getUint8(4);const w=f.getUint8(5);N.spec={singleTile:!!(w&2),longName:!!(w&4),deepFormat:!!(w&8),multiPart:!!(w&16)},T.value=8;for(var B=!0;B;){var $=en(v,T);if($==0)B=!1;else{var P=en(v,T),W=at(f,T),K=tn(f,v,T,P,W);K===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${P}'.`):N[$]=K}}if((w&-5)!=0)throw console.error("EXRHeader:",N),"THREE.EXRLoader: provided file is currently unsupported.";return N}function hi(f,v,T,N,w){const B={size:0,viewer:v,array:T,offset:N,width:f.dataWindow.xMax-f.dataWindow.xMin+1,height:f.dataWindow.yMax-f.dataWindow.yMin+1,channels:f.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:f.channels[0].pixelType,uncompress:null,getter:null,format:null,[ji?"colorSpace":"encoding"]:null};switch(f.compression){case"NO_COMPRESSION":B.lines=1,B.uncompress=$a;break;case"RLE_COMPRESSION":B.lines=1,B.uncompress=Va;break;case"ZIPS_COMPRESSION":B.lines=1,B.uncompress=mn;break;case"ZIP_COMPRESSION":B.lines=16,B.uncompress=mn;break;case"PIZ_COMPRESSION":B.lines=32,B.uncompress=fi;break;case"PXR24_COMPRESSION":B.lines=16,B.uncompress=gn;break;case"DWAA_COMPRESSION":B.lines=32,B.uncompress=yn;break;case"DWAB_COMPRESSION":B.lines=256,B.uncompress=yn;break;default:throw"EXRLoader.parse: "+f.compression+" is unsupported"}if(B.scanlineBlockSize=B.lines,B.type==1)switch(w){case Ja:B.getter=$t,B.inputSize=2;break;case da:B.getter=gt,B.inputSize=2;break}else if(B.type==2)switch(w){case Ja:B.getter=fe,B.inputSize=4;break;case da:B.getter=we,B.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+B.type+" for "+f.compression+".";B.blockCount=(f.dataWindow.yMax+1)/B.scanlineBlockSize;for(var $=0;$<B.blockCount;$++)J(v,N);B.outputChannels=B.channels==3?4:B.channels;const P=B.width*B.height*B.outputChannels;switch(w){case Ja:B.byteArray=new Float32Array(P),B.channels<B.outputChannels&&B.byteArray.fill(1,0,P);break;case da:B.byteArray=new Uint16Array(P),B.channels<B.outputChannels&&B.byteArray.fill(15360,0,P);break;default:console.error("THREE.EXRLoader: unsupported type: ",w);break}return B.bytesPerLine=B.width*B.inputSize*B.channels,B.outputChannels==4?B.format=si:B.format=Av,ji?B.colorSpace="srgb-linear":B.encoding=3e3,B}const En=new DataView(l),Za=new Uint8Array(l),bn={value:0},Kt=ts(En,l,bn),Re=hi(Kt,En,Za,bn,this.type),Pn={value:0},ct={R:0,G:1,B:2,A:3,Y:0};for(let f=0;f<Re.height/Re.scanlineBlockSize;f++){const v=at(En,bn);Re.size=at(En,bn),Re.lines=v+Re.scanlineBlockSize>Re.height?Re.height-v:Re.scanlineBlockSize;const N=Re.size<Re.lines*Re.bytesPerLine?Re.uncompress(Re):$a(Re);bn.value+=Re.size;for(let w=0;w<Re.scanlineBlockSize;w++){const B=w+f*Re.scanlineBlockSize;if(B>=Re.height)break;for(let $=0;$<Re.channels;$++){const P=ct[Kt.channels[$].name];for(let W=0;W<Re.width;W++){Pn.value=(w*(Re.channels*Re.width)+$*Re.width+W)*Re.inputSize;const K=(Re.height-1-B)*(Re.width*Re.outputChannels)+W*Re.outputChannels+P;Re.byteArray[K]=Re.getter(N,Pn)}}}}return{header:Kt,width:Re.width,height:Re.height,data:Re.byteArray,format:Re.format,[ji?"colorSpace":"encoding"]:Re[ji?"colorSpace":"encoding"],type:this.type}}setDataType(l){return this.type=l,this}load(l,s,r,o){function d(m,g){ji?m.colorSpace=g.colorSpace:m.encoding=g.encoding,m.minFilter=Jt,m.magFilter=Jt,m.generateMipmaps=!1,m.flipY=!1,s&&s(m,g)}return super.load(l,d,r,o)}}const L0=()=>parseInt(ar.replace(/\D+/g,"")),V0=L0(),q0=L.forwardRef(({makeDefault:a,camera:l,regress:s,domElement:r,enableDamping:o=!0,keyEvents:d=!1,onChange:m,onStart:g,onEnd:h,...S},_)=>{const y=Ut(G=>G.invalidate),b=Ut(G=>G.camera),A=Ut(G=>G.gl),H=Ut(G=>G.events),Q=Ut(G=>G.setEvents),V=Ut(G=>G.set),C=Ut(G=>G.get),x=Ut(G=>G.performance),Y=l||b,I=r||H.connected||A.domElement,F=L.useMemo(()=>new w0(Y),[Y]);return yl(()=>{F.enabled&&F.update()},-1),L.useEffect(()=>(d&&F.connect(d===!0?I:d),F.connect(I),()=>void F.dispose()),[d,I,s,F,y]),L.useEffect(()=>{const G=j=>{y(),s&&x.regress(),m&&m(j)},re=j=>{g&&g(j)},O=j=>{h&&h(j)};return F.addEventListener("change",G),F.addEventListener("start",re),F.addEventListener("end",O),()=>{F.removeEventListener("start",re),F.removeEventListener("end",O),F.removeEventListener("change",G)}},[m,g,h,F,y,Q]),L.useEffect(()=>{if(a){const G=C().controls;return V({controls:F}),()=>V({controls:G})}},[a,F]),L.createElement("primitive",er({ref:_,object:F,enableDamping:o},S))}),lh=(a,l,s)=>{let r;switch(a){case Ha:r=new Uint8ClampedArray(l*s*4);break;case da:r=new Uint16Array(l*s*4);break;case xd:r=new Uint32Array(l*s*4);break;case Dv:r=new Int8Array(l*s*4);break;case Nv:r=new Int16Array(l*s*4);break;case Uv:r=new Int32Array(l*s*4);break;case Ja:r=new Float32Array(l*s*4);break;default:throw new Error("Unsupported data type")}return r};let Ys;const Z0=(a,l,s,r)=>{if(Ys!==void 0)return Ys;const o=new Ra(1,1,r);l.setRenderTarget(o);const d=new ki(new Md,new Cv({color:16777215}));l.render(d,s),l.setRenderTarget(null);const m=lh(a,o.width,o.height);return l.readRenderTargetPixels(o,0,0,o.width,o.height,m),o.dispose(),d.geometry.dispose(),d.material.dispose(),Ys=m[0]!==0,Ys};class dc{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(l){this._width=l.width,this._height=l.height,this._type=l.type,this._colorSpace=l.colorSpace;const s={format:si,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:l.renderTargetOptions?.anisotropy!==void 0?l.renderTargetOptions?.anisotropy:1,generateMipmaps:l.renderTargetOptions?.generateMipmaps!==void 0?l.renderTargetOptions?.generateMipmaps:!1,magFilter:l.renderTargetOptions?.magFilter!==void 0?l.renderTargetOptions?.magFilter:Jt,minFilter:l.renderTargetOptions?.minFilter!==void 0?l.renderTargetOptions?.minFilter:Jt,samples:l.renderTargetOptions?.samples!==void 0?l.renderTargetOptions?.samples:void 0,wrapS:l.renderTargetOptions?.wrapS!==void 0?l.renderTargetOptions?.wrapS:Vn,wrapT:l.renderTargetOptions?.wrapT!==void 0?l.renderTargetOptions?.wrapT:Vn};if(this._material=l.material,l.renderer?this._renderer=l.renderer:(this._renderer=dc.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Qi,this._camera=new ni,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Z0(this._type,this._renderer,this._camera,s)){let r;switch(this._type){case da:r=this._renderer.extensions.has("EXT_color_buffer_float")?Ja:void 0;break}r!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Ja}`),this._type=r):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new ki(new Md,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ra(this.width,this.height,s),this._renderTarget.texture.mapping=l.renderTargetOptions?.mapping!==void 0?l.renderTargetOptions?.mapping:Ks}static instantiateRenderer(){const l=new Sd;return l.setSize(128,128),l}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(l){throw this._renderer.setRenderTarget(null),l}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const l=lh(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,l),l}toDataTexture(l){const s=new zv(this.toArray(),this.width,this.height,si,this._type,l?.mapping||Ks,l?.wrapS||Vn,l?.wrapT||Vn,l?.magFilter||Jt,l?.minFilter||Jt,l?.anisotropy||1,ii);return s.generateMipmaps=l?.generateMipmaps!==void 0?l?.generateMipmaps:!1,s}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(l){this.disposeOnDemandRenderer(),l&&this.renderTarget.dispose(),this.material instanceof xa&&Object.values(this.material.uniforms).forEach(s=>{s.value instanceof qn&&s.value.dispose()}),Object.values(this.material).forEach(s=>{s instanceof qn&&s.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(l){this._width=l,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(l){this._height=l,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(l){this._renderTarget=l,this._width=l.width,this._height=l.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class ih extends Error{}class sh extends Error{}const Li=(a,l,s)=>{const r=new RegExp(`${l}="([^"]*)"`,"i").exec(a);if(r)return r[1];const o=new RegExp(`<${l}[^>]*>([\\s\\S]*?)</${l}>`,"i").exec(a);if(o){const d=o[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return d&&d.length===3?d.map(m=>m.replace(/<\/?rdf:li>/g,"")):o[1].trim()}if(s!==void 0)return s;throw new Error(`Can't find ${l} in gainmap metadata`)},Y0=a=>{let l;typeof TextDecoder<"u"?l=new TextDecoder().decode(a):l=a.toString();let s=l.indexOf("<x:xmpmeta");for(;s!==-1;){const r=l.indexOf("x:xmpmeta>",s),o=l.slice(s,r+10);try{const d=Li(o,"hdrgm:GainMapMin","0"),m=Li(o,"hdrgm:GainMapMax"),g=Li(o,"hdrgm:Gamma","1"),h=Li(o,"hdrgm:OffsetSDR","0.015625"),S=Li(o,"hdrgm:OffsetHDR","0.015625"),_=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(o),y=_?_[1]:"0",b=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(o);if(!b)throw new Error("Incomplete gainmap metadata");const A=b[1];return{gainMapMin:Array.isArray(d)?d.map(H=>parseFloat(H)):[parseFloat(d),parseFloat(d),parseFloat(d)],gainMapMax:Array.isArray(m)?m.map(H=>parseFloat(H)):[parseFloat(m),parseFloat(m),parseFloat(m)],gamma:Array.isArray(g)?g.map(H=>parseFloat(H)):[parseFloat(g),parseFloat(g),parseFloat(g)],offsetSdr:Array.isArray(h)?h.map(H=>parseFloat(H)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetHdr:Array.isArray(S)?S.map(H=>parseFloat(H)):[parseFloat(S),parseFloat(S),parseFloat(S)],hdrCapacityMin:parseFloat(y),hdrCapacityMax:parseFloat(A)}}catch{}s=l.indexOf("<x:xmpmeta",r)}};class F0{options;constructor(l){this.options={debug:l&&l.debug!==void 0?l.debug:!1,extractFII:l&&l.extractFII!==void 0?l.extractFII:!0,extractNonFII:l&&l.extractNonFII!==void 0?l.extractNonFII:!0}}extract(l){return new Promise((s,r)=>{const o=this.options.debug,d=new DataView(l.buffer);if(d.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const m=d.byteLength;let g=2,h=0,S;for(;g<m;){if(++h>250){r(new Error(`Found no marker after ${h} loops `));return}if(d.getUint8(g)!==255){r(new Error(`Not a valid marker at offset 0x${g.toString(16)}, found: 0x${d.getUint8(g).toString(16)}`));return}if(S=d.getUint8(g+1),o&&console.log(`Marker: ${S.toString(16)}`),S===226){o&&console.log("Found APP2 marker (0xffe2)");const _=g+4;if(d.getUint32(_)===1297106432){const y=_+4;let b;if(d.getUint16(y)===18761)b=!1;else if(d.getUint16(y)===19789)b=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(d.getUint16(y+2,!b)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const A=d.getUint32(y+4,!b);if(A<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const H=y+A,Q=d.getUint16(H,!b),V=H+2;let C=0;for(let F=V;F<V+12*Q;F+=12)d.getUint16(F,!b)===45057&&(C=d.getUint32(F+8,!b));const Y=H+2+Q*12+4,I=[];for(let F=Y;F<Y+C*16;F+=16){const G={MPType:d.getUint32(F,!b),size:d.getUint32(F+4,!b),dataOffset:d.getUint32(F+8,!b),dependantImages:d.getUint32(F+12,!b),start:-1,end:-1,isFII:!1};G.dataOffset?(G.start=y+G.dataOffset,G.isFII=!1):(G.start=0,G.isFII=!0),G.end=G.start+G.size,I.push(G)}if(this.options.extractNonFII&&I.length){const F=new Blob([d]),G=[];for(const re of I){if(re.isFII&&!this.options.extractFII)continue;const O=F.slice(re.start,re.end+1,"image/jpeg");G.push(O)}s(G)}}}g+=2+d.getUint16(g+2)}})}}const X0=async a=>{const l=Y0(a);if(!l)throw new sh("Gain map XMP metadata not found");const r=await new F0({extractFII:!0,extractNonFII:!0}).extract(a);if(r.length!==2)throw new ih("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:l}},rd=a=>new Promise((l,s)=>{const r=document.createElement("img");r.onload=()=>{l(r)},r.onerror=o=>{s(o)},r.src=URL.createObjectURL(a)});class Q0 extends Ov{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(l,s){super(s),this._config=l,l.renderer&&(this._renderer=l.renderer),this._internalLoadingManager=new Bv}setRenderer(l){return this._renderer=l,this}setRenderTargetOptions(l){return this._renderTargetOptions=l,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const l=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new qn,sdr:new qn});return this._config.createQuadRenderer({width:16,height:16,type:da,colorSpace:ii,material:l,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(l,s,r){const o=s?new Blob([s],{type:"image/jpeg"}):void 0,d=new Blob([l],{type:"image/jpeg"});let m,g,h=!1;if(typeof createImageBitmap>"u"){const S=await Promise.all([o?rd(o):Promise.resolve(void 0),rd(d)]);g=S[0],m=S[1],h=r==="flipY"}else{const S=await Promise.all([o?createImageBitmap(o,{imageOrientation:r||"flipY"}):Promise.resolve(void 0),createImageBitmap(d,{imageOrientation:r||"flipY"})]);g=S[0],m=S[1]}return{sdrImage:m,gainMapImage:g,needsFlip:h}}createTextures(l,s,r){const o=new qn(s||new ImageData(2,2),Ks,Vn,Vn,Jt,Of,si,Ha,1,ii);o.flipY=r,o.needsUpdate=!0;const d=new qn(l,Ks,Vn,Vn,Jt,Of,si,Ha,1,_t);return d.flipY=r,d.needsUpdate=!0,{gainMap:o,sdr:d}}updateQuadRenderer(l,s,r,o,d){l.width=s.width,l.height=s.height,l.material.gainMap=r,l.material.sdr=o,l.material.gainMapMin=d.gainMapMin,l.material.gainMapMax=d.gainMapMax,l.material.offsetHdr=d.offsetHdr,l.material.offsetSdr=d.offsetSdr,l.material.gamma=d.gamma,l.material.hdrCapacityMin=d.hdrCapacityMin,l.material.hdrCapacityMax=d.hdrCapacityMax,l.material.maxDisplayBoost=Math.pow(2,d.hdrCapacityMax),l.material.needsUpdate=!0}}const K0=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,I0=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class P0 extends xa{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:l,offsetHdr:s,offsetSdr:r,gainMapMin:o,gainMapMax:d,maxDisplayBoost:m,hdrCapacityMin:g,hdrCapacityMax:h,sdr:S,gainMap:_}){super({name:"GainMapDecoderMaterial",vertexShader:K0,fragmentShader:I0,uniforms:{sdr:{value:S},gainMap:{value:_},gamma:{value:new ft(1/l[0],1/l[1],1/l[2])},offsetHdr:{value:new ft().fromArray(s)},offsetSdr:{value:new ft().fromArray(r)},gainMapMin:{value:new ft().fromArray(o)},gainMapMax:{value:new ft().fromArray(d)},weightFactor:{value:(Math.log2(m)-g)/(h-g)}},blending:Yn,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=m,this._hdrCapacityMin=g,this._hdrCapacityMax=h,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(l){this.uniforms.sdr.value=l}get gainMap(){return this.uniforms.gainMap.value}set gainMap(l){this.uniforms.gainMap.value=l}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(l){this.uniforms.offsetHdr.value.fromArray(l)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(l){this.uniforms.offsetSdr.value.fromArray(l)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(l){this.uniforms.gainMapMin.value.fromArray(l)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(l){this.uniforms.gainMapMax.value.fromArray(l)}get gamma(){const l=this.uniforms.gamma.value;return[1/l.x,1/l.y,1/l.z]}set gamma(l){const s=this.uniforms.gamma.value;s.x=1/l[0],s.y=1/l[1],s.z=1/l[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(l){this._hdrCapacityMin=l,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(l){this._hdrCapacityMax=l,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(l){this._maxDisplayBoost=Math.max(1,Math.min(65504,l)),this.calculateWeight()}calculateWeight(){const l=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,l))}}class rh extends Q0{constructor(l,s){super({renderer:l,createMaterial:r=>new P0(r),createQuadRenderer:r=>new dc(r)},s)}async render(l,s,r,o){const{sdrImage:d,gainMapImage:m,needsFlip:g}=await this.processImages(r,o,"flipY"),{gainMap:h,sdr:S}=this.createTextures(d,m,g);this.updateQuadRenderer(l,d,h,S,s),l.render()}}class J0 extends rh{load([l,s,r],o,d,m){const g=this.prepareQuadRenderer();let h,S,_;const y=async()=>{if(h&&S&&_){try{await this.render(g,_,h,S)}catch(j){this.manager.itemError(l),this.manager.itemError(s),this.manager.itemError(r),typeof m=="function"&&m(j),g.disposeOnDemandRenderer();return}typeof o=="function"&&o(g),this.manager.itemEnd(l),this.manager.itemEnd(s),this.manager.itemEnd(r),g.disposeOnDemandRenderer()}};let b=!0,A=0,H=0,Q=!0,V=0,C=0,x=!0,Y=0,I=0;const F=()=>{if(typeof d=="function"){const j=A+V+Y,q=H+C+I,se=b&&Q&&x;d(new ProgressEvent("progress",{lengthComputable:se,loaded:q,total:j}))}};this.manager.itemStart(l),this.manager.itemStart(s),this.manager.itemStart(r);const G=new Fs(this._internalLoadingManager);G.setResponseType("arraybuffer"),G.setRequestHeader(this.requestHeader),G.setPath(this.path),G.setWithCredentials(this.withCredentials),G.load(l,async j=>{if(typeof j=="string")throw new Error("Invalid sdr buffer");h=j,await y()},j=>{b=j.lengthComputable,H=j.loaded,A=j.total,F()},j=>{this.manager.itemError(l),typeof m=="function"&&m(j)});const re=new Fs(this._internalLoadingManager);re.setResponseType("arraybuffer"),re.setRequestHeader(this.requestHeader),re.setPath(this.path),re.setWithCredentials(this.withCredentials),re.load(s,async j=>{if(typeof j=="string")throw new Error("Invalid gainmap buffer");S=j,await y()},j=>{Q=j.lengthComputable,C=j.loaded,V=j.total,F()},j=>{this.manager.itemError(s),typeof m=="function"&&m(j)});const O=new Fs(this._internalLoadingManager);return O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(r,async j=>{if(typeof j!="string")throw new Error("Invalid metadata string");_=JSON.parse(j),await y()},j=>{x=j.lengthComputable,I=j.loaded,Y=j.total,F()},j=>{this.manager.itemError(r),typeof m=="function"&&m(j)}),g}}class W0 extends rh{load(l,s,r,o){const d=this.prepareQuadRenderer(),m=new Fs(this._internalLoadingManager);return m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setPath(this.path),m.setWithCredentials(this.withCredentials),this.manager.itemStart(l),m.load(l,async g=>{if(typeof g=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const h=new Uint8Array(g);let S,_,y;try{const b=await X0(h);S=b.sdr,_=b.gainMap,y=b.metadata}catch(b){if(b instanceof sh||b instanceof ih)console.warn(`Failure to reconstruct an HDR image from ${l}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),y={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},S=h;else throw b}try{await this.render(d,y,S.buffer,_?.buffer)}catch(b){this.manager.itemError(l),typeof o=="function"&&o(b),d.disposeOnDemandRenderer();return}typeof s=="function"&&s(d),this.manager.itemEnd(l),d.disposeOnDemandRenderer()},r,g=>{this.manager.itemError(l),typeof o=="function"&&o(g)}),d}}const Pi={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},uh="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",li=a=>Array.isArray(a),hc=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function lr({files:a=hc,path:l="",preset:s=void 0,colorSpace:r=void 0,extensions:o}={}){s&&(pc(s),a=Pi[s],l=uh);const d=li(a),{extension:m,isCubemap:g}=vc(a),h=mc(m);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+a);const S=Ut(A=>A.gl);L.useLayoutEffect(()=>{if(m!=="webp"&&m!=="jpg"&&m!=="jpeg")return;function A(){ri.clear(h,d?[a]:a)}S.domElement.addEventListener("webglcontextlost",A,{once:!0})},[a,S.domElement]);const _=ri(h,d?[a]:a,A=>{(m==="webp"||m==="jpg"||m==="jpeg")&&A.setRenderer(S),A.setPath==null||A.setPath(l),o&&o(A)});let y=d?_[0]:_;if(m==="jpg"||m==="jpeg"||m==="webp"){var b;y=(b=y.renderTarget)==null?void 0:b.texture}return y.mapping=g?Hv:wv,y.colorSpace=r??(g?"srgb":"srgb-linear"),y}const k0={files:hc,path:"",preset:void 0,extensions:void 0};lr.preload=a=>{const l={...k0,...a};let{files:s,path:r=""}=l;const{preset:o,extensions:d}=l;o&&(pc(o),s=Pi[o],r=uh);const{extension:m}=vc(s);if(m==="webp"||m==="jpg"||m==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const g=mc(m);if(!g)throw new Error("useEnvironment: Unrecognized file extension: "+s);ri.preload(g,li(s)?[s]:s,h=>{h.setPath==null||h.setPath(r),d&&d(h)})};const $0={files:hc,preset:void 0};lr.clear=a=>{const l={...$0,...a};let{files:s}=l;const{preset:r}=l;r&&(pc(r),s=Pi[r]);const{extension:o}=vc(s),d=mc(o);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+s);ri.clear(d,li(s)?[s]:s)};function pc(a){if(!(a in Pi))throw new Error("Preset must be one of: "+Object.keys(Pi).join(", "))}function vc(a){var l;const s=li(a)&&a.length===6,r=li(a)&&a.length===3&&a.some(m=>m.endsWith("json")),o=li(a)?a[0]:a;return{extension:s?"cube":r?"webp":o.startsWith("data:application/exr")?"exr":o.startsWith("data:application/hdr")?"hdr":o.startsWith("data:image/jpeg")?"jpg":(l=o.split(".").pop())==null||(l=l.split("?"))==null||(l=l.shift())==null?void 0:l.toLowerCase(),isCubemap:s,isGainmap:r}}function mc(a){return a==="cube"?Gv:a==="hdr"?G0:a==="exr"?j0:a==="jpg"||a==="jpeg"?W0:a==="webp"?J0:null}const eg=a=>a.current&&a.current.isScene,tg=a=>eg(a)?a.current:a;function gc(a,l,s,r,o={}){var d,m,g,h;o={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...o};const S=tg(l||s),_=S.background,y=S.environment,b={backgroundBlurriness:S.backgroundBlurriness,backgroundIntensity:S.backgroundIntensity,backgroundRotation:(d=(m=S.backgroundRotation)==null||m.clone==null?void 0:m.clone())!==null&&d!==void 0?d:[0,0,0],environmentIntensity:S.environmentIntensity,environmentRotation:(g=(h=S.environmentRotation)==null||h.clone==null?void 0:h.clone())!==null&&g!==void 0?g:[0,0,0]};return a!=="only"&&(S.environment=r),a&&(S.background=r),Pa(S,o),()=>{a!=="only"&&(S.environment=y),a&&(S.background=_),Pa(S,b)}}function yc({scene:a,background:l=!1,map:s,...r}){const o=Ut(d=>d.scene);return L.useLayoutEffect(()=>{if(s)return gc(l,a,o,s,r)}),null}function ch({background:a=!1,scene:l,blur:s,backgroundBlurriness:r,backgroundIntensity:o,backgroundRotation:d,environmentIntensity:m,environmentRotation:g,...h}){const S=lr(h),_=Ut(y=>y.scene);return L.useLayoutEffect(()=>gc(a,l,_,S,{backgroundBlurriness:s??r,backgroundIntensity:o,backgroundRotation:d,environmentIntensity:m,environmentRotation:g})),L.useEffect(()=>()=>{S.dispose()},[S]),null}function ag({children:a,near:l=.1,far:s=1e3,resolution:r=256,frames:o=1,map:d,background:m=!1,blur:g,backgroundBlurriness:h,backgroundIntensity:S,backgroundRotation:_,environmentIntensity:y,environmentRotation:b,scene:A,files:H,path:Q,preset:V=void 0,extensions:C}){const x=Ut(O=>O.gl),Y=Ut(O=>O.scene),I=L.useRef(null),[F]=L.useState(()=>new Qi),G=L.useMemo(()=>{const O=new jv(r);return O.texture.type=da,O},[r]);L.useEffect(()=>()=>{G.dispose()},[G]),L.useLayoutEffect(()=>{if(o===1){const O=x.autoClear;x.autoClear=!0,I.current.update(x,F),x.autoClear=O}return gc(m,A,Y,G.texture,{backgroundBlurriness:g??h,backgroundIntensity:S,backgroundRotation:_,environmentIntensity:y,environmentRotation:b})},[a,F,G.texture,A,Y,m,o,x]);let re=1;return yl(()=>{if(o===1/0||re<o){const O=x.autoClear;x.autoClear=!0,I.current.update(x,F),x.autoClear=O,re++}}),L.createElement(L.Fragment,null,t0(L.createElement(L.Fragment,null,a,L.createElement("cubeCamera",{ref:I,args:[l,s,G]}),H||V?L.createElement(ch,{background:!0,files:H,preset:V,path:Q,extensions:C}):d?L.createElement(yc,{background:!0,map:d,extensions:C}):null),F))}function ng(a){var l,s,r,o;const d=lr(a),m=a.map||d;L.useMemo(()=>oc({GroundProjectedEnvImpl:z0}),[]),L.useEffect(()=>()=>{d.dispose()},[d]);const g=L.useMemo(()=>[m],[m]),h=(l=a.ground)==null?void 0:l.height,S=(s=a.ground)==null?void 0:s.radius,_=(r=(o=a.ground)==null?void 0:o.scale)!==null&&r!==void 0?r:1e3;return L.createElement(L.Fragment,null,L.createElement(yc,er({},a,{map:m})),L.createElement("groundProjectedEnvImpl",{args:g,scale:_,height:h,radius:S}))}function lg(a){return a.ground?L.createElement(ng,a):a.map?L.createElement(yc,a):a.children?L.createElement(ag,a):L.createElement(ch,a)}class ig extends xa{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${V0>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const sg=a=>new ft().setFromSpherical(new Iu(a,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),rg=L.forwardRef(({radius:a=100,depth:l=50,count:s=5e3,saturation:r=0,factor:o=4,fade:d=!1,speed:m=1},g)=>{const h=L.useRef(null),[S,_,y]=L.useMemo(()=>{const A=[],H=[],Q=Array.from({length:s},()=>(.5+.5*Math.random())*o),V=new Wi;let C=a+l;const x=l/s;for(let Y=0;Y<s;Y++)C-=x*Math.random(),A.push(...sg(C).toArray()),V.setHSL(Y/s,r,.9),H.push(V.r,V.g,V.b);return[new Float32Array(A),new Float32Array(H),new Float32Array(Q)]},[s,l,o,a,r]);yl(A=>h.current&&(h.current.uniforms.time.value=A.clock.elapsedTime*m));const[b]=L.useState(()=>new ig);return L.createElement("points",{ref:g},L.createElement("bufferGeometry",null,L.createElement("bufferAttribute",{attach:"attributes-position",args:[S,3]}),L.createElement("bufferAttribute",{attach:"attributes-color",args:[_,3]}),L.createElement("bufferAttribute",{attach:"attributes-size",args:[y,1]})),L.createElement("primitive",{ref:h,object:b,attach:"material",blending:Lv,"uniforms-fade-value":d,depthWrite:!1,transparent:!0,vertexColors:!0}))});/**
 * postprocessing v6.38.2 build Mon Dec 22 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var Qu=1/1e3,ug=1e3,cg=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(a){typeof document<"u"&&document.hidden!==void 0&&(a?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=a)}get delta(){return this._delta*Qu}get fixedDelta(){return this._fixedDelta*Qu}set fixedDelta(a){this._fixedDelta=a*ug}get elapsed(){return this._elapsed*Qu}update(a){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(a!==void 0?a:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(a){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},og=(()=>{const a=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),l=new Float32Array([0,0,2,0,0,2]),s=new Qv;return s.setAttribute("position",new Bf(a,3)),s.setAttribute("uv",new Bf(l,2)),s})(),Wt=class ac{static get fullscreenGeometry(){return og}constructor(l="Pass",s=new Qi,r=new ni){this.name=l,this.renderer=null,this.scene=s,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(l){if(this.rtt===l){const s=this.fullscreenMaterial;s!==null&&(s.needsUpdate=!0),this.rtt=!l}}set mainScene(l){}set mainCamera(l){}setRenderer(l){this.renderer=l}isEnabled(){return this.enabled}setEnabled(l){this.enabled=l}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(l){let s=this.screen;s!==null?s.material=l:(s=new ki(ac.fullscreenGeometry,l),s.frustumCulled=!1,this.scene===null&&(this.scene=new Qi),this.scene.add(s),this.screen=s)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(l){this.fullscreenMaterial=l}getDepthTexture(){return null}setDepthTexture(l,s=ci){}render(l,s,r,o,d){throw new Error("Render method not implemented!")}setSize(l,s){}initialize(l,s,r){}dispose(){for(const l of Object.keys(this)){const s=this[l];(s instanceof Ra||s instanceof Ad||s instanceof qn||s instanceof ac)&&this[l].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},fg=class extends Wt{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(a,l,s,r,o){const d=a.state.buffers.stencil;d.setLocked(!1),d.setTest(!1)}},dg=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,oh="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",fh=class extends xa{constructor(){super({name:"CopyMaterial",defines:{COLOR_SPACE_CONVERSION:"1",DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new Le(null),depthBuffer:new Le(null),channelWeights:new Le(null),opacity:new Le(1)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:dg,vertexShader:oh}),this.depthFunc=Xv}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(a){const l=a!==null;this.colorWrite!==l&&(l?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=l,this.needsUpdate=!0),this.uniforms.inputBuffer.value=a}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(a){const l=a!==null;this.depthWrite!==l&&(l?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=l,this.depthWrite=l,this.needsUpdate=!0),this.uniforms.depthBuffer.value=a}set depthPacking(a){this.defines.DEPTH_PACKING=a.toFixed(0),this.needsUpdate=!0}get colorSpaceConversion(){return this.defines.COLOR_SPACE_CONVERSION!==void 0}set colorSpaceConversion(a){this.colorSpaceConversion!==a&&(a?this.defines.COLOR_SPACE_CONVERSION=!0:delete this.defines.COLOR_SPACE_CONVERSION,this.needsUpdate=!0)}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(a){a!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=a):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(a){this.uniforms.inputBuffer.value=a}getOpacity(a){return this.uniforms.opacity.value}setOpacity(a){this.uniforms.opacity.value=a}},hg=class extends Wt{constructor(a,l=!0){super("CopyPass"),this.fullscreenMaterial=new fh,this.needsSwap=!1,this.renderTarget=a,a===void 0&&(this.renderTarget=new Ra(1,1,{minFilter:Jt,magFilter:Jt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=l}get resize(){return this.autoResize}set resize(a){this.autoResize=a}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(a){this.autoResize=a}render(a,l,s,r,o){this.fullscreenMaterial.inputBuffer=l.texture,a.setRenderTarget(this.renderToScreen?null:this.renderTarget),a.render(this.scene,this.camera)}setSize(a,l){this.autoResize&&this.renderTarget.setSize(a,l)}initialize(a,l,s){s!==void 0&&(this.renderTarget.texture.type=s,s!==Ha?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":a!==null&&a.outputColorSpace===_t&&(this.renderTarget.texture.colorSpace=_t))}},ud=new Wi,dh=class extends Wt{constructor(a=!0,l=!0,s=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=a,this.depth=l,this.stencil=s,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(a,l,s){this.color=a,this.depth=l,this.stencil=s}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(a){this.overrideClearColor=a}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(a){this.overrideClearAlpha=a}render(a,l,s,r,o){const d=this.overrideClearColor,m=this.overrideClearAlpha,g=a.getClearAlpha(),h=d!==null,S=m>=0;h?(a.getClearColor(ud),a.setClearColor(d,S?m:g)):S&&a.setClearAlpha(m),a.setRenderTarget(this.renderToScreen?null:l),a.clear(this.color,this.depth,this.stencil),h?a.setClearColor(ud,g):S&&a.setClearAlpha(g)}},pg=class extends Wt{constructor(a,l){super("MaskPass",a,l),this.needsSwap=!1,this.clearPass=new dh(!1,!1,!0),this.inverse=!1}set mainScene(a){this.scene=a}set mainCamera(a){this.camera=a}get inverted(){return this.inverse}set inverted(a){this.inverse=a}get clear(){return this.clearPass.enabled}set clear(a){this.clearPass.enabled=a}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(a){this.inverted=a}render(a,l,s,r,o){const d=a.getContext(),m=a.state.buffers,g=this.scene,h=this.camera,S=this.clearPass,_=this.inverted?0:1,y=1-_;m.color.setMask(!1),m.depth.setMask(!1),m.color.setLocked(!0),m.depth.setLocked(!0),m.stencil.setTest(!0),m.stencil.setOp(d.REPLACE,d.REPLACE,d.REPLACE),m.stencil.setFunc(d.ALWAYS,_,4294967295),m.stencil.setClear(y),m.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?S.render(a,null):(S.render(a,l),S.render(a,s))),this.renderToScreen?(a.setRenderTarget(null),a.render(g,h)):(a.setRenderTarget(l),a.render(g,h),a.setRenderTarget(s),a.render(g,h)),m.color.setLocked(!1),m.depth.setLocked(!1),m.stencil.setLocked(!1),m.stencil.setFunc(d.EQUAL,1,4294967295),m.stencil.setOp(d.KEEP,d.KEEP,d.KEEP),m.stencil.setLocked(!0)}},vg=class{constructor(a=null,{depthBuffer:l=!0,stencilBuffer:s=!1,multisampling:r=0,frameBufferType:o}={}){this.renderer=null,this.inputBuffer=this.createBuffer(l,s,o,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new hg,this.depthTexture=null,this.passes=[],this.timer=new cg,this.autoRenderToScreen=!0,this.setRenderer(a)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(a){const l=this.inputBuffer,s=this.multisampling;s>0&&a>0?(this.inputBuffer.samples=a,this.outputBuffer.samples=a,this.inputBuffer.dispose(),this.outputBuffer.dispose()):s!==a&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(l.depthBuffer,l.stencilBuffer,l.texture.type,a),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(a){if(this.renderer=a,a!==null){const l=a.getSize(new Ke),s=a.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===Ha&&a.outputColorSpace===_t&&(this.inputBuffer.texture.colorSpace=_t,this.outputBuffer.texture.colorSpace=_t,this.inputBuffer.dispose(),this.outputBuffer.dispose()),a.autoClear=!1,this.setSize(l.width,l.height);for(const o of this.passes)o.initialize(a,s,r)}}replaceRenderer(a,l=!0){const s=this.renderer,r=s.domElement.parentNode;return this.setRenderer(a),l&&r!==null&&(r.removeChild(s.domElement),r.appendChild(a.domElement)),s}createDepthTexture(){const a=this.depthTexture=new Vv;return this.inputBuffer.depthTexture=a,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(a.format=qv,a.type=Zv):a.type=xd,a}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const a of this.passes)a.setDepthTexture(null)}}createBuffer(a,l,s,r){const o=this.renderer,d=o===null?new Ke:o.getDrawingBufferSize(new Ke),m={minFilter:Jt,magFilter:Jt,stencilBuffer:l,depthBuffer:a,type:s},g=new Ra(d.width,d.height,m);return r>0&&(g.samples=r),s===Ha&&o!==null&&o.outputColorSpace===_t&&(g.texture.colorSpace=_t),g.texture.name="EffectComposer.Buffer",g.texture.generateMipmaps=!1,g}setMainScene(a){for(const l of this.passes)l.mainScene=a}setMainCamera(a){for(const l of this.passes)l.mainCamera=a}addPass(a,l){const s=this.passes,r=this.renderer,o=r.getDrawingBufferSize(new Ke),d=r.getContext().getContextAttributes().alpha,m=this.inputBuffer.texture.type;if(a.setRenderer(r),a.setSize(o.width,o.height),a.initialize(r,d,m),this.autoRenderToScreen&&(s.length>0&&(s[s.length-1].renderToScreen=!1),a.renderToScreen&&(this.autoRenderToScreen=!1)),l!==void 0?s.splice(l,0,a):s.push(a),this.autoRenderToScreen&&(s[s.length-1].renderToScreen=!0),a.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const g=this.createDepthTexture();for(a of s)a.setDepthTexture(g)}else a.setDepthTexture(this.depthTexture)}removePass(a){const l=this.passes,s=l.indexOf(a);if(s!==-1&&l.splice(s,1).length>0){if(this.depthTexture!==null){const d=(g,h)=>g||h.needsDepthTexture;l.reduce(d,!1)||(a.getDepthTexture()===this.depthTexture&&a.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&s===l.length&&(a.renderToScreen=!1,l.length>0&&(l[l.length-1].renderToScreen=!0))}}removeAllPasses(){const a=this.passes;this.deleteDepthTexture(),a.length>0&&(this.autoRenderToScreen&&(a[a.length-1].renderToScreen=!1),this.passes=[])}render(a){const l=this.renderer,s=this.copyPass;let r=this.inputBuffer,o=this.outputBuffer,d=!1,m,g,h;a===void 0&&(this.timer.update(),a=this.timer.getDelta());for(const S of this.passes)S.enabled&&(S.render(l,r,o,a,d),S.needsSwap&&(d&&(s.renderToScreen=S.renderToScreen,m=l.getContext(),g=l.state.buffers.stencil,g.setFunc(m.NOTEQUAL,1,4294967295),s.render(l,r,o,a,d),g.setFunc(m.EQUAL,1,4294967295)),h=r,r=o,o=h),S instanceof pg?d=!0:S instanceof fg&&(d=!1))}setSize(a,l,s){const r=this.renderer,o=r.getSize(new Ke);(a===void 0||l===void 0)&&(a=o.width,l=o.height),(o.width!==a||o.height!==l)&&r.setSize(a,l,s);const d=r.getDrawingBufferSize(new Ke);this.inputBuffer.setSize(d.width,d.height),this.outputBuffer.setSize(d.width,d.height);for(const m of this.passes)m.setSize(d.width,d.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const a of this.passes)a.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Wt.fullscreenGeometry.dispose()}},ml={NONE:0,DEPTH:1,CONVOLUTION:2},Fe={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},mg=class{constructor(){this.shaderParts=new Map([[Fe.FRAGMENT_HEAD,null],[Fe.FRAGMENT_MAIN_UV,null],[Fe.FRAGMENT_MAIN_IMAGE,null],[Fe.VERTEX_HEAD,null],[Fe.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ml.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=ii}},Ku=!1,cd=class{constructor(a=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(a),this.meshCount=0,this.replaceMaterial=l=>{if(l.isMesh){let s;if(l.material.flatShading)switch(l.material.side){case kl:s=this.materialsFlatShadedDoubleSide;break;case Gs:s=this.materialsFlatShadedBackSide;break;default:s=this.materialsFlatShaded;break}else switch(l.material.side){case kl:s=this.materialsDoubleSide;break;case Gs:s=this.materialsBackSide;break;default:s=this.materials;break}this.originalMaterials.set(l,l.material),l.isSkinnedMesh?l.material=s[2]:l.isInstancedMesh?l.material=s[1]:l.material=s[0],++this.meshCount}}}cloneMaterial(a){if(!(a instanceof xa))return a.clone();const l=a.uniforms,s=new Map;for(const o in l){const d=l[o].value;d.isRenderTargetTexture&&(l[o].value=null,s.set(o,d))}const r=a.clone();for(const o of s)l[o[0]].value=o[1],r.uniforms[o[0]].value=o[1];return r}setMaterial(a){if(this.disposeMaterials(),this.material=a,a!==null){const l=this.materials=[this.cloneMaterial(a),this.cloneMaterial(a),this.cloneMaterial(a)];for(const s of l)s.uniforms=Object.assign({},a.uniforms),s.side=Fv;l[2].skinning=!0,this.materialsBackSide=l.map(s=>{const r=this.cloneMaterial(s);return r.uniforms=Object.assign({},a.uniforms),r.side=Gs,r}),this.materialsDoubleSide=l.map(s=>{const r=this.cloneMaterial(s);return r.uniforms=Object.assign({},a.uniforms),r.side=kl,r}),this.materialsFlatShaded=l.map(s=>{const r=this.cloneMaterial(s);return r.uniforms=Object.assign({},a.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=l.map(s=>{const r=this.cloneMaterial(s);return r.uniforms=Object.assign({},a.uniforms),r.flatShading=!0,r.side=Gs,r}),this.materialsFlatShadedDoubleSide=l.map(s=>{const r=this.cloneMaterial(s);return r.uniforms=Object.assign({},a.uniforms),r.flatShading=!0,r.side=kl,r})}}render(a,l,s){const r=a.shadowMap.enabled;if(a.shadowMap.enabled=!1,Ku){const o=this.originalMaterials;this.meshCount=0,l.traverse(this.replaceMaterial),a.render(l,s);for(const d of o)d[0].material=d[1];this.meshCount!==o.size&&o.clear()}else{const o=l.overrideMaterial;l.overrideMaterial=this.material,a.render(l,s),l.overrideMaterial=o}a.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const a=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const l of a)l.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Ku}static set workaroundEnabled(a){Ku=a}},Ln=-1,Lt=class extends nc{constructor(a,l=Ln,s=Ln,r=1){super(),this.resizable=a,this.baseSize=new Ke(1,1),this.preferredSize=new Ke(l,s),this.target=this.preferredSize,this.s=r,this.effectiveSize=new Ke,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const a=this.baseSize,l=this.preferredSize,s=this.effectiveSize,r=this.scale;l.width!==Ln?s.width=l.width:l.height!==Ln?s.width=Math.round(l.height*(a.width/Math.max(a.height,1))):s.width=Math.round(a.width*r),l.height!==Ln?s.height=l.height:l.width!==Ln?s.height=Math.round(l.width/Math.max(a.width/Math.max(a.height,1),1)):s.height=Math.round(a.height*r)}get width(){return this.effectiveSize.width}set width(a){this.preferredWidth=a}get height(){return this.effectiveSize.height}set height(a){this.preferredHeight=a}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(a){this.s!==a&&(this.s=a,this.preferredSize.setScalar(Ln),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(a){this.scale=a}get baseWidth(){return this.baseSize.width}set baseWidth(a){this.baseSize.width!==a&&(this.baseSize.width=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(a){this.baseWidth=a}get baseHeight(){return this.baseSize.height}set baseHeight(a){this.baseSize.height!==a&&(this.baseSize.height=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(a){this.baseHeight=a}setBaseSize(a,l){(this.baseSize.width!==a||this.baseSize.height!==l)&&(this.baseSize.set(a,l),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(a){this.preferredSize.width!==a&&(this.preferredSize.width=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(a){this.preferredWidth=a}get preferredHeight(){return this.preferredSize.height}set preferredHeight(a){this.preferredSize.height!==a&&(this.preferredSize.height=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(a){this.preferredHeight=a}setPreferredSize(a,l){(this.preferredSize.width!==a||this.preferredSize.height!==l)&&(this.preferredSize.set(a,l),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(a){this.s=a.scale,this.baseSize.set(a.baseWidth,a.baseHeight),this.preferredSize.set(a.preferredWidth,a.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Ln}},Ge={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},gg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",yg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return mix(dst,src,src.a*opacity);}",Sg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=(dst.rgb+src.rgb)*0.5;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Eg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(b.xy,a.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",bg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=dst.rgb,b=src.rgb;vec3 c=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/max(b,1e-9))),vec3(1.0),step(1.0,a));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Tg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=dst.rgb,b=src.rgb;vec3 c=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",_g="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=min(dst.rgb,src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Mg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=abs(dst.rgb-src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",xg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb/max(src.rgb,1e-9);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Rg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb-2.0*dst.rgb*src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ag="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=min(dst.rgb,1.0);vec3 b=min(src.rgb,1.0);vec3 c=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",zg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=step(1.0,dst.rgb+src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Cg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(b.x,a.yz));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ug="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(1.0-src.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ng="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=src.rgb*max(1.0-dst.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Dg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(dst.rgb,src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Og="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=clamp(src.rgb+dst.rgb-1.0,0.0,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Bg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=min(dst.rgb+src.rgb,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Hg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=clamp(2.0*src.rgb+dst.rgb-1.0,0.0,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",wg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(a.xy,b.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Gg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb*src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",jg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(1.0-abs(1.0-dst.rgb-src.rgb),0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Lg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return mix(dst,src,opacity);}",Vg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=2.0*src.rgb*dst.rgb;vec3 b=1.0-2.0*(1.0-src.rgb)*(1.0-dst.rgb);vec3 c=mix(a,b,step(0.5,dst.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",qg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 src2=2.0*src.rgb;vec3 c=mix(mix(src2,dst.rgb,step(0.5*dst.rgb,src.rgb)),max(src2-1.0,vec3(0.0)),step(dst.rgb,src2-1.0));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Zg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=min(dst.rgb*dst.rgb/max(1.0-src.rgb,1e-9),1.0);vec3 c=mix(a,src.rgb,step(1.0,src.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Yg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(a.x,b.y,a.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Fg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb-min(dst.rgb*src.rgb,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Xg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 src2=2.0*src.rgb;vec3 d=dst.rgb+(src2-1.0);vec3 w=step(0.5,src.rgb);vec3 a=dst.rgb-(1.0-src2)*dst.rgb*(1.0-dst.rgb);vec3 b=mix(d*(sqrt(dst.rgb)-dst.rgb),d*dst.rgb*((16.0*dst.rgb-12.0)*dst.rgb+3.0),w*(1.0-step(0.25,dst.rgb)));vec3 c=mix(a,b,w);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Qg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return src;}",Kg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(dst.rgb-src.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ig="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=mix(max(1.0-min((1.0-dst.rgb)/(2.0*src.rgb),1.0),0.0),min(dst.rgb/(2.0*(1.0-src.rgb)),1.0),step(0.5,src.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Pg=new Map([[Ge.ADD,gg],[Ge.ALPHA,yg],[Ge.AVERAGE,Sg],[Ge.COLOR,Eg],[Ge.COLOR_BURN,bg],[Ge.COLOR_DODGE,Tg],[Ge.DARKEN,_g],[Ge.DIFFERENCE,Mg],[Ge.DIVIDE,xg],[Ge.DST,null],[Ge.EXCLUSION,Rg],[Ge.HARD_LIGHT,Ag],[Ge.HARD_MIX,zg],[Ge.HUE,Cg],[Ge.INVERT,Ug],[Ge.INVERT_RGB,Ng],[Ge.LIGHTEN,Dg],[Ge.LINEAR_BURN,Og],[Ge.LINEAR_DODGE,Bg],[Ge.LINEAR_LIGHT,Hg],[Ge.LUMINOSITY,wg],[Ge.MULTIPLY,Gg],[Ge.NEGATION,jg],[Ge.NORMAL,Lg],[Ge.OVERLAY,Vg],[Ge.PIN_LIGHT,qg],[Ge.REFLECT,Zg],[Ge.SATURATION,Yg],[Ge.SCREEN,Fg],[Ge.SOFT_LIGHT,Xg],[Ge.SRC,Qg],[Ge.SUBTRACT,Kg],[Ge.VIVID_LIGHT,Ig]]),Jg=class extends nc{constructor(a,l=1){super(),this._blendFunction=a,this.opacity=new Le(l)}getOpacity(){return this.opacity.value}setOpacity(a){this.opacity.value=a}get blendFunction(){return this._blendFunction}set blendFunction(a){this._blendFunction=a,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(a){this.blendFunction=a}getShaderCode(){return Pg.get(this.blendFunction)}},tr=class extends nc{constructor(a,l,{attributes:s=ml.NONE,blendFunction:r=Ge.NORMAL,defines:o=new Map,uniforms:d=new Map,extensions:m=null,vertexShader:g=null}={}){super(),this.name=a,this.renderer=null,this.attributes=s,this.fragmentShader=l,this.vertexShader=g,this.defines=o,this.uniforms=d,this.extensions=m,this.blendMode=new Jg(r),this.blendMode.addEventListener("change",h=>this.setChanged()),this._inputColorSpace=ii,this._outputColorSpace=Rd}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(a){this._inputColorSpace=a,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(a){this._outputColorSpace=a,this.setChanged()}set mainScene(a){}set mainCamera(a){}getName(){return this.name}setRenderer(a){this.renderer=a}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(a){this.attributes=a,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(a){this.fragmentShader=a,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(a){this.vertexShader=a,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(a,l=ci){}update(a,l,s){}setSize(a,l){}initialize(a,l,s){}dispose(){for(const a of Object.keys(this)){const l=this[a];(l instanceof Ra||l instanceof Ad||l instanceof qn||l instanceof Wt)&&this[a].dispose()}}},Sc={MEDIUM:2,LARGE:3},Wg=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,kg="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",$g=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],e1=class extends xa{constructor(a=new Hf){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Le(null),texelSize:new Le(new Hf),scale:new Le(1),kernel:new Le(0)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Wg,vertexShader:kg}),this.setTexelSize(a.x,a.y),this.kernelSize=Sc.MEDIUM}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setInputBuffer(a){this.inputBuffer=a}get kernelSequence(){return $g[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(a){this.uniforms.scale.value=a}getScale(){return this.uniforms.scale.value}setScale(a){this.uniforms.scale.value=a}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(a){this.uniforms.kernel.value=a}setKernel(a){this.kernel=a}setTexelSize(a,l){this.uniforms.texelSize.value.set(a,l,a*.5,l*.5)}setSize(a,l){const s=1/a,r=1/l;this.uniforms.texelSize.value.set(s,r,s*.5,r*.5)}},t1=class extends Wt{constructor({kernelSize:a=Sc.MEDIUM,resolutionScale:l=.5,width:s=Lt.AUTO_SIZE,height:r=Lt.AUTO_SIZE,resolutionX:o=s,resolutionY:d=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Ra(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const m=this.resolution=new Lt(this,o,d,l);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight)),this._blurMaterial=new e1,this._blurMaterial.kernelSize=a,this.copyMaterial=new fh}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(a){this._blurMaterial=a}get dithering(){return this.copyMaterial.dithering}set dithering(a){this.copyMaterial.dithering=a}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(a){this.blurMaterial.kernelSize=a}get width(){return this.resolution.width}set width(a){this.resolution.preferredWidth=a}get height(){return this.resolution.height}set height(a){this.resolution.preferredHeight=a}get scale(){return this.blurMaterial.scale}set scale(a){this.blurMaterial.scale=a}getScale(){return this.blurMaterial.scale}setScale(a){this.blurMaterial.scale=a}getKernelSize(){return this.kernelSize}setKernelSize(a){this.kernelSize=a}getResolutionScale(){return this.resolution.scale}setResolutionScale(a){this.resolution.scale=a}render(a,l,s,r,o){const d=this.scene,m=this.camera,g=this.renderTargetA,h=this.renderTargetB,S=this.blurMaterial,_=S.kernelSequence;let y=l;this.fullscreenMaterial=S;for(let b=0,A=_.length;b<A;++b){const H=(b&1)===0?g:h;S.kernel=_[b],S.inputBuffer=y.texture,a.setRenderTarget(H),a.render(d,m),y=H}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=y.texture,a.setRenderTarget(this.renderToScreen?null:s),a.render(d,m)}setSize(a,l){const s=this.resolution;s.setBaseSize(a,l);const r=s.width,o=s.height;this.renderTargetA.setSize(r,o),this.renderTargetB.setSize(r,o),this.blurMaterial.setSize(a,l)}initialize(a,l,s){s!==void 0&&(this.renderTargetA.texture.type=s,this.renderTargetB.texture.type=s,s!==Ha?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):a!==null&&a.outputColorSpace===_t&&(this.renderTargetA.texture.colorSpace=_t,this.renderTargetB.texture.colorSpace=_t))}static get AUTO_SIZE(){return Lt.AUTO_SIZE}},a1=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,n1=class extends xa{constructor(a=!1,l=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:ar.replace(/\D+/g,"")},uniforms:{inputBuffer:new Le(null),threshold:new Le(0),smoothing:new Le(1),range:new Le(null)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:a1,vertexShader:oh}),this.colorOutput=a,this.luminanceRange=l}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setInputBuffer(a){this.uniforms.inputBuffer.value=a}get threshold(){return this.uniforms.threshold.value}set threshold(a){this.smoothing>0||a>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=a}getThreshold(){return this.threshold}setThreshold(a){this.threshold=a}get smoothing(){return this.uniforms.smoothing.value}set smoothing(a){this.threshold>0||a>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=a}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(a){this.smoothing=a}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(a){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(a){a?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(a){return this.colorOutput}setColorOutputEnabled(a){this.colorOutput=a}get useRange(){return this.luminanceRange!==null}set useRange(a){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(a){a!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=a,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(a){this.luminanceRange=a}},l1=class extends Wt{constructor({renderTarget:a,luminanceRange:l,colorOutput:s,resolutionScale:r=1,width:o=Lt.AUTO_SIZE,height:d=Lt.AUTO_SIZE,resolutionX:m=o,resolutionY:g=d}={}){super("LuminancePass"),this.fullscreenMaterial=new n1(s,l),this.needsSwap=!1,this.renderTarget=a,this.renderTarget===void 0&&(this.renderTarget=new Ra(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const h=this.resolution=new Lt(this,m,g,r);h.addEventListener("change",S=>this.setSize(h.baseWidth,h.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(a,l,s,r,o){const d=this.fullscreenMaterial;d.inputBuffer=l.texture,a.setRenderTarget(this.renderToScreen?null:this.renderTarget),a.render(this.scene,this.camera)}setSize(a,l){const s=this.resolution;s.setBaseSize(a,l),this.renderTarget.setSize(s.width,s.height)}initialize(a,l,s){s!==void 0&&s!==Ha&&(this.renderTarget.texture.type=s,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},i1=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,s1="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",r1=class extends xa{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Le(null),texelSize:new Le(new Ke)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:i1,vertexShader:s1})}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setSize(a,l){this.uniforms.texelSize.value.set(1/a,1/l)}},u1=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,c1="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",o1=class extends xa{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Le(null),supportBuffer:new Le(null),texelSize:new Le(new Ke),radius:new Le(.85)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:u1,vertexShader:c1})}set inputBuffer(a){this.uniforms.inputBuffer.value=a}set supportBuffer(a){this.uniforms.supportBuffer.value=a}get radius(){return this.uniforms.radius.value}set radius(a){this.uniforms.radius.value=a}setSize(a,l){this.uniforms.texelSize.value.set(1/a,1/l)}},f1=class extends Wt{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ra(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new r1,this.upsamplingMaterial=new o1,this.resolution=new Ke}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(a){if(this.levels!==a){const l=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let s=0;s<a;++s){const r=l.clone();r.texture.name="Downsampling.Mipmap"+s,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(l);for(let s=1,r=a-1;s<r;++s){const o=l.clone();o.texture.name="Upsampling.Mipmap"+s,this.upsamplingMipmaps.push(o)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(a){this.upsamplingMaterial.radius=a}render(a,l,s,r,o){const{scene:d,camera:m}=this,{downsamplingMaterial:g,upsamplingMaterial:h}=this,{downsamplingMipmaps:S,upsamplingMipmaps:_}=this;let y=l;this.fullscreenMaterial=g;for(let b=0,A=S.length;b<A;++b){const H=S[b];g.setSize(y.width,y.height),g.inputBuffer=y.texture,a.setRenderTarget(H),a.render(d,m),y=H}this.fullscreenMaterial=h;for(let b=_.length-1;b>=0;--b){const A=_[b];h.setSize(y.width,y.height),h.inputBuffer=y.texture,h.supportBuffer=S[b].texture,a.setRenderTarget(A),a.render(d,m),y=A}}setSize(a,l){const s=this.resolution;s.set(a,l);let r=s.width,o=s.height;for(let d=0,m=this.downsamplingMipmaps.length;d<m;++d)r=Math.round(r*.5),o=Math.round(o*.5),this.downsamplingMipmaps[d].setSize(r,o),d<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[d].setSize(r,o)}initialize(a,l,s){if(s!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const o of r)o.texture.type=s;if(s!==Ha)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(a!==null&&a.outputColorSpace===_t)for(const o of r)o.texture.colorSpace=_t}}dispose(){super.dispose();for(const a of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))a.dispose()}},d1=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,h1=class extends tr{constructor({blendFunction:a=Ge.SCREEN,luminanceThreshold:l=1,luminanceSmoothing:s=.03,mipmapBlur:r=!0,intensity:o=1,radius:d=.85,levels:m=8,kernelSize:g=Sc.LARGE,resolutionScale:h=.5,width:S=Lt.AUTO_SIZE,height:_=Lt.AUTO_SIZE,resolutionX:y=S,resolutionY:b=_}={}){super("BloomEffect",d1,{blendFunction:a,uniforms:new Map([["map",new Le(null)],["intensity",new Le(o)]])}),this.renderTarget=new Ra(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new t1({kernelSize:g}),this.luminancePass=new l1({colorOutput:!0}),this.luminanceMaterial.threshold=l,this.luminanceMaterial.smoothing=s,this.mipmapBlurPass=new f1,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=d,this.mipmapBlurPass.levels=m,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const A=this.resolution=new Lt(this,y,b,h);A.addEventListener("change",H=>this.setSize(A.baseWidth,A.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(a){this.resolution.preferredWidth=a}get height(){return this.resolution.height}set height(a){this.resolution.preferredHeight=a}get dithering(){return this.blurPass.dithering}set dithering(a){this.blurPass.dithering=a}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(a){this.blurPass.kernelSize=a}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(a){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(a){this.uniforms.get("intensity").value=a}getIntensity(){return this.intensity}setIntensity(a){this.intensity=a}getResolutionScale(){return this.resolution.scale}setResolutionScale(a){this.resolution.scale=a}update(a,l,s){const r=this.renderTarget,o=this.luminancePass;o.enabled?(o.render(a,l),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(a,o.renderTarget):this.blurPass.render(a,o.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(a,l):this.blurPass.render(a,l,r)}setSize(a,l){const s=this.resolution;s.setBaseSize(a,l),this.renderTarget.setSize(s.width,s.height),this.blurPass.resolution.copy(s),this.luminancePass.setSize(a,l),this.mipmapBlurPass.setSize(a,l)}initialize(a,l,s){this.blurPass.initialize(a,l,s),this.luminancePass.initialize(a,l,s),this.mipmapBlurPass.initialize(a,l,s),s!==void 0&&(this.renderTarget.texture.type=s,a!==null&&a.outputColorSpace===_t&&(this.renderTarget.texture.colorSpace=_t))}},hh=class extends Wt{constructor(a,l,s=null){super("RenderPass",a,l),this.needsSwap=!1,this.clearPass=new dh,this.overrideMaterialManager=s===null?null:new cd(s),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(a){this.scene=a}set mainCamera(a){this.camera=a}get renderToScreen(){return super.renderToScreen}set renderToScreen(a){super.renderToScreen=a,this.clearPass.renderToScreen=a}get overrideMaterial(){const a=this.overrideMaterialManager;return a!==null?a.material:null}set overrideMaterial(a){const l=this.overrideMaterialManager;a!==null?l!==null?l.setMaterial(a):this.overrideMaterialManager=new cd(a):l!==null&&(l.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(a){this.overrideMaterial=a}get clear(){return this.clearPass.enabled}set clear(a){this.clearPass.enabled=a}getSelection(){return this.selection}setSelection(a){this.selection=a}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(a){this.ignoreBackground=a}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(a){this.skipShadowMapUpdate=a}getClearPass(){return this.clearPass}render(a,l,s,r,o){const d=this.scene,m=this.camera,g=this.selection,h=m.layers.mask,S=d.background,_=a.shadowMap.autoUpdate,y=this.renderToScreen?null:l;g!==null&&m.layers.set(g.getLayer()),this.skipShadowMapUpdate&&(a.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(d.background=null),this.clearPass.enabled&&this.clearPass.render(a,l),a.setRenderTarget(y),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(a,d,m):a.render(d,m),m.layers.mask=h,d.background=S,a.shadowMap.autoUpdate=_}},Vi={DEFAULT:0,ESKIL:1},p1=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,v1="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",m1=class extends xa{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Le(null),normalBuffer:new Le(null),texelSize:new Le(new Ke)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:p1,vertexShader:v1})}set depthBuffer(a){this.uniforms.depthBuffer.value=a}set depthPacking(a){this.defines.DEPTH_PACKING=a.toFixed(0),this.needsUpdate=!0}setDepthBuffer(a,l=ci){this.depthBuffer=a,this.depthPacking=l}set normalBuffer(a){this.uniforms.normalBuffer.value=a,a!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(a){this.normalBuffer=a}setTexelSize(a,l){this.uniforms.texelSize.value.set(a,l)}setSize(a,l){this.uniforms.texelSize.value.set(1/a,1/l)}},g1=class extends Wt{constructor({normalBuffer:a=null,resolutionScale:l=.5,width:s=Lt.AUTO_SIZE,height:r=Lt.AUTO_SIZE,resolutionX:o=s,resolutionY:d=r}={}){super("DepthDownsamplingPass");const m=new m1;m.normalBuffer=a,this.fullscreenMaterial=m,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ra(1,1,{minFilter:Is,magFilter:Is,depthBuffer:!1,type:Ja}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const g=this.resolution=new Lt(this,o,d,l);g.addEventListener("change",h=>this.setSize(g.baseWidth,g.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(a,l=ci){this.fullscreenMaterial.depthBuffer=a,this.fullscreenMaterial.depthPacking=l}render(a,l,s,r,o){a.setRenderTarget(this.renderToScreen?null:this.renderTarget),a.render(this.scene,this.camera)}setSize(a,l){const s=this.resolution;s.setBaseSize(a,l),this.renderTarget.setSize(s.width,s.height),this.fullscreenMaterial.setSize(a,l)}initialize(a,l,s){const r=a.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},y1=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,S1=class extends tr{constructor({blendFunction:a,eskil:l=!1,technique:s=l?Vi.ESKIL:Vi.DEFAULT,offset:r=.5,darkness:o=.5}={}){super("VignetteEffect",y1,{blendFunction:a,defines:new Map([["VIGNETTE_TECHNIQUE",s.toFixed(0)]]),uniforms:new Map([["offset",new Le(r)],["darkness",new Le(o)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(a){this.technique!==a&&(this.defines.set("VIGNETTE_TECHNIQUE",a.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Vi.ESKIL}set eskil(a){this.technique=a?Vi.ESKIL:Vi.DEFAULT}getTechnique(){return this.technique}setTechnique(a){this.technique=a}get offset(){return this.uniforms.get("offset").value}set offset(a){this.uniforms.get("offset").value=a}getOffset(){return this.offset}setOffset(a){this.offset=a}get darkness(){return this.uniforms.get("darkness").value}set darkness(a){this.uniforms.get("darkness").value=a}getDarkness(){return this.darkness}setDarkness(a){this.darkness=a}},E1=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,b1="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",T1=class extends xa{constructor(a,l,s,r,o=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ar.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Le(null),depthBuffer:new Le(null),resolution:new Le(new Ke),texelSize:new Le(new Ke),cameraNear:new Le(.3),cameraFar:new Le(1e3),aspect:new Le(1),time:new Le(0)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:o}),a&&this.setShaderParts(a),l&&this.setDefines(l),s&&this.setUniforms(s),this.copyCameraSettings(r)}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setInputBuffer(a){this.uniforms.inputBuffer.value=a}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(a){this.uniforms.depthBuffer.value=a}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(a){this.defines.DEPTH_PACKING=a.toFixed(0),this.needsUpdate=!0}setDepthBuffer(a,l=ci){this.depthBuffer=a,this.depthPacking=l}setShaderData(a){this.setShaderParts(a.shaderParts),this.setDefines(a.defines),this.setUniforms(a.uniforms),this.setExtensions(a.extensions)}setShaderParts(a){return this.fragmentShader=E1.replace(Fe.FRAGMENT_HEAD,a.get(Fe.FRAGMENT_HEAD)||"").replace(Fe.FRAGMENT_MAIN_UV,a.get(Fe.FRAGMENT_MAIN_UV)||"").replace(Fe.FRAGMENT_MAIN_IMAGE,a.get(Fe.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=b1.replace(Fe.VERTEX_HEAD,a.get(Fe.VERTEX_HEAD)||"").replace(Fe.VERTEX_MAIN_SUPPORT,a.get(Fe.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(a){for(const l of a.entries())this.defines[l[0]]=l[1];return this.needsUpdate=!0,this}setUniforms(a){for(const l of a.entries())this.uniforms[l[0]]=l[1];return this}setExtensions(a){this.extensions={};for(const l of a)this.extensions[l]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(a){this.encodeOutput!==a&&(a?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(a){return this.encodeOutput}setOutputEncodingEnabled(a){this.encodeOutput=a}get time(){return this.uniforms.time.value}set time(a){this.uniforms.time.value=a}setDeltaTime(a){this.uniforms.time.value+=a}adoptCameraSettings(a){this.copyCameraSettings(a)}copyCameraSettings(a){a&&(this.uniforms.cameraNear.value=a.near,this.uniforms.cameraFar.value=a.far,a instanceof Zi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(a,l){const s=this.uniforms;s.resolution.value.set(a,l),s.texelSize.value.set(1/a,1/l),s.aspect.value=a/l}static get Section(){return Fe}};function od(a,l,s){for(const r of l){const o="$1"+a+r.charAt(0).toUpperCase()+r.slice(1),d=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const m of s.entries())m[1]!==null&&s.set(m[0],m[1].replace(d,o))}}function _1(a,l,s){let r=l.getFragmentShader(),o=l.getVertexShader();const d=r!==void 0&&/mainImage/.test(r),m=r!==void 0&&/mainUv/.test(r);if(s.attributes|=l.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${l.name})`);if(m&&(s.attributes&ml.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${l.name})`);if(!d&&!m)throw new Error(`Could not find mainImage or mainUv function (${l.name})`);{const g=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,h=s.shaderParts;let S=h.get(Fe.FRAGMENT_HEAD)||"",_=h.get(Fe.FRAGMENT_MAIN_UV)||"",y=h.get(Fe.FRAGMENT_MAIN_IMAGE)||"",b=h.get(Fe.VERTEX_HEAD)||"",A=h.get(Fe.VERTEX_MAIN_SUPPORT)||"";const H=new Set,Q=new Set;if(m&&(_+=`	${a}MainUv(UV);
`,s.uvTransformation=!0),o!==null&&/mainSupport/.test(o)){const x=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o);A+=`	${a}MainSupport(`,A+=x?`vUv);
`:`);
`;for(const Y of o.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const I of Y[1].split(/\s*,\s*/))s.varyings.add(I),H.add(I),Q.add(I);for(const Y of o.matchAll(g))Q.add(Y[1])}for(const x of r.matchAll(g))Q.add(x[1]);for(const x of l.defines.keys())Q.add(x.replace(/\([\w\s,]*\)/g,""));for(const x of l.uniforms.keys())Q.add(x);Q.delete("while"),Q.delete("for"),Q.delete("if"),l.uniforms.forEach((x,Y)=>s.uniforms.set(a+Y.charAt(0).toUpperCase()+Y.slice(1),x)),l.defines.forEach((x,Y)=>s.defines.set(a+Y.charAt(0).toUpperCase()+Y.slice(1),x));const V=new Map([["fragment",r],["vertex",o]]);od(a,Q,s.defines),od(a,Q,V),r=V.get("fragment"),o=V.get("vertex");const C=l.blendMode;if(s.blendModes.set(C.blendFunction,C),d){l.inputColorSpace!==null&&l.inputColorSpace!==s.colorSpace&&(y+=l.inputColorSpace===_t?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),l.outputColorSpace!==Rd?s.colorSpace=l.outputColorSpace:l.inputColorSpace!==null&&(s.colorSpace=l.inputColorSpace);const x=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;y+=`${a}MainImage(color0, UV, `,(s.attributes&ml.DEPTH)!==0&&x.test(r)&&(y+="depth, ",s.readDepth=!0),y+=`color1);
	`;const Y=a+"BlendOpacity";s.uniforms.set(Y,C.opacity),y+=`color0 = blend${C.blendFunction}(color0, color1, ${Y});

	`,S+=`uniform float ${Y};

`}if(S+=r+`
`,o!==null&&(b+=o+`
`),h.set(Fe.FRAGMENT_HEAD,S),h.set(Fe.FRAGMENT_MAIN_UV,_),h.set(Fe.FRAGMENT_MAIN_IMAGE,y),h.set(Fe.VERTEX_HEAD,b),h.set(Fe.VERTEX_MAIN_SUPPORT,A),l.extensions!==null)for(const x of l.extensions)s.extensions.add(x)}}var M1=class extends Wt{constructor(a,...l){super("EffectPass"),this.fullscreenMaterial=new T1(null,null,null,a),this.listener=s=>this.handleEvent(s),this.effects=[],this.setEffects(l),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(a){for(const l of this.effects)l.mainScene=a}set mainCamera(a){this.fullscreenMaterial.copyCameraSettings(a);for(const l of this.effects)l.mainCamera=a}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(a){this.fullscreenMaterial.encodeOutput=a}get dithering(){return this.fullscreenMaterial.dithering}set dithering(a){const l=this.fullscreenMaterial;l.dithering=a,l.needsUpdate=!0}setEffects(a){for(const l of this.effects)l.removeEventListener("change",this.listener);this.effects=a.sort((l,s)=>s.attributes-l.attributes);for(const l of this.effects)l.addEventListener("change",this.listener)}updateMaterial(){const a=new mg;let l=0;for(const m of this.effects)if(m.blendMode.blendFunction===Ge.DST)a.attributes|=m.getAttributes()&ml.DEPTH;else{if((a.attributes&m.getAttributes()&ml.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${m.name})`);_1("e"+l++,m,a)}let s=a.shaderParts.get(Fe.FRAGMENT_HEAD),r=a.shaderParts.get(Fe.FRAGMENT_MAIN_IMAGE),o=a.shaderParts.get(Fe.FRAGMENT_MAIN_UV);const d=/\bblend\b/g;for(const m of a.blendModes.values())s+=m.getShaderCode().replace(d,`blend${m.blendFunction}`)+`
`;(a.attributes&ml.DEPTH)!==0?(a.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,a.colorSpace===_t&&(r+=`color0 = sRGBToLinear(color0);
	`),a.uvTransformation?(o=`vec2 transformedUv = vUv;
`+o,a.defines.set("UV","transformedUv")):a.defines.set("UV","vUv"),a.shaderParts.set(Fe.FRAGMENT_HEAD,s),a.shaderParts.set(Fe.FRAGMENT_MAIN_IMAGE,r),a.shaderParts.set(Fe.FRAGMENT_MAIN_UV,o);for(const[m,g]of a.shaderParts)g!==null&&a.shaderParts.set(m,g.trim().replace(/^#/,`
#`));this.skipRendering=l===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(a)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(a,l=ci){this.fullscreenMaterial.depthBuffer=a,this.fullscreenMaterial.depthPacking=l;for(const s of this.effects)s.setDepthTexture(a,l)}render(a,l,s,r,o){for(const d of this.effects)d.update(a,l,r);if(!this.skipRendering||this.renderToScreen){const d=this.fullscreenMaterial;d.inputBuffer=l.texture,d.time+=r*this.timeScale,a.setRenderTarget(this.renderToScreen?null:s),a.render(this.scene,this.camera)}}setSize(a,l){this.fullscreenMaterial.setSize(a,l);for(const s of this.effects)s.setSize(a,l)}initialize(a,l,s){this.renderer=a;for(const r of this.effects)r.initialize(a,l,s);this.updateMaterial(),s!==void 0&&s!==Ha&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const a of this.effects)a.removeEventListener("change",this.listener),a.dispose()}handleEvent(a){switch(a.type){case"change":this.recompile();break}}},x1=class extends Wt{constructor(a,l,{renderTarget:s,resolutionScale:r=1,width:o=Lt.AUTO_SIZE,height:d=Lt.AUTO_SIZE,resolutionX:m=o,resolutionY:g=d}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new hh(a,l,new Yv);const h=this.renderPass;h.ignoreBackground=!0,h.skipShadowMapUpdate=!0;const S=h.getClearPass();S.overrideClearColor=new Wi(7829503),S.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new Ra(1,1,{minFilter:Is,magFilter:Is}),this.renderTarget.texture.name="NormalPass.Target");const _=this.resolution=new Lt(this,m,g,r);_.addEventListener("change",y=>this.setSize(_.baseWidth,_.baseHeight))}set mainScene(a){this.renderPass.mainScene=a}set mainCamera(a){this.renderPass.mainCamera=a}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(a){this.resolution.scale=a}render(a,l,s,r,o){const d=this.renderToScreen?null:this.renderTarget;this.renderPass.render(a,d,d)}setSize(a,l){const s=this.resolution;s.setBaseSize(a,l),this.renderTarget.setSize(s.width,s.height)}};function Xi(a,l,s){return l in a?Object.defineProperty(a,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[l]=s,a}new Ke;new Ke;function ph(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var _a=function a(l,s,r){var o=this;ph(this,a),Xi(this,"dot2",function(d,m){return o.x*d+o.y*m}),Xi(this,"dot3",function(d,m,g){return o.x*d+o.y*m+o.z*g}),this.x=l,this.y=s,this.z=r},R1=[new _a(1,1,0),new _a(-1,1,0),new _a(1,-1,0),new _a(-1,-1,0),new _a(1,0,1),new _a(-1,0,1),new _a(1,0,-1),new _a(-1,0,-1),new _a(0,1,1),new _a(0,-1,1),new _a(0,1,-1),new _a(0,-1,-1)],fd=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],dd=new Array(512),hd=new Array(512),A1=function(l){l>0&&l<1&&(l*=65536),l=Math.floor(l),l<256&&(l|=l<<8);for(var s=0;s<256;s++){var r;s&1?r=fd[s]^l&255:r=fd[s]^l>>8&255,dd[s]=dd[s+256]=r,hd[s]=hd[s+256]=R1[r%12]}};A1(0);function z1(a){if(typeof a=="number")a=Math.abs(a);else if(typeof a=="string"){var l=a;a=0;for(var s=0;s<l.length;s++)a=(a+(s+1)*(l.charCodeAt(s)%96))%2147483647}return a===0&&(a=311),a}function pd(a){var l=z1(a);return function(){var s=l*48271%2147483647;return l=s,s/2147483647}}var C1=function a(l){var s=this;ph(this,a),Xi(this,"seed",0),Xi(this,"init",function(r){s.seed=r,s.value=pd(r)}),Xi(this,"value",pd(this.seed)),this.init(l)};new C1(Math.random());const U1=L.createContext(null),vd=a=>(a.getAttributes()&2)===2,N1=L.memo(L.forwardRef(({children:a,camera:l,scene:s,resolutionScale:r,enabled:o=!0,renderPriority:d=1,autoClear:m=!0,depthBuffer:g,enableNormalPass:h,stencilBuffer:S,multisampling:_=8,frameBufferType:y=da},b)=>{const{gl:A,scene:H,camera:Q,size:V}=Ut(),C=s||H,x=l||Q,[Y,I,F]=L.useMemo(()=>{const O=new vg(A,{depthBuffer:g,stencilBuffer:S,multisampling:_,frameBufferType:y});O.addPass(new hh(C,x));let j=null,q=null;return h&&(q=new x1(C,x),q.enabled=!1,O.addPass(q),r!==void 0&&(j=new g1({normalBuffer:q.texture,resolutionScale:r}),j.enabled=!1,O.addPass(j))),[O,q,j]},[x,A,g,S,_,y,C,h,r]);L.useEffect(()=>Y?.setSize(V.width,V.height),[Y,V]),yl((O,j)=>{if(o){const q=A.autoClear;A.autoClear=m,S&&!m&&A.clearStencil(),Y.render(j),A.autoClear=q}},o?d:0);const G=L.useRef(null);L.useLayoutEffect(()=>{const O=[],j=G.current.__r3f;if(j&&Y){const q=j.children;for(let se=0;se<q.length;se++){const ve=q[se].object;if(ve instanceof tr){const ee=[ve];if(!vd(ve)){let Se=null;for(;(Se=q[se+1]?.object)instanceof tr&&!vd(Se);)ee.push(Se),se++}const le=new M1(x,...ee);O.push(le)}else ve instanceof Wt&&O.push(ve)}for(const se of O)Y?.addPass(se);I&&(I.enabled=!0),F&&(F.enabled=!0)}return()=>{for(const q of O)Y?.removePass(q);I&&(I.enabled=!1),F&&(F.enabled=!1)}},[Y,a,x,I,F]),L.useEffect(()=>{const O=A.toneMapping;return A.toneMapping=bd,()=>{A.toneMapping=O}},[A]);const re=L.useMemo(()=>({composer:Y,normalPass:I,downSamplingPass:F,resolutionScale:r,camera:x,scene:C}),[Y,I,F,r,x,C]);return L.useImperativeHandle(b,()=>Y,[Y]),Ee.jsx(U1.Provider,{value:re,children:Ee.jsx("group",{ref:G,children:a})})}));let D1=0;const md=new WeakMap,vh=(a,l)=>function({blendFunction:s=l?.blendFunction,opacity:r=l?.opacity,...o}){let d=md.get(a);if(!d){const h=`@react-three/postprocessing/${a.name}-${D1++}`;oc({[h]:a}),md.set(a,d=h)}const m=Ut(h=>h.camera),g=ei.useMemo(()=>[...l?.args??[],...o.args??[{...l,...o}]],[JSON.stringify(o)]);return Ee.jsx(d,{camera:m,"blendMode-blendFunction":s,"blendMode-opacity-value":r,...o,args:g})},O1=vh(h1,{blendFunction:0}),B1=vh(S1);function mh(a){const l=Ki(s=>s.lenis);L.useEffect(()=>{if(l)return l.on("scroll",a),()=>{l.off("scroll",a)}},[l,a])}function pl(a,l,s){return(1-s)*a+s*l}const Ji=[{name:"mission-intro",label:"The Mission",camera:{x:0,y:200,z:600},lookAt:{x:0,y:0,z:0}},{name:"mission",label:"The Mission",description:"The Michigan Mars Rover Team designs, builds, and tests a Mars rover prototype to compete in the University Rover Challenge. Our interdisciplinary team of students pushes the boundaries of what's possible in student-led space exploration.",camera:{x:0,y:80,z:350},lookAt:{x:0,y:20,z:0}},{name:"robotic-arm",subteam:{teamName:"Mechanical",name:"Robotic Arm",desc:"Designs and builds a five degree-of-freedom robotic arm for Equipment Servicing and Extreme Retrieval missions.",color:"#00274C",accent:"#FFCB05"},camera:{x:150,y:80,z:200},lookAt:{x:50,y:40,z:0},joints:{arm_a_to_arm_b:-.4,arm_b_to_arm_c:1.2,arm_c_to_arm_d:-.8}},{name:"mobility",subteam:{teamName:"Mechanical",name:"Mobility",desc:"Develops drive and suspension systems to navigate rocks and rough terrain in each competition mission.",color:"#00274C",accent:"#FFCB05"},camera:{x:-100,y:30,z:250},lookAt:{x:0,y:-20,z:0}},{name:"chassis",subteam:{teamName:"Mechanical",name:"Chassis and Mounts",desc:"Develops a lightweight and strong chassis optimized for integration of all sub-systems.",color:"#00274C",accent:"#FFCB05"},camera:{x:0,y:150,z:300},lookAt:{x:0,y:0,z:0}},{name:"spi",subteam:{teamName:"Science-Mechanical",name:"Science Payload Instrumentation",desc:"Brings together sensors and tests for in-situ sampling with on-board life-detection tests.",color:"#FF6B35",accent:"#FFE0D4"},camera:{x:80,y:60,z:180},lookAt:{x:20,y:20,z:0}},{name:"spa",subteam:{teamName:"Science-Mechanical",name:"Science Payload Acquisition",desc:"Develops and tests soil collection mechanics with a linear actuator-driven auger system.",color:"#FF6B35",accent:"#FFE0D4"},camera:{x:100,y:40,z:200},lookAt:{x:30,y:10,z:0}},{name:"astrobiology",subteam:{teamName:"Science",name:"Astrobiology",desc:"Develops tests to analyze soil and rock samples for signs of past or present life.",color:"#4CAF50",accent:"#C8E6C9"},camera:{x:60,y:80,z:220},lookAt:{x:0,y:30,z:0}},{name:"autonomy",subteam:{teamName:"Software",name:"Autonomy",desc:"Handles Navigation, Perception, and Localization. Uses A* to path plan around obstacles.",color:"#2196F3",accent:"#BBDEFB"},camera:{x:0,y:120,z:350},lookAt:{x:0,y:0,z:0}},{name:"esw",subteam:{teamName:"Software",name:"Embedded Software",desc:"Writes low-level driver code for other programming subteams to utilize electronic equipment.",color:"#2196F3",accent:"#BBDEFB"},camera:{x:-80,y:60,z:200},lookAt:{x:0,y:20,z:0}},{name:"teleop",subteam:{teamName:"Software",name:"Teleoperation",desc:"Creates the interface between driver and rover, maintaining GUIs and control solutions.",color:"#2196F3",accent:"#BBDEFB"},camera:{x:50,y:100,z:280},lookAt:{x:0,y:20,z:0}},{name:"drone",subteam:{teamName:"Software",name:"Drone",desc:"Develops a drone for collaboration with the Rover, capable of manual and autonomous operation.",color:"#2196F3",accent:"#BBDEFB"},camera:{x:0,y:180,z:400},lookAt:{x:0,y:50,z:0}},{name:"power",subteam:{teamName:"Electrical",name:"Power",desc:"Provides power to the rover and manages the electronics box with custom distribution solutions.",color:"#9C27B0",accent:"#E1BEE7"},camera:{x:-60,y:80,z:220},lookAt:{x:0,y:30,z:0}},{name:"ehw",subteam:{teamName:"Electrical",name:"Embedded Hardware",desc:"Controls actuators, receives sensor signals, and designs custom PCBs for motor control.",color:"#9C27B0",accent:"#E1BEE7"},camera:{x:100,y:50,z:180},lookAt:{x:20,y:20,z:0}},{name:"comms",subteam:{teamName:"Electrical",name:"Communications",desc:"Ensures strong wireless RF communication link between base station and rover.",color:"#9C27B0",accent:"#E1BEE7"},camera:{x:0,y:100,z:300},lookAt:{x:0,y:40,z:0}}],vn=Ji.length,gh=Math.sqrt(3),H1=.5*(gh-1),qi=(3-gh)/6,gd=a=>Math.floor(a)|0,yd=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function w1(a=Math.random){const l=G1(a),s=new Float64Array(l).map(o=>yd[o%12*2]),r=new Float64Array(l).map(o=>yd[o%12*2+1]);return function(d,m){let g=0,h=0,S=0;const _=(d+m)*H1,y=gd(d+_),b=gd(m+_),A=(y+b)*qi,H=y-A,Q=b-A,V=d-H,C=m-Q;let x,Y;V>C?(x=1,Y=0):(x=0,Y=1);const I=V-x+qi,F=C-Y+qi,G=V-1+2*qi,re=C-1+2*qi,O=y&255,j=b&255;let q=.5-V*V-C*C;if(q>=0){const ee=O+l[j],le=s[ee],Se=r[ee];q*=q,g=q*q*(le*V+Se*C)}let se=.5-I*I-F*F;if(se>=0){const ee=O+x+l[j+Y],le=s[ee],Se=r[ee];se*=se,h=se*se*(le*I+Se*F)}let ve=.5-G*G-re*re;if(ve>=0){const ee=O+1+l[j+1],le=s[ee],Se=r[ee];ve*=ve,S=ve*ve*(le*G+Se*re)}return 70*(g+h+S)}}function G1(a){const s=new Uint8Array(512);for(let r=0;r<512/2;r++)s[r]=r;for(let r=0;r<512/2-1;r++){const o=r+~~(a()*(256-r)),d=s[r];s[r]=s[o],s[o]=d}for(let r=256;r<512;r++)s[r]=s[r-256];return s}function j1(){const a=L.useRef(null),{positions:l,indices:s}=L.useMemo(()=>{const r=w1(),o=1e3,d=1e3,m=80,g=[],h=[],S=120,_=100;for(let y=0;y<=m;y++){const b=y/m*d-d/2;for(let A=0;A<=m;A++){const H=A/m*o-o/2,Q=Math.abs(H);let V=0;if(Q<S)V=0;else if(Q<S+_){const F=(Q-S)/_;V=F*F*F}else V=1;const C=Math.max(0,-b),x=Math.min(1,C/300);V*=.3+.7*x;let Y=0;if(V>.01){const F=r(H*.003,b*.003)*80,G=r(H*.015,b*.015)*15,re=Math.pow(Math.abs(r(H*.006,b*.006)),.7)*60;Y=(F+G+re)*V}const I=r(b*.001,0)*2*(1-V);Y+=I,Y-=30,g.push(H,Y,b)}}for(let y=0;y<m;y++)for(let b=0;b<m;b++){const A=y*(m+1)+b,H=y*(m+1)+b+1,Q=(y+1)*(m+1)+b+1,V=(y+1)*(m+1)+b;h.push(A,H,V),h.push(H,Q,V)}return{positions:new Float32Array(g),indices:new Uint16Array(h)}},[]);return yl(()=>{a.current}),Ee.jsxs("mesh",{ref:a,position:[0,-40,0],children:[Ee.jsxs("bufferGeometry",{children:[Ee.jsx("bufferAttribute",{attach:"attributes-position",args:[l,3]}),Ee.jsx("bufferAttribute",{attach:"index",args:[s,1]})]}),Ee.jsx("meshBasicMaterial",{color:"#FF8C00",wireframe:!0,transparent:!0,opacity:.15,side:kl})]})}const Ba={orbitControls:!1,currentSection:0,rover:{scale:1,rotationY:-Math.PI/3},joints:{}};let ti=null,ai=null;function L1({orbitEnabled:a}){const{camera:l}=Ut(),s=L.useRef(0),r=Ki(h=>h.headerHeight),[o,d]=L.useState(0),m=L.useRef(new ft);L.useEffect(()=>{const h=()=>d(window.innerHeight);return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const g=L.useCallback(({scroll:h})=>{s.current=h},[]);return mh(g),yl(()=>{if(a||!o)return;const h=s.current,S=o*vn,y=Math.max(0,(h-r)/(S-o))*(vn-1),b=Math.floor(y),A=y-b,H=Ji[Math.min(b,vn-1)],Q=Ji[Math.min(b+1,vn-1)];Ba.currentSection=b;const V=pl(H.camera.x,Q.camera.x,A),C=pl(H.camera.y,Q.camera.y,A),x=pl(H.camera.z,Q.camera.z,A);l.position.set(V,C,x),m.current.set(pl(H.lookAt.x,Q.lookAt.x,A),pl(H.lookAt.y,Q.lookAt.y,A),pl(H.lookAt.z,Q.lookAt.z,A)),l.lookAt(m.current)}),null}function V1(){const a=L.useRef(null),l=L.useRef(0),s=Ki(h=>h.headerHeight),[r,o]=L.useState(0),[d,m]=L.useState(null);L.useEffect(()=>{const h=()=>o(window.innerHeight);return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),L.useEffect(()=>{const h=new Pv;h.packages={mrover:"/urdf"},h.load("/urdf/rover/rover.urdf",S=>{S.rotation.x=-Math.PI/2,S.traverse(y=>{y instanceof ki&&(y.castShadow=!0,y.receiveShadow=!0,y.material instanceof Jv&&(y.material.roughness=Math.min(y.material.roughness,.7)))}),ti=S;const _=S;ai&&_.joints&&Object.entries(_.joints).forEach(([y,b])=>{if(b.jointType==="revolute"||b.jointType==="continuous"||b.jointType==="prismatic"){const A=b.limit?.lower??-Math.PI,H=b.limit?.upper??Math.PI,Q=Array.isArray(b.jointValue)?b.jointValue[0]:b.jointValue??0;Ba.joints[y]=Q,ai.add(Ba.joints,y,A,H).onChange(V=>{b.setJointValue(V)})}}),m(S)})},[]);const g=L.useCallback(({scroll:h})=>{l.current=h},[]);return mh(g),yl(()=>{if(!a.current||!r||!ti)return;const h=l.current,S=r*vn,y=Math.max(0,(h-s)/(S-r))*(vn-1),b=Math.floor(y),A=y-b,H=Ji[Math.min(b,vn-1)],Q=Ji[Math.min(b+1,vn-1)];if(a.current.rotation.y=Ba.rover.rotationY,a.current.scale.setScalar(Ba.rover.scale),ti.joints){const V=H.joints||{},C=Q.joints||{};new Set([...Object.keys(V),...Object.keys(C)]).forEach(Y=>{const I=ti.joints[Y];if(I){const F=V[Y]??0,G=C[Y]??0,re=pl(F,G,A);I.setJointValue(re)}})}}),d?Ee.jsx("group",{ref:a,children:Ee.jsx("primitive",{object:d})}):null}function q1({enabled:a}){return a?Ee.jsx(q0,{makeDefault:!0}):null}function Z1(){const{scene:a}=Ut();return L.useEffect(()=>(a.background=new Wi(657416),a.fog=new Iv(1709072,25e-5),()=>{a.background=null,a.fog=null}),[a]),null}function Y1({orbitEnabled:a}){return Ee.jsxs(Ee.Fragment,{children:[Ee.jsx(Z1,{}),Ee.jsx(rg,{radius:800,depth:150,count:5e3,factor:6,fade:!0,speed:.3}),Ee.jsx(lg,{preset:"sunset",environmentIntensity:.7}),Ee.jsx("directionalLight",{position:[200,300,150],intensity:2,color:16772829,castShadow:!0,"shadow-bias":-5e-4,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":800,"shadow-camera-left":-200,"shadow-camera-right":200,"shadow-camera-top":200,"shadow-camera-bottom":-200}),Ee.jsx("directionalLight",{position:[-150,50,-100],intensity:.5,color:4478310}),Ee.jsx(L1,{orbitEnabled:a}),Ee.jsx(q1,{enabled:a}),Ee.jsx(j1,{}),Ee.jsx(L.Suspense,{fallback:null,children:Ee.jsx(V1,{})}),Ee.jsxs(N1,{enableNormalPass:!1,children:[Ee.jsx(O1,{luminanceThreshold:1,mipmapBlur:!0,intensity:.5,radius:.6}),Ee.jsx(B1,{darkness:.4,offset:.3})]})]})}function F1({progress:a,visible:l}){return l?Ee.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"#0a0808",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"opacity 0.5s ease",pointerEvents:"none"},children:[Ee.jsx("div",{className:"loader-spinner",style:{width:"40px",height:"40px",border:"3px solid rgba(255, 140, 0, 0.3)",borderTopColor:"#FF8C00",borderRadius:"50%",animation:"spin 1s linear infinite"}}),Ee.jsx("div",{style:{marginTop:"20px",width:"200px",height:"2px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"1px",overflow:"hidden"},children:Ee.jsx("div",{style:{width:`${a}%`,height:"100%",background:"#FF8C00",transition:"width 0.2s ease-out"}})}),Ee.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]}):null}function X1(){const[a,l]=L.useState(!1),[s,r]=L.useState(!0),[o,d]=L.useState(0);return L.useEffect(()=>{Au.onStart=()=>{r(!0),d(0)},Au.onProgress=(m,g,h)=>{d(g/h*100)},Au.onLoad=()=>{d(100),setTimeout(()=>r(!1),500)}},[]),L.useEffect(()=>{const m=new Kv;m.add(Ba,"orbitControls").name("Orbit Controls").onChange(h=>{l(h)}),m.add(Ba,"currentSection").name("Current Section").listen().disable();const g=m.addFolder("Rover");return g.add(Ba.rover,"scale",.1,5),g.add(Ba.rover,"rotationY",-Math.PI,Math.PI).name("rotation Y"),ai=m.addFolder("Joints"),ai.close(),ti?.joints&&Object.entries(ti.joints).forEach(([h,S])=>{if(S.jointType==="revolute"||S.jointType==="continuous"||S.jointType==="prismatic"){const _=S.limit?.lower??-Math.PI,y=S.limit?.upper??Math.PI,b=Array.isArray(S.jointValue)?S.jointValue[0]:S.jointValue??0;Ba.joints[h]=b,ai.add(Ba.joints,h,_,y).onChange(A=>{S.setJointValue(A)})}}),()=>{m.destroy(),ai=null}},[]),Ee.jsxs(Ee.Fragment,{children:[Ee.jsx(F1,{progress:o,visible:s}),Ee.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:a?"auto":"none",zIndex:0,opacity:s?0:1,transition:"opacity 1s ease"},children:Ee.jsx(h0,{gl:{antialias:!0,alpha:!1,toneMapping:Td,toneMappingExposure:1.5},camera:{fov:50,near:.1,far:1e4,position:[0,100,400]},shadows:!0,dpr:[1,2],children:Ee.jsx(L.Suspense,{fallback:null,children:Ee.jsx(Y1,{orbitEnabled:a})})})})]})}function $1(){const a=Ki(s=>s.setLenis),l=Ki(s=>s.setHeaderHeight);return L.useEffect(()=>{js.registerPlugin(Gi),Gi.defaults({markers:!1});const s=document.querySelector("header");if(s){const g=s.offsetHeight;l(g),document.documentElement.style.setProperty("--header-height",`${g}px`)}window.scrollTo(0,0);const r=new Wv({duration:1.2,easing:g=>Math.min(1,1.001-Math.pow(2,-10*g)),smoothWheel:!0,syncTouch:!0});a(r),r.on("scroll",Gi.update);const o=g=>r.raf(g*1e3);js.ticker.add(o),js.ticker.lagSmoothing(0);const d=document.querySelector("main");Gi.create({trigger:d,start:"top top",end:"bottom bottom",snap:{snapTo:1/(vn-1),duration:{min:.2,max:.8},delay:.1,ease:"power2.inOut"}});const m=g=>{const h=window.innerHeight,S=window.scrollY,_=Math.round(S/h);switch(g.key){case"ArrowDown":case" ":g.preventDefault(),r.scrollTo((_+1)*h);break;case"ArrowUp":g.preventDefault(),r.scrollTo((_-1)*h);break}};return window.addEventListener("keydown",m),()=>{r.destroy(),a(null),js.ticker.remove(o),window.removeEventListener("keydown",m),Gi.getAll().forEach(g=>g.kill())}},[a,l]),Ee.jsx(X1,{})}export{$1 as SceneManager};
