import{j as Ee,W as Ed,R as bd,O as ni,P as Zi,S as Qi,b as Ru,V as yp,c as Sp,B as Ep,d as bp,e as ii,f as _t,N as Td,g as _d,h as Nf,C as Wi,i as si,k as Ha,l as ft,m as Ke,n as Tp,T as _p,o as ar,M as ki,I as Mp,p as xa,q as kl,r as Iu,Q as Df,s as Kl,t as Il,u as xp,v as Rp,w as Md,H as da,F as Ja,x as $l,y as Jt,z as Ap,E as Vn,J as xd,K as Ra,X as Ks,Y as zp,Z as qn,_ as Up,$ as Cp,a0 as Np,a1 as Dp,a2 as Rd,a3 as Fs,a4 as Op,L as Bp,a5 as Of,a6 as Yn,a7 as Hp,a8 as wp,a9 as jp,aa as Gp,ab as Lp,ac as Vp,ad as qp,ae as Zp,af as Yp,ag as Is,ah as ci,ai as nc,aj as Ad,ak as Le,al as js,am as Fp,an as zd,ao as Xp,ap as Qp,aq as Bf,ar as Hf,as as Au,G as Kp,at as Ip,U as Pp,au as Jp}from"./lil-gui.esm.w_0NPKqf.js";import{e as ei,a as lc,g as Ud,r as L}from"./index.BDe0eYEM.js";import{L as Wp}from"./lenis.Dhw3rTjO.js";import{g as Gs}from"./index.DKtf60Sy.js";import{S as ji}from"./ScrollTrigger.BWsqEc1I.js";const wf=a=>{let l;const s=new Set,u=(y,E)=>{const S=typeof y=="function"?y(l):y;if(!Object.is(S,l)){const T=l;l=E??(typeof S!="object"||S===null)?S:Object.assign({},l,S),s.forEach(x=>x(l,T))}},o=()=>l,m={setState:u,getState:o,getInitialState:()=>h,subscribe:y=>(s.add(y),()=>s.delete(y))},h=l=a(u,o,m);return m},kp=(a=>a?wf(a):wf),$p=a=>a;function em(a,l=$p){const s=ei.useSyncExternalStore(a.subscribe,ei.useCallback(()=>l(a.getState()),[a,l]),ei.useCallback(()=>l(a.getInitialState()),[a,l]));return ei.useDebugValue(s),s}const jf=a=>{const l=kp(a),s=u=>em(l,u);return Object.assign(s,l),s},tm=(a=>a?jf(a):jf),Ki=tm(a=>({lenis:null,setLenis:l=>a({lenis:l}),headerHeight:0,setHeaderHeight:l=>a({headerHeight:l})}));var zu={exports:{}},vn={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gf;function am(){return Gf||(Gf=1,vn.ConcurrentRoot=1,vn.ContinuousEventPriority=8,vn.DefaultEventPriority=32,vn.DiscreteEventPriority=2,vn.IdleEventPriority=268435456,vn.LegacyRoot=0,vn.NoEventPriority=0),vn}var Lf;function nm(){return Lf||(Lf=1,zu.exports=am()),zu.exports}var Xs=nm(),Uu={exports:{}},Cu={},Nu={exports:{}},Du={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf;function lm(){if(Vf)return Du;Vf=1;var a=lc();function l(S,T){return S===T&&(S!==0||1/S===1/T)||S!==S&&T!==T}var s=typeof Object.is=="function"?Object.is:l,u=a.useState,o=a.useEffect,d=a.useLayoutEffect,g=a.useDebugValue;function m(S,T){var x=T(),w=u({inst:{value:x,getSnapshot:T}}),Q=w[0].inst,Y=w[1];return d(function(){Q.value=x,Q.getSnapshot=T,h(Q)&&Y({inst:Q})},[S,x,T]),o(function(){return h(Q)&&Y({inst:Q}),S(function(){h(Q)&&Y({inst:Q})})},[S]),g(x),x}function h(S){var T=S.getSnapshot;S=S.value;try{var x=T();return!s(S,x)}catch{return!0}}function y(S,T){return T()}var E=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y:m;return Du.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:E,Du}var qf;function im(){return qf||(qf=1,Nu.exports=lm()),Nu.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf;function sm(){if(Zf)return Cu;Zf=1;var a=lc(),l=im();function s(y,E){return y===E&&(y!==0||1/y===1/E)||y!==y&&E!==E}var u=typeof Object.is=="function"?Object.is:s,o=l.useSyncExternalStore,d=a.useRef,g=a.useEffect,m=a.useMemo,h=a.useDebugValue;return Cu.useSyncExternalStoreWithSelector=function(y,E,S,T,x){var w=d(null);if(w.current===null){var Q={hasValue:!1,value:null};w.current=Q}else Q=w.current;w=m(function(){function U(j){if(!R){if(R=!0,q=j,j=T(j),x!==void 0&&Q.hasValue){var ue=Q.value;if(x(ue,j))return P=ue}return P=j}if(ue=P,u(q,j))return ue;var O=T(j);return x!==void 0&&x(ue,O)?(q=j,ue):(q=j,P=O)}var R=!1,q,P,X=S===void 0?null:S;return[function(){return U(E())},X===null?void 0:function(){return U(X())}]},[E,S,T,x]);var Y=o(y,w[0],w[1]);return g(function(){Q.hasValue=!0,Q.value=Y},[Y]),h(Y),Y},Cu}var Yf;function rm(){return Yf||(Yf=1,Uu.exports=sm()),Uu.exports}var um=rm();const cm=Ud(um),Ff=a=>{let l;const s=new Set,u=(y,E)=>{const S=typeof y=="function"?y(l):y;if(!Object.is(S,l)){const T=l;l=E??(typeof S!="object"||S===null)?S:Object.assign({},l,S),s.forEach(x=>x(l,T))}},o=()=>l,m={setState:u,getState:o,getInitialState:()=>h,subscribe:y=>(s.add(y),()=>s.delete(y))},h=l=a(u,o,m);return m},om=(a=>a?Ff(a):Ff),{useSyncExternalStoreWithSelector:fm}=cm,dm=a=>a;function hm(a,l=dm,s){const u=fm(a.subscribe,a.getState,a.getInitialState,l,s);return ei.useDebugValue(u),u}const Xf=(a,l)=>{const s=om(a),u=(o,d=l)=>hm(s,o,d);return Object.assign(u,s),u},Cd=((a,l)=>a?Xf(a,l):Xf),vm=a=>typeof a=="object"&&typeof a.then=="function",pl=[];function Nd(a,l,s=(u,o)=>u===o){if(a===l)return!0;if(!a||!l)return!1;const u=a.length;if(l.length!==u)return!1;for(let o=0;o<u;o++)if(!s(a[o],l[o]))return!1;return!0}function Dd(a,l=null,s=!1,u={}){l===null&&(l=[a]);for(const d of pl)if(Nd(l,d.keys,d.equal)){if(s)return;if(Object.prototype.hasOwnProperty.call(d,"error"))throw d.error;if(Object.prototype.hasOwnProperty.call(d,"response"))return u.lifespan&&u.lifespan>0&&(d.timeout&&clearTimeout(d.timeout),d.timeout=setTimeout(d.remove,u.lifespan)),d.response;if(!s)throw d.promise}const o={keys:l,equal:u.equal,remove:()=>{const d=pl.indexOf(o);d!==-1&&pl.splice(d,1)},promise:(vm(a)?a:a(...l)).then(d=>{o.response=d,u.lifespan&&u.lifespan>0&&(o.timeout=setTimeout(o.remove,u.lifespan))}).catch(d=>o.error=d)};if(pl.push(o),!s)throw o.promise}const pm=(a,l,s)=>Dd(a,l,!1,s),mm=(a,l,s)=>void Dd(a,l,!0,s),gm=a=>{if(a===void 0||a.length===0)pl.splice(0,pl.length);else{const l=pl.find(s=>Nd(a,s.keys,s.equal));l&&l.remove()}};var Ou={exports:{}},Bu={exports:{}},Hu={exports:{}},wu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qf;function ym(){return Qf||(Qf=1,(function(a){function l(F,oe){var he=F.length;F.push(oe);e:for(;0<he;){var me=he-1>>>1,ve=F[me];if(0<o(ve,oe))F[me]=oe,F[he]=ve,he=me;else break e}}function s(F){return F.length===0?null:F[0]}function u(F){if(F.length===0)return null;var oe=F[0],he=F.pop();if(he!==oe){F[0]=he;e:for(var me=0,ve=F.length,_e=ve>>>1;me<_e;){var ge=2*(me+1)-1,Ne=F[ge],ze=ge+1,ut=F[ze];if(0>o(Ne,he))ze<ve&&0>o(ut,Ne)?(F[me]=ut,F[ze]=he,me=ze):(F[me]=Ne,F[ge]=he,me=ge);else if(ze<ve&&0>o(ut,he))F[me]=ut,F[ze]=he,me=ze;else break e}}return oe}function o(F,oe){var he=F.sortIndex-oe.sortIndex;return he!==0?he:F.id-oe.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var g=Date,m=g.now();a.unstable_now=function(){return g.now()-m}}var h=[],y=[],E=1,S=null,T=3,x=!1,w=!1,Q=!1,Y=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function q(F){for(var oe=s(y);oe!==null;){if(oe.callback===null)u(y);else if(oe.startTime<=F)u(y),oe.sortIndex=oe.expirationTime,l(h,oe);else break;oe=s(y)}}function P(F){if(Q=!1,q(F),!w)if(s(h)!==null)w=!0,le();else{var oe=s(y);oe!==null&&Se(P,oe.startTime-F)}}var X=!1,j=-1,ue=5,O=-1;function G(){return!(a.unstable_now()-O<ue)}function V(){if(X){var F=a.unstable_now();O=F;var oe=!0;try{e:{w=!1,Q&&(Q=!1,U(j),j=-1),x=!0;var he=T;try{t:{for(q(F),S=s(h);S!==null&&!(S.expirationTime>F&&G());){var me=S.callback;if(typeof me=="function"){S.callback=null,T=S.priorityLevel;var ve=me(S.expirationTime<=F);if(F=a.unstable_now(),typeof ve=="function"){S.callback=ve,q(F),oe=!0;break t}S===s(h)&&u(h),q(F)}else u(h);S=s(h)}if(S!==null)oe=!0;else{var _e=s(y);_e!==null&&Se(P,_e.startTime-F),oe=!1}}break e}finally{S=null,T=he,x=!1}oe=void 0}}finally{oe?se():X=!1}}}var se;if(typeof R=="function")se=function(){R(V)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,ee=pe.port2;pe.port1.onmessage=V,se=function(){ee.postMessage(null)}}else se=function(){Y(V,0)};function le(){X||(X=!0,se())}function Se(F,oe){j=Y(function(){F(a.unstable_now())},oe)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(F){F.callback=null},a.unstable_continueExecution=function(){w||x||(w=!0,le())},a.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<F?Math.floor(1e3/F):5},a.unstable_getCurrentPriorityLevel=function(){return T},a.unstable_getFirstCallbackNode=function(){return s(h)},a.unstable_next=function(F){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var he=T;T=oe;try{return F()}finally{T=he}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(F,oe){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var he=T;T=F;try{return oe()}finally{T=he}},a.unstable_scheduleCallback=function(F,oe,he){var me=a.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?me+he:me):he=me,F){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=he+ve,F={id:E++,callback:oe,priorityLevel:F,startTime:he,expirationTime:ve,sortIndex:-1},he>me?(F.sortIndex=he,l(y,F),s(h)===null&&F===s(y)&&(Q?(U(j),j=-1):Q=!0,Se(P,he-me))):(F.sortIndex=ve,l(h,F),w||x||(w=!0,le())),F},a.unstable_shouldYield=G,a.unstable_wrapCallback=function(F){var oe=T;return function(){var he=T;T=oe;try{return F.apply(this,arguments)}finally{T=he}}}})(wu)),wu}var Kf;function Od(){return Kf||(Kf=1,Hu.exports=ym()),Hu.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If;function Sm(){return If||(If=1,(function(a){a.exports=function(l){function s(e,t,n,i){return new Hh(e,t,n,i)}function u(){}function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return e===null||typeof e!="object"?null:(e=Jo&&e[Jo]||e["@@iterator"],typeof e=="function"?e:null)}function g(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===qh?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zl:return"Fragment";case Al:return"Portal";case Kr:return"Profiler";case Ko:return"StrictMode";case Pr:return"Suspense";case Jr:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zn:return(e.displayName||"Context")+".Provider";case Io:return(e._context.displayName||"Context")+".Consumer";case Ir:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wr:return t=e.displayName||null,t!==null?t:g(e.type)||"Memo";case Un:t=e._payload,e=e._init;try{return g(e(t))}catch{}}return null}function m(e){if(kr===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);kr=t&&t[1]||"",Wo=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kr+e+Wo}function h(e,t){if(!e||$r)return"";$r=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Ce){var ce=Ce}Reflect.construct(e,[],re)}else{try{re.call()}catch(Ce){ce=Ce}e.call(re.prototype)}}else{try{throw Error()}catch(Ce){ce=Ce}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Ce){if(Ce&&ce&&typeof Ce.stack=="string")return[Ce.stack,ce.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=i.DetermineComponentFrameRoot(),v=c[0],b=c[1];if(v&&b){var z=v.split(`
`),Z=b.split(`
`);for(r=i=0;i<z.length&&!z[i].includes("DetermineComponentFrameRoot");)i++;for(;r<Z.length&&!Z[r].includes("DetermineComponentFrameRoot");)r++;if(i===z.length||r===Z.length)for(i=z.length-1,r=Z.length-1;1<=i&&0<=r&&z[i]!==Z[r];)r--;for(;1<=i&&0<=r;i--,r--)if(z[i]!==Z[r]){if(i!==1||r!==1)do if(i--,r--,0>r||z[i]!==Z[r]){var ae=`
`+z[i].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=i&&0<=r);break}}}finally{$r=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?m(n):""}function y(e){switch(e.tag){case 26:case 27:case 5:return m(e.type);case 16:return m("Lazy");case 13:return m("Suspense");case 19:return m("SuspenseList");case 0:case 15:return e=h(e.type,!1),e;case 11:return e=h(e.type.render,!1),e;case 1:return e=h(e.type,!0),e;default:return""}}function E(e){try{var t="";do t+=y(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function S(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function T(e){if(S(e)!==e)throw Error(o(188))}function x(e){var t=e.alternate;if(!t){if(t=S(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var c=r.alternate;if(c===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===c.child){for(c=r.child;c;){if(c===n)return T(r),e;if(c===i)return T(r),t;c=c.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=c;else{for(var v=!1,b=r.child;b;){if(b===n){v=!0,n=r,i=c;break}if(b===i){v=!0,i=r,n=c;break}b=b.sibling}if(!v){for(b=c.child;b;){if(b===n){v=!0,n=c,i=r;break}if(b===i){v=!0,i=c,n=r;break}b=b.sibling}if(!v)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function w(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=w(e),t!==null)return t;e=e.sibling}return null}function Q(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(e.tag!==4&&(t=Q(e),t!==null))return t;e=e.sibling}return null}function Y(e){return{current:e}}function U(e){0>Cl||(e.current=iu[Cl],iu[Cl]=null,Cl--)}function R(e,t){Cl++,iu[Cl]=e.current,e.current=t}function q(e){return e>>>=0,e===0?32:31-(ap(e)/np|0)|0}function P(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function X(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,c=e.pingedLanes,v=e.warmLanes;e=e.finishedLanes!==0;var b=n&134217727;return b!==0?(n=b&~r,n!==0?i=P(n):(c&=b,c!==0?i=P(c):e||(v=b&~v,v!==0&&(i=P(v))))):(b=n&~r,b!==0?i=P(b):c!==0?i=P(c):e||(v=n&~v,v!==0&&(i=P(v)))),i===0?0:t!==0&&t!==i&&(t&r)===0&&(r=i&-i,v=t&-t,r>=v||r===32&&(v&4194176)!==0)?t:i}function j(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ue(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O(){var e=gs;return gs<<=1,(gs&4194176)===0&&(gs=128),e}function G(){var e=ys;return ys<<=1,(ys&62914560)===0&&(ys=4194304),e}function V(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function se(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function pe(e,t,n,i,r,c){var v=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var b=e.entanglements,z=e.expirationTimes,Z=e.hiddenUpdates;for(n=v&~n;0<n;){var ae=31-ra(n),re=1<<ae;b[ae]=0,z[ae]=-1;var ce=Z[ae];if(ce!==null)for(Z[ae]=null,ae=0;ae<ce.length;ae++){var Ce=ce[ae];Ce!==null&&(Ce.lane&=-536870913)}n&=~re}i!==0&&ee(e,i,0),c!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=c&~(v&~t))}function ee(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-ra(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194218}function le(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ra(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Se(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function F(e){if(ua&&typeof ua.onCommitFiberRoot=="function")try{ua.onCommitFiberRoot(xi,e,void 0,(e.current.flags&128)===128)}catch{}}function oe(e){if(typeof up=="function"&&cp(e),ua&&typeof ua.setStrictMode=="function")try{ua.setStrictMode(xi,e)}catch{}}function he(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}function me(e,t){if(typeof e=="object"&&e!==null){var n=Mf.get(e);return n!==void 0?n:(t={value:e,source:t,stack:E(t)},Mf.set(e,t),t)}return{value:e,source:t,stack:E(t)}}function ve(e,t){Dl[Ol++]=bs,Dl[Ol++]=Es,Es=e,bs=t}function _e(e,t,n){ga[ya++]=un,ga[ya++]=cn,ga[ya++]=ll,ll=e;var i=un;e=cn;var r=32-ra(i)-1;i&=~(1<<r),n+=1;var c=32-ra(t)+r;if(30<c){var v=r-r%5;c=(i&(1<<v)-1).toString(32),i>>=v,r-=v,un=1<<32-ra(t)+r|n<<r|i,cn=c+e}else un=1<<c|n<<r|i,cn=e}function ge(e){e.return!==null&&(ve(e,1),_e(e,1,0))}function Ne(e){for(;e===Es;)Es=Dl[--Ol],Dl[Ol]=null,bs=Dl[--Ol],Dl[Ol]=null;for(;e===ll;)ll=ga[--ya],ga[ya]=null,cn=ga[--ya],ga[ya]=null,un=ga[--ya],ga[ya]=null}function ze(e,t){R(Nn,t),R(Ri,e),R(Ut,null),e=Fh(t),U(Ut),R(Ut,e)}function ut(){U(Ut),U(Ri),U(Nn)}function Oe(e){e.memoizedState!==null&&R(Ts,e);var t=Ut.current,n=Xh(t,e.type);t!==n&&(R(Ri,e),R(Ut,n))}function Nt(e){Ri.current===e&&(U(Ut),U(Ri)),Ts.current===e&&(U(Ts),rn?nl._currentValue=Ul:nl._currentValue2=Ul)}function bt(e){var t=Error(o(418,""));throw Aa(me(t,e)),uu}function Sl(e,t){if(!pa)throw Error(o(175));Gv(e.stateNode,e.type,e.memoizedProps,t,e)||bt(e)}function El(e){for(Yt=e.return;Yt;)switch(Yt.tag){case 3:case 27:Xa=!0;return;case 5:case 13:Xa=!1;return;default:Yt=Yt.return}}function wa(e){if(!pa||e!==Yt)return!1;if(!qe)return El(e),qe=!0,!1;var t=!1;if(jt?e.tag!==3&&e.tag!==27&&(e.tag!==5||hf(e.type)&&!ms(e.type,e.memoizedProps))&&(t=!0):e.tag!==3&&(e.tag!==5||hf(e.type)&&!ms(e.type,e.memoizedProps))&&(t=!0),t&&Gt&&bt(e),El(e),e.tag===13){if(!pa)throw Error(o(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Gt=qv(e)}else Gt=Yt?ff(e.stateNode):null;return!0}function ja(){pa&&(Gt=Yt=null,qe=!1)}function Aa(e){Na===null?Na=[e]:Na.push(e)}function Ga(){for(var e=Bl,t=cu=Bl=0;t<e;){var n=Sa[t];Sa[t++]=null;var i=Sa[t];Sa[t++]=null;var r=Sa[t];Sa[t++]=null;var c=Sa[t];if(Sa[t++]=null,i!==null&&r!==null){var v=i.pending;v===null?r.next=r:(r.next=v.next,v.next=r),i.pending=r}c!==0&&Xn(n,r,c)}}function Wa(e,t,n,i){Sa[Bl++]=e,Sa[Bl++]=t,Sa[Bl++]=n,Sa[Bl++]=i,cu|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Fn(e,t,n,i){return Wa(e,t,n,i),ka(e)}function kt(e,t){return Wa(e,null,null,t),ka(e)}function Xn(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,c=e.return;c!==null;)c.childLanes|=n,i=c.alternate,i!==null&&(i.childLanes|=n),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(r=!0)),e=c,c=c.return;r&&t!==null&&e.tag===3&&(c=e.stateNode,r=31-ra(n),c=c.hiddenUpdates,e=c[r],e===null?c[r]=[t]:e.push(t),t.lane=n|536870912)}function ka(e){if(50<Hi)throw Hi=0,xu=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}function Xt(e){e!==Hl&&e.next===null&&(Hl===null?_s=Hl=e:Hl=Hl.next=e),Ms=!0,ou||(ou=!0,fi(bl))}function La(e,t){if(!fu&&Ms){fu=!0;do for(var n=!1,i=_s;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var c=0;else{var v=i.suspendedLanes,b=i.pingedLanes;c=(1<<31-ra(42|e)+1)-1,c&=r&~(v&~b),c=c&201326677?c&201326677|1:c?c|2:0}c!==0&&(n=!0,mn(i,c))}else c=Ge,c=X(i,i===nt?c:0),(c&3)===0||j(i,c)||(n=!0,mn(i,c));i=i.next}while(n);fu=!1}}function bl(){Ms=ou=!1;var e=0;wl!==0&&($h()&&(e=wl),wl=0);for(var t=Ca(),n=null,i=_s;i!==null;){var r=i.next,c=$a(i,t);c===0?(i.next=null,n===null?_s=r:n.next=r,r===null&&(Hl=n)):(n=i,(e!==0||(c&3)!==0)&&(Ms=!0)),i=r}La(e)}function $a(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var v=31-ra(c),b=1<<v,z=r[v];z===-1?((b&n)===0||(b&i)!==0)&&(r[v]=ue(b,t)):z<=t&&(e.expiredLanes|=b),c&=~b}if(t=nt,n=Ge,n=X(e,e===t?n:0),i=e.callbackNode,n===0||e===t&&lt===2||e.cancelPendingCommit!==null)return i!==null&&i!==null&&su(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||j(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&su(i),Se(n)){case 2:case 8:n=sp;break;case 32:n=ru;break;case 268435456:n=rp;break;default:n=ru}return i=Va.bind(null,e),n=Ss(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&su(i),e.callbackPriority=2,e.callbackNode=null,2}function Va(e,t){var n=e.callbackNode;if(el()&&e.callbackNode!==n)return null;var i=Ge;return i=X(e,e===nt?i:0),i===0?null:(Ro(e,i,t),$a(e,Ca()),e.callbackNode!=null&&e.callbackNode===n?Va.bind(null,e):null)}function mn(e,t){if(el())return null;Ro(e,t,!0)}function fi(e){iv?sv(function(){($e&6)!==0?Ss(_f,e):e()}):Ss(_f,e)}function gn(){return wl===0&&(wl=O()),wl}function yn(e,t){if(Ai===null){var n=Ai=[];du=0,jl=gn(),Gl={status:"pending",value:void 0,then:function(i){n.push(i)}}}return du++,t.then(en,en),t}function en(){if(--du===0&&Ai!==null){Gl!==null&&(Gl.status="fulfilled");var e=Ai;Ai=null,jl=0,Gl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function di(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}function Sn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Dt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function at(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,($e&2)!==0){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=ka(e),Xn(e,null,n),t}return Wa(e,i,t,n),ka(e)}function ha(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,le(e,n)}}function M(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var v={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};c===null?r=c=v:c=c.next=v,n=n.next}while(n!==null);c===null?r=c=t:c=c.next=t}else r=c=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:c,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function J(){if(hu){var e=Gl;if(e!==null)throw e}}function fe(e,t,n,i){hu=!1;var r=e.updateQueue;Dn=!1;var c=r.firstBaseUpdate,v=r.lastBaseUpdate,b=r.shared.pending;if(b!==null){r.shared.pending=null;var z=b,Z=z.next;z.next=null,v===null?c=Z:v.next=Z,v=z;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,b=ae.lastBaseUpdate,b!==v&&(b===null?ae.firstBaseUpdate=Z:b.next=Z,ae.lastBaseUpdate=z))}if(c!==null){var re=r.baseState;v=0,ae=Z=z=null,b=c;do{var ce=b.lane&-536870913,Ce=ce!==b.lane;if(Ce?(Ge&ce)===ce:(i&ce)===ce){ce!==0&&ce===jl&&(hu=!0),ae!==null&&(ae=ae.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ta=e,wi=b;ce=t;var hl=n;switch(wi.tag){case 1:if(Ta=wi.payload,typeof Ta=="function"){re=Ta.call(hl,re,ce);break e}re=Ta;break e;case 3:Ta.flags=Ta.flags&-65537|128;case 0:if(Ta=wi.payload,ce=typeof Ta=="function"?Ta.call(hl,re,ce):Ta,ce==null)break e;re=Qr({},re,ce);break e;case 2:Dn=!0}}ce=b.callback,ce!==null&&(e.flags|=64,Ce&&(e.flags|=8192),Ce=r.callbacks,Ce===null?r.callbacks=[ce]:Ce.push(ce))}else Ce={lane:ce,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ae===null?(Z=ae=Ce,z=re):ae=ae.next=Ce,v|=ce;if(b=b.next,b===null){if(b=r.shared.pending,b===null)break;Ce=b,b=Ce.next,Ce.next=null,r.lastBaseUpdate=Ce,r.shared.pending=null}}while(!0);ae===null&&(z=re),r.baseState=z,r.firstBaseUpdate=Z,r.lastBaseUpdate=ae,c===null&&(r.shared.lanes=0),Hn|=v,e.lanes=v,e.memoizedState=re}}function we(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function te(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)we(n[e],t)}function gt(e,t){if(ca(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!op.call(t,r)||!ca(e[r],t[r]))return!1}return!0}function $t(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Kn(){}function In(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Kn,Kn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===zi?Error(o(483)):e;default:if(typeof t.status=="string")t.then(Kn,Kn);else{if(e=nt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===zi?Error(o(483)):e}throw Ll=t,zi}}function Qt(){if(Ll===null)throw Error(o(459));var e=Ll;return Ll=null,e}function Ot(e){var t=Ui;return Ui+=1,Vl===null&&(Vl=[]),In(Vl,e,t)}function ea(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function va(e,t){throw t.$$typeof===Gh?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function qa(e){var t=e._init;return t(e._payload)}function tn(e){function t(C,A){if(e){var D=C.deletions;D===null?(C.deletions=[A],C.flags|=16):D.push(A)}}function n(C,A){if(!e)return null;for(;A!==null;)t(C,A),A=A.sibling;return null}function i(C){for(var A=new Map;C!==null;)C.key!==null?A.set(C.key,C):A.set(C.index,C),C=C.sibling;return A}function r(C,A){return C=An(C,A),C.index=0,C.sibling=null,C}function c(C,A,D){return C.index=D,e?(D=C.alternate,D!==null?(D=D.index,D<A?(C.flags|=33554434,A):D):(C.flags|=33554434,A)):(C.flags|=1048576,A)}function v(C){return e&&C.alternate===null&&(C.flags|=33554434),C}function b(C,A,D,k){return A===null||A.tag!==6?(A=Yr(D,C.mode,k),A.return=C,A):(A=r(A,D),A.return=C,A)}function z(C,A,D,k){var be=D.type;return be===zl?ae(C,A,D.props.children,k,D.key):A!==null&&(A.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Un&&qa(be)===A.type)?(A=r(A,D.props),ea(A,D),A.return=C,A):(A=hs(D.type,D.key,D.props,null,C.mode,k),ea(A,D),A.return=C,A)}function Z(C,A,D,k){return A===null||A.tag!==4||A.stateNode.containerInfo!==D.containerInfo||A.stateNode.implementation!==D.implementation?(A=Fr(D,C.mode,k),A.return=C,A):(A=r(A,D.children||[]),A.return=C,A)}function ae(C,A,D,k,be){return A===null||A.tag!==7?(A=tl(D,C.mode,k,be),A.return=C,A):(A=r(A,D),A.return=C,A)}function re(C,A,D){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Yr(""+A,C.mode,D),A.return=C,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case vs:return D=hs(A.type,A.key,A.props,null,C.mode,D),ea(D,A),D.return=C,D;case Al:return A=Fr(A,C.mode,D),A.return=C,A;case Un:var k=A._init;return A=k(A._payload),re(C,A,D)}if(ps(A)||d(A))return A=tl(A,C.mode,D,null),A.return=C,A;if(typeof A.then=="function")return re(C,Ot(A),D);if(A.$$typeof===zn)return re(C,rs(C,A),D);va(C,A)}return null}function ce(C,A,D,k){var be=A!==null?A.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return be!==null?null:b(C,A,""+D,k);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case vs:return D.key===be?z(C,A,D,k):null;case Al:return D.key===be?Z(C,A,D,k):null;case Un:return be=D._init,D=be(D._payload),ce(C,A,D,k)}if(ps(D)||d(D))return be!==null?null:ae(C,A,D,k,null);if(typeof D.then=="function")return ce(C,A,Ot(D),k);if(D.$$typeof===zn)return ce(C,A,rs(C,D),k);va(C,D)}return null}function Ce(C,A,D,k,be){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return C=C.get(D)||null,b(A,C,""+k,be);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case vs:return C=C.get(k.key===null?D:k.key)||null,z(A,C,k,be);case Al:return C=C.get(k.key===null?D:k.key)||null,Z(A,C,k,be);case Un:var it=k._init;return k=it(k._payload),Ce(C,A,D,k,be)}if(ps(k)||d(k))return C=C.get(D)||null,ae(A,C,k,be,null);if(typeof k.then=="function")return Ce(C,A,D,Ot(k),be);if(k.$$typeof===zn)return Ce(C,A,D,rs(A,k),be);va(A,k)}return null}function Ta(C,A,D,k){for(var be=null,it=null,Me=A,Ze=A=0,At=null;Me!==null&&Ze<D.length;Ze++){Me.index>Ze?(At=Me,Me=null):At=Me.sibling;var Ye=ce(C,Me,D[Ze],k);if(Ye===null){Me===null&&(Me=At);break}e&&Me&&Ye.alternate===null&&t(C,Me),A=c(Ye,A,Ze),it===null?be=Ye:it.sibling=Ye,it=Ye,Me=At}if(Ze===D.length)return n(C,Me),qe&&ve(C,Ze),be;if(Me===null){for(;Ze<D.length;Ze++)Me=re(C,D[Ze],k),Me!==null&&(A=c(Me,A,Ze),it===null?be=Me:it.sibling=Me,it=Me);return qe&&ve(C,Ze),be}for(Me=i(Me);Ze<D.length;Ze++)At=Ce(Me,C,Ze,D[Ze],k),At!==null&&(e&&At.alternate!==null&&Me.delete(At.key===null?Ze:At.key),A=c(At,A,Ze),it===null?be=At:it.sibling=At,it=At);return e&&Me.forEach(function(jn){return t(C,jn)}),qe&&ve(C,Ze),be}function wi(C,A,D,k){if(D==null)throw Error(o(151));for(var be=null,it=null,Me=A,Ze=A=0,At=null,Ye=D.next();Me!==null&&!Ye.done;Ze++,Ye=D.next()){Me.index>Ze?(At=Me,Me=null):At=Me.sibling;var jn=ce(C,Me,Ye.value,k);if(jn===null){Me===null&&(Me=At);break}e&&Me&&jn.alternate===null&&t(C,Me),A=c(jn,A,Ze),it===null?be=jn:it.sibling=jn,it=jn,Me=At}if(Ye.done)return n(C,Me),qe&&ve(C,Ze),be;if(Me===null){for(;!Ye.done;Ze++,Ye=D.next())Ye=re(C,Ye.value,k),Ye!==null&&(A=c(Ye,A,Ze),it===null?be=Ye:it.sibling=Ye,it=Ye);return qe&&ve(C,Ze),be}for(Me=i(Me);!Ye.done;Ze++,Ye=D.next())Ye=Ce(Me,C,Ze,Ye.value,k),Ye!==null&&(e&&Ye.alternate!==null&&Me.delete(Ye.key===null?Ze:Ye.key),A=c(Ye,A,Ze),it===null?be=Ye:it.sibling=Ye,it=Ye);return e&&Me.forEach(function(gp){return t(C,gp)}),qe&&ve(C,Ze),be}function hl(C,A,D,k){if(typeof D=="object"&&D!==null&&D.type===zl&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case vs:e:{for(var be=D.key;A!==null;){if(A.key===be){if(be=D.type,be===zl){if(A.tag===7){n(C,A.sibling),k=r(A,D.props.children),k.return=C,C=k;break e}}else if(A.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Un&&qa(be)===A.type){n(C,A.sibling),k=r(A,D.props),ea(k,D),k.return=C,C=k;break e}n(C,A);break}else t(C,A);A=A.sibling}D.type===zl?(k=tl(D.props.children,C.mode,k,D.key),k.return=C,C=k):(k=hs(D.type,D.key,D.props,null,C.mode,k),ea(k,D),k.return=C,C=k)}return v(C);case Al:e:{for(be=D.key;A!==null;){if(A.key===be)if(A.tag===4&&A.stateNode.containerInfo===D.containerInfo&&A.stateNode.implementation===D.implementation){n(C,A.sibling),k=r(A,D.children||[]),k.return=C,C=k;break e}else{n(C,A);break}else t(C,A);A=A.sibling}k=Fr(D,C.mode,k),k.return=C,C=k}return v(C);case Un:return be=D._init,D=be(D._payload),hl(C,A,D,k)}if(ps(D))return Ta(C,A,D,k);if(d(D)){if(be=d(D),typeof be!="function")throw Error(o(150));return D=be.call(D),wi(C,A,D,k)}if(typeof D.then=="function")return hl(C,A,Ot(D),k);if(D.$$typeof===zn)return hl(C,A,rs(C,D),k);va(C,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,A!==null&&A.tag===6?(n(C,A.sibling),k=r(A,D),k.return=C,C=k):(n(C,A),k=Yr(D,C.mode,k),k.return=C,C=k),v(C)):n(C,A)}return function(C,A,D,k){try{Ui=0;var be=hl(C,A,D,k);return Vl=null,be}catch(Me){if(Me===zi)throw Me;var it=s(29,Me,null,C.mode);return it.lanes=k,it.return=C,it}finally{}}}function ts(e,t){e=hn,R(Rs,e),R(ql,t),hn=e|t.baseLanes}function hi(){R(Rs,hn),R(ql,ql.current)}function En(){hn=Rs.current,U(ql),U(Rs)}function Za(e){var t=e.alternate;R(Tt,Tt.current&1),R(Ea,e),Qa===null&&(t===null||ql.current!==null||t.memoizedState!==null)&&(Qa=e)}function bn(e){if(e.tag===22){if(R(Tt,Tt.current),R(Ea,e),Qa===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Qa=e)}}else Kt()}function Kt(){R(Tt,Tt.current),R(Ea,Ea.current)}function Re(e){U(Ea),Qa===e&&(Qa=null),U(Tt)}function Pn(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||au(n)||nu(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ct(){throw Error(o(321))}function f(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ca(e[n],t[n]))return!1;return!0}function p(e,t,n,i,r,c){return On=c,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ae.H=e===null||e.memoizedState===null?rl:Bn,sl=!1,c=n(i,r),sl=!1,Zl&&(c=N(t,n,i,r)),_(e),c}function _(e){Ae.H=Ka;var t=ke!==null&&ke.next!==null;if(On=0,St=ke=De=null,As=!1,Ci=0,Yl=null,t)throw Error(o(300));e===null||xt||(e=e.dependencies,e!==null&&ss(e)&&(xt=!0))}function N(e,t,n,i){De=e;var r=0;do{if(Zl&&(Yl=null),Ci=0,Zl=!1,25<=r)throw Error(o(301));if(r+=1,St=ke=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}Ae.H=ul,c=t(n,i)}while(Zl);return c}function H(){var e=Ae.H,t=e.useState()[0];return t=typeof t.then=="function"?ie(t):t,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(De.flags|=1024),t}function B(){var e=zs!==0;return zs=0,e}function $(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function I(e){if(As){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}As=!1}On=0,St=ke=De=null,Zl=!1,Ci=zs=0,Yl=null}function W(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?De.memoizedState=St=e:St=St.next=e,St}function K(){if(ke===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=St===null?De.memoizedState:St.next;if(t!==null)St=t,ke=e;else{if(e===null)throw De.alternate===null?Error(o(467)):Error(o(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},St===null?De.memoizedState=St=e:St=St.next=e}return St}function ie(e){var t=Ci;return Ci+=1,Yl===null&&(Yl=[]),e=In(Yl,e,t),t=De,(St===null?t.memoizedState:St.next)===null&&(t=t.alternate,Ae.H=t===null||t.memoizedState===null?rl:Bn),e}function ne(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ie(e);if(e.$$typeof===zn)return Ht(e)}throw Error(o(438,String(e)))}function et(e){var t=null,n=De.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=De.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=pu(),De.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Vh;return t.index++,n}function de(e,t){return typeof t=="function"?t(e):t}function ye(e){var t=K();return xe(t,ke,e)}function xe(e,t,n){var i=e.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=n;var r=e.baseQueue,c=i.pending;if(c!==null){if(r!==null){var v=r.next;r.next=c.next,c.next=v}t.baseQueue=r=c,i.pending=null}if(c=e.baseState,r===null)e.memoizedState=c;else{t=r.next;var b=v=null,z=null,Z=t,ae=!1;do{var re=Z.lane&-536870913;if(re!==Z.lane?(Ge&re)===re:(On&re)===re){var ce=Z.revertLane;if(ce===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),re===jl&&(ae=!0);else if((On&ce)===ce){Z=Z.next,ce===jl&&(ae=!0);continue}else re={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(b=z=re,v=c):z=z.next=re,De.lanes|=ce,Hn|=ce;re=Z.action,sl&&n(c,re),c=Z.hasEagerState?Z.eagerState:n(c,re)}else ce={lane:re,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(b=z=ce,v=c):z=z.next=ce,De.lanes|=re,Hn|=re;Z=Z.next}while(Z!==null&&Z!==t);if(z===null?v=c:z.next=b,!ca(c,e.memoizedState)&&(xt=!0,ae&&(n=Gl,n!==null)))throw n;e.memoizedState=c,e.baseState=v,e.baseQueue=z,i.lastRenderedState=c}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Ue(e){var t=K(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,c=t.memoizedState;if(r!==null){n.pending=null;var v=r=r.next;do c=e(c,v.action),v=v.next;while(v!==r);ca(c,t.memoizedState)||(xt=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,i]}function Xe(e,t,n){var i=De,r=K(),c=qe;if(c){if(n===void 0)throw Error(o(407));n=n()}else n=t();var v=!ca((ke||r).memoizedState,n);if(v&&(r.memoizedState=n,xt=!0),r=r.queue,ir(Mt.bind(null,i,r,e),[e]),r.getSnapshot!==t||v||St!==null&&St.memoizedState.tag&1){if(i.flags|=2048,Tl(9,dt.bind(null,i,r,n,t),{destroy:void 0},null),nt===null)throw Error(o(349));c||(On&60)!==0||Ie(i,t,n)}return n}function Ie(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t=pu(),De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function dt(e,t,n,i){t.value=n,t.getSnapshot=i,Pe(t)&&ta(e)}function Mt(e,t,n){return n(function(){Pe(t)&&ta(e)})}function Pe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ca(e,n)}catch{return!0}}function ta(e){var t=kt(e,2);t!==null&&Zt(t,e,2)}function Je(e){var t=W();if(typeof e=="function"){var n=e;if(e=n(),sl){oe(!0);try{n()}finally{oe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:de,lastRenderedState:e},t}function mt(e,t,n,i){return e.baseState=n,xe(e,ke,typeof i=="function"?i:de)}function za(e,t,n,i,r){if(ls(e))throw Error(o(485));if(e=t.action,e!==null){var c={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){c.listeners.push(v)}};Ae.T!==null?n(!0):c.isTransition=!1,i(c),n=t.pending,n===null?(c.next=t.pending=c,Tn(t,c)):(c.next=n.next,t.pending=n.next=c)}}function Tn(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var c=Ae.T,v={};Ae.T=v;try{var b=n(r,i),z=Ae.S;z!==null&&z(v,b),Vt(e,t,b)}catch(Z){yt(e,t,Z)}finally{Ae.T=c}}else try{c=n(r,i),Vt(e,t,c)}catch(Z){yt(e,t,Z)}}function Vt(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Qe(e,t,i)},function(i){return yt(e,t,i)}):Qe(e,t,n)}function Qe(e,t,n){t.status="fulfilled",t.value=n,tt(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Tn(e,n)))}function yt(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,tt(t),t=t.next;while(t!==i)}e.action=null}function tt(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ve(e,t){return t}function qt(e,t){if(qe){var n=nt.formState;if(n!==null){e:{var i=De;if(qe){if(Gt){var r=Nv(Gt,Xa);if(r){Gt=ff(r),i=Dv(r);break e}}bt(i)}i=!1}i&&(t=n[0])}}n=W(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ve,lastRenderedState:t},n.queue=i,n=Bc.bind(null,De,i),i.dispatch=n,i=Je(!1);var c=cr.bind(null,De,!1,i.queue);return i=W(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=za.bind(null,De,r,c,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Ya(e){var t=K();return Bt(t,ke,e)}function Bt(e,t,n){t=xe(e,t,Ve)[0],e=ye(de)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?ie(t):t;var i=K(),r=i.queue,c=r.dispatch;return n!==i.memoizedState&&(De.flags|=2048,Tl(9,Fa.bind(null,r,n),{destroy:void 0},null)),[t,c,e]}function Fa(e,t){e.action=t}function Ec(e){var t=K(),n=ke;if(n!==null)return Bt(t,n,e);K(),t=t.memoizedState,n=K();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Tl(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},t=De.updateQueue,t===null&&(t=pu(),De.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function bc(){return K().memoizedState}function as(e,t,n,i){var r=W();De.flags|=e,r.memoizedState=Tl(1|t,n,{destroy:void 0},i===void 0?null:i)}function ns(e,t,n,i){var r=K();i=i===void 0?null:i;var c=r.memoizedState.inst;ke!==null&&i!==null&&f(i,ke.memoizedState.deps)?r.memoizedState=Tl(t,n,c,i):(De.flags|=e,r.memoizedState=Tl(1|t,n,c,i))}function Tc(e,t){as(8390656,8,e,t)}function ir(e,t){ns(2048,8,e,t)}function _c(e,t){return ns(4,2,e,t)}function Mc(e,t){return ns(4,4,e,t)}function xc(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rc(e,t,n){n=n!=null?n.concat([e]):null,ns(4,4,xc.bind(null,t,e),n)}function sr(){}function Ac(e,t){var n=K();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&f(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function zc(e,t){var n=K();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&f(t,i[1]))return i[0];if(i=e(),sl){oe(!0);try{e()}finally{oe(!1)}}return n.memoizedState=[i,t],i}function rr(e,t,n){return n===void 0||(On&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=xo(),De.lanes|=e,Hn|=e,n)}function Uc(e,t,n,i){return ca(n,t)?n:ql.current!==null?(e=rr(e,n,i),ca(e,t)||(xt=!0),e):(On&42)===0?(xt=!0,e.memoizedState=n):(e=xo(),De.lanes|=e,Hn|=e,t)}function Cc(e,t,n,i,r){var c=al();Pt(c!==0&&8>c?c:8);var v=Ae.T,b={};Ae.T=b,cr(e,!1,t,n);try{var z=r(),Z=Ae.S;if(Z!==null&&Z(b,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ae=di(z,i);vi(e,t,ae,ia(e))}else vi(e,t,i,ia(e))}catch(re){vi(e,t,{then:function(){},status:"rejected",reason:re},ia())}finally{Pt(c),Ae.T=v}}function Nc(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ul,baseState:Ul,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:de,lastRenderedState:Ul},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:de,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ur(){return Ht(nl)}function Dc(){return K().memoizedState}function Oc(){return K().memoizedState}function yh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ia();e=Dt(n);var i=at(t,e,n);i!==null&&(Zt(i,t,n),ha(i,t,n)),t={cache:Tr()},e.payload=t;return}t=t.return}}function Sh(e,t,n){var i=ia();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ls(e)?Hc(t,n):(n=Fn(e,t,n,i),n!==null&&(Zt(n,e,i),wc(n,t,i)))}function Bc(e,t,n){var i=ia();vi(e,t,n,i)}function vi(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ls(e))Hc(t,r);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var v=t.lastRenderedState,b=c(v,n);if(r.hasEagerState=!0,r.eagerState=b,ca(b,v))return Wa(e,t,r,0),nt===null&&Ga(),!1}catch{}finally{}if(n=Fn(e,t,r,i),n!==null)return Zt(n,e,i),wc(n,t,i),!0}return!1}function cr(e,t,n,i){if(i={lane:2,revertLane:gn(),action:i,hasEagerState:!1,eagerState:null,next:null},ls(e)){if(t)throw Error(o(479))}else t=Fn(e,n,i,2),t!==null&&Zt(t,e,2)}function ls(e){var t=e.alternate;return e===De||t!==null&&t===De}function Hc(e,t){Zl=As=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wc(e,t,n){if((n&4194176)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,le(e,n)}}function or(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Qr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}function jc(e,t,n,i,r,c,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,c,v):t.prototype&&t.prototype.isPureReactComponent?!gt(n,i)||!gt(r,c):!0}function Gc(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&mu.enqueueReplaceState(t,t.state,null)}function Jn(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Qr({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}function is(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Lc(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function fr(e,t,n){return n=Dt(n),n.tag=3,n.payload={element:null},n.callback=function(){is(e,t)},n}function Vc(e){return e=Dt(e),e.tag=3,e}function qc(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var c=i.value;e.payload=function(){return r(c)},e.callback=function(){Lc(t,n,i)}}var v=n.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Lc(t,n,i),typeof r!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var b=i.stack;this.componentDidCatch(i.value,{componentStack:b!==null?b:""})})}function Eh(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&mi(t,n,r,!0),n=Ea.current,n!==null){switch(n.tag){case 13:return Qa===null?Lr():n.alternate===null&&pt===0&&(pt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===xs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),qr(e,i,r)),!1;case 22:return n.flags|=65536,i===xs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),qr(e,i,r)),!1}throw Error(o(435,n.tag))}return qr(e,i,r),Lr(),!1}if(qe)return t=Ea.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==uu&&(e=Error(o(422),{cause:i}),Aa(me(e,n)))):(i!==uu&&(t=Error(o(423),{cause:i}),Aa(me(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=me(i,n),r=fr(e.stateNode,i,r),M(e,r),pt!==4&&(pt=2)),!1;var c=Error(o(520),{cause:i});if(c=me(c,n),Di===null?Di=[c]:Di.push(c),pt!==4&&(pt=2),t===null)return!0;i=me(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=fr(n.stateNode,i,e),M(n,e),!1;case 1:if(t=n.type,c=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(wn===null||!wn.has(c))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Vc(r),qc(r,e,n,i),M(n,r),!1}n=n.return}while(n!==null);return!1}function zt(e,t,n,i){t.child=e===null?xf(t,null,n,i):il(t,e.child,n,i)}function Zc(e,t,n,i,r){n=n.render;var c=t.ref;if("ref"in i){var v={};for(var b in i)b!=="ref"&&(v[b]=i[b])}else v=i;return Wn(t),i=p(e,t,n,v,c,r),b=B(),e!==null&&!xt?($(e,t,r),an(e,t,r)):(qe&&b&&ge(t),t.flags|=1,zt(e,t,i,r),t.child)}function Yc(e,t,n,i,r){if(e===null){var c=n.type;return typeof c=="function"&&!Zr(c)&&c.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=c,Fc(e,t,c,i,r)):(e=hs(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Sr(e,r)){var v=c.memoizedProps;if(n=n.compare,n=n!==null?n:gt,n(v,i)&&e.ref===t.ref)return an(e,t,r)}return t.flags|=1,e=An(c,i),e.ref=t.ref,e.return=t,t.child=e}function Fc(e,t,n,i,r){if(e!==null){var c=e.memoizedProps;if(gt(c,i)&&e.ref===t.ref)if(xt=!1,t.pendingProps=i=c,Sr(e,r))(e.flags&131072)!==0&&(xt=!0);else return t.lanes=e.lanes,an(e,t,r)}return dr(e,t,n,i,r)}function Xc(e,t,n){var i=t.pendingProps,r=i.children,c=(t.stateNode._pendingVisibility&2)!==0,v=e!==null?e.memoizedState:null;if(pi(e,t),i.mode==="hidden"||c){if((t.flags&128)!==0){if(i=v!==null?v.baseLanes|n:n,e!==null){for(r=t.child=e.child,c=0;r!==null;)c=c|r.lanes|r.childLanes,r=r.sibling;t.childLanes=c&~i}else t.childLanes=0,t.child=null;return Qc(e,t,i,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&us(t,v!==null?v.cachePool:null),v!==null?ts(t,v):hi(),bn(t);else return t.lanes=t.childLanes=536870912,Qc(e,t,v!==null?v.baseLanes|n:n,n)}else v!==null?(us(t,v.cachePool),ts(t,v),Kt(),t.memoizedState=null):(e!==null&&us(t,null),hi(),Kt());return zt(e,t,r,n),t.child}function Qc(e,t,n,i){var r=_r();return r=r===null?null:{parent:rn?ht._currentValue:ht._currentValue2,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&us(t,null),hi(),bn(t),e!==null&&mi(e,t,i,!0),null}function pi(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function dr(e,t,n,i,r){return Wn(t),n=p(e,t,n,i,void 0,r),i=B(),e!==null&&!xt?($(e,t,r),an(e,t,r)):(qe&&i&&ge(t),t.flags|=1,zt(e,t,n,r),t.child)}function Kc(e,t,n,i,r,c){return Wn(t),t.updateQueue=null,n=N(t,i,n,r),_(e),i=B(),e!==null&&!xt?($(e,t,c),an(e,t,c)):(qe&&i&&ge(t),t.flags|=1,zt(e,t,n,c),t.child)}function Ic(e,t,n,i,r){if(Wn(t),t.stateNode===null){var c=Nl,v=n.contextType;typeof v=="object"&&v!==null&&(c=Ht(v)),c=new n(i,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=mu,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=i,c.state=t.memoizedState,c.refs={},Sn(t),v=n.contextType,c.context=typeof v=="object"&&v!==null?Ht(v):Nl,c.state=t.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(or(t,n,v,i),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(v=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),v!==c.state&&mu.enqueueReplaceState(c,c.state,null),fe(t,i,c,r),J(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){c=t.stateNode;var b=t.memoizedProps,z=Jn(n,b);c.props=z;var Z=c.context,ae=n.contextType;v=Nl,typeof ae=="object"&&ae!==null&&(v=Ht(ae));var re=n.getDerivedStateFromProps;ae=typeof re=="function"||typeof c.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,ae||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(b||Z!==v)&&Gc(t,c,i,v),Dn=!1;var ce=t.memoizedState;c.state=ce,fe(t,i,c,r),J(),Z=t.memoizedState,b||ce!==Z||Dn?(typeof re=="function"&&(or(t,n,re,i),Z=t.memoizedState),(z=Dn||jc(t,n,z,i,ce,Z,v))?(ae||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=Z),c.props=i,c.state=Z,c.context=v,i=z):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{c=t.stateNode,Qn(e,t),v=t.memoizedProps,ae=Jn(n,v),c.props=ae,re=t.pendingProps,ce=c.context,Z=n.contextType,z=Nl,typeof Z=="object"&&Z!==null&&(z=Ht(Z)),b=n.getDerivedStateFromProps,(Z=typeof b=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(v!==re||ce!==z)&&Gc(t,c,i,z),Dn=!1,ce=t.memoizedState,c.state=ce,fe(t,i,c,r),J();var Ce=t.memoizedState;v!==re||ce!==Ce||Dn||e!==null&&e.dependencies!==null&&ss(e.dependencies)?(typeof b=="function"&&(or(t,n,b,i),Ce=t.memoizedState),(ae=Dn||jc(t,n,ae,i,ce,Ce,z)||e!==null&&e.dependencies!==null&&ss(e.dependencies))?(Z||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(i,Ce,z),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(i,Ce,z)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||v===e.memoizedProps&&ce===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ce===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=Ce),c.props=i,c.state=Ce,c.context=z,i=ae):(typeof c.componentDidUpdate!="function"||v===e.memoizedProps&&ce===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ce===e.memoizedState||(t.flags|=1024),i=!1)}return c=i,pi(e,t),i=(t.flags&128)!==0,c||i?(c=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&i?(t.child=il(t,e.child,null,r),t.child=il(t,null,n,r)):zt(e,t,n,r),t.memoizedState=c.state,e=t.child):e=an(e,t,r),e}function Pc(e,t,n,i){return ja(),t.flags|=256,zt(e,t,n,i),t.child}function hr(e){return{baseLanes:e,cachePool:to()}}function vr(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ba),e}function Jc(e,t,n){var i=t.pendingProps,r=!1,c=(t.flags&128)!==0,v;if((v=c)||(v=e!==null&&e.memoizedState===null?!1:(Tt.current&2)!==0),v&&(r=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(qe){if(r?Za(t):Kt(),qe){var b=Gt,z;(z=b)&&(b=jv(b,Xa),b!==null?(t.memoizedState={dehydrated:b,treeContext:ll!==null?{id:un,overflow:cn}:null,retryLane:536870912},z=s(18,null,null,0),z.stateNode=b,z.return=t,t.child=z,Yt=t,Gt=null,z=!0):z=!1),z||bt(t)}if(b=t.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return nu(b)?t.lanes=16:t.lanes=536870912,null;Re(t)}return b=i.children,i=i.fallback,r?(Kt(),r=t.mode,b=mr({mode:"hidden",children:b},r),i=tl(i,r,n,null),b.return=t,i.return=t,b.sibling=i,t.child=b,r=t.child,r.memoizedState=hr(n),r.childLanes=vr(e,v,n),t.memoizedState=gu,i):(Za(t),pr(t,b))}if(z=e.memoizedState,z!==null&&(b=z.dehydrated,b!==null)){if(c)t.flags&256?(Za(t),t.flags&=-257,t=gr(e,t,n)):t.memoizedState!==null?(Kt(),t.child=e.child,t.flags|=128,t=null):(Kt(),r=i.fallback,b=t.mode,i=mr({mode:"visible",children:i.children},b),r=tl(r,b,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,il(t,e.child,null,n),i=t.child,i.memoizedState=hr(n),i.childLanes=vr(e,v,n),t.memoizedState=gu,t=r);else if(Za(t),nu(b))v=Uv(b).digest,i=Error(o(419)),i.stack="",i.digest=v,Aa({value:i,source:null,stack:null}),t=gr(e,t,n);else if(xt||mi(e,t,n,!1),v=(n&e.childLanes)!==0,xt||v){if(v=nt,v!==null){if(i=n&-n,(i&42)!==0)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=(i&(v.suspendedLanes|n))!==0?0:i,i!==0&&i!==z.retryLane)throw z.retryLane=i,kt(e,i),Zt(v,e,i),Af}au(b)||Lr(),t=gr(e,t,n)}else au(b)?(t.flags|=128,t.child=e.child,t=Dh.bind(null,e),Cv(b,t),t=null):(e=z.treeContext,pa&&(Gt=Bv(b),Yt=t,qe=!0,Na=null,Xa=!1,e!==null&&(ga[ya++]=un,ga[ya++]=cn,ga[ya++]=ll,un=e.id,cn=e.overflow,ll=t)),t=pr(t,i.children),t.flags|=4096);return t}return r?(Kt(),r=i.fallback,b=t.mode,z=e.child,c=z.sibling,i=An(z,{mode:"hidden",children:i.children}),i.subtreeFlags=z.subtreeFlags&31457280,c!==null?r=An(c,r):(r=tl(r,b,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,b=e.child.memoizedState,b===null?b=hr(n):(z=b.cachePool,z!==null?(c=rn?ht._currentValue:ht._currentValue2,z=z.parent!==c?{parent:c,pool:c}:z):z=to(),b={baseLanes:b.baseLanes|n,cachePool:z}),r.memoizedState=b,r.childLanes=vr(e,v,n),t.memoizedState=gu,i):(Za(t),n=e.child,e=n.sibling,n=An(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=n,t.memoizedState=null,n)}function pr(e,t){return t=mr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function mr(e,t){return qo(e,t,0,null)}function gr(e,t,n){return il(t,e.child,null,n),e=pr(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wc(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Er(e.return,t,n)}function yr(e,t,n,i,r){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=n,c.tailMode=r)}function kc(e,t,n){var i=t.pendingProps,r=i.revealOrder,c=i.tail;if(zt(e,t,i.children,n),i=Tt.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wc(e,n,t);else if(e.tag===19)Wc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(R(Tt,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Pn(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),yr(t,!1,r,n,c);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Pn(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}yr(t,!0,n,null,c);break;case"together":yr(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function an(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Hn|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(mi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=An(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=An(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sr(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ss(e)))}function bh(e,t,n){switch(t.tag){case 3:ze(t,t.stateNode.containerInfo),_n(t,ht,e.memoizedState.cache),ja();break;case 27:case 5:Oe(t);break;case 4:ze(t,t.stateNode.containerInfo);break;case 10:_n(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Za(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Jc(e,t,n):(Za(t),e=an(e,t,n),e!==null?e.sibling:null);Za(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(mi(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return kc(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),R(Tt,Tt.current),i)break;return null;case 22:case 23:return t.lanes=0,Xc(e,t,n);case 24:_n(t,ht,e.memoizedState.cache)}return an(e,t,n)}function $c(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)xt=!0;else{if(!Sr(e,n)&&(t.flags&128)===0)return xt=!1,bh(e,t,n);xt=(e.flags&131072)!==0}else xt=!1,qe&&(t.flags&1048576)!==0&&_e(t,bs,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Zr(i)?(e=Jn(i,e),t.tag=1,t=Ic(null,t,i,e,n)):(t.tag=0,t=dr(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===Ir){t.tag=11,t=Zc(null,t,i,e,n);break e}else if(r===Wr){t.tag=14,t=Yc(null,t,i,e,n);break e}}throw t=g(i)||i,Error(o(306,t,""))}}return t;case 0:return dr(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Jn(i,t.pendingProps),Ic(e,t,i,r,n);case 3:e:{if(ze(t,t.stateNode.containerInfo),e===null)throw Error(o(387));var c=t.pendingProps;r=t.memoizedState,i=r.element,Qn(e,t),fe(t,c,null,n);var v=t.memoizedState;if(c=v.cache,_n(t,ht,c),c!==r.cache&&br(t,[ht],n,!0),J(),c=v.element,pa&&r.isDehydrated)if(r={element:c,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Pc(e,t,c,n);break e}else if(c!==i){i=me(Error(o(424)),t),Aa(i),t=Pc(e,t,c,n);break e}else for(pa&&(Gt=Ov(t.stateNode.containerInfo),Yt=t,qe=!0,Na=null,Xa=!0),n=xf(t,null,c,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ja(),c===i){t=an(e,t,n);break e}zt(e,t,c,n)}t=t.child}return t;case 26:if(ma)return pi(e,t),e===null?(n=pf(t.type,null,t.pendingProps,null))?t.memoizedState=n:qe||(t.stateNode=Pv(t.type,t.pendingProps,Nn.current,t)):t.memoizedState=pf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(jt)return Oe(t),e===null&&jt&&qe&&(i=t.stateNode=bf(t.type,t.pendingProps,Nn.current,Ut.current,!1),Yt=t,Xa=!0,Gt=df(i)),i=t.pendingProps.children,e!==null||qe?zt(e,t,i,n):t.child=il(t,null,i,n),pi(e,t),t.child;case 5:return e===null&&qe&&(Qv(t.type,t.pendingProps,Ut.current),(r=i=Gt)&&(i=Hv(i,t.type,t.pendingProps,Xa),i!==null?(t.stateNode=i,Yt=t,Gt=df(i),Xa=!1,r=!0):r=!1),r||bt(t)),Oe(t),r=t.type,c=t.pendingProps,v=e!==null?e.memoizedProps:null,i=c.children,ms(r,c)?i=null:v!==null&&ms(r,v)&&(t.flags|=32),t.memoizedState!==null&&(r=p(e,t,H,null,null,n),rn?nl._currentValue=r:nl._currentValue2=r),pi(e,t),zt(e,t,i,n),t.child;case 6:return e===null&&qe&&(Kv(t.pendingProps,Ut.current),(e=n=Gt)&&(n=wv(n,t.pendingProps,Xa),n!==null?(t.stateNode=n,Yt=t,Gt=null,e=!0):e=!1),e||bt(t)),null;case 13:return Jc(e,t,n);case 4:return ze(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=il(t,null,i,n):zt(e,t,i,n),t.child;case 11:return Zc(e,t,t.type,t.pendingProps,n);case 7:return zt(e,t,t.pendingProps,n),t.child;case 8:return zt(e,t,t.pendingProps.children,n),t.child;case 12:return zt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,_n(t,t.type,i.value),zt(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Wn(t),r=Ht(r),i=i(r),t.flags|=1,zt(e,t,i,n),t.child;case 14:return Yc(e,t,t.type,t.pendingProps,n);case 15:return Fc(e,t,t.type,t.pendingProps,n);case 19:return kc(e,t,n);case 22:return Xc(e,t,n);case 24:return Wn(t),i=Ht(ht),e===null?(r=_r(),r===null&&(r=nt,c=Tr(),r.pooledCache=c,c.refCount++,c!==null&&(r.pooledCacheLanes|=n),r=c),t.memoizedState={parent:i,cache:r},Sn(t),_n(t,ht,r)):((e.lanes&n)!==0&&(Qn(e,t),fe(t,null,null,n),J()),r=e.memoizedState,c=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),_n(t,ht,i)):(i=c.cache,_n(t,ht,i),i!==r.cache&&br(t,[ht],n,!0))),zt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function _n(e,t,n){rn?(R(Us,t._currentValue),t._currentValue=n):(R(Us,t._currentValue2),t._currentValue2=n)}function nn(e){var t=Us.current;rn?e._currentValue=t:e._currentValue2=t,U(Us)}function Er(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function br(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var c=r.dependencies;if(c!==null){var v=r.child;c=c.firstContext;e:for(;c!==null;){var b=c;c=r;for(var z=0;z<t.length;z++)if(b.context===t[z]){c.lanes|=n,b=c.alternate,b!==null&&(b.lanes|=n),Er(c.return,n,e),i||(v=null);break e}c=b.next}}else if(r.tag===18){if(v=r.return,v===null)throw Error(o(341));v.lanes|=n,c=v.alternate,c!==null&&(c.lanes|=n),Er(v,n,e),v=null}else v=r.child;if(v!==null)v.return=r;else for(v=r;v!==null;){if(v===e){v=null;break}if(r=v.sibling,r!==null){r.return=v.return,v=r;break}v=v.return}r=v}}function mi(e,t,n,i){e=null;for(var r=t,c=!1;r!==null;){if(!c){if((r.flags&524288)!==0)c=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var v=r.alternate;if(v===null)throw Error(o(387));if(v=v.memoizedProps,v!==null){var b=r.type;ca(r.pendingProps.value,v.value)||(e!==null?e.push(b):e=[b])}}else if(r===Ts.current){if(v=r.alternate,v===null)throw Error(o(387));v.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(nl):e=[nl])}r=r.return}e!==null&&br(t,e,n,i),t.flags|=262144}function ss(e){for(e=e.firstContext;e!==null;){var t=e.context;if(!ca(rn?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Wn(e){cl=e,on=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ht(e){return eo(cl,e)}function rs(e,t){return cl===null&&Wn(e),eo(e,t)}function eo(e,t){var n=rn?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},on===null){if(e===null)throw Error(o(308));on=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else on=on.next=t;return n}function Tr(){return{controller:new dp,data:new Map,refCount:0}}function gi(e){e.refCount--,e.refCount===0&&hp(vp,function(){e.controller.abort()})}function _r(){var e=ol.current;return e!==null?e:nt.pooledCache}function us(e,t){t===null?R(ol,ol.current):R(ol,t.pool)}function to(){var e=_r();return e===null?null:{parent:rn?ht._currentValue:ht._currentValue2,pool:e}}function aa(e){e.flags|=4}function ao(e,t){if(e!==null&&e.child===t.child)return!1;if((t.flags&16)!==0)return!0;for(e=t.child;e!==null;){if((e.flags&13878)!==0||(e.subtreeFlags&13878)!==0)return!0;e=e.sibling}return!1}function Mr(e,t,n,i){if(wt)for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)eu(e,n.stateNode);else if(!(n.tag===4||jt&&n.tag===27)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(Cn)for(var r=t.child;r!==null;){if(r.tag===5){var c=r.stateNode;n&&i&&(c=cf(c,r.type,r.memoizedProps)),eu(e,c)}else if(r.tag===6)c=r.stateNode,n&&i&&(c=of(c,r.memoizedProps)),eu(e,c);else if(r.tag!==4){if(r.tag===22&&r.memoizedState!==null)c=r.child,c!==null&&(c.return=r),Mr(e,r,!0,!0);else if(r.child!==null){r.child.return=r,r=r.child;continue}}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function no(e,t,n,i){if(Cn)for(var r=t.child;r!==null;){if(r.tag===5){var c=r.stateNode;n&&i&&(c=cf(c,r.type,r.memoizedProps)),rf(e,c)}else if(r.tag===6)c=r.stateNode,n&&i&&(c=of(c,r.memoizedProps)),rf(e,c);else if(r.tag!==4){if(r.tag===22&&r.memoizedState!==null)c=r.child,c!==null&&(c.return=r),no(e,r,!(r.memoizedProps!==null&&r.memoizedProps.mode==="manual"),!0);else if(r.child!==null){r.child.return=r,r=r.child;continue}}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function lo(e,t){if(Cn&&ao(e,t)){e=t.stateNode;var n=e.containerInfo,i=sf();no(i,t,!1,!1),e.pendingChildren=i,aa(t),zv(n,i)}}function xr(e,t,n,i){if(wt)e.memoizedProps!==i&&aa(t);else if(Cn){var r=e.stateNode,c=e.memoizedProps;if((e=ao(e,t))||c!==i){var v=Ut.current;c=Av(r,n,c,i,!e,null),c===r?t.stateNode=r:($o(c,n,i,v)&&aa(t),t.stateNode=c,e?Mr(c,t,!1,!1):aa(t))}else t.stateNode=r}}function Rr(e,t,n){if(tv(t,n)){if(e.flags|=16777216,!af(t,n))if(Co())e.flags|=8192;else throw Ll=xs,vu}else e.flags&=-16777217}function io(e,t){if(Wv(t)){if(e.flags|=16777216,!Ef(t))if(Co())e.flags|=8192;else throw Ll=xs,vu}else e.flags&=-16777217}function cs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?G():536870912,e.lanes|=t,Ql|=t)}function yi(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&31457280,i|=r.flags&31457280,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Th(e,t,n){var i=t.pendingProps;switch(Ne(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return ot(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),nn(ht),ut(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(wa(t)?aa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Na!==null&&(jr(Na),Na=null))),lo(e,t),ot(t),null;case 26:if(ma){n=t.type;var r=t.memoizedState;return e===null?(aa(t),r!==null?(ot(t),io(t,r)):(ot(t),Rr(t,n,i))):r?r!==e.memoizedState?(aa(t),ot(t),io(t,r)):(ot(t),t.flags&=-16777217):(wt?e.memoizedProps!==i&&aa(t):xr(e,t,n,i),ot(t),Rr(t,n,i)),null}case 27:if(jt){if(Nt(t),n=Nn.current,r=t.type,e!==null&&t.stateNode!=null)wt?e.memoizedProps!==i&&aa(t):xr(e,t,r,i);else{if(!i){if(t.stateNode===null)throw Error(o(166));return ot(t),null}e=Ut.current,wa(t)?Sl(t,e):(e=bf(r,i,n,e,!0),t.stateNode=e,aa(t))}return ot(t),null}case 5:if(Nt(t),n=t.type,e!==null&&t.stateNode!=null)xr(e,t,n,i);else{if(!i){if(t.stateNode===null)throw Error(o(166));return ot(t),null}e=Ut.current,wa(t)?Sl(t,e):(r=Ih(n,i,Nn.current,e,t),Mr(r,t,!1,!1),t.stateNode=r,$o(r,n,i,e)&&aa(t))}return ot(t),Rr(t,t.type,t.pendingProps),null;case 6:if(e&&t.stateNode!=null)n=e.memoizedProps,wt?n!==i&&aa(t):Cn&&(n!==i?(t.stateNode=ef(i,Nn.current,Ut.current,t),aa(t)):t.stateNode=e.stateNode);else{if(typeof i!="string"&&t.stateNode===null)throw Error(o(166));if(e=Nn.current,n=Ut.current,wa(t)){if(!pa)throw Error(o(176));if(e=t.stateNode,n=t.memoizedProps,i=null,r=Yt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}Lv(e,n,t,i)||bt(t)}else t.stateNode=ef(i,e,n,t)}return ot(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=wa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(o(318));if(!pa)throw Error(o(344));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(o(317));Vv(r,t)}else ja(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ot(t),r=!1}else Na!==null&&(jr(Na),Na=null),r=!0;if(!r)return t.flags&256?(Re(t),t):(Re(t),null)}if(Re(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var c=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),cs(t,t.updateQueue),ot(t),null;case 4:return ut(),lo(e,t),e===null&&Wh(t.stateNode.containerInfo),ot(t),null;case 10:return nn(t.type),ot(t),null;case 19:if(U(Tt),r=t.memoizedState,r===null)return ot(t),null;if(i=(t.flags&128)!==0,c=r.rendering,c===null)if(i)yi(r,!1);else{if(pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=Pn(e),c!==null){for(t.flags|=128,yi(r,!1),e=c.updateQueue,t.updateQueue=e,cs(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Vo(n,e),n=n.sibling;return R(Tt,Tt.current&1|2),t.child}e=e.sibling}r.tail!==null&&Ca()>Oi&&(t.flags|=128,i=!0,yi(r,!1),t.lanes=4194304)}else{if(!i)if(e=Pn(c),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,cs(t,e),yi(r,!0),r.tail===null&&r.tailMode==="hidden"&&!c.alternate&&!qe)return ot(t),null}else 2*Ca()-r.renderingStartTime>Oi&&n!==536870912&&(t.flags|=128,i=!0,yi(r,!1),t.lanes=4194304);r.isBackwards?(c.sibling=t.child,t.child=c):(e=r.last,e!==null?e.sibling=c:t.child=c,r.last=c)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ca(),t.sibling=null,e=Tt.current,R(Tt,i?e&1|2:e&1),t):(ot(t),null);case 22:case 23:return Re(t),En(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),n=t.updateQueue,n!==null&&cs(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&U(ol),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),nn(ht),ot(t),null;case 25:return null}throw Error(o(156,t.tag))}function _h(e,t){switch(Ne(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nn(ht),ut(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Nt(t),null;case 13:if(Re(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ja()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return U(Tt),null;case 4:return ut(),null;case 10:return nn(t.type),null;case 22:case 23:return Re(t),En(),e!==null&&U(ol),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return nn(ht),null;case 25:return null;default:return null}}function so(e,t){switch(Ne(t),t.tag){case 3:nn(ht),ut();break;case 26:case 27:case 5:Nt(t);break;case 4:ut();break;case 13:Re(t);break;case 19:U(Tt);break;case 10:nn(t.type);break;case 22:case 23:Re(t),En(),e!==null&&U(ol);break;case 24:nn(ht)}}function Si(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var c=n.create,v=n.inst;i=c(),v.destroy=i}n=n.next}while(n!==r)}}catch(b){We(t,t.return,b)}}function Mn(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var c=r.next;i=c;do{if((i.tag&e)===e){var v=i.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,r=t;var z=n;try{b()}catch(Z){We(r,z,Z)}}}i=i.next}while(i!==c)}}catch(Z){We(t,t.return,Z)}}function ro(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{te(t,n)}catch(i){We(e,e.return,i)}}}function uo(e,t,n){n.props=Jn(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){We(e,t,i)}}function kn(e,t){try{var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var r=Ti(i);break;default:r=i}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(c){We(e,t,c)}}function na(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){We(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function co(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{mv(i,t,n,e)}catch(r){We(e,e.return,r)}}function oo(e,t,n){try{gv(e.stateNode,e.type,n,t,e)}catch(i){We(e,e.return,i)}}function fo(e){return e.tag===5||e.tag===3||(ma?e.tag===26:!1)||(jt?e.tag===27:!1)||e.tag===4}function Ar(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&(!jt||e.tag!==27)&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zr(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?Sv(n,e,t):vv(n,e);else if(!(i===4||jt&&i===27)&&(e=e.child,e!==null))for(zr(e,t,n),e=e.sibling;e!==null;)zr(e,t,n),e=e.sibling}function os(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?yv(n,e,t):hv(n,e);else if(!(i===4||jt&&i===27)&&(e=e.child,e!==null))for(os(e,t,n),e=e.sibling;e!==null;)os(e,t,n),e=e.sibling}function ho(e,t,n){e=e.containerInfo;try{uf(e,n)}catch(i){We(t,t.return,i)}}function Mh(e,t){for(Qh(e.containerInfo),Rt=t;Rt!==null;)if(e=Rt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Rt=t;else for(;Rt!==null;){e=Rt;var n=e.alternate;switch(t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&n!==null){t=void 0;var i=e,r=n.memoizedProps;n=n.memoizedState;var c=i.stateNode;try{var v=Jn(i.type,r,i.elementType===i.type);t=c.getSnapshotBeforeUpdate(v,n),c.__reactInternalSnapshotBeforeUpdate=t}catch(b){We(i,i.return,b)}}break;case 3:(t&1024)!==0&&wt&&Rv(e.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=e.sibling,t!==null){t.return=e.return,Rt=t;break}Rt=e.return}return v=Cf,Cf=!1,v}function vo(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ln(e,n),i&4&&Si(5,n);break;case 1:if(ln(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(b){We(n,n.return,b)}else{var r=Jn(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){We(n,n.return,b)}}i&64&&ro(n),i&512&&kn(n,n.return);break;case 3:if(ln(e,n),i&64&&(i=n.updateQueue,i!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=Ti(n.child.stateNode);break;case 1:e=n.child.stateNode}try{te(i,e)}catch(b){We(n,n.return,b)}}break;case 26:if(ma){ln(e,n),i&512&&kn(n,n.return);break}case 27:case 5:ln(e,n),t===null&&i&4&&co(n),i&512&&kn(n,n.return);break;case 12:ln(e,n);break;case 13:ln(e,n),i&4&&mo(e,n);break;case 22:if(r=n.memoizedState!==null||fn,!r){t=t!==null&&t.memoizedState!==null||vt;var c=fn,v=vt;fn=r,(vt=t)&&!v?xn(e,n,(n.subtreeFlags&8772)!==0):ln(e,n),fn=c,vt=v}i&512&&(n.memoizedProps.mode==="manual"?kn(n,n.return):na(n,n.return));break;default:ln(e,n)}}function po(e){var t=e.alternate;t!==null&&(e.alternate=null,po(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ev(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ua(e,t,n){for(n=n.child;n!==null;)Ur(e,t,n),n=n.sibling}function Ur(e,t,n){if(ua&&typeof ua.onCommitFiberUnmount=="function")try{ua.onCommitFiberUnmount(xi,n)}catch{}switch(n.tag){case 26:if(ma){vt||na(n,t),Ua(e,t,n),n.memoizedState?gf(n.memoizedState):n.stateNode&&Sf(n.stateNode);break}case 27:if(jt){vt||na(n,t);var i=Et,r=oa;Et=n.stateNode,Ua(e,t,n),tp(n.stateNode),Et=i,oa=r;break}case 5:vt||na(n,t);case 6:if(wt){if(i=Et,r=oa,Et=null,Ua(e,t,n),Et=i,oa=r,Et!==null)if(oa)try{bv(Et,n.stateNode)}catch(c){We(n,t,c)}else try{Ev(Et,n.stateNode)}catch(c){We(n,t,c)}}else Ua(e,t,n);break;case 18:wt&&Et!==null&&(oa?Xv(Et,n.stateNode):Fv(Et,n.stateNode));break;case 4:wt?(i=Et,r=oa,Et=n.stateNode.containerInfo,oa=!0,Ua(e,t,n),Et=i,oa=r):(Cn&&ho(n.stateNode,n,sf()),Ua(e,t,n));break;case 0:case 11:case 14:case 15:vt||Mn(2,n,t),vt||Mn(4,n,t),Ua(e,t,n);break;case 1:vt||(na(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&uo(n,t,i)),Ua(e,t,n);break;case 21:Ua(e,t,n);break;case 22:vt||na(n,t),vt=(i=vt)||n.memoizedState!==null,Ua(e,t,n),vt=i;break;default:Ua(e,t,n)}}function mo(e,t){if(pa&&t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Yv(e)}catch(n){We(t,t.return,n)}}function xh(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Uf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Uf),t;default:throw Error(o(435,e.tag))}}function Cr(e,t){var n=xh(e);t.forEach(function(i){var r=Oh.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function It(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],c=e,v=t;if(wt){var b=v;e:for(;b!==null;){switch(b.tag){case 27:case 5:Et=b.stateNode,oa=!1;break e;case 3:Et=b.stateNode.containerInfo,oa=!0;break e;case 4:Et=b.stateNode.containerInfo,oa=!0;break e}b=b.return}if(Et===null)throw Error(o(160));Ur(c,v,r),Et=null,oa=!1}else Ur(c,v,r);c=r.alternate,c!==null&&(c.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)go(t,e),t=t.sibling}function go(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:It(t,e),la(e),i&4&&(Mn(3,e,e.return),Si(3,e),Mn(5,e,e.return));break;case 1:It(t,e),la(e),i&512&&(vt||n===null||na(n,n.return)),i&64&&fn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:if(ma){var r=Da;It(t,e),la(e),i&512&&(vt||n===null||na(n,n.return)),i&4&&(i=n!==null?n.memoizedState:null,t=e.memoizedState,n===null?t===null?e.stateNode===null?e.stateNode=Iv(r,e.type,e.memoizedProps,e):yf(r,e.type,e.stateNode):e.stateNode=mf(r,t,e.memoizedProps):i!==t?(i===null?n.stateNode!==null&&Sf(n.stateNode):gf(i),t===null?yf(r,e.type,e.stateNode):mf(r,t,e.memoizedProps)):t===null&&e.stateNode!==null&&oo(e,e.memoizedProps,n.memoizedProps));break}case 27:if(jt&&i&4&&e.alternate===null){r=e.stateNode;var c=e.memoizedProps;try{$v(r),ep(e.type,c,r,e)}catch(ae){We(e,e.return,ae)}}case 5:if(It(t,e),la(e),i&512&&(vt||n===null||na(n,n.return)),wt){if(e.flags&32){t=e.stateNode;try{lf(t)}catch(ae){We(e,e.return,ae)}}i&4&&e.stateNode!=null&&(t=e.memoizedProps,oo(e,t,n!==null?n.memoizedProps:t)),i&1024&&(yu=!0)}break;case 6:if(It(t,e),la(e),i&4&&wt){if(e.stateNode===null)throw Error(o(162));i=e.memoizedProps,n=n!==null?n.memoizedProps:i,t=e.stateNode;try{pv(t,n,i)}catch(ae){We(e,e.return,ae)}}break;case 3:if(ma?(Jv(),r=Da,Da=lu(t.containerInfo),It(t,e),Da=r):It(t,e),la(e),i&4){if(wt&&pa&&n!==null&&n.memoizedState.isDehydrated)try{Zv(t.containerInfo)}catch(ae){We(e,e.return,ae)}if(Cn){i=t.containerInfo,n=t.pendingChildren;try{uf(i,n)}catch(ae){We(e,e.return,ae)}}}yu&&(yu=!1,yo(e));break;case 4:ma?(n=Da,Da=lu(e.stateNode.containerInfo),It(t,e),la(e),Da=n):(It(t,e),la(e)),i&4&&Cn&&ho(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:It(t,e),la(e);break;case 13:It(t,e),la(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Tu=Ca()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Cr(e,i)));break;case 22:i&512&&(vt||n===null||na(n,n.return)),r=e.memoizedState!==null;var v=n!==null&&n.memoizedState!==null,b=fn,z=vt;if(fn=b||r,vt=z||v,It(t,e),vt=z,fn=b,la(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=r?t._visibility&-2:t._visibility|1,r&&(t=fn||vt,n===null||v||t||_l(e)),wt&&(e.memoizedProps===null||e.memoizedProps.mode!=="manual"))){e:if(n=null,wt)for(t=e;;){if(t.tag===5||ma&&t.tag===26||jt&&t.tag===27){if(n===null){v=n=t;try{c=v.stateNode,r?Tv(c):Mv(v.stateNode,v.memoizedProps)}catch(ae){We(v,v.return,ae)}}}else if(t.tag===6){if(n===null){v=t;try{var Z=v.stateNode;r?_v(Z):xv(Z,v.memoizedProps)}catch(ae){We(v,v.return,ae)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Cr(e,n))));break;case 19:It(t,e),la(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Cr(e,i)));break;case 21:break;default:It(t,e),la(e)}}function la(e){var t=e.flags;if(t&2){try{if(wt&&(!jt||e.tag!==27)){e:{for(var n=e.return;n!==null;){if(fo(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 27:if(jt){var r=i.stateNode,c=Ar(e);os(e,c,r);break}case 5:var v=i.stateNode;i.flags&32&&(lf(v),i.flags&=-33);var b=Ar(e);os(e,b,v);break;case 3:case 4:var z=i.stateNode.containerInfo,Z=Ar(e);zr(e,Z,z);break;default:throw Error(o(161))}}}catch(ae){We(e,e.return,ae)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yo(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;yo(t),t.tag===5&&t.flags&1024&&lv(t.stateNode),e=e.sibling}}function ln(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)vo(e,t.alternate,t),t=t.sibling}function _l(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Mn(4,t,t.return),_l(t);break;case 1:na(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&uo(t,t.return,n),_l(t);break;case 26:case 27:case 5:na(t,t.return),_l(t);break;case 22:na(t,t.return),t.memoizedState===null&&_l(t);break;default:_l(t)}e=e.sibling}}function xn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,c=t,v=c.flags;switch(c.tag){case 0:case 11:case 15:xn(r,c,n),Si(4,c);break;case 1:if(xn(r,c,n),i=c,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(Z){We(i,i.return,Z)}if(i=c,r=i.updateQueue,r!==null){var b=i.stateNode;try{var z=r.shared.hiddenCallbacks;if(z!==null)for(r.shared.hiddenCallbacks=null,r=0;r<z.length;r++)we(z[r],b)}catch(Z){We(i,i.return,Z)}}n&&v&64&&ro(c),kn(c,c.return);break;case 26:case 27:case 5:xn(r,c,n),n&&i===null&&v&4&&co(c),kn(c,c.return);break;case 12:xn(r,c,n);break;case 13:xn(r,c,n),n&&v&4&&mo(r,c);break;case 22:c.memoizedState===null&&xn(r,c,n),kn(c,c.return);break;default:xn(r,c,n)}t=t.sibling}}function Nr(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&gi(n))}function Dr(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gi(e))}function Rn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)So(e,t,n,i),t=t.sibling}function So(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Rn(e,t,n,i),r&2048&&Si(9,t);break;case 3:Rn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gi(e)));break;case 12:if(r&2048){Rn(e,t,n,i),e=t.stateNode;try{var c=t.memoizedProps,v=c.id,b=c.onPostCommit;typeof b=="function"&&b(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){We(t,t.return,z)}}else Rn(e,t,n,i);break;case 23:break;case 22:c=t.stateNode,t.memoizedState!==null?c._visibility&4?Rn(e,t,n,i):Ei(e,t):c._visibility&4?Rn(e,t,n,i):(c._visibility|=4,Ml(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&Nr(t.alternate,t);break;case 24:Rn(e,t,n,i),r&2048&&Dr(t.alternate,t);break;default:Rn(e,t,n,i)}}function Ml(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var c=e,v=t,b=n,z=i,Z=v.flags;switch(v.tag){case 0:case 11:case 15:Ml(c,v,b,z,r),Si(8,v);break;case 23:break;case 22:var ae=v.stateNode;v.memoizedState!==null?ae._visibility&4?Ml(c,v,b,z,r):Ei(c,v):(ae._visibility|=4,Ml(c,v,b,z,r)),r&&Z&2048&&Nr(v.alternate,v);break;case 24:Ml(c,v,b,z,r),r&&Z&2048&&Dr(v.alternate,v);break;default:Ml(c,v,b,z,r)}t=t.sibling}}function Ei(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Ei(n,i),r&2048&&Nr(i.alternate,i);break;case 24:Ei(n,i),r&2048&&Dr(i.alternate,i);break;default:Ei(n,i)}t=t.sibling}}function $n(e){if(e.subtreeFlags&Fl)for(e=e.child;e!==null;)Eo(e),e=e.sibling}function Eo(e){switch(e.tag){case 26:$n(e),e.flags&Fl&&(e.memoizedState!==null?kv(Da,e.memoizedState,e.memoizedProps):nf(e.type,e.memoizedProps));break;case 5:$n(e),e.flags&Fl&&nf(e.type,e.memoizedProps);break;case 3:case 4:if(ma){var t=Da;Da=lu(e.stateNode.containerInfo),$n(e),Da=t}else $n(e);break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Fl,Fl=16777216,$n(e),Fl=t):$n(e));break;default:$n(e)}}function bo(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function bi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Rt=i,_o(i,e)}bo(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)To(e),e=e.sibling}function To(e){switch(e.tag){case 0:case 11:case 15:bi(e),e.flags&2048&&Mn(9,e,e.return);break;case 3:bi(e);break;case 12:bi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,fs(e)):bi(e);break;default:bi(e)}}function fs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Rt=i,_o(i,e)}bo(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Mn(8,t,t.return),fs(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,fs(t));break;default:fs(t)}e=e.sibling}}function _o(e,t){for(;Rt!==null;){var n=Rt;switch(n.tag){case 0:case 11:case 15:Mn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:gi(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Rt=i;else e:for(n=e;Rt!==null;){i=Rt;var r=i.sibling,c=i.return;if(po(i),i===n){Rt=null;break e}if(r!==null){r.return=c,Rt=r;break e}Rt=c}}}function Or(e){var t=tf(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(o(364));return t}if(e=rv(e),e===null)throw Error(o(362));return e.stateNode.current}function Br(e,t){var n=e.tag;switch(t.$$typeof){case Cs:if(e.type===t.value)return!0;break;case Ns:e:{for(t=t.value,e=[e,0],n=0;n<e.length;){var i=e[n++],r=i.tag,c=e[n++],v=t[c];if(r!==5&&r!==26&&r!==27||!Mi(i)){for(;v!=null&&Br(i,v);)c++,v=t[c];if(c===t.length){t=!0;break e}else for(i=i.child;i!==null;)e.push(i,c),i=i.sibling}}t=!1}return t;case Ds:if((n===5||n===26||n===27)&&ov(e.stateNode,t.value))return!0;break;case Bs:if((n===5||n===6||n===26||n===27)&&(e=cv(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case Os:if((n===5||n===26||n===27)&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Hr(e){switch(e.$$typeof){case Cs:return"<"+(g(e.value)||"Unknown")+">";case Ns:return":has("+(Hr(e)||"")+")";case Ds:return'[role="'+e.value+'"]';case Bs:return'"'+e.value+'"';case Os:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function Mo(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var r=e[i++],c=r.tag,v=e[i++],b=t[v];if(c!==5&&c!==26&&c!==27||!Mi(r)){for(;b!=null&&Br(r,b);)v++,b=t[v];if(v===t.length)n.push(r);else for(r=r.child;r!==null;)e.push(r,v),r=r.sibling}}return n}function wr(e,t){if(!_i)throw Error(o(363));e=Or(e),e=Mo(e,t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++],r=i.tag;if(r===5||r===26||r===27)Mi(i)||t.push(i.stateNode);else for(i=i.child;i!==null;)e.push(i),i=i.sibling}return t}function ia(){if(($e&2)!==0&&Ge!==0)return Ge&-Ge;if(Ae.T!==null){var e=jl;return e!==0?e:gn()}return kh()}function xo(){ba===0&&(ba=(Ge&536870912)===0||qe?O():536870912);var e=Ea.current;return e!==null&&(e.flags|=32),ba}function Zt(e,t,n){(e===nt&&lt===2||e.cancelPendingCommit!==null)&&(xl(e,0),sn(e,Ge,ba,!1)),se(e,n),(($e&2)===0||e!==nt)&&(e===nt&&(($e&2)===0&&(fl|=n),pt===4&&sn(e,Ge,ba,!1)),Xt(e))}function Ro(e,t,n){if(($e&6)!==0)throw Error(o(327));var i=!n&&(t&60)===0&&(t&e.expiredLanes)===0||j(e,t),r=i?zh(e,t):Vr(e,t,!0),c=i;do{if(r===0){Xl&&!i&&sn(e,t,0,!1);break}else if(r===6)sn(e,t,0,!dn);else{if(n=e.current.alternate,c&&!Rh(n)){r=Vr(e,t,!1),c=!1;continue}if(r===2){if(c=t,e.errorRecoveryDisabledLanes&c)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var b=e;r=Di;var z=pa&&b.current.memoizedState.isDehydrated;if(z&&(xl(b,v).flags|=256),v=Vr(b,v,!1),v!==2){if(Su&&!z){b.errorRecoveryDisabledLanes|=c,fl|=c,r=4;break e}c=Ia,Ia=r,c!==null&&jr(c)}r=v}if(c=!1,r!==2)continue}}if(r===1){xl(e,0),sn(e,t,0,!0);break}e:{switch(i=e,r){case 0:case 1:throw Error(o(345));case 4:if((t&4194176)===t){sn(i,t,ba,!dn);break e}break;case 2:Ia=null;break;case 3:case 5:break;default:throw Error(o(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(c=Tu+300-Ca(),10<c)){if(sn(i,t,ba,!dn),X(i,0)!==0)break e;i.timeoutHandle=Ph(Ao.bind(null,i,n,Ia,Hs,bu,t,ba,fl,Ql,dn,2,-0,0),c);break e}Ao(i,n,Ia,Hs,bu,t,ba,fl,Ql,dn,0,-0,0)}}break}while(!0);Xt(e)}function jr(e){Ia===null?Ia=e:Ia.push.apply(Ia,e)}function Ao(e,t,n,i,r,c,v,b,z,Z,ae,re,ce){var Ce=t.subtreeFlags;if((Ce&8192||(Ce&16785408)===16785408)&&(av(),Eo(t),t=nv(),t!==null)){e.cancelPendingCommit=t(wo.bind(null,e,n,i,r,v,b,z,1,re,ce)),sn(e,c,v,!Z);return}wo(e,n,i,r,v,b,z,ae,re,ce)}function Rh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],c=r.getSnapshot;r=r.value;try{if(!ca(c(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t,n,i){t&=~Eu,t&=~fl,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var c=31-ra(r),v=1<<c;i[c]=-1,r&=~v}n!==0&&ee(e,n,t)}function zo(){return($e&6)===0?(La(0),!1):!0}function Gr(){if(He!==null){if(lt===0)var e=He.return;else e=He,on=cl=null,I(e),Vl=null,Ui=0,e=He;for(;e!==null;)so(e.alternate,e),e=e.return;He=null}}function xl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==tu&&(e.timeoutHandle=tu,Jh(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Gr(),nt=e,He=n=An(e.current,null),Ge=t,lt=0,fa=null,dn=!1,Xl=j(e,t),Su=!1,Ql=ba=Eu=fl=Hn=pt=0,Ia=Di=null,bu=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-ra(i),c=1<<r;t|=e[r],i&=~c}return hn=t,Ga(),n}function Uo(e,t){De=null,Ae.H=Ka,t===zi?(t=Qt(),lt=3):t===vu?(t=Qt(),lt=4):lt=t===Af?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,fa=t,He===null&&(pt=1,is(e,me(t,e.current)))}function Co(){var e=Ea.current;return e===null?!0:(Ge&4194176)===Ge?Qa===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?e===Qa:!1}function No(){var e=Ae.H;return Ae.H=Ka,e===null?Ka:e}function Do(){var e=Ae.A;return Ae.A=pp,e}function Lr(){pt=4,dn||(Ge&4194176)!==Ge&&Ea.current!==null||(Xl=!0),(Hn&134217727)===0&&(fl&134217727)===0||nt===null||sn(nt,Ge,ba,!1)}function Vr(e,t,n){var i=$e;$e|=2;var r=No(),c=Do();(nt!==e||Ge!==t)&&(Hs=null,xl(e,t)),t=!1;var v=pt;e:do try{if(lt!==0&&He!==null){var b=He,z=fa;switch(lt){case 8:Gr(),v=6;break e;case 3:case 2:case 6:Ea.current===null&&(t=!0);var Z=lt;if(lt=0,fa=null,Rl(e,b,z,Z),n&&Xl){v=0;break e}break;default:Z=lt,lt=0,fa=null,Rl(e,b,z,Z)}}Ah(),v=pt;break}catch(ae){Uo(e,ae)}while(!0);return t&&e.shellSuspendCounter++,on=cl=null,$e=i,Ae.H=r,Ae.A=c,He===null&&(nt=null,Ge=0,Ga()),v}function Ah(){for(;He!==null;)Oo(He)}function zh(e,t){var n=$e;$e|=2;var i=No(),r=Do();nt!==e||Ge!==t?(Hs=null,Oi=Ca()+500,xl(e,t)):Xl=j(e,t);e:do try{if(lt!==0&&He!==null){t=He;var c=fa;t:switch(lt){case 1:lt=0,fa=null,Rl(e,t,c,1);break;case 2:if($t(c)){lt=0,fa=null,Bo(t);break}t=function(){lt===2&&nt===e&&(lt=7),Xt(e)},c.then(t,t);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:$t(c)?(lt=0,fa=null,Bo(t)):(lt=0,fa=null,Rl(e,t,c,7));break;case 5:var v=null;switch(He.tag){case 26:v=He.memoizedState;case 5:case 27:var b=He,z=b.type,Z=b.pendingProps;if(v?Ef(v):af(z,Z)){lt=0,fa=null;var ae=b.sibling;if(ae!==null)He=ae;else{var re=b.return;re!==null?(He=re,ds(re)):He=null}break t}}lt=0,fa=null,Rl(e,t,c,5);break;case 6:lt=0,fa=null,Rl(e,t,c,6);break;case 8:Gr(),pt=6;break e;default:throw Error(o(462))}}Uh();break}catch(ce){Uo(e,ce)}while(!0);return on=cl=null,Ae.H=i,Ae.A=r,$e=n,He!==null?0:(nt=null,Ge=0,Ga(),pt)}function Uh(){for(;He!==null&&!lp();)Oo(He)}function Oo(e){var t=$c(e.alternate,e,hn);e.memoizedProps=e.pendingProps,t===null?ds(e):He=t}function Bo(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Kc(n,t,t.pendingProps,t.type,void 0,Ge);break;case 11:t=Kc(n,t,t.pendingProps,t.type.render,t.ref,Ge);break;case 5:I(t);default:so(n,t),t=He=Vo(t,hn),t=$c(n,t,hn)}e.memoizedProps=e.pendingProps,t===null?ds(e):He=t}function Rl(e,t,n,i){on=cl=null,I(t),Vl=null,Ui=0;var r=t.return;try{if(Eh(e,r,t,n,Ge)){pt=1,is(e,me(n,e.current)),He=null;return}}catch(c){if(r!==null)throw He=r,c;pt=1,is(e,me(n,e.current)),He=null;return}t.flags&32768?(qe||i===1?e=!0:Xl||(Ge&536870912)!==0?e=!1:(dn=e=!0,(i===2||i===3||i===6)&&(i=Ea.current,i!==null&&i.tag===13&&(i.flags|=16384))),Ho(t,e)):ds(t)}function ds(e){var t=e;do{if((t.flags&32768)!==0){Ho(t,dn);return}e=t.return;var n=Th(t.alternate,t,hn);if(n!==null){He=n;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);pt===0&&(pt=5)}function Ho(e,t){do{var n=_h(e.alternate,e);if(n!==null){n.flags&=32767,He=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){He=e;return}He=e=n}while(e!==null);pt=6,He=null}function wo(e,t,n,i,r,c,v,b,z,Z){var ae=Ae.T,re=al();try{Pt(2),Ae.T=null,Ch(e,t,n,i,re,r,c,v,b,z,Z)}finally{Ae.T=ae,Pt(re)}}function Ch(e,t,n,i,r,c,v,b){do el();while(dl!==null);if(($e&6)!==0)throw Error(o(327));var z=e.finishedWork;if(i=e.finishedLanes,z===null)return null;if(e.finishedWork=null,e.finishedLanes=0,z===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var Z=z.lanes|z.childLanes;if(Z|=cu,pe(e,i,Z,c,v,b),e===nt&&(He=nt=null,Ge=0),(z.subtreeFlags&10256)===0&&(z.flags&10256)===0||ws||(ws=!0,_u=Z,Mu=n,Bh(ru,function(){return el(),null})),n=(z.flags&15990)!==0,(z.subtreeFlags&15990)!==0||n?(n=Ae.T,Ae.T=null,c=al(),Pt(2),v=$e,$e|=4,Mh(e,z),go(z,e),Kh(e.containerInfo),e.current=z,vo(e,z.alternate,z),ip(),$e=v,Pt(c),Ae.T=n):e.current=z,ws?(ws=!1,dl=e,Bi=i):jo(e,Z),Z=e.pendingLanes,Z===0&&(wn=null),F(z.stateNode),Xt(e),t!==null)for(r=e.onRecoverableError,z=0;z<t.length;z++)Z=t[z],r(Z.value,{componentStack:Z.stack});return(Bi&3)!==0&&el(),Z=e.pendingLanes,(i&4194218)!==0&&(Z&42)!==0?e===xu?Hi++:(Hi=0,xu=e):Hi=0,La(0),null}function jo(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gi(t)))}function el(){if(dl!==null){var e=dl,t=_u;_u=0;var n=Se(Bi),i=32>n?32:n;n=Ae.T;var r=al();try{if(Pt(i),Ae.T=null,dl===null)var c=!1;else{i=Mu,Mu=null;var v=dl,b=Bi;if(dl=null,Bi=0,($e&6)!==0)throw Error(o(331));var z=$e;if($e|=4,To(v.current),So(v,v.current,b,i),$e=z,La(0,!1),ua&&typeof ua.onPostCommitFiberRoot=="function")try{ua.onPostCommitFiberRoot(xi,v)}catch{}c=!0}return c}finally{Pt(r),Ae.T=n,jo(e,t)}}return!1}function Go(e,t,n){t=me(n,t),t=fr(e.stateNode,t,2),e=at(e,t,2),e!==null&&(se(e,2),Xt(e))}function We(e,t,n){if(e.tag===3)Go(e,e,n);else for(;t!==null;){if(t.tag===3){Go(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wn===null||!wn.has(i))){e=me(n,e),n=Vc(2),i=at(t,n,2),i!==null&&(qc(n,i,t,e),se(i,2),Xt(i));break}}t=t.return}}function qr(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new mp;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Su=!0,r.add(n),e=Nh.bind(null,e,t,n),t.then(e,e))}function Nh(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,nt===e&&(Ge&n)===n&&(pt===4||pt===3&&(Ge&62914560)===Ge&&300>Ca()-Tu?($e&2)===0&&xl(e,0):Eu|=n,Ql===Ge&&(Ql=0)),Xt(e)}function Lo(e,t){t===0&&(t=G()),e=kt(e,t),e!==null&&(se(e,t),Xt(e))}function Dh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Lo(e,n)}function Oh(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(o(314))}i!==null&&i.delete(t),Lo(e,n)}function Bh(e,t){return Ss(e,t)}function Hh(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function An(e,t){var n=e.alternate;return n===null?(n=s(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vo(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function hs(e,t,n,i,r,c){var v=0;if(i=e,typeof e=="function")Zr(e)&&(v=1);else if(typeof e=="string")v=ma&&jt?vf(e,n,Ut.current)?26:Tf(e)?27:5:ma?vf(e,n,Ut.current)?26:5:jt&&Tf(e)?27:5;else e:switch(e){case zl:return tl(n.children,r,c,t);case Ko:v=8,r|=24;break;case Kr:return e=s(12,n,t,r|2),e.elementType=Kr,e.lanes=c,e;case Pr:return e=s(13,n,t,r),e.elementType=Pr,e.lanes=c,e;case Jr:return e=s(19,n,t,r),e.elementType=Jr,e.lanes=c,e;case Po:return qo(n,r,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Lh:case zn:v=10;break e;case Io:v=9;break e;case Ir:v=11;break e;case Wr:v=14;break e;case Un:v=16,i=null;break e}v=29,n=Error(o(130,e===null?"null":typeof e,"")),i=null}return t=s(v,n,t,r),t.elementType=e,t.type=i,t.lanes=c,t}function tl(e,t,n,i){return e=s(7,e,i,t),e.lanes=n,e}function qo(e,t,n,i){e=s(22,e,i,t),e.elementType=Po,e.lanes=n;var r={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var c=r._current;if(c===null)throw Error(o(456));if((r._pendingVisibility&2)===0){var v=kt(c,2);v!==null&&(r._pendingVisibility|=2,Zt(v,c,2))}},attach:function(){var c=r._current;if(c===null)throw Error(o(456));if((r._pendingVisibility&2)!==0){var v=kt(c,2);v!==null&&(r._pendingVisibility&=-3,Zt(v,c,2))}}};return e.stateNode=r,e}function Yr(e,t,n){return e=s(6,e,null,t),e.lanes=n,e}function Fr(e,t,n){return t=s(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wh(e,t,n,i,r,c,v,b){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=tu,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=V(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=V(0),this.hiddenUpdates=V(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=c,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Zo(e,t,n,i,r,c,v,b,z,Z,ae,re){return e=new wh(e,t,n,v,b,z,Z,re),t=1,c===!0&&(t|=24),c=s(3,null,null,t),e.current=c,c.stateNode=e,t=Tr(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:i,isDehydrated:n,cache:t},Sn(c),e}function Yo(e){return e?(e=Nl,e):Nl}function Fo(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=x(t),e=e!==null?w(e):null,e===null?null:Ti(e.stateNode)}function Xo(e,t,n,i,r,c){r=Yo(r),i.context===null?i.context=r:i.pendingContext=r,i=Dt(t),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=at(e,i,t),n!==null&&(Zt(n,e,t),ha(n,e,t))}function Qo(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xr(e,t){Qo(e,t),(e=e.alternate)&&Qo(e,t)}var Be={},jh=lc(),sa=Od(),Qr=Object.assign,Gh=Symbol.for("react.element"),vs=Symbol.for("react.transitional.element"),Al=Symbol.for("react.portal"),zl=Symbol.for("react.fragment"),Ko=Symbol.for("react.strict_mode"),Kr=Symbol.for("react.profiler"),Lh=Symbol.for("react.provider"),Io=Symbol.for("react.consumer"),zn=Symbol.for("react.context"),Ir=Symbol.for("react.forward_ref"),Pr=Symbol.for("react.suspense"),Jr=Symbol.for("react.suspense_list"),Wr=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),Po=Symbol.for("react.offscreen"),Vh=Symbol.for("react.memo_cache_sentinel"),Jo=Symbol.iterator,qh=Symbol.for("react.client.reference"),Ae=jh.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,kr,Wo,$r=!1,ps=Array.isArray,Zh=l.rendererVersion,Yh=l.rendererPackageName,ko=l.extraDevToolsConfig,Ti=l.getPublicInstance,Fh=l.getRootHostContext,Xh=l.getChildHostContext,Qh=l.prepareForCommit,Kh=l.resetAfterCommit,Ih=l.createInstance,eu=l.appendInitialChild,$o=l.finalizeInitialChildren,ms=l.shouldSetTextContent,ef=l.createTextInstance,Ph=l.scheduleTimeout,Jh=l.cancelTimeout,tu=l.noTimeout,rn=l.isPrimaryRenderer;l.warnsIfNotActing;var wt=l.supportsMutation,Cn=l.supportsPersistence,pa=l.supportsHydration,tf=l.getInstanceFromNode;l.beforeActiveInstanceBlur,l.afterActiveInstanceBlur;var Wh=l.preparePortalMount;l.prepareScopeUpdate,l.getInstanceFromScope;var Pt=l.setCurrentUpdatePriority,al=l.getCurrentUpdatePriority,kh=l.resolveUpdatePriority;l.resolveEventType,l.resolveEventTimeStamp;var $h=l.shouldAttemptEagerTransition,ev=l.detachDeletedInstance;l.requestPostPaintCallback;var tv=l.maySuspendCommit,af=l.preloadInstance,av=l.startSuspendingCommit,nf=l.suspendInstance,nv=l.waitForCommitToBeReady,Ul=l.NotPendingTransition,nl=l.HostTransitionContext,lv=l.resetFormInstance;l.bindToConsole;var iv=l.supportsMicrotasks,sv=l.scheduleMicrotask,_i=l.supportsTestSelectors,rv=l.findFiberRoot,uv=l.getBoundingRect,cv=l.getTextContent,Mi=l.isHiddenSubtree,ov=l.matchAccessibilityRole,fv=l.setFocusIfFocusable,dv=l.setupIntersectionObserver,hv=l.appendChild,vv=l.appendChildToContainer,pv=l.commitTextUpdate,mv=l.commitMount,gv=l.commitUpdate,yv=l.insertBefore,Sv=l.insertInContainerBefore,Ev=l.removeChild,bv=l.removeChildFromContainer,lf=l.resetTextContent,Tv=l.hideInstance,_v=l.hideTextInstance,Mv=l.unhideInstance,xv=l.unhideTextInstance,Rv=l.clearContainer,Av=l.cloneInstance,sf=l.createContainerChildSet,rf=l.appendChildToContainerChildSet,zv=l.finalizeContainerChildren,uf=l.replaceContainerChildren,cf=l.cloneHiddenInstance,of=l.cloneHiddenTextInstance,au=l.isSuspenseInstancePending,nu=l.isSuspenseInstanceFallback,Uv=l.getSuspenseInstanceFallbackErrorDetails,Cv=l.registerSuspenseInstanceRetry,Nv=l.canHydrateFormStateMarker,Dv=l.isFormStateMarkerMatching,ff=l.getNextHydratableSibling,df=l.getFirstHydratableChild,Ov=l.getFirstHydratableChildWithinContainer,Bv=l.getFirstHydratableChildWithinSuspenseInstance,Hv=l.canHydrateInstance,wv=l.canHydrateTextInstance,jv=l.canHydrateSuspenseInstance,Gv=l.hydrateInstance,Lv=l.hydrateTextInstance,Vv=l.hydrateSuspenseInstance,qv=l.getNextHydratableInstanceAfterSuspenseInstance,Zv=l.commitHydratedContainer,Yv=l.commitHydratedSuspenseInstance,Fv=l.clearSuspenseBoundary,Xv=l.clearSuspenseBoundaryFromContainer,hf=l.shouldDeleteUnhydratedTailInstances;l.diffHydratedPropsForDevWarnings,l.diffHydratedTextForDevWarnings,l.describeHydratableInstanceForDevWarnings;var Qv=l.validateHydratableInstance,Kv=l.validateHydratableTextInstance,ma=l.supportsResources,vf=l.isHostHoistableType,lu=l.getHoistableRoot,pf=l.getResource,mf=l.acquireResource,gf=l.releaseResource,Iv=l.hydrateHoistable,yf=l.mountHoistable,Sf=l.unmountHoistable,Pv=l.createHoistableInstance,Jv=l.prepareToCommitHoistables,Wv=l.mayResourceSuspendCommit,Ef=l.preloadResource,kv=l.suspendResource,jt=l.supportsSingletons,bf=l.resolveSingletonInstance,$v=l.clearSingleton,ep=l.acquireSingletonInstance,tp=l.releaseSingletonInstance,Tf=l.isHostSingletonType,iu=[],Cl=-1,Nl={},ra=Math.clz32?Math.clz32:q,ap=Math.log,np=Math.LN2,gs=128,ys=4194304,Ss=sa.unstable_scheduleCallback,su=sa.unstable_cancelCallback,lp=sa.unstable_shouldYield,ip=sa.unstable_requestPaint,Ca=sa.unstable_now,_f=sa.unstable_ImmediatePriority,sp=sa.unstable_UserBlockingPriority,ru=sa.unstable_NormalPriority,rp=sa.unstable_IdlePriority,up=sa.log,cp=sa.unstable_setDisableYieldValue,xi=null,ua=null,ca=typeof Object.is=="function"?Object.is:he,Mf=new WeakMap,Dl=[],Ol=0,Es=null,bs=0,ga=[],ya=0,ll=null,un=1,cn="",Ut=Y(null),Ri=Y(null),Nn=Y(null),Ts=Y(null),Yt=null,Gt=null,qe=!1,Na=null,Xa=!1,uu=Error(o(519)),Sa=[],Bl=0,cu=0,_s=null,Hl=null,ou=!1,Ms=!1,fu=!1,wl=0,Ai=null,du=0,jl=0,Gl=null,Dn=!1,hu=!1,op=Object.prototype.hasOwnProperty,zi=Error(o(460)),vu=Error(o(474)),xs={then:function(){}},Ll=null,Vl=null,Ui=0,il=tn(!0),xf=tn(!1),ql=Y(null),Rs=Y(0),Ea=Y(null),Qa=null,Tt=Y(0),On=0,De=null,ke=null,St=null,As=!1,Zl=!1,sl=!1,zs=0,Ci=0,Yl=null,fp=0,pu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ka={readContext:Ht,use:ne,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct};Ka.useCacheRefresh=ct,Ka.useMemoCache=ct,Ka.useHostTransitionStatus=ct,Ka.useFormState=ct,Ka.useActionState=ct,Ka.useOptimistic=ct;var rl={readContext:Ht,use:ne,useCallback:function(e,t){return W().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:Tc,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,as(4194308,4,xc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return as(4194308,4,e,t)},useInsertionEffect:function(e,t){as(4,2,e,t)},useMemo:function(e,t){var n=W();t=t===void 0?null:t;var i=e();if(sl){oe(!0);try{e()}finally{oe(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=W();if(n!==void 0){var r=n(t);if(sl){oe(!0);try{n(t)}finally{oe(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Sh.bind(null,De,e),[i.memoizedState,e]},useRef:function(e){var t=W();return e={current:e},t.memoizedState=e},useState:function(e){e=Je(e);var t=e.queue,n=Bc.bind(null,De,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:sr,useDeferredValue:function(e,t){var n=W();return rr(n,e,t)},useTransition:function(){var e=Je(!1);return e=Cc.bind(null,De,e.queue,!0,!1),W().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=De,r=W();if(qe){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),nt===null)throw Error(o(349));(Ge&60)!==0||Ie(i,t,n)}r.memoizedState=n;var c={value:n,getSnapshot:t};return r.queue=c,Tc(Mt.bind(null,i,c,e),[e]),i.flags|=2048,Tl(9,dt.bind(null,i,c,n,t),{destroy:void 0},null),n},useId:function(){var e=W(),t=nt.identifierPrefix;if(qe){var n=cn,i=un;n=(i&~(1<<32-ra(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=zs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=fp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return W().memoizedState=yh.bind(null,De)}};rl.useMemoCache=et,rl.useHostTransitionStatus=ur,rl.useFormState=qt,rl.useActionState=qt,rl.useOptimistic=function(e){var t=W();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=cr.bind(null,De,!0,n),n.dispatch=t,[e,t]};var Bn={readContext:Ht,use:ne,useCallback:Ac,useContext:Ht,useEffect:ir,useImperativeHandle:Rc,useInsertionEffect:_c,useLayoutEffect:Mc,useMemo:zc,useReducer:ye,useRef:bc,useState:function(){return ye(de)},useDebugValue:sr,useDeferredValue:function(e,t){var n=K();return Uc(n,ke.memoizedState,e,t)},useTransition:function(){var e=ye(de)[0],t=K().memoizedState;return[typeof e=="boolean"?e:ie(e),t]},useSyncExternalStore:Xe,useId:Dc};Bn.useCacheRefresh=Oc,Bn.useMemoCache=et,Bn.useHostTransitionStatus=ur,Bn.useFormState=Ya,Bn.useActionState=Ya,Bn.useOptimistic=function(e,t){var n=K();return mt(n,ke,e,t)};var ul={readContext:Ht,use:ne,useCallback:Ac,useContext:Ht,useEffect:ir,useImperativeHandle:Rc,useInsertionEffect:_c,useLayoutEffect:Mc,useMemo:zc,useReducer:Ue,useRef:bc,useState:function(){return Ue(de)},useDebugValue:sr,useDeferredValue:function(e,t){var n=K();return ke===null?rr(n,e,t):Uc(n,ke.memoizedState,e,t)},useTransition:function(){var e=Ue(de)[0],t=K().memoizedState;return[typeof e=="boolean"?e:ie(e),t]},useSyncExternalStore:Xe,useId:Dc};ul.useCacheRefresh=Oc,ul.useMemoCache=et,ul.useHostTransitionStatus=ur,ul.useFormState=Ec,ul.useActionState=Ec,ul.useOptimistic=function(e,t){var n=K();return ke!==null?mt(n,ke,e,t):(n.baseState=e,[e,n.queue.dispatch])};var mu={isMounted:function(e){return(e=e._reactInternals)?S(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ia(),r=Dt(i);r.payload=t,n!=null&&(r.callback=n),t=at(e,r,i),t!==null&&(Zt(t,e,i),ha(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ia(),r=Dt(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=at(e,r,i),t!==null&&(Zt(t,e,i),ha(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ia(),i=Dt(n);i.tag=2,t!=null&&(i.callback=t),t=at(e,i,n),t!==null&&(Zt(t,e,n),ha(t,e,n))}},Rf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Af=Error(o(461)),xt=!1,gu={dehydrated:null,treeContext:null,retryLane:0},Us=Y(null),cl=null,on=null,dp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},hp=sa.unstable_scheduleCallback,vp=sa.unstable_NormalPriority,ht={$$typeof:zn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},zf=Ae.S;Ae.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&yn(e,t),zf!==null&&zf(e,t)};var ol=Y(null),fn=!1,vt=!1,yu=!1,Uf=typeof WeakSet=="function"?WeakSet:Set,Rt=null,Cf=!1,Et=null,oa=!1,Da=null,Fl=8192,pp={getCacheForType:function(e){var t=Ht(ht),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Cs=0,Ns=1,Ds=2,Os=3,Bs=4;if(typeof Symbol=="function"&&Symbol.for){var Ni=Symbol.for;Cs=Ni("selector.component"),Ns=Ni("selector.has_pseudo_class"),Ds=Ni("selector.role"),Os=Ni("selector.test_id"),Bs=Ni("selector.text")}var mp=typeof WeakMap=="function"?WeakMap:Map,$e=0,nt=null,He=null,Ge=0,lt=0,fa=null,dn=!1,Xl=!1,Su=!1,hn=0,pt=0,Hn=0,fl=0,Eu=0,ba=0,Ql=0,Di=null,Ia=null,bu=!1,Tu=0,Oi=1/0,Hs=null,wn=null,ws=!1,dl=null,Bi=0,_u=0,Mu=null,Hi=0,xu=null;return Be.attemptContinuousHydration=function(e){if(e.tag===13){var t=kt(e,67108864);t!==null&&Zt(t,e,67108864),Xr(e,67108864)}},Be.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=ia(),n=kt(e,t);n!==null&&Zt(n,e,t),Xr(e,t)}},Be.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if(e=e.stateNode,e.current.memoizedState.isDehydrated){var t=P(e.pendingLanes);if(t!==0){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-ra(t);e.entanglements[1]|=n,t&=~n}Xt(e),($e&6)===0&&(Oi=Ca()+500,La(0))}}break;case 13:t=kt(e,2),t!==null&&Zt(t,e,2),zo(),Xr(e,2)}},Be.batchedUpdates=function(e,t){return e(t)},Be.createComponentSelector=function(e){return{$$typeof:Cs,value:e}},Be.createContainer=function(e,t,n,i,r,c,v,b,z,Z){return Zo(e,t,!1,null,n,i,c,v,b,z,Z,null)},Be.createHasPseudoClassSelector=function(e){return{$$typeof:Ns,value:e}},Be.createHydrationContainer=function(e,t,n,i,r,c,v,b,z,Z,ae,re,ce){return e=Zo(n,i,!0,e,r,c,b,z,Z,ae,re,ce),e.context=Yo(null),n=e.current,i=ia(),r=Dt(i),r.callback=t??null,at(n,r,i),e.current.lanes=i,se(e,i),Xt(e),e},Be.createPortal=function(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Al,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}},Be.createRoleSelector=function(e){return{$$typeof:Ds,value:e}},Be.createTestNameSelector=function(e){return{$$typeof:Os,value:e}},Be.createTextSelector=function(e){return{$$typeof:Bs,value:e}},Be.defaultOnCaughtError=function(e){console.error(e)},Be.defaultOnRecoverableError=function(e){Rf(e)},Be.defaultOnUncaughtError=function(e){Rf(e)},Be.deferredUpdates=function(e){var t=Ae.T,n=al();try{return Pt(32),Ae.T=null,e()}finally{Pt(n),Ae.T=t}},Be.discreteUpdates=function(e,t,n,i,r){var c=Ae.T,v=al();try{return Pt(2),Ae.T=null,e(t,n,i,r)}finally{Pt(v),Ae.T=c,$e===0&&(Oi=Ca()+500)}},Be.findAllNodes=wr,Be.findBoundingRects=function(e,t){if(!_i)throw Error(o(363));t=wr(e,t),e=[];for(var n=0;n<t.length;n++)e.push(uv(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var i=n.x,r=i+n.width,c=n.y,v=c+n.height,b=t-1;0<=b;b--)if(t!==b){var z=e[b],Z=z.x,ae=Z+z.width,re=z.y,ce=re+z.height;if(i>=Z&&c>=re&&r<=ae&&v<=ce){e.splice(t,1);break}else if(i!==Z||n.width!==z.width||ce<c||re>v){if(!(c!==re||n.height!==z.height||ae<i||Z>r)){Z>i&&(z.width+=Z-i,z.x=i),ae<r&&(z.width=r-Z),e.splice(t,1);break}}else{re>c&&(z.height+=re-c,z.y=c),ce<v&&(z.height=v-re),e.splice(t,1);break}}}return e},Be.findHostInstance=Fo,Be.findHostInstanceWithNoPortals=function(e){return e=x(e),e=e!==null?Q(e):null,e===null?null:Ti(e.stateNode)},Be.findHostInstanceWithWarning=function(e){return Fo(e)},Be.flushPassiveEffects=el,Be.flushSyncFromReconciler=function(e){var t=$e;$e|=1;var n=Ae.T,i=al();try{if(Pt(2),Ae.T=null,e)return e()}finally{Pt(i),Ae.T=n,$e=t,($e&6)===0&&La(0)}},Be.flushSyncWork=zo,Be.focusWithin=function(e,t){if(!_i)throw Error(o(363));for(e=Or(e),t=Mo(e,t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],i=n.tag;if(!Mi(n)){if((i===5||i===26||i===27)&&fv(n.stateNode))return!0;for(n=n.child;n!==null;)t.push(n),n=n.sibling}}return!1},Be.getFindAllNodesFailureDescription=function(e,t){if(!_i)throw Error(o(363));var n=0,i=[];e=[Or(e),0];for(var r=0;r<e.length;){var c=e[r++],v=c.tag,b=e[r++],z=t[b];if((v!==5&&v!==26&&v!==27||!Mi(c))&&(Br(c,z)&&(i.push(Hr(z)),b++,b>n&&(n=b)),b<t.length))for(c=c.child;c!==null;)e.push(c,b),c=c.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Hr(t[n]));return`findAllNodes was able to match part of the selector:
  `+(i.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},Be.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 27:case 5:return Ti(e.child.stateNode);default:return e.child.stateNode}},Be.injectIntoDevTools=function(){var e={bundleType:0,version:Zh,rendererPackageName:Yh,currentDispatcherRef:Ae,findFiberByHostInstance:tf,reconcilerVersion:"19.0.0"};if(ko!==null&&(e.rendererConfig=ko),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{xi=t.inject(e),ua=t}catch{}e=!!t.checkDCE}}return e},Be.isAlreadyRendering=function(){return!1},Be.observeVisibleRects=function(e,t,n,i){if(!_i)throw Error(o(363));e=wr(e,t);var r=dv(e,n,i).disconnect;return{disconnect:function(){r()}}},Be.shouldError=function(){return null},Be.shouldSuspend=function(){return!1},Be.startHostTransition=function(e,t,n,i){if(e.tag!==5)throw Error(o(476));var r=Nc(e).queue;Cc(e,r,t,Ul,n===null?u:function(){var c=Nc(e).next.queue;return vi(e,c,{},ia()),n(i)})},Be.updateContainer=function(e,t,n,i){var r=t.current,c=ia();return Xo(r,c,e,t,n,i),c},Be.updateContainerSync=function(e,t,n,i){return t.tag===0&&el(),Xo(t.current,2,e,t,n,i),2},Be},a.exports.default=a.exports,Object.defineProperty(a.exports,"__esModule",{value:!0})})(Bu)),Bu.exports}var Pf;function Em(){return Pf||(Pf=1,Ou.exports=Sm()),Ou.exports}var bm=Em();const Tm=Ud(bm);var Jf=Od();function ic(a,l,s){if(!a)return;if(s(a)===!0)return a;let u=l?a.return:a.child;for(;u;){const o=ic(u,l,s);if(o)return o;u=l?null:u.sibling}}function Bd(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const sc=Bd(L.createContext(null));class Hd extends L.Component{render(){return L.createElement(sc.Provider,{value:this._reactInternals},this.props.children)}}function wd(){const a=L.useContext(sc);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const l=L.useId();return L.useMemo(()=>{for(const s of[a,a?.alternate]){if(!s)continue;const u=ic(s,!1,o=>{let d=o.memoizedState;for(;d;){if(d.memoizedState===l)return!0;d=d.next}});if(u)return u}},[a,l])}const _m=Symbol.for("react.context"),Mm=a=>a!==null&&typeof a=="object"&&"$$typeof"in a&&a.$$typeof===_m;function xm(){const a=wd(),[l]=L.useState(()=>new Map);l.clear();let s=a;for(;s;){const u=s.type;Mm(u)&&u!==sc&&!l.has(u)&&l.set(u,L.use(Bd(u))),s=s.return}return l}function Rm(){const a=xm();return L.useMemo(()=>Array.from(a.keys()).reduce((l,s)=>u=>L.createElement(l,null,L.createElement(s.Provider,{...u,value:a.get(s)})),l=>L.createElement(Hd,{...l})),[a])}function jd(a){let l=a.root;for(;l.getState().previousRoot;)l=l.getState().previousRoot;return l}const Gd=a=>a&&a.isOrthographicCamera,Am=a=>a&&a.hasOwnProperty("current"),zm=a=>a!=null&&(typeof a=="string"||typeof a=="number"||a.isColor),$i=((a,l)=>typeof window<"u"&&(((a=window.document)==null?void 0:a.createElement)||((l=window.navigator)==null?void 0:l.product)==="ReactNative"))()?L.useLayoutEffect:L.useEffect;function rc(a){const l=L.useRef(a);return $i(()=>void(l.current=a),[a]),l}function Um(){const a=wd(),l=Rm();return L.useMemo(()=>({children:s})=>{const o=!!ic(a,!0,d=>d.type===L.StrictMode)?L.StrictMode:L.Fragment;return Ee.jsx(o,{children:Ee.jsx(l,{children:s})})},[a,l])}function Cm({set:a}){return $i(()=>(a(new Promise(()=>null)),()=>a(!1)),[a]),null}const Nm=(a=>(a=class extends L.Component{constructor(...s){super(...s),this.state={error:!1}}componentDidCatch(s){this.props.set(s)}render(){return this.state.error?null:this.props.children}},a.getDerivedStateFromError=()=>({error:!0}),a))();function Ld(a){var l;const s=typeof window<"u"?(l=window.devicePixelRatio)!=null?l:2:1;return Array.isArray(a)?Math.min(Math.max(a[0],s),a[1]):a}function Pl(a){var l;return(l=a.__r3f)==null?void 0:l.root.getState()}const rt={obj:a=>a===Object(a)&&!rt.arr(a)&&typeof a!="function",fun:a=>typeof a=="function",str:a=>typeof a=="string",num:a=>typeof a=="number",boo:a=>typeof a=="boolean",und:a=>a===void 0,nul:a=>a===null,arr:a=>Array.isArray(a),equ(a,l,{arrays:s="shallow",objects:u="reference",strict:o=!0}={}){if(typeof a!=typeof l||!!a!=!!l)return!1;if(rt.str(a)||rt.num(a)||rt.boo(a))return a===l;const d=rt.obj(a);if(d&&u==="reference")return a===l;const g=rt.arr(a);if(g&&s==="reference")return a===l;if((g||d)&&a===l)return!0;let m;for(m in a)if(!(m in l))return!1;if(d&&s==="shallow"&&u==="shallow"){for(m in o?l:a)if(!rt.equ(a[m],l[m],{strict:o,objects:"reference"}))return!1}else for(m in o?l:a)if(a[m]!==l[m])return!1;if(rt.und(m)){if(g&&a.length===0&&l.length===0||d&&Object.keys(a).length===0&&Object.keys(l).length===0)return!0;if(a!==l)return!1}return!0}};function Dm(a){const l={nodes:{},materials:{},meshes:{}};return a&&a.traverse(s=>{s.name&&(l.nodes[s.name]=s),s.material&&!l.materials[s.material.name]&&(l.materials[s.material.name]=s.material),s.isMesh&&!l.meshes[s.name]&&(l.meshes[s.name]=s)}),l}function Om(a){a.type!=="Scene"&&(a.dispose==null||a.dispose());for(const l in a){const s=a[l];s?.type!=="Scene"&&(s==null||s.dispose==null||s.dispose())}}const Vd=["children","key","ref"];function Bm(a){const l={};for(const s in a)Vd.includes(s)||(l[s]=a[s]);return l}function Ps(a,l,s,u){const o=a;let d=o?.__r3f;return d||(d={root:l,type:s,parent:null,children:[],props:Bm(u),object:o,eventCount:0,handlers:{},isHidden:!1},o&&(o.__r3f=d)),d}function Ii(a,l){if(!l.includes("-"))return{root:a,key:l,target:a[l]};if(l in a)return{root:a,key:l,target:a[l]};let s=a;const u=l.split("-");for(const o of u){if(typeof s!="object"||s===null){if(s!==void 0){const d=u.slice(u.indexOf(o)).join("-");return{root:s,key:d,target:void 0}}return{root:a,key:l,target:void 0}}l=o,a=s,s=s[l]}return{root:a,key:l,target:s}}const Wf=/-\d+$/;function Js(a,l){if(rt.str(l.props.attach)){if(Wf.test(l.props.attach)){const o=l.props.attach.replace(Wf,""),{root:d,key:g}=Ii(a.object,o);Array.isArray(d[g])||(d[g]=[])}const{root:s,key:u}=Ii(a.object,l.props.attach);l.previousAttach=s[u],s[u]=l.object}else rt.fun(l.props.attach)&&(l.previousAttach=l.props.attach(a.object,l.object))}function Ws(a,l){if(rt.str(l.props.attach)){const{root:s,key:u}=Ii(a.object,l.props.attach),o=l.previousAttach;o===void 0?delete s[u]:s[u]=o}else l.previousAttach==null||l.previousAttach(a.object,l.object);delete l.previousAttach}const Pu=[...Vd,"args","dispose","attach","object","onUpdate","dispose"],kf=new Map;function Hm(a){let l=kf.get(a.constructor);try{l||(l=new a.constructor,kf.set(a.constructor,l))}catch{}return l}function wm(a,l){const s={};for(const u in l)if(!Pu.includes(u)&&!rt.equ(l[u],a.props[u])){s[u]=l[u];for(const o in l)o.startsWith(`${u}-`)&&(s[o]=l[o])}for(const u in a.props){if(Pu.includes(u)||l.hasOwnProperty(u))continue;const{root:o,key:d}=Ii(a.object,u);if(o.constructor&&o.constructor.length===0){const g=Hm(o);rt.und(g)||(s[d]=g[d])}else s[d]=0}return s}const jm=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Gm=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Pa(a,l){var s;const u=a.__r3f,o=u&&jd(u).getState(),d=u?.eventCount;for(const m in l){let h=l[m];if(Pu.includes(m))continue;if(u&&Gm.test(m)){typeof h=="function"?u.handlers[m]=h:delete u.handlers[m],u.eventCount=Object.keys(u.handlers).length;continue}if(h===void 0)continue;let{root:y,key:E,target:S}=Ii(a,m);if(S===void 0&&(typeof y!="object"||y===null))throw Error(`R3F: Cannot set "${m}". Ensure it is an object before setting "${E}".`);if(S instanceof Nf&&h instanceof Nf)S.mask=h.mask;else if(S instanceof Wi&&zm(h))S.set(h);else if(S!==null&&typeof S=="object"&&typeof S.set=="function"&&typeof S.copy=="function"&&h!=null&&h.constructor&&S.constructor===h.constructor)S.copy(h);else if(S!==null&&typeof S=="object"&&typeof S.set=="function"&&Array.isArray(h))typeof S.fromArray=="function"?S.fromArray(h):S.set(...h);else if(S!==null&&typeof S=="object"&&typeof S.set=="function"&&typeof h=="number")typeof S.setScalar=="function"?S.setScalar(h):S.set(h);else{var g;y[E]=h,o&&!o.linear&&jm.includes(E)&&(g=y[E])!=null&&g.isTexture&&y[E].format===si&&y[E].type===Ha&&(y[E].colorSpace=_t)}}if(u!=null&&u.parent&&o!=null&&o.internal&&(s=u.object)!=null&&s.isObject3D&&d!==u.eventCount){const m=u.object,h=o.internal.interaction.indexOf(m);h>-1&&o.internal.interaction.splice(h,1),u.eventCount&&m.raycast!==null&&o.internal.interaction.push(m)}return u&&u.props.attach===void 0&&(u.object.isBufferGeometry?u.props.attach="geometry":u.object.isMaterial&&(u.props.attach="material")),u&&oi(u),a}function oi(a){var l;if(!a.parent)return;a.props.onUpdate==null||a.props.onUpdate(a.object);const s=(l=a.root)==null||l.getState==null?void 0:l.getState();s&&s.internal.frames===0&&s.invalidate()}function qd(a,l){a.manual||(Gd(a)?(a.left=l.width/-2,a.right=l.width/2,a.top=l.height/2,a.bottom=l.height/-2):a.aspect=l.width/l.height,a.updateProjectionMatrix())}const Ft=a=>a?.isObject3D;function Ls(a){return(a.eventObject||a.object).uuid+"/"+a.index+a.instanceId}function Zd(a,l,s,u){const o=s.get(l);o&&(s.delete(l),s.size===0&&(a.delete(u),o.target.releasePointerCapture(u)))}function Lm(a,l){const{internal:s}=a.getState();s.interaction=s.interaction.filter(u=>u!==l),s.initialHits=s.initialHits.filter(u=>u!==l),s.hovered.forEach((u,o)=>{(u.eventObject===l||u.object===l)&&s.hovered.delete(o)}),s.capturedMap.forEach((u,o)=>{Zd(s.capturedMap,l,u,o)})}function Vm(a){function l(h){const{internal:y}=a.getState(),E=h.offsetX-y.initialClick[0],S=h.offsetY-y.initialClick[1];return Math.round(Math.sqrt(E*E+S*S))}function s(h){return h.filter(y=>["Move","Over","Enter","Out","Leave"].some(E=>{var S;return(S=y.__r3f)==null?void 0:S.handlers["onPointer"+E]}))}function u(h,y){const E=a.getState(),S=new Set,T=[],x=y?y(E.internal.interaction):E.internal.interaction;for(let U=0;U<x.length;U++){const R=Pl(x[U]);R&&(R.raycaster.camera=void 0)}E.previousRoot||E.events.compute==null||E.events.compute(h,E);function w(U){const R=Pl(U);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var q;R.events.compute==null||R.events.compute(h,R,(q=R.previousRoot)==null?void 0:q.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(U,!0):[]}let Q=x.flatMap(w).sort((U,R)=>{const q=Pl(U.object),P=Pl(R.object);return!q||!P?U.distance-R.distance:P.events.priority-q.events.priority||U.distance-R.distance}).filter(U=>{const R=Ls(U);return S.has(R)?!1:(S.add(R),!0)});E.events.filter&&(Q=E.events.filter(Q,E));for(const U of Q){let R=U.object;for(;R;){var Y;(Y=R.__r3f)!=null&&Y.eventCount&&T.push({...U,eventObject:R}),R=R.parent}}if("pointerId"in h&&E.internal.capturedMap.has(h.pointerId))for(let U of E.internal.capturedMap.get(h.pointerId).values())S.has(Ls(U.intersection))||T.push(U.intersection);return T}function o(h,y,E,S){if(h.length){const T={stopped:!1};for(const x of h){let w=Pl(x.object);if(w||x.object.traverseAncestors(Q=>{const Y=Pl(Q);if(Y)return w=Y,!1}),w){const{raycaster:Q,pointer:Y,camera:U,internal:R}=w,q=new ft(Y.x,Y.y,0).unproject(U),P=G=>{var V,se;return(V=(se=R.capturedMap.get(G))==null?void 0:se.has(x.eventObject))!=null?V:!1},X=G=>{const V={intersection:x,target:y.target};R.capturedMap.has(G)?R.capturedMap.get(G).set(x.eventObject,V):R.capturedMap.set(G,new Map([[x.eventObject,V]])),y.target.setPointerCapture(G)},j=G=>{const V=R.capturedMap.get(G);V&&Zd(R.capturedMap,x.eventObject,V,G)};let ue={};for(let G in y){let V=y[G];typeof V!="function"&&(ue[G]=V)}let O={...x,...ue,pointer:Y,intersections:h,stopped:T.stopped,delta:E,unprojectedPoint:q,ray:Q.ray,camera:U,stopPropagation(){const G="pointerId"in y&&R.capturedMap.get(y.pointerId);if((!G||G.has(x.eventObject))&&(O.stopped=T.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(V=>V.eventObject===x.eventObject))){const V=h.slice(0,h.indexOf(x));d([...V,x])}},target:{hasPointerCapture:P,setPointerCapture:X,releasePointerCapture:j},currentTarget:{hasPointerCapture:P,setPointerCapture:X,releasePointerCapture:j},nativeEvent:y};if(S(O),T.stopped===!0)break}}}return h}function d(h){const{internal:y}=a.getState();for(const E of y.hovered.values())if(!h.length||!h.find(S=>S.object===E.object&&S.index===E.index&&S.instanceId===E.instanceId)){const T=E.eventObject.__r3f;if(y.hovered.delete(Ls(E)),T!=null&&T.eventCount){const x=T.handlers,w={...E,intersections:h};x.onPointerOut==null||x.onPointerOut(w),x.onPointerLeave==null||x.onPointerLeave(w)}}}function g(h,y){for(let E=0;E<y.length;E++){const S=y[E].__r3f;S==null||S.handlers.onPointerMissed==null||S.handlers.onPointerMissed(h)}}function m(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>d([]);case"onLostPointerCapture":return y=>{const{internal:E}=a.getState();"pointerId"in y&&E.capturedMap.has(y.pointerId)&&requestAnimationFrame(()=>{E.capturedMap.has(y.pointerId)&&(E.capturedMap.delete(y.pointerId),d([]))})}}return function(E){const{onPointerMissed:S,internal:T}=a.getState();T.lastEvent.current=E;const x=h==="onPointerMove",w=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",Y=u(E,x?s:void 0),U=w?l(E):0;h==="onPointerDown"&&(T.initialClick=[E.offsetX,E.offsetY],T.initialHits=Y.map(q=>q.eventObject)),w&&!Y.length&&U<=2&&(g(E,T.interaction),S&&S(E)),x&&d(Y);function R(q){const P=q.eventObject,X=P.__r3f;if(!(X!=null&&X.eventCount))return;const j=X.handlers;if(x){if(j.onPointerOver||j.onPointerEnter||j.onPointerOut||j.onPointerLeave){const ue=Ls(q),O=T.hovered.get(ue);O?O.stopped&&q.stopPropagation():(T.hovered.set(ue,q),j.onPointerOver==null||j.onPointerOver(q),j.onPointerEnter==null||j.onPointerEnter(q))}j.onPointerMove==null||j.onPointerMove(q)}else{const ue=j[h];ue?(!w||T.initialHits.includes(P))&&(g(E,T.interaction.filter(O=>!T.initialHits.includes(O))),ue(q)):w&&T.initialHits.includes(P)&&g(E,T.interaction.filter(O=>!T.initialHits.includes(O)))}}o(Y,E,U,R)}}return{handlePointer:m}}const $f=a=>!!(a!=null&&a.render),uc=L.createContext(null),qm=(a,l)=>{const s=Cd((m,h)=>{const y=new ft,E=new ft,S=new ft;function T(U=h().camera,R=E,q=h().size){const{width:P,height:X,top:j,left:ue}=q,O=P/X;R.isVector3?S.copy(R):S.set(...R);const G=U.getWorldPosition(y).distanceTo(S);if(Gd(U))return{width:P/U.zoom,height:X/U.zoom,top:j,left:ue,factor:1,distance:G,aspect:O};{const V=U.fov*Math.PI/180,se=2*Math.tan(V/2)*G,pe=se*(P/X);return{width:pe,height:se,top:j,left:ue,factor:P/pe,distance:G,aspect:O}}}let x;const w=U=>m(R=>({performance:{...R.performance,current:U}})),Q=new Ke;return{set:m,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(U=1)=>a(h(),U),advance:(U,R)=>l(U,R,h()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Tp,pointer:Q,mouse:Q,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const U=h();x&&clearTimeout(x),U.performance.current!==U.performance.min&&w(U.performance.min),x=setTimeout(()=>w(h().performance.max),U.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:T},setEvents:U=>m(R=>({...R,events:{...R.events,...U}})),setSize:(U,R,q=0,P=0)=>{const X=h().camera,j={width:U,height:R,top:q,left:P};m(ue=>({size:j,viewport:{...ue.viewport,...T(X,E,j)}}))},setDpr:U=>m(R=>{const q=Ld(U);return{viewport:{...R.viewport,dpr:q,initialDpr:R.viewport.initialDpr||q}}}),setFrameloop:(U="always")=>{const R=h().clock;R.stop(),R.elapsedTime=0,U!=="never"&&(R.start(),R.elapsedTime=0),m(()=>({frameloop:U}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:L.createRef(),active:!1,frames:0,priority:0,subscribe:(U,R,q)=>{const P=h().internal;return P.priority=P.priority+(R>0?1:0),P.subscribers.push({ref:U,priority:R,store:q}),P.subscribers=P.subscribers.sort((X,j)=>X.priority-j.priority),()=>{const X=h().internal;X!=null&&X.subscribers&&(X.priority=X.priority-(R>0?1:0),X.subscribers=X.subscribers.filter(j=>j.ref!==U))}}}}}),u=s.getState();let o=u.size,d=u.viewport.dpr,g=u.camera;return s.subscribe(()=>{const{camera:m,size:h,viewport:y,gl:E,set:S}=s.getState();if(h.width!==o.width||h.height!==o.height||y.dpr!==d){o=h,d=y.dpr,qd(m,h),y.dpr>0&&E.setPixelRatio(y.dpr);const T=typeof HTMLCanvasElement<"u"&&E.domElement instanceof HTMLCanvasElement;E.setSize(h.width,h.height,T)}m!==g&&(g=m,S(T=>({viewport:{...T.viewport,...T.viewport.getCurrentViewport(m)}})))}),s.subscribe(m=>a(m)),s};function cc(){const a=L.useContext(uc);if(!a)throw new Error("R3F: Hooks can only be used within the Canvas component!");return a}function Ct(a=s=>s,l){return cc()(a,l)}function yl(a,l=0){const s=cc(),u=s.getState().internal.subscribe,o=rc(a);return $i(()=>u(o,l,s),[l,u,s]),null}const ed=new WeakMap,Zm=a=>{var l;return typeof a=="function"&&(a==null||(l=a.prototype)==null?void 0:l.constructor)===a};function Yd(a,l){return function(s,...u){let o;return Zm(s)?(o=ed.get(s),o||(o=new s,ed.set(s,o))):o=s,a&&a(o),Promise.all(u.map(d=>new Promise((g,m)=>o.load(d,h=>{Ft(h?.scene)&&Object.assign(h,Dm(h.scene)),g(h)},l,h=>m(new Error(`Could not load ${d}: ${h?.message}`))))))}}function ri(a,l,s,u){const o=Array.isArray(l)?l:[l],d=pm(Yd(s,u),[a,...o],{equal:rt.equ});return Array.isArray(l)?d:d[0]}ri.preload=function(a,l,s){const u=Array.isArray(l)?l:[l];return mm(Yd(s),[a,...u])};ri.clear=function(a,l){const s=Array.isArray(l)?l:[l];return gm([a,...s])};function Ym(a){const l=Tm(a);return l.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:L.version}),l}const Fd=0,ui={},Fm=/^three(?=[A-Z])/,nr=a=>`${a[0].toUpperCase()}${a.slice(1)}`;let Xm=0;const Qm=a=>typeof a=="function";function oc(a){if(Qm(a)){const l=`${Xm++}`;return ui[l]=a,l}else Object.assign(ui,a)}function Xd(a,l){const s=nr(a),u=ui[s];if(a!=="primitive"&&!u)throw new Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(a==="primitive"&&!l.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(l.args!==void 0&&!Array.isArray(l.args))throw new Error("R3F: The args prop must be an array!")}function Km(a,l,s){var u;return a=nr(a)in ui?a:a.replace(Fm,""),Xd(a,l),a==="primitive"&&(u=l.object)!=null&&u.__r3f&&delete l.object.__r3f,Ps(l.object,s,a,l)}function Im(a){if(!a.isHidden){var l;a.props.attach&&(l=a.parent)!=null&&l.object?Ws(a.parent,a):Ft(a.object)&&(a.object.visible=!1),a.isHidden=!0,oi(a)}}function Qd(a){if(a.isHidden){var l;a.props.attach&&(l=a.parent)!=null&&l.object?Js(a.parent,a):Ft(a.object)&&a.props.visible!==!1&&(a.object.visible=!0),a.isHidden=!1,oi(a)}}function fc(a,l,s){const u=l.root.getState();if(!(!a.parent&&a.object!==u.scene)){if(!l.object){var o,d;const g=ui[nr(l.type)];l.object=(o=l.props.object)!=null?o:new g(...(d=l.props.args)!=null?d:[]),l.object.__r3f=l}if(Pa(l.object,l.props),l.props.attach)Js(a,l);else if(Ft(l.object)&&Ft(a.object)){const g=a.object.children.indexOf(s?.object);if(s&&g!==-1){const m=a.object.children.indexOf(l.object);if(m!==-1){a.object.children.splice(m,1);const h=m<g?g-1:g;a.object.children.splice(h,0,l.object)}else l.object.parent=a.object,a.object.children.splice(g,0,l.object),l.object.dispatchEvent({type:"added"}),a.object.dispatchEvent({type:"childadded",child:l.object})}else a.object.add(l.object)}for(const g of l.children)fc(l,g);oi(l)}}function ju(a,l){l&&(l.parent=a,a.children.push(l),fc(a,l))}function td(a,l,s){if(!l||!s)return;l.parent=a;const u=a.children.indexOf(s);u!==-1?a.children.splice(u,0,l):a.children.push(l),fc(a,l,s)}function Kd(a){if(typeof a.dispose=="function"){const l=()=>{try{a.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?l():Jf.unstable_scheduleCallback(Jf.unstable_IdlePriority,l)}}function Ju(a,l,s){if(!l)return;l.parent=null;const u=a.children.indexOf(l);u!==-1&&a.children.splice(u,1),l.props.attach?Ws(a,l):Ft(l.object)&&Ft(a.object)&&(a.object.remove(l.object),Lm(jd(l),l.object));const o=l.props.dispose!==null&&s!==!1;for(let d=l.children.length-1;d>=0;d--){const g=l.children[d];Ju(l,g,o)}l.children.length=0,delete l.object.__r3f,o&&l.type!=="primitive"&&l.object.type!=="Scene"&&Kd(l.object),s===void 0&&oi(l)}function Pm(a,l){for(const s of[a,a.alternate])if(s!==null)if(typeof s.ref=="function"){s.refCleanup==null||s.refCleanup();const u=s.ref(l);typeof u=="function"&&(s.refCleanup=u)}else s.ref&&(s.ref.current=l)}const Qs=[];function Jm(){for(const[s]of Qs){const u=s.parent;if(u){s.props.attach?Ws(u,s):Ft(s.object)&&Ft(u.object)&&u.object.remove(s.object);for(const o of s.children)o.props.attach?Ws(s,o):Ft(o.object)&&Ft(s.object)&&s.object.remove(o.object)}s.isHidden&&Qd(s),s.object.__r3f&&delete s.object.__r3f,s.type!=="primitive"&&Kd(s.object)}for(const[s,u,o]of Qs){s.props=u;const d=s.parent;if(d){var a,l;const g=ui[nr(s.type)];s.object=(a=s.props.object)!=null?a:new g(...(l=s.props.args)!=null?l:[]),s.object.__r3f=s,Pm(o,s.object),Pa(s.object,s.props),s.props.attach?Js(d,s):Ft(s.object)&&Ft(d.object)&&d.object.add(s.object);for(const m of s.children)m.props.attach?Js(s,m):Ft(m.object)&&Ft(s.object)&&s.object.add(m.object);oi(s)}}Qs.length=0}const Gu=()=>{},ad={};let Vs=Fd;const Wm=0,km=4,ks=Ym({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Km,removeChild:Ju,appendChild:ju,appendInitialChild:ju,insertBefore:td,appendChildToContainer(a,l){const s=a.getState().scene.__r3f;!l||!s||ju(s,l)},removeChildFromContainer(a,l){const s=a.getState().scene.__r3f;!l||!s||Ju(s,l)},insertInContainerBefore(a,l,s){const u=a.getState().scene.__r3f;!l||!s||!u||td(u,l,s)},getRootHostContext:()=>ad,getChildHostContext:()=>ad,commitUpdate(a,l,s,u,o){var d,g,m;Xd(l,u);let h=!1;if((a.type==="primitive"&&s.object!==u.object||((d=u.args)==null?void 0:d.length)!==((g=s.args)==null?void 0:g.length)||(m=u.args)!=null&&m.some((E,S)=>{var T;return E!==((T=s.args)==null?void 0:T[S])}))&&(h=!0),h)Qs.push([a,{...u},o]);else{const E=wm(a,u);Object.keys(E).length&&(Object.assign(a.props,E),Pa(a.object,E))}(o.sibling===null||(o.flags&km)===Wm)&&Jm()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:a=>a?.object,prepareForCommit:()=>null,preparePortalMount:a=>Ps(a.getState().scene,a,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Im,unhideInstance:Qd,createTextInstance:Gu,hideTextInstance:Gu,unhideTextInstance:Gu,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:L.createContext(null),setCurrentUpdatePriority(a){Vs=a},getCurrentUpdatePriority(){return Vs},resolveUpdatePriority(){var a;if(Vs!==Fd)return Vs;switch(typeof window<"u"&&((a=window.event)==null?void 0:a.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Xs.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Xs.ContinuousEventPriority;default:return Xs.DefaultEventPriority}},resetFormInstance(){}}),gl=new Map,Jl={objects:"shallow",strict:!1};function $m(a,l){if(!l&&typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&a.parentElement){const{width:s,height:u,top:o,left:d}=a.parentElement.getBoundingClientRect();return{width:s,height:u,top:o,left:d}}else if(!l&&typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas)return{width:a.width,height:a.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...l}}function e0(a){const l=gl.get(a),s=l?.fiber,u=l?.store;l&&console.warn("R3F.createRoot should only be called once!");const o=typeof reportError=="function"?reportError:console.error,d=u||qm($u,ld),g=s||ks.createContainer(d,Xs.ConcurrentRoot,null,!1,null,"",o,o,o,null);l||gl.set(a,{fiber:g,store:d});let m,h,y=!1,E=null;return{async configure(S={}){let T;E=new Promise(_e=>T=_e);let{gl:x,size:w,scene:Q,events:Y,onCreated:U,shadows:R=!1,linear:q=!1,flat:P=!1,legacy:X=!1,orthographic:j=!1,frameloop:ue="always",dpr:O=[1,2],performance:G,raycaster:V,camera:se,onPointerMissed:pe}=S,ee=d.getState(),le=ee.gl;if(!ee.gl){const _e={canvas:a,powerPreference:"high-performance",antialias:!0,alpha:!0},ge=typeof x=="function"?await x(_e):x;$f(ge)?le=ge:le=new Ed({..._e,...x}),ee.set({gl:le})}let Se=ee.raycaster;Se||ee.set({raycaster:Se=new bd});const{params:F,...oe}=V||{};if(rt.equ(oe,Se,Jl)||Pa(Se,{...oe}),rt.equ(F,Se.params,Jl)||Pa(Se,{params:{...Se.params,...F}}),!ee.camera||ee.camera===h&&!rt.equ(h,se,Jl)){h=se;const _e=se?.isCamera,ge=_e?se:j?new ni(0,0,0,0,.1,1e3):new Zi(75,0,.1,1e3);_e||(ge.position.z=5,se&&(Pa(ge,se),ge.manual||("aspect"in se||"left"in se||"right"in se||"bottom"in se||"top"in se)&&(ge.manual=!0,ge.updateProjectionMatrix())),!ee.camera&&!(se!=null&&se.rotation)&&ge.lookAt(0,0,0)),ee.set({camera:ge}),Se.camera=ge}if(!ee.scene){let _e;Q!=null&&Q.isScene?(_e=Q,Ps(_e,d,"",{})):(_e=new Qi,Ps(_e,d,"",{}),Q&&Pa(_e,Q)),ee.set({scene:_e})}Y&&!ee.events.handlers&&ee.set({events:Y(d)});const he=$m(a,w);if(rt.equ(he,ee.size,Jl)||ee.setSize(he.width,he.height,he.top,he.left),O&&ee.viewport.dpr!==Ld(O)&&ee.setDpr(O),ee.frameloop!==ue&&ee.setFrameloop(ue),ee.onPointerMissed||ee.set({onPointerMissed:pe}),G&&!rt.equ(G,ee.performance,Jl)&&ee.set(_e=>({performance:{..._e.performance,...G}})),!ee.xr){var me;const _e=(ze,ut)=>{const Oe=d.getState();Oe.frameloop!=="never"&&ld(ze,!0,Oe,ut)},ge=()=>{const ze=d.getState();ze.gl.xr.enabled=ze.gl.xr.isPresenting,ze.gl.xr.setAnimationLoop(ze.gl.xr.isPresenting?_e:null),ze.gl.xr.isPresenting||$u(ze)},Ne={connect(){const ze=d.getState().gl;ze.xr.addEventListener("sessionstart",ge),ze.xr.addEventListener("sessionend",ge)},disconnect(){const ze=d.getState().gl;ze.xr.removeEventListener("sessionstart",ge),ze.xr.removeEventListener("sessionend",ge)}};typeof((me=le.xr)==null?void 0:me.addEventListener)=="function"&&Ne.connect(),ee.set({xr:Ne})}if(le.shadowMap){const _e=le.shadowMap.enabled,ge=le.shadowMap.type;if(le.shadowMap.enabled=!!R,rt.boo(R))le.shadowMap.type=Ru;else if(rt.str(R)){var ve;const Ne={basic:Ep,percentage:Sp,soft:Ru,variance:yp};le.shadowMap.type=(ve=Ne[R])!=null?ve:Ru}else rt.obj(R)&&Object.assign(le.shadowMap,R);(_e!==le.shadowMap.enabled||ge!==le.shadowMap.type)&&(le.shadowMap.needsUpdate=!0)}return bp.enabled=!X,y||(le.outputColorSpace=q?ii:_t,le.toneMapping=P?Td:_d),ee.legacy!==X&&ee.set(()=>({legacy:X})),ee.linear!==q&&ee.set(()=>({linear:q})),ee.flat!==P&&ee.set(()=>({flat:P})),x&&!rt.fun(x)&&!$f(x)&&!rt.equ(x,le,Jl)&&Pa(le,x),m=U,y=!0,T(),this},render(S){return!y&&!E&&this.configure(),E.then(()=>{ks.updateContainer(Ee.jsx(t0,{store:d,children:S,onCreated:m,rootElement:a}),g,null,()=>{})}),d},unmount(){Id(a)}}}function t0({store:a,children:l,onCreated:s,rootElement:u}){return $i(()=>{const o=a.getState();o.set(d=>({internal:{...d.internal,active:!0}})),s&&s(o),a.getState().events.connected||o.events.connect==null||o.events.connect(u)},[]),Ee.jsx(uc.Provider,{value:a,children:l})}function Id(a,l){const s=gl.get(a),u=s?.fiber;if(u){const o=s?.store.getState();o&&(o.internal.active=!1),ks.updateContainer(null,u,null,()=>{o&&setTimeout(()=>{try{var d,g,m,h;o.events.disconnect==null||o.events.disconnect(),(d=o.gl)==null||(g=d.renderLists)==null||g.dispose==null||g.dispose(),(m=o.gl)==null||m.forceContextLoss==null||m.forceContextLoss(),(h=o.gl)!=null&&h.xr&&o.xr.disconnect(),Om(o.scene),gl.delete(a)}catch{}},500)})}}function a0(a,l,s){return Ee.jsx(n0,{children:a,container:l,state:s})}function n0({state:a={},children:l,container:s}){const{events:u,size:o,...d}=a,g=cc(),[m]=L.useState(()=>new bd),[h]=L.useState(()=>new Ke),y=rc((S,T)=>{let x;if(T.camera&&o){const w=T.camera;x=S.viewport.getCurrentViewport(w,new ft,o),w!==S.camera&&qd(w,o)}return{...S,...T,scene:s,raycaster:m,pointer:h,mouse:h,previousRoot:g,events:{...S.events,...T.events,...u},size:{...S.size,...o},viewport:{...S.viewport,...x},setEvents:w=>T.set(Q=>({...Q,events:{...Q.events,...w}}))}}),E=L.useMemo(()=>{const S=Cd((x,w)=>({...d,set:x,get:w})),T=x=>S.setState(w=>y.current(x,w));return T(g.getState()),g.subscribe(T),S},[g,s]);return Ee.jsx(Ee.Fragment,{children:ks.createPortal(Ee.jsx(uc.Provider,{value:E,children:l}),E,null)})}const l0=new Set,i0=new Set,s0=new Set;function Lu(a,l){if(a.size)for(const{callback:s}of a.values())s(l)}function Yi(a,l){switch(a){case"before":return Lu(l0,l);case"after":return Lu(i0,l);case"tail":return Lu(s0,l)}}let Vu,qu;function Wu(a,l,s){let u=l.clock.getDelta();l.frameloop==="never"&&typeof a=="number"&&(u=a-l.clock.elapsedTime,l.clock.oldTime=l.clock.elapsedTime,l.clock.elapsedTime=a),Vu=l.internal.subscribers;for(let o=0;o<Vu.length;o++)qu=Vu[o],qu.ref.current(qu.store.getState(),u,s);return!l.internal.priority&&l.gl.render&&l.gl.render(l.scene,l.camera),l.internal.frames=Math.max(0,l.internal.frames-1),l.frameloop==="always"?1:l.internal.frames}let $s=!1,ku=!1,Zu,nd,Wl;function Pd(a){nd=requestAnimationFrame(Pd),$s=!0,Zu=0,Yi("before",a),ku=!0;for(const s of gl.values()){var l;Wl=s.store.getState(),Wl.internal.active&&(Wl.frameloop==="always"||Wl.internal.frames>0)&&!((l=Wl.gl.xr)!=null&&l.isPresenting)&&(Zu+=Wu(a,Wl))}if(ku=!1,Yi("after",a),Zu===0)return Yi("tail",a),$s=!1,cancelAnimationFrame(nd)}function $u(a,l=1){var s;if(!a)return gl.forEach(u=>$u(u.store.getState(),l));(s=a.gl.xr)!=null&&s.isPresenting||!a.internal.active||a.frameloop==="never"||(l>1?a.internal.frames=Math.min(60,a.internal.frames+l):ku?a.internal.frames=2:a.internal.frames=1,$s||($s=!0,requestAnimationFrame(Pd)))}function ld(a,l=!0,s,u){if(l&&Yi("before",a),s)Wu(a,s,u);else for(const o of gl.values())Wu(a,o.store.getState());l&&Yi("after",a)}const Yu={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function r0(a){const{handlePointer:l}=Vm(a);return{priority:1,enabled:!0,compute(s,u,o){u.pointer.set(s.offsetX/u.size.width*2-1,-(s.offsetY/u.size.height)*2+1),u.raycaster.setFromCamera(u.pointer,u.camera)},connected:void 0,handlers:Object.keys(Yu).reduce((s,u)=>({...s,[u]:l(u)}),{}),update:()=>{var s;const{events:u,internal:o}=a.getState();(s=o.lastEvent)!=null&&s.current&&u.handlers&&u.handlers.onPointerMove(o.lastEvent.current)},connect:s=>{const{set:u,events:o}=a.getState();if(o.disconnect==null||o.disconnect(),u(d=>({events:{...d.events,connected:s}})),o.handlers)for(const d in o.handlers){const g=o.handlers[d],[m,h]=Yu[d];s.addEventListener(m,g,{passive:h})}},disconnect:()=>{const{set:s,events:u}=a.getState();if(u.connected){if(u.handlers)for(const o in u.handlers){const d=u.handlers[o],[g]=Yu[o];u.connected.removeEventListener(g,d)}s(o=>({events:{...o.events,connected:void 0}}))}}}}function id(a,l){let s;return(...u)=>{window.clearTimeout(s),s=window.setTimeout(()=>a(...u),l)}}function u0({debounce:a,scroll:l,polyfill:s,offsetSize:u}={debounce:0,scroll:!1,offsetSize:!1}){const o=s||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[d,g]=L.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),m=L.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:d,orientationHandler:null}),h=a?typeof a=="number"?a:a.scroll:null,y=a?typeof a=="number"?a:a.resize:null,E=L.useRef(!1);L.useEffect(()=>(E.current=!0,()=>void(E.current=!1)));const[S,T,x]=L.useMemo(()=>{const U=()=>{if(!m.current.element)return;const{left:R,top:q,width:P,height:X,bottom:j,right:ue,x:O,y:G}=m.current.element.getBoundingClientRect(),V={left:R,top:q,width:P,height:X,bottom:j,right:ue,x:O,y:G};m.current.element instanceof HTMLElement&&u&&(V.height=m.current.element.offsetHeight,V.width=m.current.element.offsetWidth),Object.freeze(V),E.current&&!d0(m.current.lastBounds,V)&&g(m.current.lastBounds=V)};return[U,y?id(U,y):U,h?id(U,h):U]},[g,u,h,y]);function w(){m.current.scrollContainers&&(m.current.scrollContainers.forEach(U=>U.removeEventListener("scroll",x,!0)),m.current.scrollContainers=null),m.current.resizeObserver&&(m.current.resizeObserver.disconnect(),m.current.resizeObserver=null),m.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",m.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",m.current.orientationHandler))}function Q(){m.current.element&&(m.current.resizeObserver=new o(x),m.current.resizeObserver.observe(m.current.element),l&&m.current.scrollContainers&&m.current.scrollContainers.forEach(U=>U.addEventListener("scroll",x,{capture:!0,passive:!0})),m.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",m.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",m.current.orientationHandler))}const Y=U=>{!U||U===m.current.element||(w(),m.current.element=U,m.current.scrollContainers=Jd(U),Q())};return o0(x,!!l),c0(T),L.useEffect(()=>{w(),Q()},[l,x,T]),L.useEffect(()=>w,[]),[Y,d,S]}function c0(a){L.useEffect(()=>{const l=a;return window.addEventListener("resize",l),()=>void window.removeEventListener("resize",l)},[a])}function o0(a,l){L.useEffect(()=>{if(l){const s=a;return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)}},[a,l])}function Jd(a){const l=[];if(!a||a===document.body)return l;const{overflow:s,overflowX:u,overflowY:o}=window.getComputedStyle(a);return[s,u,o].some(d=>d==="auto"||d==="scroll")&&l.push(a),[...l,...Jd(a.parentElement)]}const f0=["x","y","top","bottom","left","right","width","height"],d0=(a,l)=>f0.every(s=>a[s]===l[s]);function h0({ref:a,children:l,fallback:s,resize:u,style:o,gl:d,events:g=r0,eventSource:m,eventPrefix:h,shadows:y,linear:E,flat:S,legacy:T,orthographic:x,frameloop:w,dpr:Q,performance:Y,raycaster:U,camera:R,scene:q,onPointerMissed:P,onCreated:X,...j}){L.useMemo(()=>oc(_p),[]);const ue=Um(),[O,G]=u0({scroll:!0,debounce:{scroll:50,resize:0},...u}),V=L.useRef(null),se=L.useRef(null);L.useImperativeHandle(a,()=>V.current);const pe=rc(P),[ee,le]=L.useState(!1),[Se,F]=L.useState(!1);if(ee)throw ee;if(Se)throw Se;const oe=L.useRef(null);$i(()=>{const me=V.current;if(G.width>0&&G.height>0&&me){oe.current||(oe.current=e0(me));async function ve(){await oe.current.configure({gl:d,scene:q,events:g,shadows:y,linear:E,flat:S,legacy:T,orthographic:x,frameloop:w,dpr:Q,performance:Y,raycaster:U,camera:R,size:G,onPointerMissed:(..._e)=>pe.current==null?void 0:pe.current(..._e),onCreated:_e=>{_e.events.connect==null||_e.events.connect(m?Am(m)?m.current:m:se.current),h&&_e.setEvents({compute:(ge,Ne)=>{const ze=ge[h+"X"],ut=ge[h+"Y"];Ne.pointer.set(ze/Ne.size.width*2-1,-(ut/Ne.size.height)*2+1),Ne.raycaster.setFromCamera(Ne.pointer,Ne.camera)}}),X?.(_e)}}),oe.current.render(Ee.jsx(ue,{children:Ee.jsx(Nm,{set:F,children:Ee.jsx(L.Suspense,{fallback:Ee.jsx(Cm,{set:le}),children:l??null})})}))}ve()}}),L.useEffect(()=>{const me=V.current;if(me)return()=>Id(me)},[]);const he=m?"none":"auto";return Ee.jsx("div",{ref:se,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:he,...o},...j,children:Ee.jsx("div",{ref:O,style:{width:"100%",height:"100%"},children:Ee.jsx("canvas",{ref:V,style:{display:"block"},children:s})})})}function v0(a){return Ee.jsx(Hd,{children:Ee.jsx(h0,{...a})})}function er(){return er=Object.assign?Object.assign.bind():function(a){for(var l=1;l<arguments.length;l++){var s=arguments[l];for(var u in s)({}).hasOwnProperty.call(s,u)&&(a[u]=s[u])}return a},er.apply(null,arguments)}const Wd=parseInt(ar.replace(/\D+/g,""));var Ma=Uint8Array,Zn=Uint16Array,ec=Uint32Array,kd=new Ma([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$d=new Ma([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),p0=new Ma([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eh=function(a,l){for(var s=new Zn(31),u=0;u<31;++u)s[u]=l+=1<<a[u-1];for(var o=new ec(s[30]),u=1;u<30;++u)for(var d=s[u];d<s[u+1];++d)o[d]=d-s[u]<<5|u;return[s,o]},th=eh(kd,2),ah=th[0],m0=th[1];ah[28]=258,m0[258]=28;var g0=eh($d,0),y0=g0[0],tc=new Zn(32768);for(var st=0;st<32768;++st){var Gn=(st&43690)>>>1|(st&21845)<<1;Gn=(Gn&52428)>>>2|(Gn&13107)<<2,Gn=(Gn&61680)>>>4|(Gn&3855)<<4,tc[st]=((Gn&65280)>>>8|(Gn&255)<<8)>>>1}var Fi=(function(a,l,s){for(var u=a.length,o=0,d=new Zn(l);o<u;++o)++d[a[o]-1];var g=new Zn(l);for(o=0;o<l;++o)g[o]=g[o-1]+d[o-1]<<1;var m;if(s){m=new Zn(1<<l);var h=15-l;for(o=0;o<u;++o)if(a[o])for(var y=o<<4|a[o],E=l-a[o],S=g[a[o]-1]++<<E,T=S|(1<<E)-1;S<=T;++S)m[tc[S]>>>h]=y}else for(m=new Zn(u),o=0;o<u;++o)a[o]&&(m[o]=tc[g[a[o]-1]++]>>>15-a[o]);return m}),es=new Ma(288);for(var st=0;st<144;++st)es[st]=8;for(var st=144;st<256;++st)es[st]=9;for(var st=256;st<280;++st)es[st]=7;for(var st=280;st<288;++st)es[st]=8;var nh=new Ma(32);for(var st=0;st<32;++st)nh[st]=5;var S0=Fi(es,9,1),E0=Fi(nh,5,1),Fu=function(a){for(var l=a[0],s=1;s<a.length;++s)a[s]>l&&(l=a[s]);return l},Oa=function(a,l,s){var u=l/8|0;return(a[u]|a[u+1]<<8)>>(l&7)&s},Xu=function(a,l){var s=l/8|0;return(a[s]|a[s+1]<<8|a[s+2]<<16)>>(l&7)},b0=function(a){return(a/8|0)+(a&7&&1)},T0=function(a,l,s){(s==null||s>a.length)&&(s=a.length);var u=new(a instanceof Zn?Zn:a instanceof ec?ec:Ma)(s-l);return u.set(a.subarray(l,s)),u},_0=function(a,l,s){var u=a.length;if(!u||s&&!s.l&&u<5)return l||new Ma(0);var o=!l||s,d=!s||s.i;s||(s={}),l||(l=new Ma(u*3));var g=function(Oe){var Nt=l.length;if(Oe>Nt){var bt=new Ma(Math.max(Nt*2,Oe));bt.set(l),l=bt}},m=s.f||0,h=s.p||0,y=s.b||0,E=s.l,S=s.d,T=s.m,x=s.n,w=u*8;do{if(!E){s.f=m=Oa(a,h,1);var Q=Oa(a,h+1,3);if(h+=3,Q)if(Q==1)E=S0,S=E0,T=9,x=5;else if(Q==2){var q=Oa(a,h,31)+257,P=Oa(a,h+10,15)+4,X=q+Oa(a,h+5,31)+1;h+=14;for(var j=new Ma(X),ue=new Ma(19),O=0;O<P;++O)ue[p0[O]]=Oa(a,h+O*3,7);h+=P*3;for(var G=Fu(ue),V=(1<<G)-1,se=Fi(ue,G,1),O=0;O<X;){var pe=se[Oa(a,h,V)];h+=pe&15;var Y=pe>>>4;if(Y<16)j[O++]=Y;else{var ee=0,le=0;for(Y==16?(le=3+Oa(a,h,3),h+=2,ee=j[O-1]):Y==17?(le=3+Oa(a,h,7),h+=3):Y==18&&(le=11+Oa(a,h,127),h+=7);le--;)j[O++]=ee}}var Se=j.subarray(0,q),F=j.subarray(q);T=Fu(Se),x=Fu(F),E=Fi(Se,T,1),S=Fi(F,x,1)}else throw"invalid block type";else{var Y=b0(h)+4,U=a[Y-4]|a[Y-3]<<8,R=Y+U;if(R>u){if(d)throw"unexpected EOF";break}o&&g(y+U),l.set(a.subarray(Y,R),y),s.b=y+=U,s.p=h=R*8;continue}if(h>w){if(d)throw"unexpected EOF";break}}o&&g(y+131072);for(var oe=(1<<T)-1,he=(1<<x)-1,me=h;;me=h){var ee=E[Xu(a,h)&oe],ve=ee>>>4;if(h+=ee&15,h>w){if(d)throw"unexpected EOF";break}if(!ee)throw"invalid length/literal";if(ve<256)l[y++]=ve;else if(ve==256){me=h,E=null;break}else{var _e=ve-254;if(ve>264){var O=ve-257,ge=kd[O];_e=Oa(a,h,(1<<ge)-1)+ah[O],h+=ge}var Ne=S[Xu(a,h)&he],ze=Ne>>>4;if(!Ne)throw"invalid distance";h+=Ne&15;var F=y0[ze];if(ze>3){var ge=$d[ze];F+=Xu(a,h)&(1<<ge)-1,h+=ge}if(h>w){if(d)throw"unexpected EOF";break}o&&g(y+131072);for(var ut=y+_e;y<ut;y+=4)l[y]=l[y-F],l[y+1]=l[y+1-F],l[y+2]=l[y+2-F],l[y+3]=l[y+3-F];y=ut}}s.l=E,s.p=me,s.b=y,E&&(m=1,s.m=T,s.d=S,s.n=x)}while(!m);return y==l.length?l:T0(l,0,y)},M0=new Ma(0),x0=function(a){if((a[0]&15)!=8||a[0]>>>4>7||(a[0]<<8|a[1])%31)throw"invalid zlib data";if(a[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function qs(a,l){return _0((x0(a),a.subarray(2,-4)),l)}var R0=typeof TextDecoder<"u"&&new TextDecoder,A0=0;try{R0.decode(M0,{stream:!0}),A0=1}catch{}const z0=a=>a&&a.isCubeTexture;class U0 extends ki{constructor(l,s){var u,o;const d=z0(l),m=((o=d?(u=l.image[0])==null?void 0:u.width:l.image.width)!=null?o:1024)/4,h=Math.floor(Math.log2(m)),y=Math.pow(2,h),E=3*Math.max(y,112),S=4*y,T=[d?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/E}`,`#define CUBEUV_TEXEL_HEIGHT ${1/S}`,`#define CUBEUV_MAX_MIP ${h}.0`],x=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,w=T.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Wd>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,Q={map:{value:l},height:{value:s?.height||15},radius:{value:s?.radius||100}},Y=new Mp(1,16),U=new xa({uniforms:Q,fragmentShader:w,vertexShader:x,side:kl});super(Y,U)}set radius(l){this.material.uniforms.radius.value=l}get radius(){return this.material.uniforms.radius.value}set height(l){this.material.uniforms.height.value=l}get height(){return this.material.uniforms.height.value}}var C0=Object.defineProperty,N0=(a,l,s)=>l in a?C0(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,D0=(a,l,s)=>(N0(a,l+"",s),s);class O0{constructor(){D0(this,"_listeners")}addEventListener(l,s){this._listeners===void 0&&(this._listeners={});const u=this._listeners;u[l]===void 0&&(u[l]=[]),u[l].indexOf(s)===-1&&u[l].push(s)}hasEventListener(l,s){if(this._listeners===void 0)return!1;const u=this._listeners;return u[l]!==void 0&&u[l].indexOf(s)!==-1}removeEventListener(l,s){if(this._listeners===void 0)return;const o=this._listeners[l];if(o!==void 0){const d=o.indexOf(s);d!==-1&&o.splice(d,1)}}dispatchEvent(l){if(this._listeners===void 0)return;const u=this._listeners[l.type];if(u!==void 0){l.target=this;const o=u.slice(0);for(let d=0,g=o.length;d<g;d++)o[d].call(this,l);l.target=null}}}var B0=Object.defineProperty,H0=(a,l,s)=>l in a?B0(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,Te=(a,l,s)=>(H0(a,typeof l!="symbol"?l+"":l,s),s);const Zs=new xp,sd=new Rp,w0=Math.cos(70*(Math.PI/180)),rd=(a,l)=>(a%l+l)%l;let j0=class extends O0{constructor(l,s){super(),Te(this,"object"),Te(this,"domElement"),Te(this,"enabled",!0),Te(this,"target",new ft),Te(this,"minDistance",0),Te(this,"maxDistance",1/0),Te(this,"minZoom",0),Te(this,"maxZoom",1/0),Te(this,"minPolarAngle",0),Te(this,"maxPolarAngle",Math.PI),Te(this,"minAzimuthAngle",-1/0),Te(this,"maxAzimuthAngle",1/0),Te(this,"enableDamping",!1),Te(this,"dampingFactor",.05),Te(this,"enableZoom",!0),Te(this,"zoomSpeed",1),Te(this,"enableRotate",!0),Te(this,"rotateSpeed",1),Te(this,"enablePan",!0),Te(this,"panSpeed",1),Te(this,"screenSpacePanning",!0),Te(this,"keyPanSpeed",7),Te(this,"zoomToCursor",!1),Te(this,"autoRotate",!1),Te(this,"autoRotateSpeed",2),Te(this,"reverseOrbit",!1),Te(this,"reverseHorizontalOrbit",!1),Te(this,"reverseVerticalOrbit",!1),Te(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Te(this,"mouseButtons",{LEFT:Kl.ROTATE,MIDDLE:Kl.DOLLY,RIGHT:Kl.PAN}),Te(this,"touches",{ONE:Il.ROTATE,TWO:Il.DOLLY_PAN}),Te(this,"target0"),Te(this,"position0"),Te(this,"zoom0"),Te(this,"_domElementKeyEvents",null),Te(this,"getPolarAngle"),Te(this,"getAzimuthalAngle"),Te(this,"setPolarAngle"),Te(this,"setAzimuthalAngle"),Te(this,"getDistance"),Te(this,"getZoomScale"),Te(this,"listenToKeyEvents"),Te(this,"stopListenToKeyEvents"),Te(this,"saveState"),Te(this,"reset"),Te(this,"update"),Te(this,"connect"),Te(this,"dispose"),Te(this,"dollyIn"),Te(this,"dollyOut"),Te(this,"getScale"),Te(this,"setScale"),this.object=l,this.domElement=s,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>E.phi,this.getAzimuthalAngle=()=>E.theta,this.setPolarAngle=M=>{let J=rd(M,2*Math.PI),fe=E.phi;fe<0&&(fe+=2*Math.PI),J<0&&(J+=2*Math.PI);let we=Math.abs(J-fe);2*Math.PI-we<we&&(J<fe?J+=2*Math.PI:fe+=2*Math.PI),S.phi=J-fe,u.update()},this.setAzimuthalAngle=M=>{let J=rd(M,2*Math.PI),fe=E.theta;fe<0&&(fe+=2*Math.PI),J<0&&(J+=2*Math.PI);let we=Math.abs(J-fe);2*Math.PI-we<we&&(J<fe?J+=2*Math.PI:fe+=2*Math.PI),S.theta=J-fe,u.update()},this.getDistance=()=>u.object.position.distanceTo(u.target),this.listenToKeyEvents=M=>{M.addEventListener("keydown",yn),this._domElementKeyEvents=M},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",yn),this._domElementKeyEvents=null},this.saveState=()=>{u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},this.reset=()=>{u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(o),u.update(),h=m.NONE},this.update=(()=>{const M=new ft,J=new ft(0,1,0),fe=new Df().setFromUnitVectors(l.up,J),we=fe.clone().invert(),te=new ft,gt=new Df,$t=2*Math.PI;return function(){const In=u.object.position;fe.setFromUnitVectors(l.up,J),we.copy(fe).invert(),M.copy(In).sub(u.target),M.applyQuaternion(fe),E.setFromVector3(M),u.autoRotate&&h===m.NONE&&le(pe()),u.enableDamping?(E.theta+=S.theta*u.dampingFactor,E.phi+=S.phi*u.dampingFactor):(E.theta+=S.theta,E.phi+=S.phi);let Qt=u.minAzimuthAngle,Ot=u.maxAzimuthAngle;isFinite(Qt)&&isFinite(Ot)&&(Qt<-Math.PI?Qt+=$t:Qt>Math.PI&&(Qt-=$t),Ot<-Math.PI?Ot+=$t:Ot>Math.PI&&(Ot-=$t),Qt<=Ot?E.theta=Math.max(Qt,Math.min(Ot,E.theta)):E.theta=E.theta>(Qt+Ot)/2?Math.max(Qt,E.theta):Math.min(Ot,E.theta)),E.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,E.phi)),E.makeSafe(),u.enableDamping===!0?u.target.addScaledVector(x,u.dampingFactor):u.target.add(x),u.zoomToCursor&&G||u.object.isOrthographicCamera?E.radius=Ne(E.radius):E.radius=Ne(E.radius*T),M.setFromSpherical(E),M.applyQuaternion(we),In.copy(u.target).add(M),u.object.matrixAutoUpdate||u.object.updateMatrix(),u.object.lookAt(u.target),u.enableDamping===!0?(S.theta*=1-u.dampingFactor,S.phi*=1-u.dampingFactor,x.multiplyScalar(1-u.dampingFactor)):(S.set(0,0,0),x.set(0,0,0));let ea=!1;if(u.zoomToCursor&&G){let va=null;if(u.object instanceof Zi&&u.object.isPerspectiveCamera){const qa=M.length();va=Ne(qa*T);const tn=qa-va;u.object.position.addScaledVector(ue,tn),u.object.updateMatrixWorld()}else if(u.object.isOrthographicCamera){const qa=new ft(O.x,O.y,0);qa.unproject(u.object),u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/T)),u.object.updateProjectionMatrix(),ea=!0;const tn=new ft(O.x,O.y,0);tn.unproject(u.object),u.object.position.sub(tn).add(qa),u.object.updateMatrixWorld(),va=M.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),u.zoomToCursor=!1;va!==null&&(u.screenSpacePanning?u.target.set(0,0,-1).transformDirection(u.object.matrix).multiplyScalar(va).add(u.object.position):(Zs.origin.copy(u.object.position),Zs.direction.set(0,0,-1).transformDirection(u.object.matrix),Math.abs(u.object.up.dot(Zs.direction))<w0?l.lookAt(u.target):(sd.setFromNormalAndCoplanarPoint(u.object.up,u.target),Zs.intersectPlane(sd,u.target))))}else u.object instanceof ni&&u.object.isOrthographicCamera&&(ea=T!==1,ea&&(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/T)),u.object.updateProjectionMatrix()));return T=1,G=!1,ea||te.distanceToSquared(u.object.position)>y||8*(1-gt.dot(u.object.quaternion))>y?(u.dispatchEvent(o),te.copy(u.object.position),gt.copy(u.object.quaternion),ea=!1,!0):!1}})(),this.connect=M=>{u.domElement=M,u.domElement.style.touchAction="none",u.domElement.addEventListener("contextmenu",Sn),u.domElement.addEventListener("pointerdown",bl),u.domElement.addEventListener("pointercancel",Va),u.domElement.addEventListener("wheel",gn)},this.dispose=()=>{var M,J,fe,we,te,gt;u.domElement&&(u.domElement.style.touchAction="auto"),(M=u.domElement)==null||M.removeEventListener("contextmenu",Sn),(J=u.domElement)==null||J.removeEventListener("pointerdown",bl),(fe=u.domElement)==null||fe.removeEventListener("pointercancel",Va),(we=u.domElement)==null||we.removeEventListener("wheel",gn),(te=u.domElement)==null||te.ownerDocument.removeEventListener("pointermove",$a),(gt=u.domElement)==null||gt.ownerDocument.removeEventListener("pointerup",Va),u._domElementKeyEvents!==null&&u._domElementKeyEvents.removeEventListener("keydown",yn)};const u=this,o={type:"change"},d={type:"start"},g={type:"end"},m={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=m.NONE;const y=1e-6,E=new Iu,S=new Iu;let T=1;const x=new ft,w=new Ke,Q=new Ke,Y=new Ke,U=new Ke,R=new Ke,q=new Ke,P=new Ke,X=new Ke,j=new Ke,ue=new ft,O=new Ke;let G=!1;const V=[],se={};function pe(){return 2*Math.PI/60/60*u.autoRotateSpeed}function ee(){return Math.pow(.95,u.zoomSpeed)}function le(M){u.reverseOrbit||u.reverseHorizontalOrbit?S.theta+=M:S.theta-=M}function Se(M){u.reverseOrbit||u.reverseVerticalOrbit?S.phi+=M:S.phi-=M}const F=(()=>{const M=new ft;return function(fe,we){M.setFromMatrixColumn(we,0),M.multiplyScalar(-fe),x.add(M)}})(),oe=(()=>{const M=new ft;return function(fe,we){u.screenSpacePanning===!0?M.setFromMatrixColumn(we,1):(M.setFromMatrixColumn(we,0),M.crossVectors(u.object.up,M)),M.multiplyScalar(fe),x.add(M)}})(),he=(()=>{const M=new ft;return function(fe,we){const te=u.domElement;if(te&&u.object instanceof Zi&&u.object.isPerspectiveCamera){const gt=u.object.position;M.copy(gt).sub(u.target);let $t=M.length();$t*=Math.tan(u.object.fov/2*Math.PI/180),F(2*fe*$t/te.clientHeight,u.object.matrix),oe(2*we*$t/te.clientHeight,u.object.matrix)}else te&&u.object instanceof ni&&u.object.isOrthographicCamera?(F(fe*(u.object.right-u.object.left)/u.object.zoom/te.clientWidth,u.object.matrix),oe(we*(u.object.top-u.object.bottom)/u.object.zoom/te.clientHeight,u.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),u.enablePan=!1)}})();function me(M){u.object instanceof Zi&&u.object.isPerspectiveCamera||u.object instanceof ni&&u.object.isOrthographicCamera?T=M:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function ve(M){me(T/M)}function _e(M){me(T*M)}function ge(M){if(!u.zoomToCursor||!u.domElement)return;G=!0;const J=u.domElement.getBoundingClientRect(),fe=M.clientX-J.left,we=M.clientY-J.top,te=J.width,gt=J.height;O.x=fe/te*2-1,O.y=-(we/gt)*2+1,ue.set(O.x,O.y,1).unproject(u.object).sub(u.object.position).normalize()}function Ne(M){return Math.max(u.minDistance,Math.min(u.maxDistance,M))}function ze(M){w.set(M.clientX,M.clientY)}function ut(M){ge(M),P.set(M.clientX,M.clientY)}function Oe(M){U.set(M.clientX,M.clientY)}function Nt(M){Q.set(M.clientX,M.clientY),Y.subVectors(Q,w).multiplyScalar(u.rotateSpeed);const J=u.domElement;J&&(le(2*Math.PI*Y.x/J.clientHeight),Se(2*Math.PI*Y.y/J.clientHeight)),w.copy(Q),u.update()}function bt(M){X.set(M.clientX,M.clientY),j.subVectors(X,P),j.y>0?ve(ee()):j.y<0&&_e(ee()),P.copy(X),u.update()}function Sl(M){R.set(M.clientX,M.clientY),q.subVectors(R,U).multiplyScalar(u.panSpeed),he(q.x,q.y),U.copy(R),u.update()}function El(M){ge(M),M.deltaY<0?_e(ee()):M.deltaY>0&&ve(ee()),u.update()}function wa(M){let J=!1;switch(M.code){case u.keys.UP:he(0,u.keyPanSpeed),J=!0;break;case u.keys.BOTTOM:he(0,-u.keyPanSpeed),J=!0;break;case u.keys.LEFT:he(u.keyPanSpeed,0),J=!0;break;case u.keys.RIGHT:he(-u.keyPanSpeed,0),J=!0;break}J&&(M.preventDefault(),u.update())}function ja(){if(V.length==1)w.set(V[0].pageX,V[0].pageY);else{const M=.5*(V[0].pageX+V[1].pageX),J=.5*(V[0].pageY+V[1].pageY);w.set(M,J)}}function Aa(){if(V.length==1)U.set(V[0].pageX,V[0].pageY);else{const M=.5*(V[0].pageX+V[1].pageX),J=.5*(V[0].pageY+V[1].pageY);U.set(M,J)}}function Ga(){const M=V[0].pageX-V[1].pageX,J=V[0].pageY-V[1].pageY,fe=Math.sqrt(M*M+J*J);P.set(0,fe)}function Wa(){u.enableZoom&&Ga(),u.enablePan&&Aa()}function Fn(){u.enableZoom&&Ga(),u.enableRotate&&ja()}function kt(M){if(V.length==1)Q.set(M.pageX,M.pageY);else{const fe=ha(M),we=.5*(M.pageX+fe.x),te=.5*(M.pageY+fe.y);Q.set(we,te)}Y.subVectors(Q,w).multiplyScalar(u.rotateSpeed);const J=u.domElement;J&&(le(2*Math.PI*Y.x/J.clientHeight),Se(2*Math.PI*Y.y/J.clientHeight)),w.copy(Q)}function Xn(M){if(V.length==1)R.set(M.pageX,M.pageY);else{const J=ha(M),fe=.5*(M.pageX+J.x),we=.5*(M.pageY+J.y);R.set(fe,we)}q.subVectors(R,U).multiplyScalar(u.panSpeed),he(q.x,q.y),U.copy(R)}function ka(M){const J=ha(M),fe=M.pageX-J.x,we=M.pageY-J.y,te=Math.sqrt(fe*fe+we*we);X.set(0,te),j.set(0,Math.pow(X.y/P.y,u.zoomSpeed)),ve(j.y),P.copy(X)}function Xt(M){u.enableZoom&&ka(M),u.enablePan&&Xn(M)}function La(M){u.enableZoom&&ka(M),u.enableRotate&&kt(M)}function bl(M){var J,fe;u.enabled!==!1&&(V.length===0&&((J=u.domElement)==null||J.ownerDocument.addEventListener("pointermove",$a),(fe=u.domElement)==null||fe.ownerDocument.addEventListener("pointerup",Va)),Qn(M),M.pointerType==="touch"?en(M):mn(M))}function $a(M){u.enabled!==!1&&(M.pointerType==="touch"?di(M):fi(M))}function Va(M){var J,fe,we;Dt(M),V.length===0&&((J=u.domElement)==null||J.releasePointerCapture(M.pointerId),(fe=u.domElement)==null||fe.ownerDocument.removeEventListener("pointermove",$a),(we=u.domElement)==null||we.ownerDocument.removeEventListener("pointerup",Va)),u.dispatchEvent(g),h=m.NONE}function mn(M){let J;switch(M.button){case 0:J=u.mouseButtons.LEFT;break;case 1:J=u.mouseButtons.MIDDLE;break;case 2:J=u.mouseButtons.RIGHT;break;default:J=-1}switch(J){case Kl.DOLLY:if(u.enableZoom===!1)return;ut(M),h=m.DOLLY;break;case Kl.ROTATE:if(M.ctrlKey||M.metaKey||M.shiftKey){if(u.enablePan===!1)return;Oe(M),h=m.PAN}else{if(u.enableRotate===!1)return;ze(M),h=m.ROTATE}break;case Kl.PAN:if(M.ctrlKey||M.metaKey||M.shiftKey){if(u.enableRotate===!1)return;ze(M),h=m.ROTATE}else{if(u.enablePan===!1)return;Oe(M),h=m.PAN}break;default:h=m.NONE}h!==m.NONE&&u.dispatchEvent(d)}function fi(M){if(u.enabled!==!1)switch(h){case m.ROTATE:if(u.enableRotate===!1)return;Nt(M);break;case m.DOLLY:if(u.enableZoom===!1)return;bt(M);break;case m.PAN:if(u.enablePan===!1)return;Sl(M);break}}function gn(M){u.enabled===!1||u.enableZoom===!1||h!==m.NONE&&h!==m.ROTATE||(M.preventDefault(),u.dispatchEvent(d),El(M),u.dispatchEvent(g))}function yn(M){u.enabled===!1||u.enablePan===!1||wa(M)}function en(M){switch(at(M),V.length){case 1:switch(u.touches.ONE){case Il.ROTATE:if(u.enableRotate===!1)return;ja(),h=m.TOUCH_ROTATE;break;case Il.PAN:if(u.enablePan===!1)return;Aa(),h=m.TOUCH_PAN;break;default:h=m.NONE}break;case 2:switch(u.touches.TWO){case Il.DOLLY_PAN:if(u.enableZoom===!1&&u.enablePan===!1)return;Wa(),h=m.TOUCH_DOLLY_PAN;break;case Il.DOLLY_ROTATE:if(u.enableZoom===!1&&u.enableRotate===!1)return;Fn(),h=m.TOUCH_DOLLY_ROTATE;break;default:h=m.NONE}break;default:h=m.NONE}h!==m.NONE&&u.dispatchEvent(d)}function di(M){switch(at(M),h){case m.TOUCH_ROTATE:if(u.enableRotate===!1)return;kt(M),u.update();break;case m.TOUCH_PAN:if(u.enablePan===!1)return;Xn(M),u.update();break;case m.TOUCH_DOLLY_PAN:if(u.enableZoom===!1&&u.enablePan===!1)return;Xt(M),u.update();break;case m.TOUCH_DOLLY_ROTATE:if(u.enableZoom===!1&&u.enableRotate===!1)return;La(M),u.update();break;default:h=m.NONE}}function Sn(M){u.enabled!==!1&&M.preventDefault()}function Qn(M){V.push(M)}function Dt(M){delete se[M.pointerId];for(let J=0;J<V.length;J++)if(V[J].pointerId==M.pointerId){V.splice(J,1);return}}function at(M){let J=se[M.pointerId];J===void 0&&(J=new Ke,se[M.pointerId]=J),J.set(M.pageX,M.pageY)}function ha(M){const J=M.pointerId===V[0].pointerId?V[1]:V[0];return se[J.pointerId]}this.dollyIn=(M=ee())=>{_e(M),u.update()},this.dollyOut=(M=ee())=>{ve(M),u.update()},this.getScale=()=>T,this.setScale=M=>{me(M),u.update()},this.getZoomScale=()=>ee(),s!==void 0&&this.connect(s),this.update()}};class G0 extends Md{constructor(l){super(l),this.type=da}parse(l){const g=function(O,G){switch(O){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(G||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(G||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(G||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(G||""))}},S=function(O,G,V){G=G||1024;let pe=O.pos,ee=-1,le=0,Se="",F=String.fromCharCode.apply(null,new Uint16Array(O.subarray(pe,pe+128)));for(;0>(ee=F.indexOf(`
`))&&le<G&&pe<O.byteLength;)Se+=F,le+=F.length,pe+=128,F+=String.fromCharCode.apply(null,new Uint16Array(O.subarray(pe,pe+128)));return-1<ee?(O.pos+=le+ee+1,Se+F.slice(0,ee)):!1},T=function(O){const G=/^#\?(\S+)/,V=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,se=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,pe=/^\s*FORMAT=(\S+)\s*$/,ee=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,le={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Se,F;for((O.pos>=O.byteLength||!(Se=S(O)))&&g(1,"no header found"),(F=Se.match(G))||g(3,"bad initial token"),le.valid|=1,le.programtype=F[1],le.string+=Se+`
`;Se=S(O),Se!==!1;){if(le.string+=Se+`
`,Se.charAt(0)==="#"){le.comments+=Se+`
`;continue}if((F=Se.match(V))&&(le.gamma=parseFloat(F[1])),(F=Se.match(se))&&(le.exposure=parseFloat(F[1])),(F=Se.match(pe))&&(le.valid|=2,le.format=F[1]),(F=Se.match(ee))&&(le.valid|=4,le.height=parseInt(F[1],10),le.width=parseInt(F[2],10)),le.valid&2&&le.valid&4)break}return le.valid&2||g(3,"missing format specifier"),le.valid&4||g(3,"missing image size specifier"),le},x=function(O,G,V){const se=G;if(se<8||se>32767||O[0]!==2||O[1]!==2||O[2]&128)return new Uint8Array(O);se!==(O[2]<<8|O[3])&&g(3,"wrong scanline width");const pe=new Uint8Array(4*G*V);pe.length||g(4,"unable to allocate buffer space");let ee=0,le=0;const Se=4*se,F=new Uint8Array(4),oe=new Uint8Array(Se);let he=V;for(;he>0&&le<O.byteLength;){le+4>O.byteLength&&g(1),F[0]=O[le++],F[1]=O[le++],F[2]=O[le++],F[3]=O[le++],(F[0]!=2||F[1]!=2||(F[2]<<8|F[3])!=se)&&g(3,"bad rgbe scanline format");let me=0,ve;for(;me<Se&&le<O.byteLength;){ve=O[le++];const ge=ve>128;if(ge&&(ve-=128),(ve===0||me+ve>Se)&&g(3,"bad scanline data"),ge){const Ne=O[le++];for(let ze=0;ze<ve;ze++)oe[me++]=Ne}else oe.set(O.subarray(le,le+ve),me),me+=ve,le+=ve}const _e=se;for(let ge=0;ge<_e;ge++){let Ne=0;pe[ee]=oe[ge+Ne],Ne+=se,pe[ee+1]=oe[ge+Ne],Ne+=se,pe[ee+2]=oe[ge+Ne],Ne+=se,pe[ee+3]=oe[ge+Ne],ee+=4}he--}return pe},w=function(O,G,V,se){const pe=O[G+3],ee=Math.pow(2,pe-128)/255;V[se+0]=O[G+0]*ee,V[se+1]=O[G+1]*ee,V[se+2]=O[G+2]*ee,V[se+3]=1},Q=function(O,G,V,se){const pe=O[G+3],ee=Math.pow(2,pe-128)/255;V[se+0]=$l.toHalfFloat(Math.min(O[G+0]*ee,65504)),V[se+1]=$l.toHalfFloat(Math.min(O[G+1]*ee,65504)),V[se+2]=$l.toHalfFloat(Math.min(O[G+2]*ee,65504)),V[se+3]=$l.toHalfFloat(1)},Y=new Uint8Array(l);Y.pos=0;const U=T(Y),R=U.width,q=U.height,P=x(Y.subarray(Y.pos),R,q);let X,j,ue;switch(this.type){case Ja:ue=P.length/4;const O=new Float32Array(ue*4);for(let V=0;V<ue;V++)w(P,V*4,O,V*4);X=O,j=Ja;break;case da:ue=P.length/4;const G=new Uint16Array(ue*4);for(let V=0;V<ue;V++)Q(P,V*4,G,V*4);X=G,j=da;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:R,height:q,data:X,header:U.string,gamma:U.gamma,exposure:U.exposure,type:j}}setDataType(l){return this.type=l,this}load(l,s,u,o){function d(g,m){switch(g.type){case Ja:case da:"colorSpace"in g?g.colorSpace="srgb-linear":g.encoding=3e3,g.minFilter=Jt,g.magFilter=Jt,g.generateMipmaps=!1,g.flipY=!0;break}s&&s(g,m)}return super.load(l,d,u,o)}}const Gi=Wd>=152;class L0 extends Md{constructor(l){super(l),this.type=da}parse(l){const G=Math.pow(2.7182818,2.2);function V(f,p){for(var _=0,N=0;N<65536;++N)(N==0||f[N>>3]&1<<(N&7))&&(p[_++]=N);for(var H=_-1;_<65536;)p[_++]=0;return H}function se(f){for(var p=0;p<16384;p++)f[p]={},f[p].len=0,f[p].lit=0,f[p].p=null}const pe={l:0,c:0,lc:0};function ee(f,p,_,N,H){for(;_<f;)p=p<<8|ha(N,H),_+=8;_-=f,pe.l=p>>_&(1<<f)-1,pe.c=p,pe.lc=_}const le=new Array(59);function Se(f){for(var p=0;p<=58;++p)le[p]=0;for(var p=0;p<65537;++p)le[f[p]]+=1;for(var _=0,p=58;p>0;--p){var N=_+le[p]>>1;le[p]=_,_=N}for(var p=0;p<65537;++p){var H=f[p];H>0&&(f[p]=H|le[H]++<<6)}}function F(f,p,_,N,H,B,$){for(var I=_,W=0,K=0;H<=B;H++){if(I.value-_.value>N)return!1;ee(6,W,K,f,I);var ie=pe.l;if(W=pe.c,K=pe.lc,$[H]=ie,ie==63){if(I.value-_.value>N)throw"Something wrong with hufUnpackEncTable";ee(8,W,K,f,I);var ne=pe.l+6;if(W=pe.c,K=pe.lc,H+ne>B+1)throw"Something wrong with hufUnpackEncTable";for(;ne--;)$[H++]=0;H--}else if(ie>=59){var ne=ie-59+2;if(H+ne>B+1)throw"Something wrong with hufUnpackEncTable";for(;ne--;)$[H++]=0;H--}}Se($)}function oe(f){return f&63}function he(f){return f>>6}function me(f,p,_,N){for(;p<=_;p++){var H=he(f[p]),B=oe(f[p]);if(H>>B)throw"Invalid table entry";if(B>14){var $=N[H>>B-14];if($.len)throw"Invalid table entry";if($.lit++,$.p){var I=$.p;$.p=new Array($.lit);for(var W=0;W<$.lit-1;++W)$.p[W]=I[W]}else $.p=new Array(1);$.p[$.lit-1]=p}else if(B)for(var K=0,W=1<<14-B;W>0;W--){var $=N[(H<<14-B)+K];if($.len||$.p)throw"Invalid table entry";$.len=B,$.lit=p,K++}}return!0}const ve={c:0,lc:0};function _e(f,p,_,N){f=f<<8|ha(_,N),p+=8,ve.c=f,ve.lc=p}const ge={c:0,lc:0};function Ne(f,p,_,N,H,B,$,I,W,K){if(f==p){N<8&&(_e(_,N,H,$),_=ve.c,N=ve.lc),N-=8;var ie=_>>N,ie=new Uint8Array([ie])[0];if(W.value+ie>K)return!1;for(var ne=I[W.value-1];ie-- >0;)I[W.value++]=ne}else if(W.value<K)I[W.value++]=f;else return!1;ge.c=_,ge.lc=N}function ze(f){return f&65535}function ut(f){var p=ze(f);return p>32767?p-65536:p}const Oe={a:0,b:0};function Nt(f,p){var _=ut(f),N=ut(p),H=N,B=_+(H&1)+(H>>1),$=B,I=B-H;Oe.a=$,Oe.b=I}function bt(f,p){var _=ze(f),N=ze(p),H=_-(N>>1)&65535,B=N+H-32768&65535;Oe.a=B,Oe.b=H}function Sl(f,p,_,N,H,B,$){for(var I=$<16384,W=_>H?H:_,K=1,ie;K<=W;)K<<=1;for(K>>=1,ie=K,K>>=1;K>=1;){for(var ne=0,et=ne+B*(H-ie),de=B*K,ye=B*ie,xe=N*K,Ue=N*ie,Xe,Ie,dt,Mt;ne<=et;ne+=ye){for(var Pe=ne,ta=ne+N*(_-ie);Pe<=ta;Pe+=Ue){var Je=Pe+xe,mt=Pe+de,za=mt+xe;I?(Nt(f[Pe+p],f[mt+p]),Xe=Oe.a,dt=Oe.b,Nt(f[Je+p],f[za+p]),Ie=Oe.a,Mt=Oe.b,Nt(Xe,Ie),f[Pe+p]=Oe.a,f[Je+p]=Oe.b,Nt(dt,Mt),f[mt+p]=Oe.a,f[za+p]=Oe.b):(bt(f[Pe+p],f[mt+p]),Xe=Oe.a,dt=Oe.b,bt(f[Je+p],f[za+p]),Ie=Oe.a,Mt=Oe.b,bt(Xe,Ie),f[Pe+p]=Oe.a,f[Je+p]=Oe.b,bt(dt,Mt),f[mt+p]=Oe.a,f[za+p]=Oe.b)}if(_&K){var mt=Pe+de;I?Nt(f[Pe+p],f[mt+p]):bt(f[Pe+p],f[mt+p]),Xe=Oe.a,f[mt+p]=Oe.b,f[Pe+p]=Xe}}if(H&K)for(var Pe=ne,ta=ne+N*(_-ie);Pe<=ta;Pe+=Ue){var Je=Pe+xe;I?Nt(f[Pe+p],f[Je+p]):bt(f[Pe+p],f[Je+p]),Xe=Oe.a,f[Je+p]=Oe.b,f[Pe+p]=Xe}ie=K,K>>=1}return ne}function El(f,p,_,N,H,B,$,I,W,K){for(var ie=0,ne=0,et=I,de=Math.trunc(H.value+(B+7)/8);H.value<de;)for(_e(ie,ne,_,H),ie=ve.c,ne=ve.lc;ne>=14;){var ye=ie>>ne-14&16383,xe=p[ye];if(xe.len)ne-=xe.len,Ne(xe.lit,$,ie,ne,_,N,H,W,K,et),ie=ge.c,ne=ge.lc;else{if(!xe.p)throw"hufDecode issues";var Ue;for(Ue=0;Ue<xe.lit;Ue++){for(var Xe=oe(f[xe.p[Ue]]);ne<Xe&&H.value<de;)_e(ie,ne,_,H),ie=ve.c,ne=ve.lc;if(ne>=Xe&&he(f[xe.p[Ue]])==(ie>>ne-Xe&(1<<Xe)-1)){ne-=Xe,Ne(xe.p[Ue],$,ie,ne,_,N,H,W,K,et),ie=ge.c,ne=ge.lc;break}}if(Ue==xe.lit)throw"hufDecode issues"}}var Ie=8-B&7;for(ie>>=Ie,ne-=Ie;ne>0;){var xe=p[ie<<14-ne&16383];if(xe.len)ne-=xe.len,Ne(xe.lit,$,ie,ne,_,N,H,W,K,et),ie=ge.c,ne=ge.lc;else throw"hufDecode issues"}return!0}function wa(f,p,_,N,H,B){var $={value:0},I=_.value,W=at(p,_),K=at(p,_);_.value+=4;var ie=at(p,_);if(_.value+=4,W<0||W>=65537||K<0||K>=65537)throw"Something wrong with HUF_ENCSIZE";var ne=new Array(65537),et=new Array(16384);se(et);var de=N-(_.value-I);if(F(f,p,_,de,W,K,ne),ie>8*(N-(_.value-I)))throw"Something wrong with hufUncompress";me(ne,W,K,et),El(ne,et,f,p,_,ie,K,B,H,$)}function ja(f,p,_){for(var N=0;N<_;++N)p[N]=f[p[N]]}function Aa(f){for(var p=1;p<f.length;p++){var _=f[p-1]+f[p]-128;f[p]=_}}function Ga(f,p){for(var _=0,N=Math.floor((f.length+1)/2),H=0,B=f.length-1;!(H>B||(p[H++]=f[_++],H>B));)p[H++]=f[N++]}function Wa(f){for(var p=f.byteLength,_=new Array,N=0,H=new DataView(f);p>0;){var B=H.getInt8(N++);if(B<0){var $=-B;p-=$+1;for(var I=0;I<$;I++)_.push(H.getUint8(N++))}else{var $=B;p-=2;for(var W=H.getUint8(N++),I=0;I<$+1;I++)_.push(W)}}return _}function Fn(f,p,_,N,H,B){var Je=new DataView(B.buffer),$=_[f.idx[0]].width,I=_[f.idx[0]].height,W=3,K=Math.floor($/8),ie=Math.ceil($/8),ne=Math.ceil(I/8),et=$-(ie-1)*8,de=I-(ne-1)*8,ye={value:0},xe=new Array(W),Ue=new Array(W),Xe=new Array(W),Ie=new Array(W),dt=new Array(W);for(let Qe=0;Qe<W;++Qe)dt[Qe]=p[f.idx[Qe]],xe[Qe]=Qe<1?0:xe[Qe-1]+ie*ne,Ue[Qe]=new Float32Array(64),Xe[Qe]=new Uint16Array(64),Ie[Qe]=new Uint16Array(ie*64);for(let Qe=0;Qe<ne;++Qe){var Mt=8;Qe==ne-1&&(Mt=de);var Pe=8;for(let tt=0;tt<ie;++tt){tt==ie-1&&(Pe=et);for(let Ve=0;Ve<W;++Ve)Xe[Ve].fill(0),Xe[Ve][0]=H[xe[Ve]++],kt(ye,N,Xe[Ve]),Xn(Xe[Ve],Ue[Ve]),ka(Ue[Ve]);Xt(Ue);for(let Ve=0;Ve<W;++Ve)La(Ue[Ve],Ie[Ve],tt*64)}let yt=0;for(let tt=0;tt<W;++tt){const Ve=_[f.idx[tt]].type;for(let qt=8*Qe;qt<8*Qe+Mt;++qt){yt=dt[tt][qt];for(let Ya=0;Ya<K;++Ya){const Bt=Ya*64+(qt&7)*8;Je.setUint16(yt+0*Ve,Ie[tt][Bt+0],!0),Je.setUint16(yt+2*Ve,Ie[tt][Bt+1],!0),Je.setUint16(yt+4*Ve,Ie[tt][Bt+2],!0),Je.setUint16(yt+6*Ve,Ie[tt][Bt+3],!0),Je.setUint16(yt+8*Ve,Ie[tt][Bt+4],!0),Je.setUint16(yt+10*Ve,Ie[tt][Bt+5],!0),Je.setUint16(yt+12*Ve,Ie[tt][Bt+6],!0),Je.setUint16(yt+14*Ve,Ie[tt][Bt+7],!0),yt+=16*Ve}}if(K!=ie)for(let qt=8*Qe;qt<8*Qe+Mt;++qt){const Ya=dt[tt][qt]+8*K*2*Ve,Bt=K*64+(qt&7)*8;for(let Fa=0;Fa<Pe;++Fa)Je.setUint16(Ya+Fa*2*Ve,Ie[tt][Bt+Fa],!0)}}}for(var ta=new Uint16Array($),Je=new DataView(B.buffer),mt=0;mt<W;++mt){_[f.idx[mt]].decoded=!0;var za=_[f.idx[mt]].type;if(_[mt].type==2)for(var Tn=0;Tn<I;++Tn){const Qe=dt[mt][Tn];for(var Vt=0;Vt<$;++Vt)ta[Vt]=Je.getUint16(Qe+Vt*2*za,!0);for(var Vt=0;Vt<$;++Vt)Je.setFloat32(Qe+Vt*2*za,te(ta[Vt]),!0)}}}function kt(f,p,_){for(var N,H=1;H<64;)N=p[f.value],N==65280?H=64:N>>8==255?H+=N&255:(_[H]=N,H++),f.value++}function Xn(f,p){p[0]=te(f[0]),p[1]=te(f[1]),p[2]=te(f[5]),p[3]=te(f[6]),p[4]=te(f[14]),p[5]=te(f[15]),p[6]=te(f[27]),p[7]=te(f[28]),p[8]=te(f[2]),p[9]=te(f[4]),p[10]=te(f[7]),p[11]=te(f[13]),p[12]=te(f[16]),p[13]=te(f[26]),p[14]=te(f[29]),p[15]=te(f[42]),p[16]=te(f[3]),p[17]=te(f[8]),p[18]=te(f[12]),p[19]=te(f[17]),p[20]=te(f[25]),p[21]=te(f[30]),p[22]=te(f[41]),p[23]=te(f[43]),p[24]=te(f[9]),p[25]=te(f[11]),p[26]=te(f[18]),p[27]=te(f[24]),p[28]=te(f[31]),p[29]=te(f[40]),p[30]=te(f[44]),p[31]=te(f[53]),p[32]=te(f[10]),p[33]=te(f[19]),p[34]=te(f[23]),p[35]=te(f[32]),p[36]=te(f[39]),p[37]=te(f[45]),p[38]=te(f[52]),p[39]=te(f[54]),p[40]=te(f[20]),p[41]=te(f[22]),p[42]=te(f[33]),p[43]=te(f[38]),p[44]=te(f[46]),p[45]=te(f[51]),p[46]=te(f[55]),p[47]=te(f[60]),p[48]=te(f[21]),p[49]=te(f[34]),p[50]=te(f[37]),p[51]=te(f[47]),p[52]=te(f[50]),p[53]=te(f[56]),p[54]=te(f[59]),p[55]=te(f[61]),p[56]=te(f[35]),p[57]=te(f[36]),p[58]=te(f[48]),p[59]=te(f[49]),p[60]=te(f[57]),p[61]=te(f[58]),p[62]=te(f[62]),p[63]=te(f[63])}function ka(f){const p=.5*Math.cos(.7853975),_=.5*Math.cos(3.14159/16),N=.5*Math.cos(3.14159/8),H=.5*Math.cos(3*3.14159/16),B=.5*Math.cos(5*3.14159/16),$=.5*Math.cos(3*3.14159/8),I=.5*Math.cos(7*3.14159/16);for(var W=new Array(4),K=new Array(4),ie=new Array(4),ne=new Array(4),et=0;et<8;++et){var de=et*8;W[0]=N*f[de+2],W[1]=$*f[de+2],W[2]=N*f[de+6],W[3]=$*f[de+6],K[0]=_*f[de+1]+H*f[de+3]+B*f[de+5]+I*f[de+7],K[1]=H*f[de+1]-I*f[de+3]-_*f[de+5]-B*f[de+7],K[2]=B*f[de+1]-_*f[de+3]+I*f[de+5]+H*f[de+7],K[3]=I*f[de+1]-B*f[de+3]+H*f[de+5]-_*f[de+7],ie[0]=p*(f[de+0]+f[de+4]),ie[3]=p*(f[de+0]-f[de+4]),ie[1]=W[0]+W[3],ie[2]=W[1]-W[2],ne[0]=ie[0]+ie[1],ne[1]=ie[3]+ie[2],ne[2]=ie[3]-ie[2],ne[3]=ie[0]-ie[1],f[de+0]=ne[0]+K[0],f[de+1]=ne[1]+K[1],f[de+2]=ne[2]+K[2],f[de+3]=ne[3]+K[3],f[de+4]=ne[3]-K[3],f[de+5]=ne[2]-K[2],f[de+6]=ne[1]-K[1],f[de+7]=ne[0]-K[0]}for(var ye=0;ye<8;++ye)W[0]=N*f[16+ye],W[1]=$*f[16+ye],W[2]=N*f[48+ye],W[3]=$*f[48+ye],K[0]=_*f[8+ye]+H*f[24+ye]+B*f[40+ye]+I*f[56+ye],K[1]=H*f[8+ye]-I*f[24+ye]-_*f[40+ye]-B*f[56+ye],K[2]=B*f[8+ye]-_*f[24+ye]+I*f[40+ye]+H*f[56+ye],K[3]=I*f[8+ye]-B*f[24+ye]+H*f[40+ye]-_*f[56+ye],ie[0]=p*(f[ye]+f[32+ye]),ie[3]=p*(f[ye]-f[32+ye]),ie[1]=W[0]+W[3],ie[2]=W[1]-W[2],ne[0]=ie[0]+ie[1],ne[1]=ie[3]+ie[2],ne[2]=ie[3]-ie[2],ne[3]=ie[0]-ie[1],f[0+ye]=ne[0]+K[0],f[8+ye]=ne[1]+K[1],f[16+ye]=ne[2]+K[2],f[24+ye]=ne[3]+K[3],f[32+ye]=ne[3]-K[3],f[40+ye]=ne[2]-K[2],f[48+ye]=ne[1]-K[1],f[56+ye]=ne[0]-K[0]}function Xt(f){for(var p=0;p<64;++p){var _=f[0][p],N=f[1][p],H=f[2][p];f[0][p]=_+1.5747*H,f[1][p]=_-.1873*N-.4682*H,f[2][p]=_+1.8556*N}}function La(f,p,_){for(var N=0;N<64;++N)p[_+N]=$l.toHalfFloat(bl(f[N]))}function bl(f){return f<=1?Math.sign(f)*Math.pow(Math.abs(f),2.2):Math.sign(f)*Math.pow(G,Math.abs(f)-1)}function $a(f){return new DataView(f.array.buffer,f.offset.value,f.size)}function Va(f){var p=f.viewer.buffer.slice(f.offset.value,f.offset.value+f.size),_=new Uint8Array(Wa(p)),N=new Uint8Array(_.length);return Aa(_),Ga(_,N),new DataView(N.buffer)}function mn(f){var p=f.array.slice(f.offset.value,f.offset.value+f.size),_=qs(p),N=new Uint8Array(_.length);return Aa(_),Ga(_,N),new DataView(N.buffer)}function fi(f){for(var p=f.viewer,_={value:f.offset.value},N=new Uint16Array(f.width*f.scanlineBlockSize*(f.channels*f.type)),H=new Uint8Array(8192),B=0,$=new Array(f.channels),I=0;I<f.channels;I++)$[I]={},$[I].start=B,$[I].end=$[I].start,$[I].nx=f.width,$[I].ny=f.lines,$[I].size=f.type,B+=$[I].nx*$[I].ny*$[I].size;var W=gt(p,_),K=gt(p,_);if(K>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(W<=K)for(var I=0;I<K-W+1;I++)H[I+W]=M(p,_);var ie=new Uint16Array(65536),ne=V(H,ie),et=at(p,_);wa(f.array,p,_,et,N,B);for(var I=0;I<f.channels;++I)for(var de=$[I],ye=0;ye<$[I].size;++ye)Sl(N,de.start+ye,de.nx,de.size,de.ny,de.nx*de.size,ne);ja(ie,N,B);for(var xe=0,Ue=new Uint8Array(N.buffer.byteLength),Xe=0;Xe<f.lines;Xe++)for(var Ie=0;Ie<f.channels;Ie++){var de=$[Ie],dt=de.nx*de.size,Mt=new Uint8Array(N.buffer,de.end*2,dt*2);Ue.set(Mt,xe),xe+=dt*2,de.end+=dt}return new DataView(Ue.buffer)}function gn(f){var p=f.array.slice(f.offset.value,f.offset.value+f.size),_=qs(p);const N=f.lines*f.channels*f.width,H=f.type==1?new Uint16Array(N):new Uint32Array(N);let B=0,$=0;const I=new Array(4);for(let W=0;W<f.lines;W++)for(let K=0;K<f.channels;K++){let ie=0;switch(f.type){case 1:I[0]=B,I[1]=I[0]+f.width,B=I[1]+f.width;for(let ne=0;ne<f.width;++ne){const et=_[I[0]++]<<8|_[I[1]++];ie+=et,H[$]=ie,$++}break;case 2:I[0]=B,I[1]=I[0]+f.width,I[2]=I[1]+f.width,B=I[2]+f.width;for(let ne=0;ne<f.width;++ne){const et=_[I[0]++]<<24|_[I[1]++]<<16|_[I[2]++]<<8;ie+=et,H[$]=ie,$++}break}}return new DataView(H.buffer)}function yn(f){var p=f.viewer,_={value:f.offset.value},N=new Uint8Array(f.width*f.lines*(f.channels*f.type*2)),H={version:J(p,_),unknownUncompressedSize:J(p,_),unknownCompressedSize:J(p,_),acCompressedSize:J(p,_),dcCompressedSize:J(p,_),rleCompressedSize:J(p,_),rleUncompressedSize:J(p,_),rleRawSize:J(p,_),totalAcUncompressedCount:J(p,_),totalDcUncompressedCount:J(p,_),acCompression:J(p,_)};if(H.version<2)throw"EXRLoader.parse: "+Kt.compression+" version "+H.version+" is unsupported";for(var B=new Array,$=gt(p,_)-2;$>0;){var I=en(p.buffer,_),W=M(p,_),K=W>>2&3,ie=(W>>4)-1,ne=new Int8Array([ie])[0],et=M(p,_);B.push({name:I,index:ne,type:et,compression:K}),$-=I.length+3}for(var de=Kt.channels,ye=new Array(f.channels),xe=0;xe<f.channels;++xe){var Ue=ye[xe]={},Xe=de[xe];Ue.name=Xe.name,Ue.compression=0,Ue.decoded=!1,Ue.type=Xe.pixelType,Ue.pLinear=Xe.pLinear,Ue.width=f.width,Ue.height=f.lines}for(var Ie={idx:new Array(3)},dt=0;dt<f.channels;++dt)for(var Ue=ye[dt],xe=0;xe<B.length;++xe){var Mt=B[xe];Ue.name==Mt.name&&(Ue.compression=Mt.compression,Mt.index>=0&&(Ie.idx[Mt.index]=dt),Ue.offset=dt)}if(H.acCompressedSize>0)switch(H.acCompression){case 0:var Je=new Uint16Array(H.totalAcUncompressedCount);wa(f.array,p,_,H.acCompressedSize,Je,H.totalAcUncompressedCount);break;case 1:var Pe=f.array.slice(_.value,_.value+H.totalAcUncompressedCount),ta=qs(Pe),Je=new Uint16Array(ta.buffer);_.value+=H.totalAcUncompressedCount;break}if(H.dcCompressedSize>0){var mt={array:f.array,offset:_,size:H.dcCompressedSize},za=new Uint16Array(mn(mt).buffer);_.value+=H.dcCompressedSize}if(H.rleRawSize>0){var Pe=f.array.slice(_.value,_.value+H.rleCompressedSize),ta=qs(Pe),Tn=Wa(ta.buffer);_.value+=H.rleCompressedSize}for(var Vt=0,Qe=new Array(ye.length),xe=0;xe<Qe.length;++xe)Qe[xe]=new Array;for(var yt=0;yt<f.lines;++yt)for(var tt=0;tt<ye.length;++tt)Qe[tt].push(Vt),Vt+=ye[tt].width*f.type*2;Fn(Ie,Qe,ye,Je,za,N);for(var xe=0;xe<ye.length;++xe){var Ue=ye[xe];if(!Ue.decoded)switch(Ue.compression){case 2:for(var Ve=0,qt=0,yt=0;yt<f.lines;++yt){for(var Ya=Qe[xe][Ve],Bt=0;Bt<Ue.width;++Bt){for(var Fa=0;Fa<2*Ue.type;++Fa)N[Ya++]=Tn[qt+Fa*Ue.width*Ue.height];qt++}Ve++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(N.buffer)}function en(f,p){for(var _=new Uint8Array(f),N=0;_[p.value+N]!=0;)N+=1;var H=new TextDecoder().decode(_.slice(p.value,p.value+N));return p.value=p.value+N+1,H}function di(f,p,_){var N=new TextDecoder().decode(new Uint8Array(f).slice(p.value,p.value+_));return p.value=p.value+_,N}function Sn(f,p){var _=Dt(f,p),N=at(f,p);return[_,N]}function Qn(f,p){var _=at(f,p),N=at(f,p);return[_,N]}function Dt(f,p){var _=f.getInt32(p.value,!0);return p.value=p.value+4,_}function at(f,p){var _=f.getUint32(p.value,!0);return p.value=p.value+4,_}function ha(f,p){var _=f[p.value];return p.value=p.value+1,_}function M(f,p){var _=f.getUint8(p.value);return p.value=p.value+1,_}const J=function(f,p){let _;return"getBigInt64"in DataView.prototype?_=Number(f.getBigInt64(p.value,!0)):_=f.getUint32(p.value+4,!0)+Number(f.getUint32(p.value,!0)<<32),p.value+=8,_};function fe(f,p){var _=f.getFloat32(p.value,!0);return p.value+=4,_}function we(f,p){return $l.toHalfFloat(fe(f,p))}function te(f){var p=(f&31744)>>10,_=f&1023;return(f>>15?-1:1)*(p?p===31?_?NaN:1/0:Math.pow(2,p-15)*(1+_/1024):6103515625e-14*(_/1024))}function gt(f,p){var _=f.getUint16(p.value,!0);return p.value+=2,_}function $t(f,p){return te(gt(f,p))}function Kn(f,p,_,N){for(var H=_.value,B=[];_.value<H+N-1;){var $=en(p,_),I=Dt(f,_),W=M(f,_);_.value+=3;var K=Dt(f,_),ie=Dt(f,_);B.push({name:$,pixelType:I,pLinear:W,xSampling:K,ySampling:ie})}return _.value+=1,B}function In(f,p){var _=fe(f,p),N=fe(f,p),H=fe(f,p),B=fe(f,p),$=fe(f,p),I=fe(f,p),W=fe(f,p),K=fe(f,p);return{redX:_,redY:N,greenX:H,greenY:B,blueX:$,blueY:I,whiteX:W,whiteY:K}}function Qt(f,p){var _=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],N=M(f,p);return _[N]}function Ot(f,p){var _=at(f,p),N=at(f,p),H=at(f,p),B=at(f,p);return{xMin:_,yMin:N,xMax:H,yMax:B}}function ea(f,p){var _=["INCREASING_Y"],N=M(f,p);return _[N]}function va(f,p){var _=fe(f,p),N=fe(f,p);return[_,N]}function qa(f,p){var _=fe(f,p),N=fe(f,p),H=fe(f,p);return[_,N,H]}function tn(f,p,_,N,H){if(N==="string"||N==="stringvector"||N==="iccProfile")return di(p,_,H);if(N==="chlist")return Kn(f,p,_,H);if(N==="chromaticities")return In(f,_);if(N==="compression")return Qt(f,_);if(N==="box2i")return Ot(f,_);if(N==="lineOrder")return ea(f,_);if(N==="float")return fe(f,_);if(N==="v2f")return va(f,_);if(N==="v3f")return qa(f,_);if(N==="int")return Dt(f,_);if(N==="rational")return Sn(f,_);if(N==="timecode")return Qn(f,_);if(N==="preview")return _.value+=H,"skipped";_.value+=H}function ts(f,p,_){const N={};if(f.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";N.version=f.getUint8(4);const H=f.getUint8(5);N.spec={singleTile:!!(H&2),longName:!!(H&4),deepFormat:!!(H&8),multiPart:!!(H&16)},_.value=8;for(var B=!0;B;){var $=en(p,_);if($==0)B=!1;else{var I=en(p,_),W=at(f,_),K=tn(f,p,_,I,W);K===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${I}'.`):N[$]=K}}if((H&-5)!=0)throw console.error("EXRHeader:",N),"THREE.EXRLoader: provided file is currently unsupported.";return N}function hi(f,p,_,N,H){const B={size:0,viewer:p,array:_,offset:N,width:f.dataWindow.xMax-f.dataWindow.xMin+1,height:f.dataWindow.yMax-f.dataWindow.yMin+1,channels:f.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:f.channels[0].pixelType,uncompress:null,getter:null,format:null,[Gi?"colorSpace":"encoding"]:null};switch(f.compression){case"NO_COMPRESSION":B.lines=1,B.uncompress=$a;break;case"RLE_COMPRESSION":B.lines=1,B.uncompress=Va;break;case"ZIPS_COMPRESSION":B.lines=1,B.uncompress=mn;break;case"ZIP_COMPRESSION":B.lines=16,B.uncompress=mn;break;case"PIZ_COMPRESSION":B.lines=32,B.uncompress=fi;break;case"PXR24_COMPRESSION":B.lines=16,B.uncompress=gn;break;case"DWAA_COMPRESSION":B.lines=32,B.uncompress=yn;break;case"DWAB_COMPRESSION":B.lines=256,B.uncompress=yn;break;default:throw"EXRLoader.parse: "+f.compression+" is unsupported"}if(B.scanlineBlockSize=B.lines,B.type==1)switch(H){case Ja:B.getter=$t,B.inputSize=2;break;case da:B.getter=gt,B.inputSize=2;break}else if(B.type==2)switch(H){case Ja:B.getter=fe,B.inputSize=4;break;case da:B.getter=we,B.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+B.type+" for "+f.compression+".";B.blockCount=(f.dataWindow.yMax+1)/B.scanlineBlockSize;for(var $=0;$<B.blockCount;$++)J(p,N);B.outputChannels=B.channels==3?4:B.channels;const I=B.width*B.height*B.outputChannels;switch(H){case Ja:B.byteArray=new Float32Array(I),B.channels<B.outputChannels&&B.byteArray.fill(1,0,I);break;case da:B.byteArray=new Uint16Array(I),B.channels<B.outputChannels&&B.byteArray.fill(15360,0,I);break;default:console.error("THREE.EXRLoader: unsupported type: ",H);break}return B.bytesPerLine=B.width*B.inputSize*B.channels,B.outputChannels==4?B.format=si:B.format=Ap,Gi?B.colorSpace="srgb-linear":B.encoding=3e3,B}const En=new DataView(l),Za=new Uint8Array(l),bn={value:0},Kt=ts(En,l,bn),Re=hi(Kt,En,Za,bn,this.type),Pn={value:0},ct={R:0,G:1,B:2,A:3,Y:0};for(let f=0;f<Re.height/Re.scanlineBlockSize;f++){const p=at(En,bn);Re.size=at(En,bn),Re.lines=p+Re.scanlineBlockSize>Re.height?Re.height-p:Re.scanlineBlockSize;const N=Re.size<Re.lines*Re.bytesPerLine?Re.uncompress(Re):$a(Re);bn.value+=Re.size;for(let H=0;H<Re.scanlineBlockSize;H++){const B=H+f*Re.scanlineBlockSize;if(B>=Re.height)break;for(let $=0;$<Re.channels;$++){const I=ct[Kt.channels[$].name];for(let W=0;W<Re.width;W++){Pn.value=(H*(Re.channels*Re.width)+$*Re.width+W)*Re.inputSize;const K=(Re.height-1-B)*(Re.width*Re.outputChannels)+W*Re.outputChannels+I;Re.byteArray[K]=Re.getter(N,Pn)}}}}return{header:Kt,width:Re.width,height:Re.height,data:Re.byteArray,format:Re.format,[Gi?"colorSpace":"encoding"]:Re[Gi?"colorSpace":"encoding"],type:this.type}}setDataType(l){return this.type=l,this}load(l,s,u,o){function d(g,m){Gi?g.colorSpace=m.colorSpace:g.encoding=m.encoding,g.minFilter=Jt,g.magFilter=Jt,g.generateMipmaps=!1,g.flipY=!1,s&&s(g,m)}return super.load(l,d,u,o)}}const V0=()=>parseInt(ar.replace(/\D+/g,"")),q0=V0(),Z0=L.forwardRef(({makeDefault:a,camera:l,regress:s,domElement:u,enableDamping:o=!0,keyEvents:d=!1,onChange:g,onStart:m,onEnd:h,...y},E)=>{const S=Ct(j=>j.invalidate),T=Ct(j=>j.camera),x=Ct(j=>j.gl),w=Ct(j=>j.events),Q=Ct(j=>j.setEvents),Y=Ct(j=>j.set),U=Ct(j=>j.get),R=Ct(j=>j.performance),q=l||T,P=u||w.connected||x.domElement,X=L.useMemo(()=>new j0(q),[q]);return yl(()=>{X.enabled&&X.update()},-1),L.useEffect(()=>(d&&X.connect(d===!0?P:d),X.connect(P),()=>void X.dispose()),[d,P,s,X,S]),L.useEffect(()=>{const j=G=>{S(),s&&R.regress(),g&&g(G)},ue=G=>{m&&m(G)},O=G=>{h&&h(G)};return X.addEventListener("change",j),X.addEventListener("start",ue),X.addEventListener("end",O),()=>{X.removeEventListener("start",ue),X.removeEventListener("end",O),X.removeEventListener("change",j)}},[g,m,h,X,S,Q]),L.useEffect(()=>{if(a){const j=U().controls;return Y({controls:X}),()=>Y({controls:j})}},[a,X]),L.createElement("primitive",er({ref:E,object:X,enableDamping:o},y))}),lh=(a,l,s)=>{let u;switch(a){case Ha:u=new Uint8ClampedArray(l*s*4);break;case da:u=new Uint16Array(l*s*4);break;case Rd:u=new Uint32Array(l*s*4);break;case Dp:u=new Int8Array(l*s*4);break;case Np:u=new Int16Array(l*s*4);break;case Cp:u=new Int32Array(l*s*4);break;case Ja:u=new Float32Array(l*s*4);break;default:throw new Error("Unsupported data type")}return u};let Ys;const Y0=(a,l,s,u)=>{if(Ys!==void 0)return Ys;const o=new Ra(1,1,u);l.setRenderTarget(o);const d=new ki(new xd,new Up({color:16777215}));l.render(d,s),l.setRenderTarget(null);const g=lh(a,o.width,o.height);return l.readRenderTargetPixels(o,0,0,o.width,o.height,g),o.dispose(),d.geometry.dispose(),d.material.dispose(),Ys=g[0]!==0,Ys};class dc{constructor(l){var s,u,o,d,g,m,h,y,E,S,T,x,w,Q,Y,U;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(q){throw this._renderer.setRenderTarget(null),q}this._renderer.setRenderTarget(null)},this._width=l.width,this._height=l.height,this._type=l.type,this._colorSpace=l.colorSpace;const R={format:si,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((s=l.renderTargetOptions)===null||s===void 0?void 0:s.anisotropy)!==void 0?(u=l.renderTargetOptions)===null||u===void 0?void 0:u.anisotropy:1,generateMipmaps:((o=l.renderTargetOptions)===null||o===void 0?void 0:o.generateMipmaps)!==void 0?(d=l.renderTargetOptions)===null||d===void 0?void 0:d.generateMipmaps:!1,magFilter:((g=l.renderTargetOptions)===null||g===void 0?void 0:g.magFilter)!==void 0?(m=l.renderTargetOptions)===null||m===void 0?void 0:m.magFilter:Jt,minFilter:((h=l.renderTargetOptions)===null||h===void 0?void 0:h.minFilter)!==void 0?(y=l.renderTargetOptions)===null||y===void 0?void 0:y.minFilter:Jt,samples:((E=l.renderTargetOptions)===null||E===void 0?void 0:E.samples)!==void 0?(S=l.renderTargetOptions)===null||S===void 0?void 0:S.samples:void 0,wrapS:((T=l.renderTargetOptions)===null||T===void 0?void 0:T.wrapS)!==void 0?(x=l.renderTargetOptions)===null||x===void 0?void 0:x.wrapS:Vn,wrapT:((w=l.renderTargetOptions)===null||w===void 0?void 0:w.wrapT)!==void 0?(Q=l.renderTargetOptions)===null||Q===void 0?void 0:Q.wrapT:Vn};if(this._material=l.material,l.renderer?this._renderer=l.renderer:(this._renderer=dc.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Qi,this._camera=new ni,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Y0(this._type,this._renderer,this._camera,R)){let q;switch(this._type){case da:q=this._renderer.extensions.has("EXT_color_buffer_float")?Ja:void 0;break}q!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Ja}`),this._type=q):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new ki(new xd,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ra(this.width,this.height,R),this._renderTarget.texture.mapping=((Y=l.renderTargetOptions)===null||Y===void 0?void 0:Y.mapping)!==void 0?(U=l.renderTargetOptions)===null||U===void 0?void 0:U.mapping:Ks}static instantiateRenderer(){const l=new Ed;return l.setSize(128,128),l}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const l=lh(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,l),l}toDataTexture(l){const s=new zp(this.toArray(),this.width,this.height,si,this._type,l?.mapping||Ks,l?.wrapS||Vn,l?.wrapT||Vn,l?.magFilter||Jt,l?.minFilter||Jt,l?.anisotropy||1,ii);return s.generateMipmaps=l?.generateMipmaps!==void 0?l?.generateMipmaps:!1,s}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(l){this.disposeOnDemandRenderer(),l&&this.renderTarget.dispose(),this.material instanceof xa&&Object.values(this.material.uniforms).forEach(s=>{s.value instanceof qn&&s.value.dispose()}),Object.values(this.material).forEach(s=>{s instanceof qn&&s.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(l){this._width=l,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(l){this._height=l,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(l){this._renderTarget=l,this._width=l.width,this._height=l.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const F0=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,X0=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Q0 extends xa{constructor({gamma:l,offsetHdr:s,offsetSdr:u,gainMapMin:o,gainMapMax:d,maxDisplayBoost:g,hdrCapacityMin:m,hdrCapacityMax:h,sdr:y,gainMap:E}){super({name:"GainMapDecoderMaterial",vertexShader:F0,fragmentShader:X0,uniforms:{sdr:{value:y},gainMap:{value:E},gamma:{value:new ft(1/l[0],1/l[1],1/l[2])},offsetHdr:{value:new ft().fromArray(s)},offsetSdr:{value:new ft().fromArray(u)},gainMapMin:{value:new ft().fromArray(o)},gainMapMax:{value:new ft().fromArray(d)},weightFactor:{value:(Math.log2(g)-m)/(h-m)}},blending:Yn,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=g,this._hdrCapacityMin=m,this._hdrCapacityMax=h,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(l){this.uniforms.sdr.value=l}get gainMap(){return this.uniforms.gainMap.value}set gainMap(l){this.uniforms.gainMap.value=l}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(l){this.uniforms.offsetHdr.value.fromArray(l)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(l){this.uniforms.offsetSdr.value.fromArray(l)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(l){this.uniforms.gainMapMin.value.fromArray(l)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(l){this.uniforms.gainMapMax.value.fromArray(l)}get gamma(){const l=this.uniforms.gamma.value;return[1/l.x,1/l.y,1/l.z]}set gamma(l){const s=this.uniforms.gamma.value;s.x=1/l[0],s.y=1/l[1],s.z=1/l[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(l){this._hdrCapacityMin=l,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(l){this._hdrCapacityMax=l,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(l){this._maxDisplayBoost=Math.max(1,Math.min(65504,l)),this.calculateWeight()}calculateWeight(){const l=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,l))}}class ih extends Error{}class sh extends Error{}const Li=(a,l,s)=>{const u=new RegExp(`${l}="([^"]*)"`,"i").exec(a);if(u)return u[1];const o=new RegExp(`<${l}[^>]*>([\\s\\S]*?)</${l}>`,"i").exec(a);if(o){const d=o[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return d&&d.length===3?d.map(g=>g.replace(/<\/?rdf:li>/g,"")):o[1].trim()}if(s!==void 0)return s;throw new Error(`Can't find ${l} in gainmap metadata`)},K0=a=>{let l;typeof TextDecoder<"u"?l=new TextDecoder().decode(a):l=a.toString();let s=l.indexOf("<x:xmpmeta");for(;s!==-1;){const u=l.indexOf("x:xmpmeta>",s),o=l.slice(s,u+10);try{const d=Li(o,"hdrgm:GainMapMin","0"),g=Li(o,"hdrgm:GainMapMax"),m=Li(o,"hdrgm:Gamma","1"),h=Li(o,"hdrgm:OffsetSDR","0.015625"),y=Li(o,"hdrgm:OffsetHDR","0.015625"),E=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(o),S=E?E[1]:"0",T=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(o);if(!T)throw new Error("Incomplete gainmap metadata");const x=T[1];return{gainMapMin:Array.isArray(d)?d.map(w=>parseFloat(w)):[parseFloat(d),parseFloat(d),parseFloat(d)],gainMapMax:Array.isArray(g)?g.map(w=>parseFloat(w)):[parseFloat(g),parseFloat(g),parseFloat(g)],gamma:Array.isArray(m)?m.map(w=>parseFloat(w)):[parseFloat(m),parseFloat(m),parseFloat(m)],offsetSdr:Array.isArray(h)?h.map(w=>parseFloat(w)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetHdr:Array.isArray(y)?y.map(w=>parseFloat(w)):[parseFloat(y),parseFloat(y),parseFloat(y)],hdrCapacityMin:parseFloat(S),hdrCapacityMax:parseFloat(x)}}catch{}s=l.indexOf("<x:xmpmeta",u)}};class I0{constructor(l){this.options={debug:l&&l.debug!==void 0?l.debug:!1,extractFII:l&&l.extractFII!==void 0?l.extractFII:!0,extractNonFII:l&&l.extractNonFII!==void 0?l.extractNonFII:!0}}extract(l){return new Promise((s,u)=>{const o=this.options.debug,d=new DataView(l.buffer);if(d.getUint16(0)!==65496){u(new Error("Not a valid jpeg"));return}const g=d.byteLength;let m=2,h=0,y;for(;m<g;){if(++h>250){u(new Error(`Found no marker after ${h} loops `));return}if(d.getUint8(m)!==255){u(new Error(`Not a valid marker at offset 0x${m.toString(16)}, found: 0x${d.getUint8(m).toString(16)}`));return}if(y=d.getUint8(m+1),o&&console.log(`Marker: ${y.toString(16)}`),y===226){o&&console.log("Found APP2 marker (0xffe2)");const E=m+4;if(d.getUint32(E)===1297106432){const S=E+4;let T;if(d.getUint16(S)===18761)T=!1;else if(d.getUint16(S)===19789)T=!0;else{u(new Error("No valid endianness marker found in TIFF header"));return}if(d.getUint16(S+2,!T)!==42){u(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=d.getUint32(S+4,!T);if(x<8){u(new Error("Not valid TIFF data! (First offset less than 8)"));return}const w=S+x,Q=d.getUint16(w,!T),Y=w+2;let U=0;for(let X=Y;X<Y+12*Q;X+=12)d.getUint16(X,!T)===45057&&(U=d.getUint32(X+8,!T));const q=w+2+Q*12+4,P=[];for(let X=q;X<q+U*16;X+=16){const j={MPType:d.getUint32(X,!T),size:d.getUint32(X+4,!T),dataOffset:d.getUint32(X+8,!T),dependantImages:d.getUint32(X+12,!T),start:-1,end:-1,isFII:!1};j.dataOffset?(j.start=S+j.dataOffset,j.isFII=!1):(j.start=0,j.isFII=!0),j.end=j.start+j.size,P.push(j)}if(this.options.extractNonFII&&P.length){const X=new Blob([d]),j=[];for(const ue of P){if(ue.isFII&&!this.options.extractFII)continue;const O=X.slice(ue.start,ue.end+1,"image/jpeg");j.push(O)}s(j)}}}m+=2+d.getUint16(m+2)}})}}const P0=async a=>{const l=K0(a);if(!l)throw new sh("Gain map XMP metadata not found");const u=await new I0({extractFII:!0,extractNonFII:!0}).extract(a);if(u.length!==2)throw new ih("Gain map recovery image not found");return{sdr:new Uint8Array(await u[0].arrayBuffer()),gainMap:new Uint8Array(await u[1].arrayBuffer()),metadata:l}},ud=a=>new Promise((l,s)=>{const u=document.createElement("img");u.onload=()=>{l(u)},u.onerror=o=>{s(o)},u.src=URL.createObjectURL(a)});class rh extends Op{constructor(l,s){super(s),l&&(this._renderer=l),this._internalLoadingManager=new Bp}setRenderer(l){return this._renderer=l,this}setRenderTargetOptions(l){return this._renderTargetOptions=l,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const l=new Q0({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new qn,sdr:new qn});return new dc({width:16,height:16,type:da,colorSpace:ii,material:l,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(l,s,u,o){const d=o?new Blob([o],{type:"image/jpeg"}):void 0,g=new Blob([u],{type:"image/jpeg"});let m,h,y=!1;if(typeof createImageBitmap>"u"){const T=await Promise.all([d?ud(d):Promise.resolve(void 0),ud(g)]);h=T[0],m=T[1],y=!0}else{const T=await Promise.all([d?createImageBitmap(d,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(g,{imageOrientation:"flipY"})]);h=T[0],m=T[1]}const E=new qn(h||new ImageData(2,2),Ks,Vn,Vn,Jt,Of,si,Ha,1,ii);E.flipY=y,E.needsUpdate=!0;const S=new qn(m,Ks,Vn,Vn,Jt,Of,si,Ha,1,_t);S.flipY=y,S.needsUpdate=!0,l.width=m.width,l.height=m.height,l.material.gainMap=E,l.material.sdr=S,l.material.gainMapMin=s.gainMapMin,l.material.gainMapMax=s.gainMapMax,l.material.offsetHdr=s.offsetHdr,l.material.offsetSdr=s.offsetSdr,l.material.gamma=s.gamma,l.material.hdrCapacityMin=s.hdrCapacityMin,l.material.hdrCapacityMax=s.hdrCapacityMax,l.material.maxDisplayBoost=Math.pow(2,s.hdrCapacityMax),l.material.needsUpdate=!0,l.render()}}class J0 extends rh{load([l,s,u],o,d,g){const m=this.prepareQuadRenderer();let h,y,E;const S=async()=>{if(h&&y&&E){try{await this.render(m,E,h,y)}catch(G){this.manager.itemError(l),this.manager.itemError(s),this.manager.itemError(u),typeof g=="function"&&g(G),m.disposeOnDemandRenderer();return}typeof o=="function"&&o(m),this.manager.itemEnd(l),this.manager.itemEnd(s),this.manager.itemEnd(u),m.disposeOnDemandRenderer()}};let T=!0,x=0,w=0,Q=!0,Y=0,U=0,R=!0,q=0,P=0;const X=()=>{if(typeof d=="function"){const G=x+Y+q,V=w+U+P,se=T&&Q&&R;d(new ProgressEvent("progress",{lengthComputable:se,loaded:V,total:G}))}};this.manager.itemStart(l),this.manager.itemStart(s),this.manager.itemStart(u);const j=new Fs(this._internalLoadingManager);j.setResponseType("arraybuffer"),j.setRequestHeader(this.requestHeader),j.setPath(this.path),j.setWithCredentials(this.withCredentials),j.load(l,async G=>{if(typeof G=="string")throw new Error("Invalid sdr buffer");h=G,await S()},G=>{T=G.lengthComputable,w=G.loaded,x=G.total,X()},G=>{this.manager.itemError(l),typeof g=="function"&&g(G)});const ue=new Fs(this._internalLoadingManager);ue.setResponseType("arraybuffer"),ue.setRequestHeader(this.requestHeader),ue.setPath(this.path),ue.setWithCredentials(this.withCredentials),ue.load(s,async G=>{if(typeof G=="string")throw new Error("Invalid gainmap buffer");y=G,await S()},G=>{Q=G.lengthComputable,U=G.loaded,Y=G.total,X()},G=>{this.manager.itemError(s),typeof g=="function"&&g(G)});const O=new Fs(this._internalLoadingManager);return O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(u,async G=>{if(typeof G!="string")throw new Error("Invalid metadata string");E=JSON.parse(G),await S()},G=>{R=G.lengthComputable,P=G.loaded,q=G.total,X()},G=>{this.manager.itemError(u),typeof g=="function"&&g(G)}),m}}class W0 extends rh{load(l,s,u,o){const d=this.prepareQuadRenderer(),g=new Fs(this._internalLoadingManager);return g.setResponseType("arraybuffer"),g.setRequestHeader(this.requestHeader),g.setPath(this.path),g.setWithCredentials(this.withCredentials),this.manager.itemStart(l),g.load(l,async m=>{if(typeof m=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const h=new Uint8Array(m);let y,E,S;try{const T=await P0(h);y=T.sdr,E=T.gainMap,S=T.metadata}catch(T){if(T instanceof sh||T instanceof ih)console.warn(`Failure to reconstruct an HDR image from ${l}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),S={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},y=h;else throw T}try{await this.render(d,S,y,E)}catch(T){this.manager.itemError(l),typeof o=="function"&&o(T),d.disposeOnDemandRenderer();return}typeof s=="function"&&s(d),this.manager.itemEnd(l),d.disposeOnDemandRenderer()},u,m=>{this.manager.itemError(l),typeof o=="function"&&o(m)}),d}}const Pi={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},uh="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",li=a=>Array.isArray(a),hc=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function lr({files:a=hc,path:l="",preset:s=void 0,colorSpace:u=void 0,extensions:o}={}){s&&(vc(s),a=Pi[s],l=uh);const d=li(a),{extension:g,isCubemap:m}=pc(a),h=mc(g);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+a);const y=Ct(x=>x.gl);L.useLayoutEffect(()=>{if(g!=="webp"&&g!=="jpg"&&g!=="jpeg")return;function x(){ri.clear(h,d?[a]:a)}y.domElement.addEventListener("webglcontextlost",x,{once:!0})},[a,y.domElement]);const E=ri(h,d?[a]:a,x=>{(g==="webp"||g==="jpg"||g==="jpeg")&&x.setRenderer(y),x.setPath==null||x.setPath(l),o&&o(x)});let S=d?E[0]:E;if(g==="jpg"||g==="jpeg"||g==="webp"){var T;S=(T=S.renderTarget)==null?void 0:T.texture}return S.mapping=m?Hp:wp,S.colorSpace=u??(m?"srgb":"srgb-linear"),S}const k0={files:hc,path:"",preset:void 0,extensions:void 0};lr.preload=a=>{const l={...k0,...a};let{files:s,path:u=""}=l;const{preset:o,extensions:d}=l;o&&(vc(o),s=Pi[o],u=uh);const{extension:g}=pc(s);if(g==="webp"||g==="jpg"||g==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const m=mc(g);if(!m)throw new Error("useEnvironment: Unrecognized file extension: "+s);ri.preload(m,li(s)?[s]:s,h=>{h.setPath==null||h.setPath(u),d&&d(h)})};const $0={files:hc,preset:void 0};lr.clear=a=>{const l={...$0,...a};let{files:s}=l;const{preset:u}=l;u&&(vc(u),s=Pi[u]);const{extension:o}=pc(s),d=mc(o);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+s);ri.clear(d,li(s)?[s]:s)};function vc(a){if(!(a in Pi))throw new Error("Preset must be one of: "+Object.keys(Pi).join(", "))}function pc(a){var l;const s=li(a)&&a.length===6,u=li(a)&&a.length===3&&a.some(g=>g.endsWith("json")),o=li(a)?a[0]:a;return{extension:s?"cube":u?"webp":o.startsWith("data:application/exr")?"exr":o.startsWith("data:application/hdr")?"hdr":o.startsWith("data:image/jpeg")?"jpg":(l=o.split(".").pop())==null||(l=l.split("?"))==null||(l=l.shift())==null?void 0:l.toLowerCase(),isCubemap:s,isGainmap:u}}function mc(a){return a==="cube"?jp:a==="hdr"?G0:a==="exr"?L0:a==="jpg"||a==="jpeg"?W0:a==="webp"?J0:null}const eg=a=>a.current&&a.current.isScene,tg=a=>eg(a)?a.current:a;function gc(a,l,s,u,o={}){var d,g,m,h;o={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...o};const y=tg(l||s),E=y.background,S=y.environment,T={backgroundBlurriness:y.backgroundBlurriness,backgroundIntensity:y.backgroundIntensity,backgroundRotation:(d=(g=y.backgroundRotation)==null||g.clone==null?void 0:g.clone())!==null&&d!==void 0?d:[0,0,0],environmentIntensity:y.environmentIntensity,environmentRotation:(m=(h=y.environmentRotation)==null||h.clone==null?void 0:h.clone())!==null&&m!==void 0?m:[0,0,0]};return a!=="only"&&(y.environment=u),a&&(y.background=u),Pa(y,o),()=>{a!=="only"&&(y.environment=S),a&&(y.background=E),Pa(y,T)}}function yc({scene:a,background:l=!1,map:s,...u}){const o=Ct(d=>d.scene);return L.useLayoutEffect(()=>{if(s)return gc(l,a,o,s,u)}),null}function ch({background:a=!1,scene:l,blur:s,backgroundBlurriness:u,backgroundIntensity:o,backgroundRotation:d,environmentIntensity:g,environmentRotation:m,...h}){const y=lr(h),E=Ct(S=>S.scene);return L.useLayoutEffect(()=>gc(a,l,E,y,{backgroundBlurriness:s??u,backgroundIntensity:o,backgroundRotation:d,environmentIntensity:g,environmentRotation:m})),L.useEffect(()=>()=>{y.dispose()},[y]),null}function ag({children:a,near:l=.1,far:s=1e3,resolution:u=256,frames:o=1,map:d,background:g=!1,blur:m,backgroundBlurriness:h,backgroundIntensity:y,backgroundRotation:E,environmentIntensity:S,environmentRotation:T,scene:x,files:w,path:Q,preset:Y=void 0,extensions:U}){const R=Ct(O=>O.gl),q=Ct(O=>O.scene),P=L.useRef(null),[X]=L.useState(()=>new Qi),j=L.useMemo(()=>{const O=new Gp(u);return O.texture.type=da,O},[u]);L.useEffect(()=>()=>{j.dispose()},[j]),L.useLayoutEffect(()=>{if(o===1){const O=R.autoClear;R.autoClear=!0,P.current.update(R,X),R.autoClear=O}return gc(g,x,q,j.texture,{backgroundBlurriness:m??h,backgroundIntensity:y,backgroundRotation:E,environmentIntensity:S,environmentRotation:T})},[a,X,j.texture,x,q,g,o,R]);let ue=1;return yl(()=>{if(o===1/0||ue<o){const O=R.autoClear;R.autoClear=!0,P.current.update(R,X),R.autoClear=O,ue++}}),L.createElement(L.Fragment,null,a0(L.createElement(L.Fragment,null,a,L.createElement("cubeCamera",{ref:P,args:[l,s,j]}),w||Y?L.createElement(ch,{background:!0,files:w,preset:Y,path:Q,extensions:U}):d?L.createElement(yc,{background:!0,map:d,extensions:U}):null),X))}function ng(a){var l,s,u,o;const d=lr(a),g=a.map||d;L.useMemo(()=>oc({GroundProjectedEnvImpl:U0}),[]),L.useEffect(()=>()=>{d.dispose()},[d]);const m=L.useMemo(()=>[g],[g]),h=(l=a.ground)==null?void 0:l.height,y=(s=a.ground)==null?void 0:s.radius,E=(u=(o=a.ground)==null?void 0:o.scale)!==null&&u!==void 0?u:1e3;return L.createElement(L.Fragment,null,L.createElement(yc,er({},a,{map:g})),L.createElement("groundProjectedEnvImpl",{args:m,scale:E,height:h,radius:y}))}function lg(a){return a.ground?L.createElement(ng,a):a.map?L.createElement(yc,a):a.children?L.createElement(ag,a):L.createElement(ch,a)}class ig extends xa{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${q0>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const sg=a=>new ft().setFromSpherical(new Iu(a,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),rg=L.forwardRef(({radius:a=100,depth:l=50,count:s=5e3,saturation:u=0,factor:o=4,fade:d=!1,speed:g=1},m)=>{const h=L.useRef(null),[y,E,S]=L.useMemo(()=>{const x=[],w=[],Q=Array.from({length:s},()=>(.5+.5*Math.random())*o),Y=new Wi;let U=a+l;const R=l/s;for(let q=0;q<s;q++)U-=R*Math.random(),x.push(...sg(U).toArray()),Y.setHSL(q/s,u,.9),w.push(Y.r,Y.g,Y.b);return[new Float32Array(x),new Float32Array(w),new Float32Array(Q)]},[s,l,o,a,u]);yl(x=>h.current&&(h.current.uniforms.time.value=x.clock.elapsedTime*g));const[T]=L.useState(()=>new ig);return L.createElement("points",{ref:m},L.createElement("bufferGeometry",null,L.createElement("bufferAttribute",{attach:"attributes-position",args:[y,3]}),L.createElement("bufferAttribute",{attach:"attributes-color",args:[E,3]}),L.createElement("bufferAttribute",{attach:"attributes-size",args:[S,1]})),L.createElement("primitive",{ref:h,object:T,attach:"material",blending:Lp,"uniforms-fade-value":d,depthWrite:!1,transparent:!0,vertexColors:!0}))});/**
 * postprocessing v6.38.2 build Mon Dec 22 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var Qu=1/1e3,ug=1e3,cg=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(a){typeof document<"u"&&document.hidden!==void 0&&(a?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=a)}get delta(){return this._delta*Qu}get fixedDelta(){return this._fixedDelta*Qu}set fixedDelta(a){this._fixedDelta=a*ug}get elapsed(){return this._elapsed*Qu}update(a){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(a!==void 0?a:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(a){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},og=(()=>{const a=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),l=new Float32Array([0,0,2,0,0,2]),s=new Qp;return s.setAttribute("position",new Bf(a,3)),s.setAttribute("uv",new Bf(l,2)),s})(),Wt=class ac{static get fullscreenGeometry(){return og}constructor(l="Pass",s=new Qi,u=new ni){this.name=l,this.renderer=null,this.scene=s,this.camera=u,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(l){if(this.rtt===l){const s=this.fullscreenMaterial;s!==null&&(s.needsUpdate=!0),this.rtt=!l}}set mainScene(l){}set mainCamera(l){}setRenderer(l){this.renderer=l}isEnabled(){return this.enabled}setEnabled(l){this.enabled=l}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(l){let s=this.screen;s!==null?s.material=l:(s=new ki(ac.fullscreenGeometry,l),s.frustumCulled=!1,this.scene===null&&(this.scene=new Qi),this.scene.add(s),this.screen=s)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(l){this.fullscreenMaterial=l}getDepthTexture(){return null}setDepthTexture(l,s=ci){}render(l,s,u,o,d){throw new Error("Render method not implemented!")}setSize(l,s){}initialize(l,s,u){}dispose(){for(const l of Object.keys(this)){const s=this[l];(s instanceof Ra||s instanceof zd||s instanceof qn||s instanceof ac)&&this[l].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},fg=class extends Wt{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(a,l,s,u,o){const d=a.state.buffers.stencil;d.setLocked(!1),d.setTest(!1)}},dg=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,oh="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",fh=class extends xa{constructor(){super({name:"CopyMaterial",defines:{COLOR_SPACE_CONVERSION:"1",DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new Le(null),depthBuffer:new Le(null),channelWeights:new Le(null),opacity:new Le(1)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:dg,vertexShader:oh}),this.depthFunc=Xp}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(a){const l=a!==null;this.colorWrite!==l&&(l?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=l,this.needsUpdate=!0),this.uniforms.inputBuffer.value=a}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(a){const l=a!==null;this.depthWrite!==l&&(l?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=l,this.depthWrite=l,this.needsUpdate=!0),this.uniforms.depthBuffer.value=a}set depthPacking(a){this.defines.DEPTH_PACKING=a.toFixed(0),this.needsUpdate=!0}get colorSpaceConversion(){return this.defines.COLOR_SPACE_CONVERSION!==void 0}set colorSpaceConversion(a){this.colorSpaceConversion!==a&&(a?this.defines.COLOR_SPACE_CONVERSION=!0:delete this.defines.COLOR_SPACE_CONVERSION,this.needsUpdate=!0)}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(a){a!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=a):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(a){this.uniforms.inputBuffer.value=a}getOpacity(a){return this.uniforms.opacity.value}setOpacity(a){this.uniforms.opacity.value=a}},hg=class extends Wt{constructor(a,l=!0){super("CopyPass"),this.fullscreenMaterial=new fh,this.needsSwap=!1,this.renderTarget=a,a===void 0&&(this.renderTarget=new Ra(1,1,{minFilter:Jt,magFilter:Jt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=l}get resize(){return this.autoResize}set resize(a){this.autoResize=a}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(a){this.autoResize=a}render(a,l,s,u,o){this.fullscreenMaterial.inputBuffer=l.texture,a.setRenderTarget(this.renderToScreen?null:this.renderTarget),a.render(this.scene,this.camera)}setSize(a,l){this.autoResize&&this.renderTarget.setSize(a,l)}initialize(a,l,s){s!==void 0&&(this.renderTarget.texture.type=s,s!==Ha?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":a!==null&&a.outputColorSpace===_t&&(this.renderTarget.texture.colorSpace=_t))}},cd=new Wi,dh=class extends Wt{constructor(a=!0,l=!0,s=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=a,this.depth=l,this.stencil=s,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(a,l,s){this.color=a,this.depth=l,this.stencil=s}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(a){this.overrideClearColor=a}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(a){this.overrideClearAlpha=a}render(a,l,s,u,o){const d=this.overrideClearColor,g=this.overrideClearAlpha,m=a.getClearAlpha(),h=d!==null,y=g>=0;h?(a.getClearColor(cd),a.setClearColor(d,y?g:m)):y&&a.setClearAlpha(g),a.setRenderTarget(this.renderToScreen?null:l),a.clear(this.color,this.depth,this.stencil),h?a.setClearColor(cd,m):y&&a.setClearAlpha(m)}},vg=class extends Wt{constructor(a,l){super("MaskPass",a,l),this.needsSwap=!1,this.clearPass=new dh(!1,!1,!0),this.inverse=!1}set mainScene(a){this.scene=a}set mainCamera(a){this.camera=a}get inverted(){return this.inverse}set inverted(a){this.inverse=a}get clear(){return this.clearPass.enabled}set clear(a){this.clearPass.enabled=a}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(a){this.inverted=a}render(a,l,s,u,o){const d=a.getContext(),g=a.state.buffers,m=this.scene,h=this.camera,y=this.clearPass,E=this.inverted?0:1,S=1-E;g.color.setMask(!1),g.depth.setMask(!1),g.color.setLocked(!0),g.depth.setLocked(!0),g.stencil.setTest(!0),g.stencil.setOp(d.REPLACE,d.REPLACE,d.REPLACE),g.stencil.setFunc(d.ALWAYS,E,4294967295),g.stencil.setClear(S),g.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?y.render(a,null):(y.render(a,l),y.render(a,s))),this.renderToScreen?(a.setRenderTarget(null),a.render(m,h)):(a.setRenderTarget(l),a.render(m,h),a.setRenderTarget(s),a.render(m,h)),g.color.setLocked(!1),g.depth.setLocked(!1),g.stencil.setLocked(!1),g.stencil.setFunc(d.EQUAL,1,4294967295),g.stencil.setOp(d.KEEP,d.KEEP,d.KEEP),g.stencil.setLocked(!0)}},pg=class{constructor(a=null,{depthBuffer:l=!0,stencilBuffer:s=!1,multisampling:u=0,frameBufferType:o}={}){this.renderer=null,this.inputBuffer=this.createBuffer(l,s,o,u),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new hg,this.depthTexture=null,this.passes=[],this.timer=new cg,this.autoRenderToScreen=!0,this.setRenderer(a)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(a){const l=this.inputBuffer,s=this.multisampling;s>0&&a>0?(this.inputBuffer.samples=a,this.outputBuffer.samples=a,this.inputBuffer.dispose(),this.outputBuffer.dispose()):s!==a&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(l.depthBuffer,l.stencilBuffer,l.texture.type,a),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(a){if(this.renderer=a,a!==null){const l=a.getSize(new Ke),s=a.getContext().getContextAttributes().alpha,u=this.inputBuffer.texture.type;u===Ha&&a.outputColorSpace===_t&&(this.inputBuffer.texture.colorSpace=_t,this.outputBuffer.texture.colorSpace=_t,this.inputBuffer.dispose(),this.outputBuffer.dispose()),a.autoClear=!1,this.setSize(l.width,l.height);for(const o of this.passes)o.initialize(a,s,u)}}replaceRenderer(a,l=!0){const s=this.renderer,u=s.domElement.parentNode;return this.setRenderer(a),l&&u!==null&&(u.removeChild(s.domElement),u.appendChild(a.domElement)),s}createDepthTexture(){const a=this.depthTexture=new Vp;return this.inputBuffer.depthTexture=a,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(a.format=qp,a.type=Zp):a.type=Rd,a}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const a of this.passes)a.setDepthTexture(null)}}createBuffer(a,l,s,u){const o=this.renderer,d=o===null?new Ke:o.getDrawingBufferSize(new Ke),g={minFilter:Jt,magFilter:Jt,stencilBuffer:l,depthBuffer:a,type:s},m=new Ra(d.width,d.height,g);return u>0&&(m.samples=u),s===Ha&&o!==null&&o.outputColorSpace===_t&&(m.texture.colorSpace=_t),m.texture.name="EffectComposer.Buffer",m.texture.generateMipmaps=!1,m}setMainScene(a){for(const l of this.passes)l.mainScene=a}setMainCamera(a){for(const l of this.passes)l.mainCamera=a}addPass(a,l){const s=this.passes,u=this.renderer,o=u.getDrawingBufferSize(new Ke),d=u.getContext().getContextAttributes().alpha,g=this.inputBuffer.texture.type;if(a.setRenderer(u),a.setSize(o.width,o.height),a.initialize(u,d,g),this.autoRenderToScreen&&(s.length>0&&(s[s.length-1].renderToScreen=!1),a.renderToScreen&&(this.autoRenderToScreen=!1)),l!==void 0?s.splice(l,0,a):s.push(a),this.autoRenderToScreen&&(s[s.length-1].renderToScreen=!0),a.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const m=this.createDepthTexture();for(a of s)a.setDepthTexture(m)}else a.setDepthTexture(this.depthTexture)}removePass(a){const l=this.passes,s=l.indexOf(a);if(s!==-1&&l.splice(s,1).length>0){if(this.depthTexture!==null){const d=(m,h)=>m||h.needsDepthTexture;l.reduce(d,!1)||(a.getDepthTexture()===this.depthTexture&&a.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&s===l.length&&(a.renderToScreen=!1,l.length>0&&(l[l.length-1].renderToScreen=!0))}}removeAllPasses(){const a=this.passes;this.deleteDepthTexture(),a.length>0&&(this.autoRenderToScreen&&(a[a.length-1].renderToScreen=!1),this.passes=[])}render(a){const l=this.renderer,s=this.copyPass;let u=this.inputBuffer,o=this.outputBuffer,d=!1,g,m,h;a===void 0&&(this.timer.update(),a=this.timer.getDelta());for(const y of this.passes)y.enabled&&(y.render(l,u,o,a,d),y.needsSwap&&(d&&(s.renderToScreen=y.renderToScreen,g=l.getContext(),m=l.state.buffers.stencil,m.setFunc(g.NOTEQUAL,1,4294967295),s.render(l,u,o,a,d),m.setFunc(g.EQUAL,1,4294967295)),h=u,u=o,o=h),y instanceof vg?d=!0:y instanceof fg&&(d=!1))}setSize(a,l,s){const u=this.renderer,o=u.getSize(new Ke);(a===void 0||l===void 0)&&(a=o.width,l=o.height),(o.width!==a||o.height!==l)&&u.setSize(a,l,s);const d=u.getDrawingBufferSize(new Ke);this.inputBuffer.setSize(d.width,d.height),this.outputBuffer.setSize(d.width,d.height);for(const g of this.passes)g.setSize(d.width,d.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const a of this.passes)a.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Wt.fullscreenGeometry.dispose()}},ml={NONE:0,DEPTH:1,CONVOLUTION:2},Fe={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},mg=class{constructor(){this.shaderParts=new Map([[Fe.FRAGMENT_HEAD,null],[Fe.FRAGMENT_MAIN_UV,null],[Fe.FRAGMENT_MAIN_IMAGE,null],[Fe.VERTEX_HEAD,null],[Fe.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ml.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=ii}},Ku=!1,od=class{constructor(a=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(a),this.meshCount=0,this.replaceMaterial=l=>{if(l.isMesh){let s;if(l.material.flatShading)switch(l.material.side){case kl:s=this.materialsFlatShadedDoubleSide;break;case js:s=this.materialsFlatShadedBackSide;break;default:s=this.materialsFlatShaded;break}else switch(l.material.side){case kl:s=this.materialsDoubleSide;break;case js:s=this.materialsBackSide;break;default:s=this.materials;break}this.originalMaterials.set(l,l.material),l.isSkinnedMesh?l.material=s[2]:l.isInstancedMesh?l.material=s[1]:l.material=s[0],++this.meshCount}}}cloneMaterial(a){if(!(a instanceof xa))return a.clone();const l=a.uniforms,s=new Map;for(const o in l){const d=l[o].value;d.isRenderTargetTexture&&(l[o].value=null,s.set(o,d))}const u=a.clone();for(const o of s)l[o[0]].value=o[1],u.uniforms[o[0]].value=o[1];return u}setMaterial(a){if(this.disposeMaterials(),this.material=a,a!==null){const l=this.materials=[this.cloneMaterial(a),this.cloneMaterial(a),this.cloneMaterial(a)];for(const s of l)s.uniforms=Object.assign({},a.uniforms),s.side=Fp;l[2].skinning=!0,this.materialsBackSide=l.map(s=>{const u=this.cloneMaterial(s);return u.uniforms=Object.assign({},a.uniforms),u.side=js,u}),this.materialsDoubleSide=l.map(s=>{const u=this.cloneMaterial(s);return u.uniforms=Object.assign({},a.uniforms),u.side=kl,u}),this.materialsFlatShaded=l.map(s=>{const u=this.cloneMaterial(s);return u.uniforms=Object.assign({},a.uniforms),u.flatShading=!0,u}),this.materialsFlatShadedBackSide=l.map(s=>{const u=this.cloneMaterial(s);return u.uniforms=Object.assign({},a.uniforms),u.flatShading=!0,u.side=js,u}),this.materialsFlatShadedDoubleSide=l.map(s=>{const u=this.cloneMaterial(s);return u.uniforms=Object.assign({},a.uniforms),u.flatShading=!0,u.side=kl,u})}}render(a,l,s){const u=a.shadowMap.enabled;if(a.shadowMap.enabled=!1,Ku){const o=this.originalMaterials;this.meshCount=0,l.traverse(this.replaceMaterial),a.render(l,s);for(const d of o)d[0].material=d[1];this.meshCount!==o.size&&o.clear()}else{const o=l.overrideMaterial;l.overrideMaterial=this.material,a.render(l,s),l.overrideMaterial=o}a.shadowMap.enabled=u}disposeMaterials(){if(this.material!==null){const a=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const l of a)l.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Ku}static set workaroundEnabled(a){Ku=a}},Ln=-1,Lt=class extends nc{constructor(a,l=Ln,s=Ln,u=1){super(),this.resizable=a,this.baseSize=new Ke(1,1),this.preferredSize=new Ke(l,s),this.target=this.preferredSize,this.s=u,this.effectiveSize=new Ke,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const a=this.baseSize,l=this.preferredSize,s=this.effectiveSize,u=this.scale;l.width!==Ln?s.width=l.width:l.height!==Ln?s.width=Math.round(l.height*(a.width/Math.max(a.height,1))):s.width=Math.round(a.width*u),l.height!==Ln?s.height=l.height:l.width!==Ln?s.height=Math.round(l.width/Math.max(a.width/Math.max(a.height,1),1)):s.height=Math.round(a.height*u)}get width(){return this.effectiveSize.width}set width(a){this.preferredWidth=a}get height(){return this.effectiveSize.height}set height(a){this.preferredHeight=a}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(a){this.s!==a&&(this.s=a,this.preferredSize.setScalar(Ln),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(a){this.scale=a}get baseWidth(){return this.baseSize.width}set baseWidth(a){this.baseSize.width!==a&&(this.baseSize.width=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(a){this.baseWidth=a}get baseHeight(){return this.baseSize.height}set baseHeight(a){this.baseSize.height!==a&&(this.baseSize.height=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(a){this.baseHeight=a}setBaseSize(a,l){(this.baseSize.width!==a||this.baseSize.height!==l)&&(this.baseSize.set(a,l),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(a){this.preferredSize.width!==a&&(this.preferredSize.width=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(a){this.preferredWidth=a}get preferredHeight(){return this.preferredSize.height}set preferredHeight(a){this.preferredSize.height!==a&&(this.preferredSize.height=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(a){this.preferredHeight=a}setPreferredSize(a,l){(this.preferredSize.width!==a||this.preferredSize.height!==l)&&(this.preferredSize.set(a,l),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(a){this.s=a.scale,this.baseSize.set(a.baseWidth,a.baseHeight),this.preferredSize.set(a.preferredWidth,a.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Ln}},je={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},gg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",yg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return mix(dst,src,src.a*opacity);}",Sg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=(dst.rgb+src.rgb)*0.5;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Eg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(b.xy,a.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",bg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=dst.rgb,b=src.rgb;vec3 c=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/max(b,1e-9))),vec3(1.0),step(1.0,a));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Tg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=dst.rgb,b=src.rgb;vec3 c=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",_g="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=min(dst.rgb,src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Mg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=abs(dst.rgb-src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",xg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb/max(src.rgb,1e-9);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Rg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb-2.0*dst.rgb*src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ag="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=min(dst.rgb,1.0);vec3 b=min(src.rgb,1.0);vec3 c=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",zg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=step(1.0,dst.rgb+src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ug="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(b.x,a.yz));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Cg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(1.0-src.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ng="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=src.rgb*max(1.0-dst.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Dg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(dst.rgb,src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Og="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=clamp(src.rgb+dst.rgb-1.0,0.0,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Bg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=min(dst.rgb+src.rgb,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Hg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=clamp(2.0*src.rgb+dst.rgb-1.0,0.0,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",wg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(a.xy,b.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",jg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb*src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Gg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(1.0-abs(1.0-dst.rgb-src.rgb),0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Lg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return mix(dst,src,opacity);}",Vg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=2.0*src.rgb*dst.rgb;vec3 b=1.0-2.0*(1.0-src.rgb)*(1.0-dst.rgb);vec3 c=mix(a,b,step(0.5,dst.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",qg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 src2=2.0*src.rgb;vec3 c=mix(mix(src2,dst.rgb,step(0.5*dst.rgb,src.rgb)),max(src2-1.0,vec3(0.0)),step(dst.rgb,src2-1.0));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Zg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=min(dst.rgb*dst.rgb/max(1.0-src.rgb,1e-9),1.0);vec3 c=mix(a,src.rgb,step(1.0,src.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Yg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(a.x,b.y,a.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Fg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb-min(dst.rgb*src.rgb,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Xg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 src2=2.0*src.rgb;vec3 d=dst.rgb+(src2-1.0);vec3 w=step(0.5,src.rgb);vec3 a=dst.rgb-(1.0-src2)*dst.rgb*(1.0-dst.rgb);vec3 b=mix(d*(sqrt(dst.rgb)-dst.rgb),d*dst.rgb*((16.0*dst.rgb-12.0)*dst.rgb+3.0),w*(1.0-step(0.25,dst.rgb)));vec3 c=mix(a,b,w);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Qg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return src;}",Kg="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(dst.rgb-src.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Ig="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=mix(max(1.0-min((1.0-dst.rgb)/(2.0*src.rgb),1.0),0.0),min(dst.rgb/(2.0*(1.0-src.rgb)),1.0),step(0.5,src.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",Pg=new Map([[je.ADD,gg],[je.ALPHA,yg],[je.AVERAGE,Sg],[je.COLOR,Eg],[je.COLOR_BURN,bg],[je.COLOR_DODGE,Tg],[je.DARKEN,_g],[je.DIFFERENCE,Mg],[je.DIVIDE,xg],[je.DST,null],[je.EXCLUSION,Rg],[je.HARD_LIGHT,Ag],[je.HARD_MIX,zg],[je.HUE,Ug],[je.INVERT,Cg],[je.INVERT_RGB,Ng],[je.LIGHTEN,Dg],[je.LINEAR_BURN,Og],[je.LINEAR_DODGE,Bg],[je.LINEAR_LIGHT,Hg],[je.LUMINOSITY,wg],[je.MULTIPLY,jg],[je.NEGATION,Gg],[je.NORMAL,Lg],[je.OVERLAY,Vg],[je.PIN_LIGHT,qg],[je.REFLECT,Zg],[je.SATURATION,Yg],[je.SCREEN,Fg],[je.SOFT_LIGHT,Xg],[je.SRC,Qg],[je.SUBTRACT,Kg],[je.VIVID_LIGHT,Ig]]),Jg=class extends nc{constructor(a,l=1){super(),this._blendFunction=a,this.opacity=new Le(l)}getOpacity(){return this.opacity.value}setOpacity(a){this.opacity.value=a}get blendFunction(){return this._blendFunction}set blendFunction(a){this._blendFunction=a,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(a){this.blendFunction=a}getShaderCode(){return Pg.get(this.blendFunction)}},tr=class extends nc{constructor(a,l,{attributes:s=ml.NONE,blendFunction:u=je.NORMAL,defines:o=new Map,uniforms:d=new Map,extensions:g=null,vertexShader:m=null}={}){super(),this.name=a,this.renderer=null,this.attributes=s,this.fragmentShader=l,this.vertexShader=m,this.defines=o,this.uniforms=d,this.extensions=g,this.blendMode=new Jg(u),this.blendMode.addEventListener("change",h=>this.setChanged()),this._inputColorSpace=ii,this._outputColorSpace=Ad}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(a){this._inputColorSpace=a,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(a){this._outputColorSpace=a,this.setChanged()}set mainScene(a){}set mainCamera(a){}getName(){return this.name}setRenderer(a){this.renderer=a}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(a){this.attributes=a,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(a){this.fragmentShader=a,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(a){this.vertexShader=a,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(a,l=ci){}update(a,l,s){}setSize(a,l){}initialize(a,l,s){}dispose(){for(const a of Object.keys(this)){const l=this[a];(l instanceof Ra||l instanceof zd||l instanceof qn||l instanceof Wt)&&this[a].dispose()}}},Sc={MEDIUM:2,LARGE:3},Wg=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,kg="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",$g=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],e1=class extends xa{constructor(a=new Hf){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Le(null),texelSize:new Le(new Hf),scale:new Le(1),kernel:new Le(0)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Wg,vertexShader:kg}),this.setTexelSize(a.x,a.y),this.kernelSize=Sc.MEDIUM}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setInputBuffer(a){this.inputBuffer=a}get kernelSequence(){return $g[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(a){this.uniforms.scale.value=a}getScale(){return this.uniforms.scale.value}setScale(a){this.uniforms.scale.value=a}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(a){this.uniforms.kernel.value=a}setKernel(a){this.kernel=a}setTexelSize(a,l){this.uniforms.texelSize.value.set(a,l,a*.5,l*.5)}setSize(a,l){const s=1/a,u=1/l;this.uniforms.texelSize.value.set(s,u,s*.5,u*.5)}},t1=class extends Wt{constructor({kernelSize:a=Sc.MEDIUM,resolutionScale:l=.5,width:s=Lt.AUTO_SIZE,height:u=Lt.AUTO_SIZE,resolutionX:o=s,resolutionY:d=u}={}){super("KawaseBlurPass"),this.renderTargetA=new Ra(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const g=this.resolution=new Lt(this,o,d,l);g.addEventListener("change",m=>this.setSize(g.baseWidth,g.baseHeight)),this._blurMaterial=new e1,this._blurMaterial.kernelSize=a,this.copyMaterial=new fh}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(a){this._blurMaterial=a}get dithering(){return this.copyMaterial.dithering}set dithering(a){this.copyMaterial.dithering=a}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(a){this.blurMaterial.kernelSize=a}get width(){return this.resolution.width}set width(a){this.resolution.preferredWidth=a}get height(){return this.resolution.height}set height(a){this.resolution.preferredHeight=a}get scale(){return this.blurMaterial.scale}set scale(a){this.blurMaterial.scale=a}getScale(){return this.blurMaterial.scale}setScale(a){this.blurMaterial.scale=a}getKernelSize(){return this.kernelSize}setKernelSize(a){this.kernelSize=a}getResolutionScale(){return this.resolution.scale}setResolutionScale(a){this.resolution.scale=a}render(a,l,s,u,o){const d=this.scene,g=this.camera,m=this.renderTargetA,h=this.renderTargetB,y=this.blurMaterial,E=y.kernelSequence;let S=l;this.fullscreenMaterial=y;for(let T=0,x=E.length;T<x;++T){const w=(T&1)===0?m:h;y.kernel=E[T],y.inputBuffer=S.texture,a.setRenderTarget(w),a.render(d,g),S=w}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=S.texture,a.setRenderTarget(this.renderToScreen?null:s),a.render(d,g)}setSize(a,l){const s=this.resolution;s.setBaseSize(a,l);const u=s.width,o=s.height;this.renderTargetA.setSize(u,o),this.renderTargetB.setSize(u,o),this.blurMaterial.setSize(a,l)}initialize(a,l,s){s!==void 0&&(this.renderTargetA.texture.type=s,this.renderTargetB.texture.type=s,s!==Ha?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):a!==null&&a.outputColorSpace===_t&&(this.renderTargetA.texture.colorSpace=_t,this.renderTargetB.texture.colorSpace=_t))}static get AUTO_SIZE(){return Lt.AUTO_SIZE}},a1=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,n1=class extends xa{constructor(a=!1,l=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:ar.replace(/\D+/g,"")},uniforms:{inputBuffer:new Le(null),threshold:new Le(0),smoothing:new Le(1),range:new Le(null)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:a1,vertexShader:oh}),this.colorOutput=a,this.luminanceRange=l}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setInputBuffer(a){this.uniforms.inputBuffer.value=a}get threshold(){return this.uniforms.threshold.value}set threshold(a){this.smoothing>0||a>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=a}getThreshold(){return this.threshold}setThreshold(a){this.threshold=a}get smoothing(){return this.uniforms.smoothing.value}set smoothing(a){this.threshold>0||a>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=a}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(a){this.smoothing=a}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(a){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(a){a?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(a){return this.colorOutput}setColorOutputEnabled(a){this.colorOutput=a}get useRange(){return this.luminanceRange!==null}set useRange(a){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(a){a!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=a,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(a){this.luminanceRange=a}},l1=class extends Wt{constructor({renderTarget:a,luminanceRange:l,colorOutput:s,resolutionScale:u=1,width:o=Lt.AUTO_SIZE,height:d=Lt.AUTO_SIZE,resolutionX:g=o,resolutionY:m=d}={}){super("LuminancePass"),this.fullscreenMaterial=new n1(s,l),this.needsSwap=!1,this.renderTarget=a,this.renderTarget===void 0&&(this.renderTarget=new Ra(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const h=this.resolution=new Lt(this,g,m,u);h.addEventListener("change",y=>this.setSize(h.baseWidth,h.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(a,l,s,u,o){const d=this.fullscreenMaterial;d.inputBuffer=l.texture,a.setRenderTarget(this.renderToScreen?null:this.renderTarget),a.render(this.scene,this.camera)}setSize(a,l){const s=this.resolution;s.setBaseSize(a,l),this.renderTarget.setSize(s.width,s.height)}initialize(a,l,s){s!==void 0&&s!==Ha&&(this.renderTarget.texture.type=s,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},i1=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,s1="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",r1=class extends xa{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Le(null),texelSize:new Le(new Ke)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:i1,vertexShader:s1})}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setSize(a,l){this.uniforms.texelSize.value.set(1/a,1/l)}},u1=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,c1="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",o1=class extends xa{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Le(null),supportBuffer:new Le(null),texelSize:new Le(new Ke),radius:new Le(.85)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:u1,vertexShader:c1})}set inputBuffer(a){this.uniforms.inputBuffer.value=a}set supportBuffer(a){this.uniforms.supportBuffer.value=a}get radius(){return this.uniforms.radius.value}set radius(a){this.uniforms.radius.value=a}setSize(a,l){this.uniforms.texelSize.value.set(1/a,1/l)}},f1=class extends Wt{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ra(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new r1,this.upsamplingMaterial=new o1,this.resolution=new Ke}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(a){if(this.levels!==a){const l=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let s=0;s<a;++s){const u=l.clone();u.texture.name="Downsampling.Mipmap"+s,this.downsamplingMipmaps.push(u)}this.upsamplingMipmaps.push(l);for(let s=1,u=a-1;s<u;++s){const o=l.clone();o.texture.name="Upsampling.Mipmap"+s,this.upsamplingMipmaps.push(o)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(a){this.upsamplingMaterial.radius=a}render(a,l,s,u,o){const{scene:d,camera:g}=this,{downsamplingMaterial:m,upsamplingMaterial:h}=this,{downsamplingMipmaps:y,upsamplingMipmaps:E}=this;let S=l;this.fullscreenMaterial=m;for(let T=0,x=y.length;T<x;++T){const w=y[T];m.setSize(S.width,S.height),m.inputBuffer=S.texture,a.setRenderTarget(w),a.render(d,g),S=w}this.fullscreenMaterial=h;for(let T=E.length-1;T>=0;--T){const x=E[T];h.setSize(S.width,S.height),h.inputBuffer=S.texture,h.supportBuffer=y[T].texture,a.setRenderTarget(x),a.render(d,g),S=x}}setSize(a,l){const s=this.resolution;s.set(a,l);let u=s.width,o=s.height;for(let d=0,g=this.downsamplingMipmaps.length;d<g;++d)u=Math.round(u*.5),o=Math.round(o*.5),this.downsamplingMipmaps[d].setSize(u,o),d<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[d].setSize(u,o)}initialize(a,l,s){if(s!==void 0){const u=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const o of u)o.texture.type=s;if(s!==Ha)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(a!==null&&a.outputColorSpace===_t)for(const o of u)o.texture.colorSpace=_t}}dispose(){super.dispose();for(const a of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))a.dispose()}},d1=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,h1=class extends tr{constructor({blendFunction:a=je.SCREEN,luminanceThreshold:l=1,luminanceSmoothing:s=.03,mipmapBlur:u=!0,intensity:o=1,radius:d=.85,levels:g=8,kernelSize:m=Sc.LARGE,resolutionScale:h=.5,width:y=Lt.AUTO_SIZE,height:E=Lt.AUTO_SIZE,resolutionX:S=y,resolutionY:T=E}={}){super("BloomEffect",d1,{blendFunction:a,uniforms:new Map([["map",new Le(null)],["intensity",new Le(o)]])}),this.renderTarget=new Ra(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new t1({kernelSize:m}),this.luminancePass=new l1({colorOutput:!0}),this.luminanceMaterial.threshold=l,this.luminanceMaterial.smoothing=s,this.mipmapBlurPass=new f1,this.mipmapBlurPass.enabled=u,this.mipmapBlurPass.radius=d,this.mipmapBlurPass.levels=g,this.uniforms.get("map").value=u?this.mipmapBlurPass.texture:this.renderTarget.texture;const x=this.resolution=new Lt(this,S,T,h);x.addEventListener("change",w=>this.setSize(x.baseWidth,x.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(a){this.resolution.preferredWidth=a}get height(){return this.resolution.height}set height(a){this.resolution.preferredHeight=a}get dithering(){return this.blurPass.dithering}set dithering(a){this.blurPass.dithering=a}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(a){this.blurPass.kernelSize=a}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(a){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(a){this.uniforms.get("intensity").value=a}getIntensity(){return this.intensity}setIntensity(a){this.intensity=a}getResolutionScale(){return this.resolution.scale}setResolutionScale(a){this.resolution.scale=a}update(a,l,s){const u=this.renderTarget,o=this.luminancePass;o.enabled?(o.render(a,l),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(a,o.renderTarget):this.blurPass.render(a,o.renderTarget,u)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(a,l):this.blurPass.render(a,l,u)}setSize(a,l){const s=this.resolution;s.setBaseSize(a,l),this.renderTarget.setSize(s.width,s.height),this.blurPass.resolution.copy(s),this.luminancePass.setSize(a,l),this.mipmapBlurPass.setSize(a,l)}initialize(a,l,s){this.blurPass.initialize(a,l,s),this.luminancePass.initialize(a,l,s),this.mipmapBlurPass.initialize(a,l,s),s!==void 0&&(this.renderTarget.texture.type=s,a!==null&&a.outputColorSpace===_t&&(this.renderTarget.texture.colorSpace=_t))}},hh=class extends Wt{constructor(a,l,s=null){super("RenderPass",a,l),this.needsSwap=!1,this.clearPass=new dh,this.overrideMaterialManager=s===null?null:new od(s),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(a){this.scene=a}set mainCamera(a){this.camera=a}get renderToScreen(){return super.renderToScreen}set renderToScreen(a){super.renderToScreen=a,this.clearPass.renderToScreen=a}get overrideMaterial(){const a=this.overrideMaterialManager;return a!==null?a.material:null}set overrideMaterial(a){const l=this.overrideMaterialManager;a!==null?l!==null?l.setMaterial(a):this.overrideMaterialManager=new od(a):l!==null&&(l.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(a){this.overrideMaterial=a}get clear(){return this.clearPass.enabled}set clear(a){this.clearPass.enabled=a}getSelection(){return this.selection}setSelection(a){this.selection=a}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(a){this.ignoreBackground=a}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(a){this.skipShadowMapUpdate=a}getClearPass(){return this.clearPass}render(a,l,s,u,o){const d=this.scene,g=this.camera,m=this.selection,h=g.layers.mask,y=d.background,E=a.shadowMap.autoUpdate,S=this.renderToScreen?null:l;m!==null&&g.layers.set(m.getLayer()),this.skipShadowMapUpdate&&(a.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(d.background=null),this.clearPass.enabled&&this.clearPass.render(a,l),a.setRenderTarget(S),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(a,d,g):a.render(d,g),g.layers.mask=h,d.background=y,a.shadowMap.autoUpdate=E}},Vi={DEFAULT:0,ESKIL:1},v1=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,p1="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",m1=class extends xa{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Le(null),normalBuffer:new Le(null),texelSize:new Le(new Ke)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:v1,vertexShader:p1})}set depthBuffer(a){this.uniforms.depthBuffer.value=a}set depthPacking(a){this.defines.DEPTH_PACKING=a.toFixed(0),this.needsUpdate=!0}setDepthBuffer(a,l=ci){this.depthBuffer=a,this.depthPacking=l}set normalBuffer(a){this.uniforms.normalBuffer.value=a,a!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(a){this.normalBuffer=a}setTexelSize(a,l){this.uniforms.texelSize.value.set(a,l)}setSize(a,l){this.uniforms.texelSize.value.set(1/a,1/l)}},g1=class extends Wt{constructor({normalBuffer:a=null,resolutionScale:l=.5,width:s=Lt.AUTO_SIZE,height:u=Lt.AUTO_SIZE,resolutionX:o=s,resolutionY:d=u}={}){super("DepthDownsamplingPass");const g=new m1;g.normalBuffer=a,this.fullscreenMaterial=g,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ra(1,1,{minFilter:Is,magFilter:Is,depthBuffer:!1,type:Ja}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const m=this.resolution=new Lt(this,o,d,l);m.addEventListener("change",h=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(a,l=ci){this.fullscreenMaterial.depthBuffer=a,this.fullscreenMaterial.depthPacking=l}render(a,l,s,u,o){a.setRenderTarget(this.renderToScreen?null:this.renderTarget),a.render(this.scene,this.camera)}setSize(a,l){const s=this.resolution;s.setBaseSize(a,l),this.renderTarget.setSize(s.width,s.height),this.fullscreenMaterial.setSize(a,l)}initialize(a,l,s){const u=a.getContext();if(!(u.getExtension("EXT_color_buffer_float")||u.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},y1=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,S1=class extends tr{constructor({blendFunction:a,eskil:l=!1,technique:s=l?Vi.ESKIL:Vi.DEFAULT,offset:u=.5,darkness:o=.5}={}){super("VignetteEffect",y1,{blendFunction:a,defines:new Map([["VIGNETTE_TECHNIQUE",s.toFixed(0)]]),uniforms:new Map([["offset",new Le(u)],["darkness",new Le(o)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(a){this.technique!==a&&(this.defines.set("VIGNETTE_TECHNIQUE",a.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Vi.ESKIL}set eskil(a){this.technique=a?Vi.ESKIL:Vi.DEFAULT}getTechnique(){return this.technique}setTechnique(a){this.technique=a}get offset(){return this.uniforms.get("offset").value}set offset(a){this.uniforms.get("offset").value=a}getOffset(){return this.offset}setOffset(a){this.offset=a}get darkness(){return this.uniforms.get("darkness").value}set darkness(a){this.uniforms.get("darkness").value=a}getDarkness(){return this.darkness}setDarkness(a){this.darkness=a}},E1=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,b1="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",T1=class extends xa{constructor(a,l,s,u,o=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ar.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Le(null),depthBuffer:new Le(null),resolution:new Le(new Ke),texelSize:new Le(new Ke),cameraNear:new Le(.3),cameraFar:new Le(1e3),aspect:new Le(1),time:new Le(0)},blending:Yn,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:o}),a&&this.setShaderParts(a),l&&this.setDefines(l),s&&this.setUniforms(s),this.copyCameraSettings(u)}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setInputBuffer(a){this.uniforms.inputBuffer.value=a}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(a){this.uniforms.depthBuffer.value=a}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(a){this.defines.DEPTH_PACKING=a.toFixed(0),this.needsUpdate=!0}setDepthBuffer(a,l=ci){this.depthBuffer=a,this.depthPacking=l}setShaderData(a){this.setShaderParts(a.shaderParts),this.setDefines(a.defines),this.setUniforms(a.uniforms),this.setExtensions(a.extensions)}setShaderParts(a){return this.fragmentShader=E1.replace(Fe.FRAGMENT_HEAD,a.get(Fe.FRAGMENT_HEAD)||"").replace(Fe.FRAGMENT_MAIN_UV,a.get(Fe.FRAGMENT_MAIN_UV)||"").replace(Fe.FRAGMENT_MAIN_IMAGE,a.get(Fe.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=b1.replace(Fe.VERTEX_HEAD,a.get(Fe.VERTEX_HEAD)||"").replace(Fe.VERTEX_MAIN_SUPPORT,a.get(Fe.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(a){for(const l of a.entries())this.defines[l[0]]=l[1];return this.needsUpdate=!0,this}setUniforms(a){for(const l of a.entries())this.uniforms[l[0]]=l[1];return this}setExtensions(a){this.extensions={};for(const l of a)this.extensions[l]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(a){this.encodeOutput!==a&&(a?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(a){return this.encodeOutput}setOutputEncodingEnabled(a){this.encodeOutput=a}get time(){return this.uniforms.time.value}set time(a){this.uniforms.time.value=a}setDeltaTime(a){this.uniforms.time.value+=a}adoptCameraSettings(a){this.copyCameraSettings(a)}copyCameraSettings(a){a&&(this.uniforms.cameraNear.value=a.near,this.uniforms.cameraFar.value=a.far,a instanceof Zi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(a,l){const s=this.uniforms;s.resolution.value.set(a,l),s.texelSize.value.set(1/a,1/l),s.aspect.value=a/l}static get Section(){return Fe}};function fd(a,l,s){for(const u of l){const o="$1"+a+u.charAt(0).toUpperCase()+u.slice(1),d=new RegExp("([^\\.])(\\b"+u+"\\b)","g");for(const g of s.entries())g[1]!==null&&s.set(g[0],g[1].replace(d,o))}}function _1(a,l,s){let u=l.getFragmentShader(),o=l.getVertexShader();const d=u!==void 0&&/mainImage/.test(u),g=u!==void 0&&/mainUv/.test(u);if(s.attributes|=l.getAttributes(),u===void 0)throw new Error(`Missing fragment shader (${l.name})`);if(g&&(s.attributes&ml.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${l.name})`);if(!d&&!g)throw new Error(`Could not find mainImage or mainUv function (${l.name})`);{const m=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,h=s.shaderParts;let y=h.get(Fe.FRAGMENT_HEAD)||"",E=h.get(Fe.FRAGMENT_MAIN_UV)||"",S=h.get(Fe.FRAGMENT_MAIN_IMAGE)||"",T=h.get(Fe.VERTEX_HEAD)||"",x=h.get(Fe.VERTEX_MAIN_SUPPORT)||"";const w=new Set,Q=new Set;if(g&&(E+=`	${a}MainUv(UV);
`,s.uvTransformation=!0),o!==null&&/mainSupport/.test(o)){const R=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o);x+=`	${a}MainSupport(`,x+=R?`vUv);
`:`);
`;for(const q of o.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const P of q[1].split(/\s*,\s*/))s.varyings.add(P),w.add(P),Q.add(P);for(const q of o.matchAll(m))Q.add(q[1])}for(const R of u.matchAll(m))Q.add(R[1]);for(const R of l.defines.keys())Q.add(R.replace(/\([\w\s,]*\)/g,""));for(const R of l.uniforms.keys())Q.add(R);Q.delete("while"),Q.delete("for"),Q.delete("if"),l.uniforms.forEach((R,q)=>s.uniforms.set(a+q.charAt(0).toUpperCase()+q.slice(1),R)),l.defines.forEach((R,q)=>s.defines.set(a+q.charAt(0).toUpperCase()+q.slice(1),R));const Y=new Map([["fragment",u],["vertex",o]]);fd(a,Q,s.defines),fd(a,Q,Y),u=Y.get("fragment"),o=Y.get("vertex");const U=l.blendMode;if(s.blendModes.set(U.blendFunction,U),d){l.inputColorSpace!==null&&l.inputColorSpace!==s.colorSpace&&(S+=l.inputColorSpace===_t?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),l.outputColorSpace!==Ad?s.colorSpace=l.outputColorSpace:l.inputColorSpace!==null&&(s.colorSpace=l.inputColorSpace);const R=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;S+=`${a}MainImage(color0, UV, `,(s.attributes&ml.DEPTH)!==0&&R.test(u)&&(S+="depth, ",s.readDepth=!0),S+=`color1);
	`;const q=a+"BlendOpacity";s.uniforms.set(q,U.opacity),S+=`color0 = blend${U.blendFunction}(color0, color1, ${q});

	`,y+=`uniform float ${q};

`}if(y+=u+`
`,o!==null&&(T+=o+`
`),h.set(Fe.FRAGMENT_HEAD,y),h.set(Fe.FRAGMENT_MAIN_UV,E),h.set(Fe.FRAGMENT_MAIN_IMAGE,S),h.set(Fe.VERTEX_HEAD,T),h.set(Fe.VERTEX_MAIN_SUPPORT,x),l.extensions!==null)for(const R of l.extensions)s.extensions.add(R)}}var M1=class extends Wt{constructor(a,...l){super("EffectPass"),this.fullscreenMaterial=new T1(null,null,null,a),this.listener=s=>this.handleEvent(s),this.effects=[],this.setEffects(l),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(a){for(const l of this.effects)l.mainScene=a}set mainCamera(a){this.fullscreenMaterial.copyCameraSettings(a);for(const l of this.effects)l.mainCamera=a}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(a){this.fullscreenMaterial.encodeOutput=a}get dithering(){return this.fullscreenMaterial.dithering}set dithering(a){const l=this.fullscreenMaterial;l.dithering=a,l.needsUpdate=!0}setEffects(a){for(const l of this.effects)l.removeEventListener("change",this.listener);this.effects=a.sort((l,s)=>s.attributes-l.attributes);for(const l of this.effects)l.addEventListener("change",this.listener)}updateMaterial(){const a=new mg;let l=0;for(const g of this.effects)if(g.blendMode.blendFunction===je.DST)a.attributes|=g.getAttributes()&ml.DEPTH;else{if((a.attributes&g.getAttributes()&ml.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${g.name})`);_1("e"+l++,g,a)}let s=a.shaderParts.get(Fe.FRAGMENT_HEAD),u=a.shaderParts.get(Fe.FRAGMENT_MAIN_IMAGE),o=a.shaderParts.get(Fe.FRAGMENT_MAIN_UV);const d=/\bblend\b/g;for(const g of a.blendModes.values())s+=g.getShaderCode().replace(d,`blend${g.blendFunction}`)+`
`;(a.attributes&ml.DEPTH)!==0?(a.readDepth&&(u=`float depth = readDepth(UV);

	`+u),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,a.colorSpace===_t&&(u+=`color0 = sRGBToLinear(color0);
	`),a.uvTransformation?(o=`vec2 transformedUv = vUv;
`+o,a.defines.set("UV","transformedUv")):a.defines.set("UV","vUv"),a.shaderParts.set(Fe.FRAGMENT_HEAD,s),a.shaderParts.set(Fe.FRAGMENT_MAIN_IMAGE,u),a.shaderParts.set(Fe.FRAGMENT_MAIN_UV,o);for(const[g,m]of a.shaderParts)m!==null&&a.shaderParts.set(g,m.trim().replace(/^#/,`
#`));this.skipRendering=l===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(a)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(a,l=ci){this.fullscreenMaterial.depthBuffer=a,this.fullscreenMaterial.depthPacking=l;for(const s of this.effects)s.setDepthTexture(a,l)}render(a,l,s,u,o){for(const d of this.effects)d.update(a,l,u);if(!this.skipRendering||this.renderToScreen){const d=this.fullscreenMaterial;d.inputBuffer=l.texture,d.time+=u*this.timeScale,a.setRenderTarget(this.renderToScreen?null:s),a.render(this.scene,this.camera)}}setSize(a,l){this.fullscreenMaterial.setSize(a,l);for(const s of this.effects)s.setSize(a,l)}initialize(a,l,s){this.renderer=a;for(const u of this.effects)u.initialize(a,l,s);this.updateMaterial(),s!==void 0&&s!==Ha&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const a of this.effects)a.removeEventListener("change",this.listener),a.dispose()}handleEvent(a){switch(a.type){case"change":this.recompile();break}}},x1=class extends Wt{constructor(a,l,{renderTarget:s,resolutionScale:u=1,width:o=Lt.AUTO_SIZE,height:d=Lt.AUTO_SIZE,resolutionX:g=o,resolutionY:m=d}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new hh(a,l,new Yp);const h=this.renderPass;h.ignoreBackground=!0,h.skipShadowMapUpdate=!0;const y=h.getClearPass();y.overrideClearColor=new Wi(7829503),y.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new Ra(1,1,{minFilter:Is,magFilter:Is}),this.renderTarget.texture.name="NormalPass.Target");const E=this.resolution=new Lt(this,g,m,u);E.addEventListener("change",S=>this.setSize(E.baseWidth,E.baseHeight))}set mainScene(a){this.renderPass.mainScene=a}set mainCamera(a){this.renderPass.mainCamera=a}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(a){this.resolution.scale=a}render(a,l,s,u,o){const d=this.renderToScreen?null:this.renderTarget;this.renderPass.render(a,d,d)}setSize(a,l){const s=this.resolution;s.setBaseSize(a,l),this.renderTarget.setSize(s.width,s.height)}};function Xi(a,l,s){return l in a?Object.defineProperty(a,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[l]=s,a}new Ke;new Ke;function vh(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var _a=function a(l,s,u){var o=this;vh(this,a),Xi(this,"dot2",function(d,g){return o.x*d+o.y*g}),Xi(this,"dot3",function(d,g,m){return o.x*d+o.y*g+o.z*m}),this.x=l,this.y=s,this.z=u},R1=[new _a(1,1,0),new _a(-1,1,0),new _a(1,-1,0),new _a(-1,-1,0),new _a(1,0,1),new _a(-1,0,1),new _a(1,0,-1),new _a(-1,0,-1),new _a(0,1,1),new _a(0,-1,1),new _a(0,1,-1),new _a(0,-1,-1)],dd=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],hd=new Array(512),vd=new Array(512),A1=function(l){l>0&&l<1&&(l*=65536),l=Math.floor(l),l<256&&(l|=l<<8);for(var s=0;s<256;s++){var u;s&1?u=dd[s]^l&255:u=dd[s]^l>>8&255,hd[s]=hd[s+256]=u,vd[s]=vd[s+256]=R1[u%12]}};A1(0);function z1(a){if(typeof a=="number")a=Math.abs(a);else if(typeof a=="string"){var l=a;a=0;for(var s=0;s<l.length;s++)a=(a+(s+1)*(l.charCodeAt(s)%96))%2147483647}return a===0&&(a=311),a}function pd(a){var l=z1(a);return function(){var s=l*48271%2147483647;return l=s,s/2147483647}}var U1=function a(l){var s=this;vh(this,a),Xi(this,"seed",0),Xi(this,"init",function(u){s.seed=u,s.value=pd(u)}),Xi(this,"value",pd(this.seed)),this.init(l)};new U1(Math.random());const C1=L.createContext(null),md=a=>(a.getAttributes()&2)===2,N1=L.memo(L.forwardRef(({children:a,camera:l,scene:s,resolutionScale:u,enabled:o=!0,renderPriority:d=1,autoClear:g=!0,depthBuffer:m,enableNormalPass:h,stencilBuffer:y,multisampling:E=8,frameBufferType:S=da},T)=>{const{gl:x,scene:w,camera:Q,size:Y}=Ct(),U=s||w,R=l||Q,[q,P,X]=L.useMemo(()=>{const O=new pg(x,{depthBuffer:m,stencilBuffer:y,multisampling:E,frameBufferType:S});O.addPass(new hh(U,R));let G=null,V=null;return h&&(V=new x1(U,R),V.enabled=!1,O.addPass(V),u!==void 0&&(G=new g1({normalBuffer:V.texture,resolutionScale:u}),G.enabled=!1,O.addPass(G))),[O,V,G]},[R,x,m,y,E,S,U,h,u]);L.useEffect(()=>q?.setSize(Y.width,Y.height),[q,Y]),yl((O,G)=>{if(o){const V=x.autoClear;x.autoClear=g,y&&!g&&x.clearStencil(),q.render(G),x.autoClear=V}},o?d:0);const j=L.useRef(null);L.useLayoutEffect(()=>{const O=[],G=j.current.__r3f;if(G&&q){const V=G.children;for(let se=0;se<V.length;se++){const pe=V[se].object;if(pe instanceof tr){const ee=[pe];if(!md(pe)){let Se=null;for(;(Se=V[se+1]?.object)instanceof tr&&!md(Se);)ee.push(Se),se++}const le=new M1(R,...ee);O.push(le)}else pe instanceof Wt&&O.push(pe)}for(const se of O)q?.addPass(se);P&&(P.enabled=!0),X&&(X.enabled=!0)}return()=>{for(const V of O)q?.removePass(V);P&&(P.enabled=!1),X&&(X.enabled=!1)}},[q,a,R,P,X]),L.useEffect(()=>{const O=x.toneMapping;return x.toneMapping=Td,()=>{x.toneMapping=O}},[x]);const ue=L.useMemo(()=>({composer:q,normalPass:P,downSamplingPass:X,resolutionScale:u,camera:R,scene:U}),[q,P,X,u,R,U]);return L.useImperativeHandle(T,()=>q,[q]),Ee.jsx(C1.Provider,{value:ue,children:Ee.jsx("group",{ref:j,children:a})})}));let D1=0;const gd=new WeakMap,ph=(a,l)=>function({blendFunction:s=l?.blendFunction,opacity:u=l?.opacity,...o}){let d=gd.get(a);if(!d){const h=`@react-three/postprocessing/${a.name}-${D1++}`;oc({[h]:a}),gd.set(a,d=h)}const g=Ct(h=>h.camera),m=ei.useMemo(()=>[...l?.args??[],...o.args??[{...l,...o}]],[JSON.stringify(o)]);return Ee.jsx(d,{camera:g,"blendMode-blendFunction":s,"blendMode-opacity-value":u,...o,args:m})},O1=ph(h1,{blendFunction:0}),B1=ph(S1);function mh(a){const l=Ki(s=>s.lenis);L.useEffect(()=>{if(l)return l.on("scroll",a),()=>{l.off("scroll",a)}},[l,a])}function vl(a,l,s){return(1-s)*a+s*l}const Ji=[{name:"mission",label:"The Mission",description:"The Michigan Mars Rover Team designs, builds, and tests a Mars rover prototype to compete in the University Rover Challenge. Our interdisciplinary team of students pushes the boundaries of what's possible in student-led space exploration.",camera:{x:0,y:80,z:350},lookAt:{x:0,y:20,z:0}},{name:"robotic-arm",subteam:{teamName:"Mechanical",name:"Robotic Arm",desc:"Designs and builds a five degree-of-freedom robotic arm for Equipment Servicing and Extreme Retrieval missions.",color:"#00274C",accent:"#FFCB05"},camera:{x:150,y:80,z:200},lookAt:{x:50,y:40,z:0},joints:{arm_a_to_arm_b:-.4,arm_b_to_arm_c:1.2,arm_c_to_arm_d:-.8}},{name:"mobility",subteam:{teamName:"Mechanical",name:"Mobility",desc:"Develops drive and suspension systems to navigate rocks and rough terrain in each competition mission.",color:"#00274C",accent:"#FFCB05"},camera:{x:-100,y:30,z:250},lookAt:{x:0,y:-20,z:0}},{name:"chassis",subteam:{teamName:"Mechanical",name:"Chassis and Mounts",desc:"Develops a lightweight and strong chassis optimized for integration of all sub-systems.",color:"#00274C",accent:"#FFCB05"},camera:{x:0,y:150,z:300},lookAt:{x:0,y:0,z:0}},{name:"spi",subteam:{teamName:"Science-Mechanical",name:"Science Payload Instrumentation",desc:"Brings together sensors and tests for in-situ sampling with on-board life-detection tests.",color:"#FF6B35",accent:"#FFE0D4"},camera:{x:80,y:60,z:180},lookAt:{x:20,y:20,z:0}},{name:"spa",subteam:{teamName:"Science-Mechanical",name:"Science Payload Acquisition",desc:"Develops and tests soil collection mechanics with a linear actuator-driven auger system.",color:"#FF6B35",accent:"#FFE0D4"},camera:{x:100,y:40,z:200},lookAt:{x:30,y:10,z:0}},{name:"astrobiology",subteam:{teamName:"Science",name:"Astrobiology",desc:"Develops tests to analyze soil and rock samples for signs of past or present life.",color:"#4CAF50",accent:"#C8E6C9"},camera:{x:60,y:80,z:220},lookAt:{x:0,y:30,z:0}},{name:"autonomy",subteam:{teamName:"Software",name:"Autonomy",desc:"Handles Navigation, Perception, and Localization. Uses A* to path plan around obstacles.",color:"#2196F3",accent:"#BBDEFB"},camera:{x:0,y:120,z:350},lookAt:{x:0,y:0,z:0}},{name:"esw",subteam:{teamName:"Software",name:"Embedded Software",desc:"Writes low-level driver code for other programming subteams to utilize electronic equipment.",color:"#2196F3",accent:"#BBDEFB"},camera:{x:-80,y:60,z:200},lookAt:{x:0,y:20,z:0}},{name:"teleop",subteam:{teamName:"Software",name:"Teleoperation",desc:"Creates the interface between driver and rover, maintaining GUIs and control solutions.",color:"#2196F3",accent:"#BBDEFB"},camera:{x:50,y:100,z:280},lookAt:{x:0,y:20,z:0}},{name:"drone",subteam:{teamName:"Software",name:"Drone",desc:"Develops a drone for collaboration with the Rover, capable of manual and autonomous operation.",color:"#2196F3",accent:"#BBDEFB"},camera:{x:0,y:180,z:400},lookAt:{x:0,y:50,z:0}},{name:"power",subteam:{teamName:"Electrical",name:"Power",desc:"Provides power to the rover and manages the electronics box with custom distribution solutions.",color:"#9C27B0",accent:"#E1BEE7"},camera:{x:-60,y:80,z:220},lookAt:{x:0,y:30,z:0}},{name:"ehw",subteam:{teamName:"Electrical",name:"Embedded Hardware",desc:"Controls actuators, receives sensor signals, and designs custom PCBs for motor control.",color:"#9C27B0",accent:"#E1BEE7"},camera:{x:100,y:50,z:180},lookAt:{x:20,y:20,z:0}},{name:"comms",subteam:{teamName:"Electrical",name:"Communications",desc:"Ensures strong wireless RF communication link between base station and rover.",color:"#9C27B0",accent:"#E1BEE7"},camera:{x:0,y:100,z:300},lookAt:{x:0,y:40,z:0}}],pn=Ji.length,gh=Math.sqrt(3),H1=.5*(gh-1),qi=(3-gh)/6,yd=a=>Math.floor(a)|0,Sd=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function w1(a=Math.random){const l=j1(a),s=new Float64Array(l).map(o=>Sd[o%12*2]),u=new Float64Array(l).map(o=>Sd[o%12*2+1]);return function(d,g){let m=0,h=0,y=0;const E=(d+g)*H1,S=yd(d+E),T=yd(g+E),x=(S+T)*qi,w=S-x,Q=T-x,Y=d-w,U=g-Q;let R,q;Y>U?(R=1,q=0):(R=0,q=1);const P=Y-R+qi,X=U-q+qi,j=Y-1+2*qi,ue=U-1+2*qi,O=S&255,G=T&255;let V=.5-Y*Y-U*U;if(V>=0){const ee=O+l[G],le=s[ee],Se=u[ee];V*=V,m=V*V*(le*Y+Se*U)}let se=.5-P*P-X*X;if(se>=0){const ee=O+R+l[G+q],le=s[ee],Se=u[ee];se*=se,h=se*se*(le*P+Se*X)}let pe=.5-j*j-ue*ue;if(pe>=0){const ee=O+1+l[G+1],le=s[ee],Se=u[ee];pe*=pe,y=pe*pe*(le*j+Se*ue)}return 70*(m+h+y)}}function j1(a){const s=new Uint8Array(512);for(let u=0;u<512/2;u++)s[u]=u;for(let u=0;u<512/2-1;u++){const o=u+~~(a()*(256-u)),d=s[u];s[u]=s[o],s[o]=d}for(let u=256;u<512;u++)s[u]=s[u-256];return s}function G1(){const a=L.useRef(null),{positions:l,indices:s}=L.useMemo(()=>{const u=w1(),o=1e3,d=1e3,g=60,m=[],h=[];for(let y=0;y<=g;y++){const E=y/g*d-d/2;for(let S=0;S<=g;S++){const T=S/g*o-o/2;let x=u(T*.002,E*.002)*50;x+=u(T*.01,E*.01)*10,x-=30,m.push(T,x,E)}}for(let y=0;y<g;y++)for(let E=0;E<g;E++){const S=y*(g+1)+E,T=y*(g+1)+E+1,x=(y+1)*(g+1)+E+1,w=(y+1)*(g+1)+E;h.push(S,T,w),h.push(T,x,w)}return{positions:new Float32Array(m),indices:new Uint16Array(h)}},[]);return yl(()=>{a.current}),Ee.jsxs("mesh",{ref:a,position:[0,-40,0],children:[Ee.jsxs("bufferGeometry",{children:[Ee.jsx("bufferAttribute",{attach:"attributes-position",args:[l,3]}),Ee.jsx("bufferAttribute",{attach:"index",args:[s,1]})]}),Ee.jsx("meshBasicMaterial",{color:"#FF8C00",wireframe:!0,transparent:!0,opacity:.15,side:kl})]})}const Ba={orbitControls:!1,currentSection:0,rover:{scale:1,rotationY:-Math.PI/3},joints:{}};let ti=null,ai=null;function L1({orbitEnabled:a}){const{camera:l}=Ct(),s=L.useRef(0),u=Ki(h=>h.headerHeight),[o,d]=L.useState(0),g=L.useRef(new ft);L.useEffect(()=>{const h=()=>d(window.innerHeight);return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const m=L.useCallback(({scroll:h})=>{s.current=h},[]);return mh(m),yl(()=>{if(a||!o)return;const h=s.current,y=o*pn,S=Math.max(0,(h-u)/(y-o))*(pn-1),T=Math.floor(S),x=S-T,w=Ji[Math.min(T,pn-1)],Q=Ji[Math.min(T+1,pn-1)];Ba.currentSection=T;const Y=vl(w.camera.x,Q.camera.x,x),U=vl(w.camera.y,Q.camera.y,x),R=vl(w.camera.z,Q.camera.z,x);l.position.set(Y,U,R),g.current.set(vl(w.lookAt.x,Q.lookAt.x,x),vl(w.lookAt.y,Q.lookAt.y,x),vl(w.lookAt.z,Q.lookAt.z,x)),l.lookAt(g.current)}),null}function V1(){const a=L.useRef(null),l=L.useRef(0),s=Ki(h=>h.headerHeight),[u,o]=L.useState(0),[d,g]=L.useState(null);L.useEffect(()=>{const h=()=>o(window.innerHeight);return h(),window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]),L.useEffect(()=>{const h=new Pp;h.packages={mrover:"/urdf"},h.load("/urdf/rover/rover.urdf",y=>{y.rotation.x=-Math.PI/2,y.traverse(S=>{S instanceof ki&&(S.castShadow=!0,S.receiveShadow=!0,S.material instanceof Jp&&(S.material.roughness=Math.min(S.material.roughness,.7)))}),ti=y;const E=y;ai&&E.joints&&Object.entries(E.joints).forEach(([S,T])=>{if(T.jointType==="revolute"||T.jointType==="continuous"||T.jointType==="prismatic"){const x=T.limit?.lower??-Math.PI,w=T.limit?.upper??Math.PI,Q=Array.isArray(T.jointValue)?T.jointValue[0]:T.jointValue??0;Ba.joints[S]=Q,ai.add(Ba.joints,S,x,w).onChange(Y=>{T.setJointValue(Y)})}}),g(y)})},[]);const m=L.useCallback(({scroll:h})=>{l.current=h},[]);return mh(m),yl(()=>{if(!a.current||!u||!ti)return;const h=l.current,y=u*pn,S=Math.max(0,(h-s)/(y-u))*(pn-1),T=Math.floor(S),x=S-T,w=Ji[Math.min(T,pn-1)],Q=Ji[Math.min(T+1,pn-1)];if(a.current.rotation.y=Ba.rover.rotationY,a.current.scale.setScalar(Ba.rover.scale),ti.joints){const Y=w.joints||{},U=Q.joints||{};new Set([...Object.keys(Y),...Object.keys(U)]).forEach(q=>{const P=ti.joints[q];if(P){const X=Y[q]??0,j=U[q]??0,ue=vl(X,j,x);P.setJointValue(ue)}})}}),d?Ee.jsx("group",{ref:a,children:Ee.jsx("primitive",{object:d})}):null}function q1({enabled:a}){return a?Ee.jsx(Z0,{makeDefault:!0}):null}function Z1(){const{scene:a}=Ct();return L.useEffect(()=>(a.background=new Wi(657416),a.fog=new Ip(1709072,25e-5),()=>{a.background=null,a.fog=null}),[a]),null}function Y1({orbitEnabled:a}){return Ee.jsxs(Ee.Fragment,{children:[Ee.jsx(Z1,{}),Ee.jsx(rg,{radius:800,depth:150,count:5e3,factor:6,fade:!0,speed:.3}),Ee.jsx(lg,{preset:"sunset",environmentIntensity:.7}),Ee.jsx("directionalLight",{position:[200,300,150],intensity:2,color:16772829,castShadow:!0,"shadow-bias":-5e-4,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":800,"shadow-camera-left":-200,"shadow-camera-right":200,"shadow-camera-top":200,"shadow-camera-bottom":-200}),Ee.jsx("directionalLight",{position:[-150,50,-100],intensity:.5,color:4478310}),Ee.jsx(L1,{orbitEnabled:a}),Ee.jsx(q1,{enabled:a}),Ee.jsx(G1,{}),Ee.jsx(L.Suspense,{fallback:null,children:Ee.jsx(V1,{})}),Ee.jsxs(N1,{enableNormalPass:!1,children:[Ee.jsx(O1,{luminanceThreshold:1,mipmapBlur:!0,intensity:.5,radius:.6}),Ee.jsx(B1,{darkness:.4,offset:.3})]})]})}function F1({progress:a,visible:l}){return l?Ee.jsxs("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"#0a0808",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"opacity 0.5s ease",pointerEvents:"none"},children:[Ee.jsx("div",{className:"loader-spinner",style:{width:"40px",height:"40px",border:"3px solid rgba(255, 140, 0, 0.3)",borderTopColor:"#FF8C00",borderRadius:"50%",animation:"spin 1s linear infinite"}}),Ee.jsx("div",{style:{marginTop:"20px",width:"200px",height:"2px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"1px",overflow:"hidden"},children:Ee.jsx("div",{style:{width:`${a}%`,height:"100%",background:"#FF8C00",transition:"width 0.2s ease-out"}})}),Ee.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]}):null}function X1(){const[a,l]=L.useState(!1),[s,u]=L.useState(!0),[o,d]=L.useState(0);return L.useEffect(()=>{Au.onStart=()=>{u(!0),d(0)},Au.onProgress=(g,m,h)=>{d(m/h*100)},Au.onLoad=()=>{d(100),setTimeout(()=>u(!1),500)}},[]),L.useEffect(()=>{const g=new Kp;g.add(Ba,"orbitControls").name("Orbit Controls").onChange(h=>{l(h)}),g.add(Ba,"currentSection").name("Current Section").listen().disable();const m=g.addFolder("Rover");return m.add(Ba.rover,"scale",.1,5),m.add(Ba.rover,"rotationY",-Math.PI,Math.PI).name("rotation Y"),ai=g.addFolder("Joints"),ai.close(),ti?.joints&&Object.entries(ti.joints).forEach(([h,y])=>{if(y.jointType==="revolute"||y.jointType==="continuous"||y.jointType==="prismatic"){const E=y.limit?.lower??-Math.PI,S=y.limit?.upper??Math.PI,T=Array.isArray(y.jointValue)?y.jointValue[0]:y.jointValue??0;Ba.joints[h]=T,ai.add(Ba.joints,h,E,S).onChange(x=>{y.setJointValue(x)})}}),()=>{g.destroy(),ai=null}},[]),Ee.jsxs(Ee.Fragment,{children:[Ee.jsx(F1,{progress:o,visible:s}),Ee.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:a?"auto":"none",zIndex:0,opacity:s?0:1,transition:"opacity 1s ease"},children:Ee.jsx(v0,{gl:{antialias:!0,alpha:!1,toneMapping:_d,toneMappingExposure:1.5},camera:{fov:50,near:.1,far:1e4,position:[0,100,400]},shadows:!0,dpr:[1,2],children:Ee.jsx(L.Suspense,{fallback:null,children:Ee.jsx(Y1,{orbitEnabled:a})})})})]})}function $1(){const a=Ki(s=>s.setLenis),l=Ki(s=>s.setHeaderHeight);return L.useEffect(()=>{Gs.registerPlugin(ji),ji.defaults({markers:!1});const s=document.querySelector("header");if(s){const m=s.offsetHeight;l(m),document.documentElement.style.setProperty("--header-height",`${m}px`)}window.scrollTo(0,0);const u=new Wp({duration:1.2,easing:m=>Math.min(1,1.001-Math.pow(2,-10*m)),smoothWheel:!0,syncTouch:!0});a(u),u.on("scroll",ji.update);const o=m=>u.raf(m*1e3);Gs.ticker.add(o),Gs.ticker.lagSmoothing(0);const d=document.querySelector("main");ji.create({trigger:d,start:"top top",end:"bottom bottom",snap:{snapTo:1/(pn-1),duration:{min:.2,max:.8},delay:.1,ease:"power2.inOut"}});const g=m=>{const h=window.innerHeight,y=window.scrollY,E=Math.round(y/h);switch(m.key){case"ArrowDown":case" ":m.preventDefault(),u.scrollTo((E+1)*h);break;case"ArrowUp":m.preventDefault(),u.scrollTo((E-1)*h);break}};return window.addEventListener("keydown",g),()=>{u.destroy(),a(null),Gs.ticker.remove(o),window.removeEventListener("keydown",g),ji.getAll().forEach(m=>m.kill())}},[a,l]),Ee.jsx(X1,{})}export{$1 as SceneManager};
