import{G as T,S as C,a as J,C as W,A as q,D as g,L as G,U as A,P as D,W as I,j as O}from"./lil-gui.esm.CTOId0_-.js";import{r as p}from"./index.Cf1rOnxY.js";import{g as U}from"./index.CB87Sc6I.js";const l=-14,N={chassis_to_arm_a:24,arm_a_to_arm_b:0,arm_b_to_arm_c:0,arm_c_to_arm_d:0,arm_d_to_arm_e:0,gripper_link:8,left_bogie_to_front_left_wheel:l,left_bogie_to_center_left_wheel:l,left_rocker_to_back_left_wheel:l,right_bogie_to_front_right_wheel:l,right_bogie_to_center_right_wheel:l,right_rocker_to_back_right_wheel:l},v={chassis_to_arm_a:24,arm_a_to_arm_b:-.785,arm_b_to_arm_c:1.91,arm_c_to_arm_d:-1.2,arm_d_to_arm_e:-1.57,gripper_link:0,left_bogie_to_front_left_wheel:0,left_bogie_to_center_left_wheel:0,left_rocker_to_back_left_wheel:0,right_bogie_to_front_right_wheel:0,right_bogie_to_center_right_wheel:0,right_rocker_to_back_right_wheel:0};function $(){const u=p.useRef(null),x=p.useRef(!1);return p.useEffect(()=>{if(x.current||!u.current)return;x.current=!0;const c=u.current,h=new T({width:400});h.hide();const _={x:0,y:0};let d=null,o={};const i=new C,r=new J;i.add(r),i.background=new W(657946);const M=new q(16777215,.5);i.add(M);const w=new g(16777215,2);w.position.set(-30,150,100),w.castShadow=!0,i.add(w);const k=new g(10400976,1);k.position.set(-150,100,-100),i.add(k);const m=new g(16777215,1);m.position.set(2,3,2),m.castShadow=!0,i.add(m);const L=new G;L.onLoad=()=>{console.log("Loading complete!");const t=U.timeline({repeat:-1,yoyo:!0});t.to(d.position,{x:50,duration:3,ease:"power2.inOut"}),t.to(o,{...v,duration:3,ease:"power2.inOut",onUpdate:()=>{for(const e in o)d.joints[e]&&d.joints[e].setJointValue(o[e])}},"<")};const b=new A(L);b.packages={"":"/urdf"},b.load("/urdf/rover/rover.urdf",t=>{d=t,t.position.set(-100,0,0),t.rotation.x=-Math.PI/2,t.updateMatrixWorld(),i.add(t),o={...N};for(const e in o)t.joints[e]&&t.joints[e].setJointValue(o[e]);t.traverse(e=>{if(e.jointType==="revolute"||e.jointType==="continuous"||e.jointType==="prismatic"){const f=e.name||"unnamed_joint",j=typeof v[f]=="number"?v[f]:typeof e.jointValue=="number"?e.jointValue:0,P=e.limit?.lower??-Math.PI,S=e.limit?.upper??Math.PI,V={value:j};e.setJointValue(j),h.add(V,"value",P,S,.01).name(`${f} (${e.jointType})`).onChange(z=>{e.setJointValue(z)})}})});const n={width:window.innerWidth,height:window.innerHeight},a=new D(75,n.width/n.height,.1,1e3);a.position.set(200,150,250),a.lookAt(0,0,0),r.add(a);const s=new I({antialias:!0,canvas:c});s.setSize(n.width,n.height),s.setPixelRatio(Math.min(window.devicePixelRatio,2));const E=t=>{_.x=t.clientX/n.width-.5,_.y=t.clientY/n.height-.5},y=()=>{n.width=window.innerWidth,n.height=window.innerHeight,a.aspect=n.width/n.height,a.updateProjectionMatrix(),s.setSize(n.width,n.height),s.setPixelRatio(Math.min(window.devicePixelRatio,2))},R=()=>{document.fullscreenElement||document.webkitFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():c.requestFullscreen?c.requestFullscreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen()};window.addEventListener("mousemove",E),window.addEventListener("resize",y),window.addEventListener("dblclick",R);const F=()=>{const t=-_.x*.2,e=-_.y*.2;r.rotation.y+=(t-r.rotation.y)*.01,r.rotation.x+=(e-r.rotation.x)*.01,s.render(i,a),window.requestAnimationFrame(F)};return F(),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("resize",y),window.removeEventListener("dblclick",R),s.dispose(),h.destroy()}},[]),O.jsx("canvas",{ref:u,className:"webgl w-full h-full fixed top-0 left-0"})}export{$ as default};
